{
  "version": 3,
  "sources": ["../../echarts/lib/util/clazz.js", "../../echarts/lib/util/log.js", "../../echarts/lib/util/component.js", "../../echarts/lib/view/Component.js", "../../echarts/lib/model/mixin/makeStyleMapper.js", "../../echarts/lib/model/mixin/areaStyle.js", "../../echarts/lib/util/number.js", "../../echarts/lib/util/model.js", "../../echarts/lib/util/innerStore.js", "../../echarts/lib/util/states.js", "../../echarts/lib/util/graphic.js", "../../zrender/lib/tool/transformPath.js", "../../zrender/lib/tool/path.js", "../../zrender/lib/graphic/shape/Circle.js", "../../zrender/lib/graphic/shape/Ellipse.js", "../../zrender/lib/graphic/helper/roundSector.js", "../../zrender/lib/graphic/shape/Sector.js", "../../zrender/lib/graphic/shape/Ring.js", "../../zrender/lib/graphic/helper/smoothBezier.js", "../../zrender/lib/graphic/helper/poly.js", "../../zrender/lib/graphic/shape/Polygon.js", "../../zrender/lib/graphic/shape/Polyline.js", "../../zrender/lib/graphic/shape/Line.js", "../../zrender/lib/graphic/shape/BezierCurve.js", "../../zrender/lib/graphic/shape/Arc.js", "../../zrender/lib/graphic/Gradient.js", "../../zrender/lib/graphic/LinearGradient.js", "../../zrender/lib/graphic/RadialGradient.js", "../../zrender/lib/core/OrientedBoundingRect.js", "../../zrender/lib/graphic/IncrementalDisplayable.js", "../../echarts/lib/animation/basicTransition.js", "../../echarts/lib/label/labelStyle.js", "../../echarts/lib/model/mixin/textStyle.js", "../../echarts/lib/model/mixin/lineStyle.js", "../../echarts/lib/model/mixin/itemStyle.js", "../../echarts/lib/model/Model.js", "../../echarts/lib/i18n/langEN.js", "../../echarts/lib/i18n/langZH.js", "../../echarts/lib/core/locale.js", "../../echarts/lib/util/time.js", "../../echarts/lib/legacy/getTextRect.js", "../../echarts/lib/util/format.js", "../../echarts/lib/util/layout.js", "../../echarts/lib/model/Component.js", "../../echarts/lib/scale/Scale.js", "../../echarts/lib/data/OrdinalMeta.js", "../../echarts/lib/scale/helper.js", "../../echarts/lib/scale/Ordinal.js", "../../echarts/lib/scale/Interval.js", "../../echarts/lib/util/types.js", "../../echarts/lib/data/helper/sourceHelper.js", "../../echarts/lib/data/Source.js", "../../echarts/lib/data/helper/SeriesDataSchema.js", "../../echarts/lib/data/helper/dataStackHelper.js", "../../echarts/lib/chart/helper/createRenderPlanner.js", "../../echarts/lib/util/vendor.js", "../../echarts/lib/layout/barGrid.js", "../../echarts/lib/scale/Time.js", "../../echarts/lib/scale/Log.js", "../../echarts/lib/coord/scaleRawExtentInfo.js", "../../echarts/lib/coord/axisHelper.js", "../../echarts/lib/coord/axisTickLabelBuilder.js", "../../echarts/lib/coord/Axis.js", "../../echarts/lib/util/throttle.js", "../../echarts/lib/model/mixin/palette.js", "../../echarts/lib/data/helper/dataProvider.js", "../../echarts/lib/model/mixin/dataFormat.js", "../../echarts/lib/core/task.js", "../../echarts/lib/data/helper/dataValueHelper.js", "../../echarts/lib/data/helper/transform.js", "../../echarts/lib/data/DataStore.js", "../../echarts/lib/data/helper/sourceManager.js", "../../echarts/lib/component/tooltip/tooltipMarkup.js", "../../echarts/lib/component/tooltip/seriesFormatTooltip.js", "../../echarts/lib/model/Series.js", "../../echarts/lib/view/Chart.js", "../../echarts/lib/model/globalDefault.js", "../../echarts/lib/model/internalComponentCreator.js", "../../echarts/lib/model/Global.js", "../../echarts/lib/core/ExtensionAPI.js", "../../echarts/lib/core/CoordinateSystem.js", "../../echarts/lib/model/OptionManager.js", "../../echarts/lib/preprocessor/helper/compatStyle.js", "../../echarts/lib/preprocessor/backwardCompat.js", "../../echarts/lib/processor/dataStack.js", "../../echarts/lib/visual/style.js", "../../echarts/lib/loading/default.js", "../../echarts/lib/core/Scheduler.js", "../../echarts/lib/theme/light.js", "../../echarts/lib/theme/dark.js", "../../echarts/lib/util/ECEventProcessor.js", "../../echarts/lib/visual/symbol.js", "../../echarts/lib/visual/helper.js", "../../echarts/lib/legacy/dataSelectAction.js", "../../echarts/lib/util/event.js", "../../zrender/lib/core/WeakMap.js", "../../echarts/lib/util/symbol.js", "../../echarts/lib/util/decal.js", "../../echarts/lib/visual/decal.js", "../../echarts/lib/core/lifecycle.js", "../../echarts/lib/core/impl.js", "../../echarts/lib/core/echarts.js", "../../echarts/lib/extension.js", "../../zrender/lib/contain/polygon.js", "../../echarts/lib/coord/geo/Region.js", "../../echarts/lib/coord/geo/parseGeoJson.js", "../../echarts/lib/data/DataDiffer.js", "../../echarts/lib/data/helper/dimensionHelper.js", "../../echarts/lib/data/SeriesDimensionDefine.js", "../../echarts/lib/data/SeriesData.js", "../../echarts/lib/coord/axisModelCommonMixin.js", "../../echarts/lib/label/labelLayoutHelper.js"],
  "sourcesContent": ["\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nvar TYPE_DELIMITER = '.';\r\nvar IS_CONTAINER = '___EC__COMPONENT__CONTAINER___';\r\nvar IS_EXTENDED_CLASS = '___EC__EXTENDED_CLASS___';\r\n/**\r\n * Notice, parseClassType('') should returns {main: '', sub: ''}\r\n * @public\r\n */\r\nexport function parseClassType(componentType) {\r\n  var ret = {\r\n    main: '',\r\n    sub: ''\r\n  };\r\n  if (componentType) {\r\n    var typeArr = componentType.split(TYPE_DELIMITER);\r\n    ret.main = typeArr[0] || '';\r\n    ret.sub = typeArr[1] || '';\r\n  }\r\n  return ret;\r\n}\r\n/**\r\n * @public\r\n */\r\nfunction checkClassType(componentType) {\r\n  zrUtil.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(componentType), 'componentType \"' + componentType + '\" illegal');\r\n}\r\nexport function isExtendedClass(clz) {\r\n  return !!(clz && clz[IS_EXTENDED_CLASS]);\r\n}\r\n/**\r\n * Implements `ExtendableConstructor` for `rootClz`.\r\n *\r\n * @usage\r\n * ```ts\r\n * class Xxx {}\r\n * type XxxConstructor = typeof Xxx & ExtendableConstructor\r\n * enableClassExtend(Xxx as XxxConstructor);\r\n * ```\r\n */\r\nexport function enableClassExtend(rootClz, mandatoryMethods) {\r\n  rootClz.$constructor = rootClz; // FIXME: not necessary?\r\n  rootClz.extend = function (proto) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      zrUtil.each(mandatoryMethods, function (method) {\r\n        if (!proto[method]) {\r\n          console.warn('Method `' + method + '` should be implemented' + (proto.type ? ' in ' + proto.type : '') + '.');\r\n        }\r\n      });\r\n    }\r\n    var superClass = this;\r\n    var ExtendedClass;\r\n    if (isESClass(superClass)) {\r\n      ExtendedClass = /** @class */function (_super) {\r\n        __extends(class_1, _super);\r\n        function class_1() {\r\n          return _super.apply(this, arguments) || this;\r\n        }\r\n        return class_1;\r\n      }(superClass);\r\n    } else {\r\n      // For backward compat, we both support ts class inheritance and this\r\n      // \"extend\" approach.\r\n      // The constructor should keep the same behavior as ts class inheritance:\r\n      // If this constructor/$constructor is not declared, auto invoke the super\r\n      // constructor.\r\n      // If this constructor/$constructor is declared, it is responsible for\r\n      // calling the super constructor.\r\n      ExtendedClass = function () {\r\n        (proto.$constructor || superClass).apply(this, arguments);\r\n      };\r\n      zrUtil.inherits(ExtendedClass, this);\r\n    }\r\n    zrUtil.extend(ExtendedClass.prototype, proto);\r\n    ExtendedClass[IS_EXTENDED_CLASS] = true;\r\n    ExtendedClass.extend = this.extend;\r\n    ExtendedClass.superCall = superCall;\r\n    ExtendedClass.superApply = superApply;\r\n    ExtendedClass.superClass = superClass;\r\n    return ExtendedClass;\r\n  };\r\n}\r\nfunction isESClass(fn) {\r\n  return zrUtil.isFunction(fn) && /^class\\s/.test(Function.prototype.toString.call(fn));\r\n}\r\n/**\r\n * A work around to both support ts extend and this extend mechanism.\r\n * on sub-class.\r\n * @usage\r\n * ```ts\r\n * class Component { ... }\r\n * classUtil.enableClassExtend(Component);\r\n * classUtil.enableClassManagement(Component, {registerWhenExtend: true});\r\n *\r\n * class Series extends Component { ... }\r\n * // Without calling `markExtend`, `registerWhenExtend` will not work.\r\n * Component.markExtend(Series);\r\n * ```\r\n */\r\nexport function mountExtend(SubClz, SupperClz) {\r\n  SubClz.extend = SupperClz.extend;\r\n}\r\n// A random offset.\r\nvar classBase = Math.round(Math.random() * 10);\r\n/**\r\n * Implements `CheckableConstructor` for `target`.\r\n * Can not use instanceof, consider different scope by\r\n * cross domain or es module import in ec extensions.\r\n * Mount a method \"isInstance()\" to Clz.\r\n *\r\n * @usage\r\n * ```ts\r\n * class Xxx {}\r\n * type XxxConstructor = typeof Xxx & CheckableConstructor;\r\n * enableClassCheck(Xxx as XxxConstructor)\r\n * ```\r\n */\r\nexport function enableClassCheck(target) {\r\n  var classAttr = ['__\\0is_clz', classBase++].join('_');\r\n  target.prototype[classAttr] = true;\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    zrUtil.assert(!target.isInstance, 'The method \"is\" can not be defined.');\r\n  }\r\n  target.isInstance = function (obj) {\r\n    return !!(obj && obj[classAttr]);\r\n  };\r\n}\r\n// superCall should have class info, which can not be fetched from 'this'.\r\n// Consider this case:\r\n// class A has method f,\r\n// class B inherits class A, overrides method f, f call superApply('f'),\r\n// class C inherits class B, does not override method f,\r\n// then when method of class C is called, dead loop occurred.\r\nfunction superCall(context, methodName) {\r\n  var args = [];\r\n  for (var _i = 2; _i < arguments.length; _i++) {\r\n    args[_i - 2] = arguments[_i];\r\n  }\r\n  return this.superClass.prototype[methodName].apply(context, args);\r\n}\r\nfunction superApply(context, methodName, args) {\r\n  return this.superClass.prototype[methodName].apply(context, args);\r\n}\r\n/**\r\n * Implements `ClassManager` for `target`\r\n *\r\n * @usage\r\n * ```ts\r\n * class Xxx {}\r\n * type XxxConstructor = typeof Xxx & ClassManager\r\n * enableClassManagement(Xxx as XxxConstructor);\r\n * ```\r\n */\r\nexport function enableClassManagement(target) {\r\n  /**\r\n   * Component model classes\r\n   * key: componentType,\r\n   * value:\r\n   *     componentClass, when componentType is 'a'\r\n   *     or Object.<subKey, componentClass>, when componentType is 'a.b'\r\n   */\r\n  var storage = {};\r\n  target.registerClass = function (clz) {\r\n    // `type` should not be a \"instance member\".\r\n    // If using TS class, should better declared as `static type = 'series.pie'`.\r\n    // otherwise users have to mount `type` on prototype manually.\r\n    // For backward compat and enable instance visit type via `this.type`,\r\n    // we still support fetch `type` from prototype.\r\n    var componentFullType = clz.type || clz.prototype.type;\r\n    if (componentFullType) {\r\n      checkClassType(componentFullType);\r\n      // If only static type declared, we assign it to prototype mandatorily.\r\n      clz.prototype.type = componentFullType;\r\n      var componentTypeInfo = parseClassType(componentFullType);\r\n      if (!componentTypeInfo.sub) {\r\n        if (process.env.NODE_ENV !== 'production') {\r\n          if (storage[componentTypeInfo.main]) {\r\n            console.warn(componentTypeInfo.main + ' exists.');\r\n          }\r\n        }\r\n        storage[componentTypeInfo.main] = clz;\r\n      } else if (componentTypeInfo.sub !== IS_CONTAINER) {\r\n        var container = makeContainer(componentTypeInfo);\r\n        container[componentTypeInfo.sub] = clz;\r\n      }\r\n    }\r\n    return clz;\r\n  };\r\n  target.getClass = function (mainType, subType, throwWhenNotFound) {\r\n    var clz = storage[mainType];\r\n    if (clz && clz[IS_CONTAINER]) {\r\n      clz = subType ? clz[subType] : null;\r\n    }\r\n    if (throwWhenNotFound && !clz) {\r\n      throw new Error(!subType ? mainType + '.' + 'type should be specified.' : 'Component ' + mainType + '.' + (subType || '') + ' is used but not imported.');\r\n    }\r\n    return clz;\r\n  };\r\n  target.getClassesByMainType = function (componentType) {\r\n    var componentTypeInfo = parseClassType(componentType);\r\n    var result = [];\r\n    var obj = storage[componentTypeInfo.main];\r\n    if (obj && obj[IS_CONTAINER]) {\r\n      zrUtil.each(obj, function (o, type) {\r\n        type !== IS_CONTAINER && result.push(o);\r\n      });\r\n    } else {\r\n      result.push(obj);\r\n    }\r\n    return result;\r\n  };\r\n  target.hasClass = function (componentType) {\r\n    // Just consider componentType.main.\r\n    var componentTypeInfo = parseClassType(componentType);\r\n    return !!storage[componentTypeInfo.main];\r\n  };\r\n  /**\r\n   * @return Like ['aa', 'bb'], but can not be ['aa.xx']\r\n   */\r\n  target.getAllClassMainTypes = function () {\r\n    var types = [];\r\n    zrUtil.each(storage, function (obj, type) {\r\n      types.push(type);\r\n    });\r\n    return types;\r\n  };\r\n  /**\r\n   * If a main type is container and has sub types\r\n   */\r\n  target.hasSubTypes = function (componentType) {\r\n    var componentTypeInfo = parseClassType(componentType);\r\n    var obj = storage[componentTypeInfo.main];\r\n    return obj && obj[IS_CONTAINER];\r\n  };\r\n  function makeContainer(componentTypeInfo) {\r\n    var container = storage[componentTypeInfo.main];\r\n    if (!container || !container[IS_CONTAINER]) {\r\n      container = storage[componentTypeInfo.main] = {};\r\n      container[IS_CONTAINER] = true;\r\n    }\r\n    return container;\r\n  }\r\n}\r\n// /**\r\n//  * @param {string|Array.<string>} properties\r\n//  */\r\n// export function setReadOnly(obj, properties) {\r\n// FIXME It seems broken in IE8 simulation of IE11\r\n// if (!zrUtil.isArray(properties)) {\r\n//     properties = properties != null ? [properties] : [];\r\n// }\r\n// zrUtil.each(properties, function (prop) {\r\n//     let value = obj[prop];\r\n//     Object.defineProperty\r\n//         && Object.defineProperty(obj, prop, {\r\n//             value: value, writable: false\r\n//         });\r\n//     zrUtil.isArray(obj[prop])\r\n//         && Object.freeze\r\n//         && Object.freeze(obj[prop]);\r\n// });\r\n// }", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { map, isString, isFunction, eqNaN, isRegExp } from 'zrender/lib/core/util.js';\r\nvar ECHARTS_PREFIX = '[ECharts] ';\r\nvar storedLogs = {};\r\nvar hasConsole = typeof console !== 'undefined'\r\n// eslint-disable-next-line\r\n&& console.warn && console.log;\r\nfunction outputLog(type, str, onlyOnce) {\r\n  if (hasConsole) {\r\n    if (onlyOnce) {\r\n      if (storedLogs[str]) {\r\n        return;\r\n      }\r\n      storedLogs[str] = true;\r\n    }\r\n    // eslint-disable-next-line\r\n    console[type](ECHARTS_PREFIX + str);\r\n  }\r\n}\r\nexport function log(str, onlyOnce) {\r\n  outputLog('log', str, onlyOnce);\r\n}\r\nexport function warn(str, onlyOnce) {\r\n  outputLog('warn', str, onlyOnce);\r\n}\r\nexport function error(str, onlyOnce) {\r\n  outputLog('error', str, onlyOnce);\r\n}\r\nexport function deprecateLog(str) {\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    // Not display duplicate message.\r\n    outputLog('warn', 'DEPRECATED: ' + str, true);\r\n  }\r\n}\r\nexport function deprecateReplaceLog(oldOpt, newOpt, scope) {\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    deprecateLog((scope ? \"[\" + scope + \"]\" : '') + (oldOpt + \" is deprecated, use \" + newOpt + \" instead.\"));\r\n  }\r\n}\r\n/**\r\n * If in __DEV__ environment, get console printable message for users hint.\r\n * Parameters are separated by ' '.\r\n * @usage\r\n * makePrintable('This is an error on', someVar, someObj);\r\n *\r\n * @param hintInfo anything about the current execution context to hint users.\r\n * @throws Error\r\n */\r\nexport function makePrintable() {\r\n  var hintInfo = [];\r\n  for (var _i = 0; _i < arguments.length; _i++) {\r\n    hintInfo[_i] = arguments[_i];\r\n  }\r\n  var msg = '';\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    // Fuzzy stringify for print.\r\n    // This code only exist in dev environment.\r\n    var makePrintableStringIfPossible_1 = function (val) {\r\n      return val === void 0 ? 'undefined' : val === Infinity ? 'Infinity' : val === -Infinity ? '-Infinity' : eqNaN(val) ? 'NaN' : val instanceof Date ? 'Date(' + val.toISOString() + ')' : isFunction(val) ? 'function () { ... }' : isRegExp(val) ? val + '' : null;\r\n    };\r\n    msg = map(hintInfo, function (arg) {\r\n      if (isString(arg)) {\r\n        // Print without quotation mark for some statement.\r\n        return arg;\r\n      } else {\r\n        var printableStr = makePrintableStringIfPossible_1(arg);\r\n        if (printableStr != null) {\r\n          return printableStr;\r\n        } else if (typeof JSON !== 'undefined' && JSON.stringify) {\r\n          try {\r\n            return JSON.stringify(arg, function (n, val) {\r\n              var printableStr = makePrintableStringIfPossible_1(val);\r\n              return printableStr == null ? val : printableStr;\r\n            });\r\n            // In most cases the info object is small, so do not line break.\r\n          } catch (err) {\r\n            return '?';\r\n          }\r\n        } else {\r\n          return '?';\r\n        }\r\n      }\r\n    }).join(' ');\r\n  }\r\n  return msg;\r\n}\r\n/**\r\n * @throws Error\r\n */\r\nexport function throwError(msg) {\r\n  throw new Error(msg);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport { parseClassType } from './clazz.js';\r\nimport { makePrintable } from './log.js';\r\n// A random offset\r\nvar base = Math.round(Math.random() * 10);\r\n/**\r\n * @public\r\n * @param {string} type\r\n * @return {string}\r\n */\r\nexport function getUID(type) {\r\n  // Considering the case of crossing js context,\r\n  // use Math.random to make id as unique as possible.\r\n  return [type || '', base++].join('_');\r\n}\r\n/**\r\n * Implements `SubTypeDefaulterManager` for `target`.\r\n */\r\nexport function enableSubTypeDefaulter(target) {\r\n  var subTypeDefaulters = {};\r\n  target.registerSubTypeDefaulter = function (componentType, defaulter) {\r\n    var componentTypeInfo = parseClassType(componentType);\r\n    subTypeDefaulters[componentTypeInfo.main] = defaulter;\r\n  };\r\n  target.determineSubType = function (componentType, option) {\r\n    var type = option.type;\r\n    if (!type) {\r\n      var componentTypeMain = parseClassType(componentType).main;\r\n      if (target.hasSubTypes(componentType) && subTypeDefaulters[componentTypeMain]) {\r\n        type = subTypeDefaulters[componentTypeMain](option);\r\n      }\r\n    }\r\n    return type;\r\n  };\r\n}\r\n/**\r\n * Implements `TopologicalTravelable<any>` for `entity`.\r\n *\r\n * Topological travel on Activity Network (Activity On Vertices).\r\n * Dependencies is defined in Model.prototype.dependencies, like ['xAxis', 'yAxis'].\r\n * If 'xAxis' or 'yAxis' is absent in componentTypeList, just ignore it in topology.\r\n * If there is circular dependencey, Error will be thrown.\r\n */\r\nexport function enableTopologicalTravel(entity, dependencyGetter) {\r\n  /**\r\n   * @param targetNameList Target Component type list.\r\n   *                       Can be ['aa', 'bb', 'aa.xx']\r\n   * @param fullNameList By which we can build dependency graph.\r\n   * @param callback Params: componentType, dependencies.\r\n   * @param context Scope of callback.\r\n   */\r\n  entity.topologicalTravel = function (targetNameList, fullNameList, callback, context) {\r\n    if (!targetNameList.length) {\r\n      return;\r\n    }\r\n    var result = makeDepndencyGraph(fullNameList);\r\n    var graph = result.graph;\r\n    var noEntryList = result.noEntryList;\r\n    var targetNameSet = {};\r\n    zrUtil.each(targetNameList, function (name) {\r\n      targetNameSet[name] = true;\r\n    });\r\n    while (noEntryList.length) {\r\n      var currComponentType = noEntryList.pop();\r\n      var currVertex = graph[currComponentType];\r\n      var isInTargetNameSet = !!targetNameSet[currComponentType];\r\n      if (isInTargetNameSet) {\r\n        callback.call(context, currComponentType, currVertex.originalDeps.slice());\r\n        delete targetNameSet[currComponentType];\r\n      }\r\n      zrUtil.each(currVertex.successor, isInTargetNameSet ? removeEdgeAndAdd : removeEdge);\r\n    }\r\n    zrUtil.each(targetNameSet, function () {\r\n      var errMsg = '';\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        errMsg = makePrintable('Circular dependency may exists: ', targetNameSet, targetNameList, fullNameList);\r\n      }\r\n      throw new Error(errMsg);\r\n    });\r\n    function removeEdge(succComponentType) {\r\n      graph[succComponentType].entryCount--;\r\n      if (graph[succComponentType].entryCount === 0) {\r\n        noEntryList.push(succComponentType);\r\n      }\r\n    }\r\n    // Consider this case: legend depends on series, and we call\r\n    // chart.setOption({series: [...]}), where only series is in option.\r\n    // If we do not have 'removeEdgeAndAdd', legendModel.mergeOption will\r\n    // not be called, but only sereis.mergeOption is called. Thus legend\r\n    // have no chance to update its local record about series (like which\r\n    // name of series is available in legend).\r\n    function removeEdgeAndAdd(succComponentType) {\r\n      targetNameSet[succComponentType] = true;\r\n      removeEdge(succComponentType);\r\n    }\r\n  };\r\n  function makeDepndencyGraph(fullNameList) {\r\n    var graph = {};\r\n    var noEntryList = [];\r\n    zrUtil.each(fullNameList, function (name) {\r\n      var thisItem = createDependencyGraphItem(graph, name);\r\n      var originalDeps = thisItem.originalDeps = dependencyGetter(name);\r\n      var availableDeps = getAvailableDependencies(originalDeps, fullNameList);\r\n      thisItem.entryCount = availableDeps.length;\r\n      if (thisItem.entryCount === 0) {\r\n        noEntryList.push(name);\r\n      }\r\n      zrUtil.each(availableDeps, function (dependentName) {\r\n        if (zrUtil.indexOf(thisItem.predecessor, dependentName) < 0) {\r\n          thisItem.predecessor.push(dependentName);\r\n        }\r\n        var thatItem = createDependencyGraphItem(graph, dependentName);\r\n        if (zrUtil.indexOf(thatItem.successor, dependentName) < 0) {\r\n          thatItem.successor.push(name);\r\n        }\r\n      });\r\n    });\r\n    return {\r\n      graph: graph,\r\n      noEntryList: noEntryList\r\n    };\r\n  }\r\n  function createDependencyGraphItem(graph, name) {\r\n    if (!graph[name]) {\r\n      graph[name] = {\r\n        predecessor: [],\r\n        successor: []\r\n      };\r\n    }\r\n    return graph[name];\r\n  }\r\n  function getAvailableDependencies(originalDeps, fullNameList) {\r\n    var availableDeps = [];\r\n    zrUtil.each(originalDeps, function (dep) {\r\n      zrUtil.indexOf(fullNameList, dep) >= 0 && availableDeps.push(dep);\r\n    });\r\n    return availableDeps;\r\n  }\r\n}\r\nexport function inheritDefaultOption(superOption, subOption) {\r\n  // See also `model/Component.ts#getDefaultOption`\r\n  return zrUtil.merge(zrUtil.merge({}, superOption, true), subOption, true);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport Group from 'zrender/lib/graphic/Group.js';\r\nimport * as componentUtil from '../util/component.js';\r\nimport * as clazzUtil from '../util/clazz.js';\r\nvar ComponentView = /** @class */function () {\r\n  function ComponentView() {\r\n    this.group = new Group();\r\n    this.uid = componentUtil.getUID('viewComponent');\r\n  }\r\n  ComponentView.prototype.init = function (ecModel, api) {};\r\n  ComponentView.prototype.render = function (model, ecModel, api, payload) {};\r\n  ComponentView.prototype.dispose = function (ecModel, api) {};\r\n  ComponentView.prototype.updateView = function (model, ecModel, api, payload) {\r\n    // Do nothing;\r\n  };\r\n  ComponentView.prototype.updateLayout = function (model, ecModel, api, payload) {\r\n    // Do nothing;\r\n  };\r\n  ComponentView.prototype.updateVisual = function (model, ecModel, api, payload) {\r\n    // Do nothing;\r\n  };\r\n  /**\r\n   * Hook for toggle blur target series.\r\n   * Can be used in marker for blur or leave blur the markers\r\n   */\r\n  ComponentView.prototype.toggleBlurSeries = function (seriesModels, isBlur, ecModel) {\r\n    // Do nothing;\r\n  };\r\n  /**\r\n   * Traverse the new rendered elements.\r\n   *\r\n   * It will traverse the new added element in progressive rendering.\r\n   * And traverse all in normal rendering.\r\n   */\r\n  ComponentView.prototype.eachRendered = function (cb) {\r\n    var group = this.group;\r\n    if (group) {\r\n      group.traverse(cb);\r\n    }\r\n  };\r\n  return ComponentView;\r\n}();\r\n;\r\nclazzUtil.enableClassExtend(ComponentView);\r\nclazzUtil.enableClassManagement(ComponentView);\r\nexport default ComponentView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n// TODO Parse shadow style\r\n// TODO Only shallow path support\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nexport default function makeStyleMapper(properties, ignoreParent) {\r\n  // Normalize\r\n  for (var i = 0; i < properties.length; i++) {\r\n    if (!properties[i][1]) {\r\n      properties[i][1] = properties[i][0];\r\n    }\r\n  }\r\n  ignoreParent = ignoreParent || false;\r\n  return function (model, excludes, includes) {\r\n    var style = {};\r\n    for (var i = 0; i < properties.length; i++) {\r\n      var propName = properties[i][1];\r\n      if (excludes && zrUtil.indexOf(excludes, propName) >= 0 || includes && zrUtil.indexOf(includes, propName) < 0) {\r\n        continue;\r\n      }\r\n      var val = model.getShallow(propName, ignoreParent);\r\n      if (val != null) {\r\n        style[properties[i][0]] = val;\r\n      }\r\n    }\r\n    // TODO Text or image?\r\n    return style;\r\n  };\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport makeStyleMapper from './makeStyleMapper.js';\r\nexport var AREA_STYLE_KEY_MAP = [['fill', 'color'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['opacity'], ['shadowColor']\r\n// Option decal is in `DecalObject` but style.decal is in `PatternObject`.\r\n// So do not transfer decal directly.\r\n];\r\nvar getAreaStyle = makeStyleMapper(AREA_STYLE_KEY_MAP);\r\nvar AreaStyleMixin = /** @class */function () {\r\n  function AreaStyleMixin() {}\r\n  AreaStyleMixin.prototype.getAreaStyle = function (excludes, includes) {\r\n    return getAreaStyle(this, excludes, includes);\r\n  };\r\n  return AreaStyleMixin;\r\n}();\r\n;\r\nexport { AreaStyleMixin };", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n/*\r\n* A third-party license is embedded for some of the code in this file:\r\n* The method \"quantile\" was copied from \"d3.js\".\r\n* (See more details in the comment of the method below.)\r\n* The use of the source code of this file is also subject to the terms\r\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\r\n* </licenses/LICENSE-d3>).\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nvar RADIAN_EPSILON = 1e-4;\r\n// Although chrome already enlarge this number to 100 for `toFixed`, but\r\n// we sill follow the spec for compatibility.\r\nvar ROUND_SUPPORTED_PRECISION_MAX = 20;\r\nfunction _trim(str) {\r\n  return str.replace(/^\\s+|\\s+$/g, '');\r\n}\r\n/**\r\n * Linear mapping a value from domain to range\r\n * @param  val\r\n * @param  domain Domain extent domain[0] can be bigger than domain[1]\r\n * @param  range  Range extent range[0] can be bigger than range[1]\r\n * @param  clamp Default to be false\r\n */\r\nexport function linearMap(val, domain, range, clamp) {\r\n  var d0 = domain[0];\r\n  var d1 = domain[1];\r\n  var r0 = range[0];\r\n  var r1 = range[1];\r\n  var subDomain = d1 - d0;\r\n  var subRange = r1 - r0;\r\n  if (subDomain === 0) {\r\n    return subRange === 0 ? r0 : (r0 + r1) / 2;\r\n  }\r\n  // Avoid accuracy problem in edge, such as\r\n  // 146.39 - 62.83 === 83.55999999999999.\r\n  // See echarts/test/ut/spec/util/number.js#linearMap#accuracyError\r\n  // It is a little verbose for efficiency considering this method\r\n  // is a hotspot.\r\n  if (clamp) {\r\n    if (subDomain > 0) {\r\n      if (val <= d0) {\r\n        return r0;\r\n      } else if (val >= d1) {\r\n        return r1;\r\n      }\r\n    } else {\r\n      if (val >= d0) {\r\n        return r0;\r\n      } else if (val <= d1) {\r\n        return r1;\r\n      }\r\n    }\r\n  } else {\r\n    if (val === d0) {\r\n      return r0;\r\n    }\r\n    if (val === d1) {\r\n      return r1;\r\n    }\r\n  }\r\n  return (val - d0) / subDomain * subRange + r0;\r\n}\r\n/**\r\n * Convert a percent string to absolute number.\r\n * Returns NaN if percent is not a valid string or number\r\n */\r\nexport function parsePercent(percent, all) {\r\n  switch (percent) {\r\n    case 'center':\r\n    case 'middle':\r\n      percent = '50%';\r\n      break;\r\n    case 'left':\r\n    case 'top':\r\n      percent = '0%';\r\n      break;\r\n    case 'right':\r\n    case 'bottom':\r\n      percent = '100%';\r\n      break;\r\n  }\r\n  if (zrUtil.isString(percent)) {\r\n    if (_trim(percent).match(/%$/)) {\r\n      return parseFloat(percent) / 100 * all;\r\n    }\r\n    return parseFloat(percent);\r\n  }\r\n  return percent == null ? NaN : +percent;\r\n}\r\nexport function round(x, precision, returnStr) {\r\n  if (precision == null) {\r\n    precision = 10;\r\n  }\r\n  // Avoid range error\r\n  precision = Math.min(Math.max(0, precision), ROUND_SUPPORTED_PRECISION_MAX);\r\n  // PENDING: 1.005.toFixed(2) is '1.00' rather than '1.01'\r\n  x = (+x).toFixed(precision);\r\n  return returnStr ? x : +x;\r\n}\r\n/**\r\n * Inplacd asc sort arr.\r\n * The input arr will be modified.\r\n */\r\nexport function asc(arr) {\r\n  arr.sort(function (a, b) {\r\n    return a - b;\r\n  });\r\n  return arr;\r\n}\r\n/**\r\n * Get precision.\r\n */\r\nexport function getPrecision(val) {\r\n  val = +val;\r\n  if (isNaN(val)) {\r\n    return 0;\r\n  }\r\n  // It is much faster than methods converting number to string as follows\r\n  //      let tmp = val.toString();\r\n  //      return tmp.length - 1 - tmp.indexOf('.');\r\n  // especially when precision is low\r\n  // Notice:\r\n  // (1) If the loop count is over about 20, it is slower than `getPrecisionSafe`.\r\n  //     (see https://jsbench.me/2vkpcekkvw/1)\r\n  // (2) If the val is less than for example 1e-15, the result may be incorrect.\r\n  //     (see test/ut/spec/util/number.test.ts `getPrecision_equal_random`)\r\n  if (val > 1e-14) {\r\n    var e = 1;\r\n    for (var i = 0; i < 15; i++, e *= 10) {\r\n      if (Math.round(val * e) / e === val) {\r\n        return i;\r\n      }\r\n    }\r\n  }\r\n  return getPrecisionSafe(val);\r\n}\r\n/**\r\n * Get precision with slow but safe method\r\n */\r\nexport function getPrecisionSafe(val) {\r\n  // toLowerCase for: '3.4E-12'\r\n  var str = val.toString().toLowerCase();\r\n  // Consider scientific notation: '3.4e-12' '3.4e+12'\r\n  var eIndex = str.indexOf('e');\r\n  var exp = eIndex > 0 ? +str.slice(eIndex + 1) : 0;\r\n  var significandPartLen = eIndex > 0 ? eIndex : str.length;\r\n  var dotIndex = str.indexOf('.');\r\n  var decimalPartLen = dotIndex < 0 ? 0 : significandPartLen - 1 - dotIndex;\r\n  return Math.max(0, decimalPartLen - exp);\r\n}\r\n/**\r\n * Minimal dicernible data precisioin according to a single pixel.\r\n */\r\nexport function getPixelPrecision(dataExtent, pixelExtent) {\r\n  var log = Math.log;\r\n  var LN10 = Math.LN10;\r\n  var dataQuantity = Math.floor(log(dataExtent[1] - dataExtent[0]) / LN10);\r\n  var sizeQuantity = Math.round(log(Math.abs(pixelExtent[1] - pixelExtent[0])) / LN10);\r\n  // toFixed() digits argument must be between 0 and 20.\r\n  var precision = Math.min(Math.max(-dataQuantity + sizeQuantity, 0), 20);\r\n  return !isFinite(precision) ? 20 : precision;\r\n}\r\n/**\r\n * Get a data of given precision, assuring the sum of percentages\r\n * in valueList is 1.\r\n * The largest remainder method is used.\r\n * https://en.wikipedia.org/wiki/Largest_remainder_method\r\n *\r\n * @param valueList a list of all data\r\n * @param idx index of the data to be processed in valueList\r\n * @param precision integer number showing digits of precision\r\n * @return percent ranging from 0 to 100\r\n */\r\nexport function getPercentWithPrecision(valueList, idx, precision) {\r\n  if (!valueList[idx]) {\r\n    return 0;\r\n  }\r\n  var seats = getPercentSeats(valueList, precision);\r\n  return seats[idx] || 0;\r\n}\r\n/**\r\n * Get a data of given precision, assuring the sum of percentages\r\n * in valueList is 1.\r\n * The largest remainder method is used.\r\n * https://en.wikipedia.org/wiki/Largest_remainder_method\r\n *\r\n * @param valueList a list of all data\r\n * @param precision integer number showing digits of precision\r\n * @return {Array<number>}\r\n */\r\nexport function getPercentSeats(valueList, precision) {\r\n  var sum = zrUtil.reduce(valueList, function (acc, val) {\r\n    return acc + (isNaN(val) ? 0 : val);\r\n  }, 0);\r\n  if (sum === 0) {\r\n    return [];\r\n  }\r\n  var digits = Math.pow(10, precision);\r\n  var votesPerQuota = zrUtil.map(valueList, function (val) {\r\n    return (isNaN(val) ? 0 : val) / sum * digits * 100;\r\n  });\r\n  var targetSeats = digits * 100;\r\n  var seats = zrUtil.map(votesPerQuota, function (votes) {\r\n    // Assign automatic seats.\r\n    return Math.floor(votes);\r\n  });\r\n  var currentSum = zrUtil.reduce(seats, function (acc, val) {\r\n    return acc + val;\r\n  }, 0);\r\n  var remainder = zrUtil.map(votesPerQuota, function (votes, idx) {\r\n    return votes - seats[idx];\r\n  });\r\n  // Has remainding votes.\r\n  while (currentSum < targetSeats) {\r\n    // Find next largest remainder.\r\n    var max = Number.NEGATIVE_INFINITY;\r\n    var maxId = null;\r\n    for (var i = 0, len = remainder.length; i < len; ++i) {\r\n      if (remainder[i] > max) {\r\n        max = remainder[i];\r\n        maxId = i;\r\n      }\r\n    }\r\n    // Add a vote to max remainder.\r\n    ++seats[maxId];\r\n    remainder[maxId] = 0;\r\n    ++currentSum;\r\n  }\r\n  return zrUtil.map(seats, function (seat) {\r\n    return seat / digits;\r\n  });\r\n}\r\n/**\r\n * Solve the floating point adding problem like 0.1 + 0.2 === 0.30000000000000004\r\n * See <http://0.30000000000000004.com/>\r\n */\r\nexport function addSafe(val0, val1) {\r\n  var maxPrecision = Math.max(getPrecision(val0), getPrecision(val1));\r\n  // const multiplier = Math.pow(10, maxPrecision);\r\n  // return (Math.round(val0 * multiplier) + Math.round(val1 * multiplier)) / multiplier;\r\n  var sum = val0 + val1;\r\n  // // PENDING: support more?\r\n  return maxPrecision > ROUND_SUPPORTED_PRECISION_MAX ? sum : round(sum, maxPrecision);\r\n}\r\n// Number.MAX_SAFE_INTEGER, ie do not support.\r\nexport var MAX_SAFE_INTEGER = 9007199254740991;\r\n/**\r\n * To 0 - 2 * PI, considering negative radian.\r\n */\r\nexport function remRadian(radian) {\r\n  var pi2 = Math.PI * 2;\r\n  return (radian % pi2 + pi2) % pi2;\r\n}\r\n/**\r\n * @param {type} radian\r\n * @return {boolean}\r\n */\r\nexport function isRadianAroundZero(val) {\r\n  return val > -RADIAN_EPSILON && val < RADIAN_EPSILON;\r\n}\r\n// eslint-disable-next-line\r\nvar TIME_REG = /^(?:(\\d{4})(?:[-\\/](\\d{1,2})(?:[-\\/](\\d{1,2})(?:[T ](\\d{1,2})(?::(\\d{1,2})(?::(\\d{1,2})(?:[.,](\\d+))?)?)?(Z|[\\+\\-]\\d\\d:?\\d\\d)?)?)?)?)?$/; // jshint ignore:line\r\n/**\r\n * @param value valid type: number | string | Date, otherwise return `new Date(NaN)`\r\n *   These values can be accepted:\r\n *   + An instance of Date, represent a time in its own time zone.\r\n *   + Or string in a subset of ISO 8601, only including:\r\n *     + only year, month, date: '2012-03', '2012-03-01', '2012-03-01 05', '2012-03-01 05:06',\r\n *     + separated with T or space: '2012-03-01T12:22:33.123', '2012-03-01 12:22:33.123',\r\n *     + time zone: '2012-03-01T12:22:33Z', '2012-03-01T12:22:33+8000', '2012-03-01T12:22:33-05:00',\r\n *     all of which will be treated as local time if time zone is not specified\r\n *     (see <https://momentjs.com/>).\r\n *   + Or other string format, including (all of which will be treated as local time):\r\n *     '2012', '2012-3-1', '2012/3/1', '2012/03/01',\r\n *     '2009/6/12 2:00', '2009/6/12 2:05:08', '2009/6/12 2:05:08.123'\r\n *   + a timestamp, which represent a time in UTC.\r\n * @return date Never be null/undefined. If invalid, return `new Date(NaN)`.\r\n */\r\nexport function parseDate(value) {\r\n  if (value instanceof Date) {\r\n    return value;\r\n  } else if (zrUtil.isString(value)) {\r\n    // Different browsers parse date in different way, so we parse it manually.\r\n    // Some other issues:\r\n    // new Date('1970-01-01') is UTC,\r\n    // new Date('1970/01/01') and new Date('1970-1-01') is local.\r\n    // See issue #3623\r\n    var match = TIME_REG.exec(value);\r\n    if (!match) {\r\n      // return Invalid Date.\r\n      return new Date(NaN);\r\n    }\r\n    // Use local time when no timezone offset is specified.\r\n    if (!match[8]) {\r\n      // match[n] can only be string or undefined.\r\n      // But take care of '12' + 1 => '121'.\r\n      return new Date(+match[1], +(match[2] || 1) - 1, +match[3] || 1, +match[4] || 0, +(match[5] || 0), +match[6] || 0, match[7] ? +match[7].substring(0, 3) : 0);\r\n    }\r\n    // Timezoneoffset of Javascript Date has considered DST (Daylight Saving Time,\r\n    // https://tc39.github.io/ecma262/#sec-daylight-saving-time-adjustment).\r\n    // For example, system timezone is set as \"Time Zone: America/Toronto\",\r\n    // then these code will get different result:\r\n    // `new Date(1478411999999).getTimezoneOffset();  // get 240`\r\n    // `new Date(1478412000000).getTimezoneOffset();  // get 300`\r\n    // So we should not use `new Date`, but use `Date.UTC`.\r\n    else {\r\n      var hour = +match[4] || 0;\r\n      if (match[8].toUpperCase() !== 'Z') {\r\n        hour -= +match[8].slice(0, 3);\r\n      }\r\n      return new Date(Date.UTC(+match[1], +(match[2] || 1) - 1, +match[3] || 1, hour, +(match[5] || 0), +match[6] || 0, match[7] ? +match[7].substring(0, 3) : 0));\r\n    }\r\n  } else if (value == null) {\r\n    return new Date(NaN);\r\n  }\r\n  return new Date(Math.round(value));\r\n}\r\n/**\r\n * Quantity of a number. e.g. 0.1, 1, 10, 100\r\n *\r\n * @param val\r\n * @return\r\n */\r\nexport function quantity(val) {\r\n  return Math.pow(10, quantityExponent(val));\r\n}\r\n/**\r\n * Exponent of the quantity of a number\r\n * e.g., 1234 equals to 1.234*10^3, so quantityExponent(1234) is 3\r\n *\r\n * @param val non-negative value\r\n * @return\r\n */\r\nexport function quantityExponent(val) {\r\n  if (val === 0) {\r\n    return 0;\r\n  }\r\n  var exp = Math.floor(Math.log(val) / Math.LN10);\r\n  /**\r\n   * exp is expected to be the rounded-down result of the base-10 log of val.\r\n   * But due to the precision loss with Math.log(val), we need to restore it\r\n   * using 10^exp to make sure we can get val back from exp. #11249\r\n   */\r\n  if (val / Math.pow(10, exp) >= 10) {\r\n    exp++;\r\n  }\r\n  return exp;\r\n}\r\n/**\r\n * find a “nice” number approximately equal to x. Round the number if round = true,\r\n * take ceiling if round = false. The primary observation is that the “nicest”\r\n * numbers in decimal are 1, 2, and 5, and all power-of-ten multiples of these numbers.\r\n *\r\n * See \"Nice Numbers for Graph Labels\" of Graphic Gems.\r\n *\r\n * @param  val Non-negative value.\r\n * @param  round\r\n * @return Niced number\r\n */\r\nexport function nice(val, round) {\r\n  var exponent = quantityExponent(val);\r\n  var exp10 = Math.pow(10, exponent);\r\n  var f = val / exp10; // 1 <= f < 10\r\n  var nf;\r\n  if (round) {\r\n    if (f < 1.5) {\r\n      nf = 1;\r\n    } else if (f < 2.5) {\r\n      nf = 2;\r\n    } else if (f < 4) {\r\n      nf = 3;\r\n    } else if (f < 7) {\r\n      nf = 5;\r\n    } else {\r\n      nf = 10;\r\n    }\r\n  } else {\r\n    if (f < 1) {\r\n      nf = 1;\r\n    } else if (f < 2) {\r\n      nf = 2;\r\n    } else if (f < 3) {\r\n      nf = 3;\r\n    } else if (f < 5) {\r\n      nf = 5;\r\n    } else {\r\n      nf = 10;\r\n    }\r\n  }\r\n  val = nf * exp10;\r\n  // Fix 3 * 0.1 === 0.30000000000000004 issue (see IEEE 754).\r\n  // 20 is the uppper bound of toFixed.\r\n  return exponent >= -20 ? +val.toFixed(exponent < 0 ? -exponent : 0) : val;\r\n}\r\n/**\r\n * This code was copied from \"d3.js\"\r\n * <https://github.com/d3/d3/blob/9cc9a875e636a1dcf36cc1e07bdf77e1ad6e2c74/src/arrays/quantile.js>.\r\n * See the license statement at the head of this file.\r\n * @param ascArr\r\n */\r\nexport function quantile(ascArr, p) {\r\n  var H = (ascArr.length - 1) * p + 1;\r\n  var h = Math.floor(H);\r\n  var v = +ascArr[h - 1];\r\n  var e = H - h;\r\n  return e ? v + e * (ascArr[h] - v) : v;\r\n}\r\n/**\r\n * Order intervals asc, and split them when overlap.\r\n * expect(numberUtil.reformIntervals([\r\n *     {interval: [18, 62], close: [1, 1]},\r\n *     {interval: [-Infinity, -70], close: [0, 0]},\r\n *     {interval: [-70, -26], close: [1, 1]},\r\n *     {interval: [-26, 18], close: [1, 1]},\r\n *     {interval: [62, 150], close: [1, 1]},\r\n *     {interval: [106, 150], close: [1, 1]},\r\n *     {interval: [150, Infinity], close: [0, 0]}\r\n * ])).toEqual([\r\n *     {interval: [-Infinity, -70], close: [0, 0]},\r\n *     {interval: [-70, -26], close: [1, 1]},\r\n *     {interval: [-26, 18], close: [0, 1]},\r\n *     {interval: [18, 62], close: [0, 1]},\r\n *     {interval: [62, 150], close: [0, 1]},\r\n *     {interval: [150, Infinity], close: [0, 0]}\r\n * ]);\r\n * @param list, where `close` mean open or close\r\n *        of the interval, and Infinity can be used.\r\n * @return The origin list, which has been reformed.\r\n */\r\nexport function reformIntervals(list) {\r\n  list.sort(function (a, b) {\r\n    return littleThan(a, b, 0) ? -1 : 1;\r\n  });\r\n  var curr = -Infinity;\r\n  var currClose = 1;\r\n  for (var i = 0; i < list.length;) {\r\n    var interval = list[i].interval;\r\n    var close_1 = list[i].close;\r\n    for (var lg = 0; lg < 2; lg++) {\r\n      if (interval[lg] <= curr) {\r\n        interval[lg] = curr;\r\n        close_1[lg] = !lg ? 1 - currClose : 1;\r\n      }\r\n      curr = interval[lg];\r\n      currClose = close_1[lg];\r\n    }\r\n    if (interval[0] === interval[1] && close_1[0] * close_1[1] !== 1) {\r\n      list.splice(i, 1);\r\n    } else {\r\n      i++;\r\n    }\r\n  }\r\n  return list;\r\n  function littleThan(a, b, lg) {\r\n    return a.interval[lg] < b.interval[lg] || a.interval[lg] === b.interval[lg] && (a.close[lg] - b.close[lg] === (!lg ? 1 : -1) || !lg && littleThan(a, b, 1));\r\n  }\r\n}\r\n/**\r\n * [Numeric is defined as]:\r\n *     `parseFloat(val) == val`\r\n * For example:\r\n * numeric:\r\n *     typeof number except NaN, '-123', '123', '2e3', '-2e3', '011', 'Infinity', Infinity,\r\n *     and they rounded by white-spaces or line-terminal like ' -123 \\n ' (see es spec)\r\n * not-numeric:\r\n *     null, undefined, [], {}, true, false, 'NaN', NaN, '123ab',\r\n *     empty string, string with only white-spaces or line-terminal (see es spec),\r\n *     0x12, '0x12', '-0x12', 012, '012', '-012',\r\n *     non-string, ...\r\n *\r\n * @test See full test cases in `test/ut/spec/util/number.js`.\r\n * @return Must be a typeof number. If not numeric, return NaN.\r\n */\r\nexport function numericToNumber(val) {\r\n  var valFloat = parseFloat(val);\r\n  return valFloat == val // eslint-disable-line eqeqeq\r\n  && (valFloat !== 0 || !zrUtil.isString(val) || val.indexOf('x') <= 0) // For case ' 0x0 '.\r\n  ? valFloat : NaN;\r\n}\r\n/**\r\n * Definition of \"numeric\": see `numericToNumber`.\r\n */\r\nexport function isNumeric(val) {\r\n  return !isNaN(numericToNumber(val));\r\n}\r\n/**\r\n * Use random base to prevent users hard code depending on\r\n * this auto generated marker id.\r\n * @return An positive integer.\r\n */\r\nexport function getRandomIdBase() {\r\n  return Math.round(Math.random() * 9);\r\n}\r\n/**\r\n * Get the greatest common divisor.\r\n *\r\n * @param {number} a one number\r\n * @param {number} b the other number\r\n */\r\nexport function getGreatestCommonDividor(a, b) {\r\n  if (b === 0) {\r\n    return a;\r\n  }\r\n  return getGreatestCommonDividor(b, a % b);\r\n}\r\n/**\r\n * Get the least common multiple.\r\n *\r\n * @param {number} a one number\r\n * @param {number} b the other number\r\n */\r\nexport function getLeastCommonMultiple(a, b) {\r\n  if (a == null) {\r\n    return b;\r\n  }\r\n  if (b == null) {\r\n    return a;\r\n  }\r\n  return a * b / getGreatestCommonDividor(a, b);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { each, isObject, isArray, createHashMap, map, assert, isString, indexOf, isStringSafe, isNumber } from 'zrender/lib/core/util.js';\r\nimport env from 'zrender/lib/core/env.js';\r\nimport { isNumeric, getRandomIdBase, getPrecision, round } from './number.js';\r\nimport { warn } from './log.js';\r\nfunction interpolateNumber(p0, p1, percent) {\r\n  return (p1 - p0) * percent + p0;\r\n}\r\n/**\r\n * Make the name displayable. But we should\r\n * make sure it is not duplicated with user\r\n * specified name, so use '\\0';\r\n */\r\nvar DUMMY_COMPONENT_NAME_PREFIX = 'series\\0';\r\nvar INTERNAL_COMPONENT_ID_PREFIX = '\\0_ec_\\0';\r\n/**\r\n * If value is not array, then translate it to array.\r\n * @param  {*} value\r\n * @return {Array} [value] or value\r\n */\r\nexport function normalizeToArray(value) {\r\n  return value instanceof Array ? value : value == null ? [] : [value];\r\n}\r\n/**\r\n * Sync default option between normal and emphasis like `position` and `show`\r\n * In case some one will write code like\r\n *     label: {\r\n *          show: false,\r\n *          position: 'outside',\r\n *          fontSize: 18\r\n *     },\r\n *     emphasis: {\r\n *          label: { show: true }\r\n *     }\r\n */\r\nexport function defaultEmphasis(opt, key, subOpts) {\r\n  // Caution: performance sensitive.\r\n  if (opt) {\r\n    opt[key] = opt[key] || {};\r\n    opt.emphasis = opt.emphasis || {};\r\n    opt.emphasis[key] = opt.emphasis[key] || {};\r\n    // Default emphasis option from normal\r\n    for (var i = 0, len = subOpts.length; i < len; i++) {\r\n      var subOptName = subOpts[i];\r\n      if (!opt.emphasis[key].hasOwnProperty(subOptName) && opt[key].hasOwnProperty(subOptName)) {\r\n        opt.emphasis[key][subOptName] = opt[key][subOptName];\r\n      }\r\n    }\r\n  }\r\n}\r\nexport var TEXT_STYLE_OPTIONS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'rich', 'tag', 'color', 'textBorderColor', 'textBorderWidth', 'width', 'height', 'lineHeight', 'align', 'verticalAlign', 'baseline', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY', 'backgroundColor', 'borderColor', 'borderWidth', 'borderRadius', 'padding'];\r\n// modelUtil.LABEL_OPTIONS = modelUtil.TEXT_STYLE_OPTIONS.concat([\r\n//     'position', 'offset', 'rotate', 'origin', 'show', 'distance', 'formatter',\r\n//     'fontStyle', 'fontWeight', 'fontSize', 'fontFamily',\r\n//     // FIXME: deprecated, check and remove it.\r\n//     'textStyle'\r\n// ]);\r\n/**\r\n * The method does not ensure performance.\r\n * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\r\n * This helper method retrieves value from data.\r\n */\r\nexport function getDataItemValue(dataItem) {\r\n  return isObject(dataItem) && !isArray(dataItem) && !(dataItem instanceof Date) ? dataItem.value : dataItem;\r\n}\r\n/**\r\n * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\r\n * This helper method determine if dataItem has extra option besides value\r\n */\r\nexport function isDataItemOption(dataItem) {\r\n  return isObject(dataItem) && !(dataItem instanceof Array);\r\n  // // markLine data can be array\r\n  // && !(dataItem[0] && isObject(dataItem[0]) && !(dataItem[0] instanceof Array));\r\n}\r\n;\r\n/**\r\n * Mapping to existings for merge.\r\n *\r\n * Mode \"normalMege\":\r\n *     The mapping result (merge result) will keep the order of the existing\r\n *     component, rather than the order of new option. Because we should ensure\r\n *     some specified index reference (like xAxisIndex) keep work.\r\n *     And in most cases, \"merge option\" is used to update partial option but not\r\n *     be expected to change the order.\r\n *\r\n * Mode \"replaceMege\":\r\n *     (1) Only the id mapped components will be merged.\r\n *     (2) Other existing components (except internal components) will be removed.\r\n *     (3) Other new options will be used to create new component.\r\n *     (4) The index of the existing components will not be modified.\r\n *     That means their might be \"hole\" after the removal.\r\n *     The new components are created first at those available index.\r\n *\r\n * Mode \"replaceAll\":\r\n *     This mode try to support that reproduce an echarts instance from another\r\n *     echarts instance (via `getOption`) in some simple cases.\r\n *     In this scenario, the `result` index are exactly the consistent with the `newCmptOptions`,\r\n *     which ensures the component index referring (like `xAxisIndex: ?`) corrent. That is,\r\n *     the \"hole\" in `newCmptOptions` will also be kept.\r\n *     On the contrary, other modes try best to eliminate holes.\r\n *     PENDING: This is an experimental mode yet.\r\n *\r\n * @return See the comment of <MappingResult>.\r\n */\r\nexport function mappingToExists(existings, newCmptOptions, mode) {\r\n  var isNormalMergeMode = mode === 'normalMerge';\r\n  var isReplaceMergeMode = mode === 'replaceMerge';\r\n  var isReplaceAllMode = mode === 'replaceAll';\r\n  existings = existings || [];\r\n  newCmptOptions = (newCmptOptions || []).slice();\r\n  var existingIdIdxMap = createHashMap();\r\n  // Validate id and name on user input option.\r\n  each(newCmptOptions, function (cmptOption, index) {\r\n    if (!isObject(cmptOption)) {\r\n      newCmptOptions[index] = null;\r\n      return;\r\n    }\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      // There is some legacy case that name is set as `false`.\r\n      // But should work normally rather than throw error.\r\n      if (cmptOption.id != null && !isValidIdOrName(cmptOption.id)) {\r\n        warnInvalidateIdOrName(cmptOption.id);\r\n      }\r\n      if (cmptOption.name != null && !isValidIdOrName(cmptOption.name)) {\r\n        warnInvalidateIdOrName(cmptOption.name);\r\n      }\r\n    }\r\n  });\r\n  var result = prepareResult(existings, existingIdIdxMap, mode);\r\n  if (isNormalMergeMode || isReplaceMergeMode) {\r\n    mappingById(result, existings, existingIdIdxMap, newCmptOptions);\r\n  }\r\n  if (isNormalMergeMode) {\r\n    mappingByName(result, newCmptOptions);\r\n  }\r\n  if (isNormalMergeMode || isReplaceMergeMode) {\r\n    mappingByIndex(result, newCmptOptions, isReplaceMergeMode);\r\n  } else if (isReplaceAllMode) {\r\n    mappingInReplaceAllMode(result, newCmptOptions);\r\n  }\r\n  makeIdAndName(result);\r\n  // The array `result` MUST NOT contain elided items, otherwise the\r\n  // forEach will omit those items and result in incorrect result.\r\n  return result;\r\n}\r\nfunction prepareResult(existings, existingIdIdxMap, mode) {\r\n  var result = [];\r\n  if (mode === 'replaceAll') {\r\n    return result;\r\n  }\r\n  // Do not use native `map` to in case that the array `existings`\r\n  // contains elided items, which will be omitted.\r\n  for (var index = 0; index < existings.length; index++) {\r\n    var existing = existings[index];\r\n    // Because of replaceMerge, `existing` may be null/undefined.\r\n    if (existing && existing.id != null) {\r\n      existingIdIdxMap.set(existing.id, index);\r\n    }\r\n    // For non-internal-componnets:\r\n    //     Mode \"normalMerge\": all existings kept.\r\n    //     Mode \"replaceMerge\": all existing removed unless mapped by id.\r\n    // For internal-components:\r\n    //     go with \"replaceMerge\" approach in both mode.\r\n    result.push({\r\n      existing: mode === 'replaceMerge' || isComponentIdInternal(existing) ? null : existing,\r\n      newOption: null,\r\n      keyInfo: null,\r\n      brandNew: null\r\n    });\r\n  }\r\n  return result;\r\n}\r\nfunction mappingById(result, existings, existingIdIdxMap, newCmptOptions) {\r\n  // Mapping by id if specified.\r\n  each(newCmptOptions, function (cmptOption, index) {\r\n    if (!cmptOption || cmptOption.id == null) {\r\n      return;\r\n    }\r\n    var optionId = makeComparableKey(cmptOption.id);\r\n    var existingIdx = existingIdIdxMap.get(optionId);\r\n    if (existingIdx != null) {\r\n      var resultItem = result[existingIdx];\r\n      assert(!resultItem.newOption, 'Duplicated option on id \"' + optionId + '\".');\r\n      resultItem.newOption = cmptOption;\r\n      // In both mode, if id matched, new option will be merged to\r\n      // the existings rather than creating new component model.\r\n      resultItem.existing = existings[existingIdx];\r\n      newCmptOptions[index] = null;\r\n    }\r\n  });\r\n}\r\nfunction mappingByName(result, newCmptOptions) {\r\n  // Mapping by name if specified.\r\n  each(newCmptOptions, function (cmptOption, index) {\r\n    if (!cmptOption || cmptOption.name == null) {\r\n      return;\r\n    }\r\n    for (var i = 0; i < result.length; i++) {\r\n      var existing = result[i].existing;\r\n      if (!result[i].newOption // Consider name: two map to one.\r\n      // Can not match when both ids existing but different.\r\n      && existing && (existing.id == null || cmptOption.id == null) && !isComponentIdInternal(cmptOption) && !isComponentIdInternal(existing) && keyExistAndEqual('name', existing, cmptOption)) {\r\n        result[i].newOption = cmptOption;\r\n        newCmptOptions[index] = null;\r\n        return;\r\n      }\r\n    }\r\n  });\r\n}\r\nfunction mappingByIndex(result, newCmptOptions, brandNew) {\r\n  each(newCmptOptions, function (cmptOption) {\r\n    if (!cmptOption) {\r\n      return;\r\n    }\r\n    // Find the first place that not mapped by id and not internal component (consider the \"hole\").\r\n    var resultItem;\r\n    var nextIdx = 0;\r\n    while (\r\n    // Be `!resultItem` only when `nextIdx >= result.length`.\r\n    (resultItem = result[nextIdx]\r\n    // (1) Existing models that already have id should be able to mapped to. Because\r\n    // after mapping performed, model will always be assigned with an id if user not given.\r\n    // After that all models have id.\r\n    // (2) If new option has id, it can only set to a hole or append to the last. It should\r\n    // not be merged to the existings with different id. Because id should not be overwritten.\r\n    // (3) Name can be overwritten, because axis use name as 'show label text'.\r\n    ) && (resultItem.newOption || isComponentIdInternal(resultItem.existing) ||\r\n    // In mode \"replaceMerge\", here no not-mapped-non-internal-existing.\r\n    resultItem.existing && cmptOption.id != null && !keyExistAndEqual('id', cmptOption, resultItem.existing))) {\r\n      nextIdx++;\r\n    }\r\n    if (resultItem) {\r\n      resultItem.newOption = cmptOption;\r\n      resultItem.brandNew = brandNew;\r\n    } else {\r\n      result.push({\r\n        newOption: cmptOption,\r\n        brandNew: brandNew,\r\n        existing: null,\r\n        keyInfo: null\r\n      });\r\n    }\r\n    nextIdx++;\r\n  });\r\n}\r\nfunction mappingInReplaceAllMode(result, newCmptOptions) {\r\n  each(newCmptOptions, function (cmptOption) {\r\n    // The feature \"reproduce\" requires \"hole\" will also reproduced\r\n    // in case that component index referring are broken.\r\n    result.push({\r\n      newOption: cmptOption,\r\n      brandNew: true,\r\n      existing: null,\r\n      keyInfo: null\r\n    });\r\n  });\r\n}\r\n/**\r\n * Make id and name for mapping result (result of mappingToExists)\r\n * into `keyInfo` field.\r\n */\r\nfunction makeIdAndName(mapResult) {\r\n  // We use this id to hash component models and view instances\r\n  // in echarts. id can be specified by user, or auto generated.\r\n  // The id generation rule ensures new view instance are able\r\n  // to mapped to old instance when setOption are called in\r\n  // no-merge mode. So we generate model id by name and plus\r\n  // type in view id.\r\n  // name can be duplicated among components, which is convenient\r\n  // to specify multi components (like series) by one name.\r\n  // Ensure that each id is distinct.\r\n  var idMap = createHashMap();\r\n  each(mapResult, function (item) {\r\n    var existing = item.existing;\r\n    existing && idMap.set(existing.id, item);\r\n  });\r\n  each(mapResult, function (item) {\r\n    var opt = item.newOption;\r\n    // Force ensure id not duplicated.\r\n    assert(!opt || opt.id == null || !idMap.get(opt.id) || idMap.get(opt.id) === item, 'id duplicates: ' + (opt && opt.id));\r\n    opt && opt.id != null && idMap.set(opt.id, item);\r\n    !item.keyInfo && (item.keyInfo = {});\r\n  });\r\n  // Make name and id.\r\n  each(mapResult, function (item, index) {\r\n    var existing = item.existing;\r\n    var opt = item.newOption;\r\n    var keyInfo = item.keyInfo;\r\n    if (!isObject(opt)) {\r\n      return;\r\n    }\r\n    // Name can be overwritten. Consider case: axis.name = '20km'.\r\n    // But id generated by name will not be changed, which affect\r\n    // only in that case: setOption with 'not merge mode' and view\r\n    // instance will be recreated, which can be accepted.\r\n    keyInfo.name = opt.name != null ? makeComparableKey(opt.name) : existing ? existing.name\r\n    // Avoid that different series has the same name,\r\n    // because name may be used like in color pallet.\r\n    : DUMMY_COMPONENT_NAME_PREFIX + index;\r\n    if (existing) {\r\n      keyInfo.id = makeComparableKey(existing.id);\r\n    } else if (opt.id != null) {\r\n      keyInfo.id = makeComparableKey(opt.id);\r\n    } else {\r\n      // Consider this situatoin:\r\n      //  optionA: [{name: 'a'}, {name: 'a'}, {..}]\r\n      //  optionB [{..}, {name: 'a'}, {name: 'a'}]\r\n      // Series with the same name between optionA and optionB\r\n      // should be mapped.\r\n      var idNum = 0;\r\n      do {\r\n        keyInfo.id = '\\0' + keyInfo.name + '\\0' + idNum++;\r\n      } while (idMap.get(keyInfo.id));\r\n    }\r\n    idMap.set(keyInfo.id, item);\r\n  });\r\n}\r\nfunction keyExistAndEqual(attr, obj1, obj2) {\r\n  var key1 = convertOptionIdName(obj1[attr], null);\r\n  var key2 = convertOptionIdName(obj2[attr], null);\r\n  // See `MappingExistingItem`. `id` and `name` trade string equals to number.\r\n  return key1 != null && key2 != null && key1 === key2;\r\n}\r\n/**\r\n * @return return null if not exist.\r\n */\r\nfunction makeComparableKey(val) {\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    if (val == null) {\r\n      throw new Error();\r\n    }\r\n  }\r\n  return convertOptionIdName(val, '');\r\n}\r\nexport function convertOptionIdName(idOrName, defaultValue) {\r\n  if (idOrName == null) {\r\n    return defaultValue;\r\n  }\r\n  return isString(idOrName) ? idOrName : isNumber(idOrName) || isStringSafe(idOrName) ? idOrName + '' : defaultValue;\r\n}\r\nfunction warnInvalidateIdOrName(idOrName) {\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    warn('`' + idOrName + '` is invalid id or name. Must be a string or number.');\r\n  }\r\n}\r\nfunction isValidIdOrName(idOrName) {\r\n  return isStringSafe(idOrName) || isNumeric(idOrName);\r\n}\r\nexport function isNameSpecified(componentModel) {\r\n  var name = componentModel.name;\r\n  // Is specified when `indexOf` get -1 or > 0.\r\n  return !!(name && name.indexOf(DUMMY_COMPONENT_NAME_PREFIX));\r\n}\r\n/**\r\n * @public\r\n * @param {Object} cmptOption\r\n * @return {boolean}\r\n */\r\nexport function isComponentIdInternal(cmptOption) {\r\n  return cmptOption && cmptOption.id != null && makeComparableKey(cmptOption.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX) === 0;\r\n}\r\nexport function makeInternalComponentId(idSuffix) {\r\n  return INTERNAL_COMPONENT_ID_PREFIX + idSuffix;\r\n}\r\nexport function setComponentTypeToKeyInfo(mappingResult, mainType, componentModelCtor) {\r\n  // Set mainType and complete subType.\r\n  each(mappingResult, function (item) {\r\n    var newOption = item.newOption;\r\n    if (isObject(newOption)) {\r\n      item.keyInfo.mainType = mainType;\r\n      item.keyInfo.subType = determineSubType(mainType, newOption, item.existing, componentModelCtor);\r\n    }\r\n  });\r\n}\r\nfunction determineSubType(mainType, newCmptOption, existComponent, componentModelCtor) {\r\n  var subType = newCmptOption.type ? newCmptOption.type : existComponent ? existComponent.subType\r\n  // Use determineSubType only when there is no existComponent.\r\n  : componentModelCtor.determineSubType(mainType, newCmptOption);\r\n  // tooltip, markline, markpoint may always has no subType\r\n  return subType;\r\n}\r\n/**\r\n * A helper for removing duplicate items between batchA and batchB,\r\n * and in themselves, and categorize by series.\r\n *\r\n * @param batchA Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\r\n * @param batchB Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\r\n * @return result: [resultBatchA, resultBatchB]\r\n */\r\nexport function compressBatches(batchA, batchB) {\r\n  var mapA = {};\r\n  var mapB = {};\r\n  makeMap(batchA || [], mapA);\r\n  makeMap(batchB || [], mapB, mapA);\r\n  return [mapToArray(mapA), mapToArray(mapB)];\r\n  function makeMap(sourceBatch, map, otherMap) {\r\n    for (var i = 0, len = sourceBatch.length; i < len; i++) {\r\n      var seriesId = convertOptionIdName(sourceBatch[i].seriesId, null);\r\n      if (seriesId == null) {\r\n        return;\r\n      }\r\n      var dataIndices = normalizeToArray(sourceBatch[i].dataIndex);\r\n      var otherDataIndices = otherMap && otherMap[seriesId];\r\n      for (var j = 0, lenj = dataIndices.length; j < lenj; j++) {\r\n        var dataIndex = dataIndices[j];\r\n        if (otherDataIndices && otherDataIndices[dataIndex]) {\r\n          otherDataIndices[dataIndex] = null;\r\n        } else {\r\n          (map[seriesId] || (map[seriesId] = {}))[dataIndex] = 1;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  function mapToArray(map, isData) {\r\n    var result = [];\r\n    for (var i in map) {\r\n      if (map.hasOwnProperty(i) && map[i] != null) {\r\n        if (isData) {\r\n          result.push(+i);\r\n        } else {\r\n          var dataIndices = mapToArray(map[i], true);\r\n          dataIndices.length && result.push({\r\n            seriesId: i,\r\n            dataIndex: dataIndices\r\n          });\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n}\r\n/**\r\n * @param payload Contains dataIndex (means rawIndex) / dataIndexInside / name\r\n *                         each of which can be Array or primary type.\r\n * @return dataIndex If not found, return undefined/null.\r\n */\r\nexport function queryDataIndex(data, payload) {\r\n  if (payload.dataIndexInside != null) {\r\n    return payload.dataIndexInside;\r\n  } else if (payload.dataIndex != null) {\r\n    return isArray(payload.dataIndex) ? map(payload.dataIndex, function (value) {\r\n      return data.indexOfRawIndex(value);\r\n    }) : data.indexOfRawIndex(payload.dataIndex);\r\n  } else if (payload.name != null) {\r\n    return isArray(payload.name) ? map(payload.name, function (value) {\r\n      return data.indexOfName(value);\r\n    }) : data.indexOfName(payload.name);\r\n  }\r\n}\r\n/**\r\n * Enable property storage to any host object.\r\n * Notice: Serialization is not supported.\r\n *\r\n * For example:\r\n * let inner = zrUitl.makeInner();\r\n *\r\n * function some1(hostObj) {\r\n *      inner(hostObj).someProperty = 1212;\r\n *      ...\r\n * }\r\n * function some2() {\r\n *      let fields = inner(this);\r\n *      fields.someProperty1 = 1212;\r\n *      fields.someProperty2 = 'xx';\r\n *      ...\r\n * }\r\n *\r\n * @return {Function}\r\n */\r\nexport function makeInner() {\r\n  var key = '__ec_inner_' + innerUniqueIndex++;\r\n  return function (hostObj) {\r\n    return hostObj[key] || (hostObj[key] = {});\r\n  };\r\n}\r\nvar innerUniqueIndex = getRandomIdBase();\r\n/**\r\n * The same behavior as `component.getReferringComponents`.\r\n */\r\nexport function parseFinder(ecModel, finderInput, opt) {\r\n  var _a = preParseFinder(finderInput, opt),\r\n    mainTypeSpecified = _a.mainTypeSpecified,\r\n    queryOptionMap = _a.queryOptionMap,\r\n    others = _a.others;\r\n  var result = others;\r\n  var defaultMainType = opt ? opt.defaultMainType : null;\r\n  if (!mainTypeSpecified && defaultMainType) {\r\n    queryOptionMap.set(defaultMainType, {});\r\n  }\r\n  queryOptionMap.each(function (queryOption, mainType) {\r\n    var queryResult = queryReferringComponents(ecModel, mainType, queryOption, {\r\n      useDefault: defaultMainType === mainType,\r\n      enableAll: opt && opt.enableAll != null ? opt.enableAll : true,\r\n      enableNone: opt && opt.enableNone != null ? opt.enableNone : true\r\n    });\r\n    result[mainType + 'Models'] = queryResult.models;\r\n    result[mainType + 'Model'] = queryResult.models[0];\r\n  });\r\n  return result;\r\n}\r\nexport function preParseFinder(finderInput, opt) {\r\n  var finder;\r\n  if (isString(finderInput)) {\r\n    var obj = {};\r\n    obj[finderInput + 'Index'] = 0;\r\n    finder = obj;\r\n  } else {\r\n    finder = finderInput;\r\n  }\r\n  var queryOptionMap = createHashMap();\r\n  var others = {};\r\n  var mainTypeSpecified = false;\r\n  each(finder, function (value, key) {\r\n    // Exclude 'dataIndex' and other illgal keys.\r\n    if (key === 'dataIndex' || key === 'dataIndexInside') {\r\n      others[key] = value;\r\n      return;\r\n    }\r\n    var parsedKey = key.match(/^(\\w+)(Index|Id|Name)$/) || [];\r\n    var mainType = parsedKey[1];\r\n    var queryType = (parsedKey[2] || '').toLowerCase();\r\n    if (!mainType || !queryType || opt && opt.includeMainTypes && indexOf(opt.includeMainTypes, mainType) < 0) {\r\n      return;\r\n    }\r\n    mainTypeSpecified = mainTypeSpecified || !!mainType;\r\n    var queryOption = queryOptionMap.get(mainType) || queryOptionMap.set(mainType, {});\r\n    queryOption[queryType] = value;\r\n  });\r\n  return {\r\n    mainTypeSpecified: mainTypeSpecified,\r\n    queryOptionMap: queryOptionMap,\r\n    others: others\r\n  };\r\n}\r\nexport var SINGLE_REFERRING = {\r\n  useDefault: true,\r\n  enableAll: false,\r\n  enableNone: false\r\n};\r\nexport var MULTIPLE_REFERRING = {\r\n  useDefault: false,\r\n  enableAll: true,\r\n  enableNone: true\r\n};\r\nexport function queryReferringComponents(ecModel, mainType, userOption, opt) {\r\n  opt = opt || SINGLE_REFERRING;\r\n  var indexOption = userOption.index;\r\n  var idOption = userOption.id;\r\n  var nameOption = userOption.name;\r\n  var result = {\r\n    models: null,\r\n    specified: indexOption != null || idOption != null || nameOption != null\r\n  };\r\n  if (!result.specified) {\r\n    // Use the first as default if `useDefault`.\r\n    var firstCmpt = void 0;\r\n    result.models = opt.useDefault && (firstCmpt = ecModel.getComponent(mainType)) ? [firstCmpt] : [];\r\n    return result;\r\n  }\r\n  if (indexOption === 'none' || indexOption === false) {\r\n    assert(opt.enableNone, '`\"none\"` or `false` is not a valid value on index option.');\r\n    result.models = [];\r\n    return result;\r\n  }\r\n  // `queryComponents` will return all components if\r\n  // both all of index/id/name are null/undefined.\r\n  if (indexOption === 'all') {\r\n    assert(opt.enableAll, '`\"all\"` is not a valid value on index option.');\r\n    indexOption = idOption = nameOption = null;\r\n  }\r\n  result.models = ecModel.queryComponents({\r\n    mainType: mainType,\r\n    index: indexOption,\r\n    id: idOption,\r\n    name: nameOption\r\n  });\r\n  return result;\r\n}\r\nexport function setAttribute(dom, key, value) {\r\n  dom.setAttribute ? dom.setAttribute(key, value) : dom[key] = value;\r\n}\r\nexport function getAttribute(dom, key) {\r\n  return dom.getAttribute ? dom.getAttribute(key) : dom[key];\r\n}\r\nexport function getTooltipRenderMode(renderModeOption) {\r\n  if (renderModeOption === 'auto') {\r\n    // Using html when `document` exists, use richText otherwise\r\n    return env.domSupported ? 'html' : 'richText';\r\n  } else {\r\n    return renderModeOption || 'html';\r\n  }\r\n}\r\n/**\r\n * Group a list by key.\r\n */\r\nexport function groupData(array, getKey // return key\r\n) {\r\n  var buckets = createHashMap();\r\n  var keys = [];\r\n  each(array, function (item) {\r\n    var key = getKey(item);\r\n    (buckets.get(key) || (keys.push(key), buckets.set(key, []))).push(item);\r\n  });\r\n  return {\r\n    keys: keys,\r\n    buckets: buckets\r\n  };\r\n}\r\n/**\r\n * Interpolate raw values of a series with percent\r\n *\r\n * @param data         data\r\n * @param labelModel   label model of the text element\r\n * @param sourceValue  start value. May be null/undefined when init.\r\n * @param targetValue  end value\r\n * @param percent      0~1 percentage; 0 uses start value while 1 uses end value\r\n * @return             interpolated values\r\n *                     If `sourceValue` and `targetValue` are `number`, return `number`.\r\n *                     If `sourceValue` and `targetValue` are `string`, return `string`.\r\n *                     If `sourceValue` and `targetValue` are `(string | number)[]`, return `(string | number)[]`.\r\n *                     Other cases do not supported.\r\n */\r\nexport function interpolateRawValues(data, precision, sourceValue, targetValue, percent) {\r\n  var isAutoPrecision = precision == null || precision === 'auto';\r\n  if (targetValue == null) {\r\n    return targetValue;\r\n  }\r\n  if (isNumber(targetValue)) {\r\n    var value = interpolateNumber(sourceValue || 0, targetValue, percent);\r\n    return round(value, isAutoPrecision ? Math.max(getPrecision(sourceValue || 0), getPrecision(targetValue)) : precision);\r\n  } else if (isString(targetValue)) {\r\n    return percent < 1 ? sourceValue : targetValue;\r\n  } else {\r\n    var interpolated = [];\r\n    var leftArr = sourceValue;\r\n    var rightArr = targetValue;\r\n    var length_1 = Math.max(leftArr ? leftArr.length : 0, rightArr.length);\r\n    for (var i = 0; i < length_1; ++i) {\r\n      var info = data.getDimensionInfo(i);\r\n      // Don't interpolate ordinal dims\r\n      if (info && info.type === 'ordinal') {\r\n        // In init, there is no `sourceValue`, but should better not to get undefined result.\r\n        interpolated[i] = (percent < 1 && leftArr ? leftArr : rightArr)[i];\r\n      } else {\r\n        var leftVal = leftArr && leftArr[i] ? leftArr[i] : 0;\r\n        var rightVal = rightArr[i];\r\n        var value = interpolateNumber(leftVal, rightVal, percent);\r\n        interpolated[i] = round(value, isAutoPrecision ? Math.max(getPrecision(leftVal), getPrecision(rightVal)) : precision);\r\n      }\r\n    }\r\n    return interpolated;\r\n  }\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { makeInner } from './model.js';\r\nexport var getECData = makeInner();\r\nexport var setCommonECData = function (seriesIndex, dataType, dataIdx, el) {\r\n  if (el) {\r\n    var ecData = getECData(el);\r\n    // Add data index and series index for indexing the data by element\r\n    // Useful in tooltip\r\n    ecData.dataIndex = dataIdx;\r\n    ecData.dataType = dataType;\r\n    ecData.seriesIndex = seriesIndex;\r\n    ecData.ssrType = 'chart';\r\n    // TODO: not store dataIndex on children.\r\n    if (el.type === 'group') {\r\n      el.traverse(function (child) {\r\n        var childECData = getECData(child);\r\n        childECData.seriesIndex = seriesIndex;\r\n        childECData.dataIndex = dataIdx;\r\n        childECData.dataType = dataType;\r\n        childECData.ssrType = 'chart';\r\n      });\r\n    }\r\n  }\r\n};", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { extend, indexOf, isArrayLike, isObject, keys, isArray, each } from 'zrender/lib/core/util.js';\r\nimport { getECData } from './innerStore.js';\r\nimport { liftColor } from 'zrender/lib/tool/color.js';\r\nimport { queryDataIndex, makeInner } from './model.js';\r\nimport Path from 'zrender/lib/graphic/Path.js';\r\nimport { error } from './log.js';\r\n// Reserve 0 as default.\r\nvar _highlightNextDigit = 1;\r\nvar _highlightKeyMap = {};\r\nvar getSavedStates = makeInner();\r\nvar getComponentStates = makeInner();\r\nexport var HOVER_STATE_NORMAL = 0;\r\nexport var HOVER_STATE_BLUR = 1;\r\nexport var HOVER_STATE_EMPHASIS = 2;\r\nexport var SPECIAL_STATES = ['emphasis', 'blur', 'select'];\r\nexport var DISPLAY_STATES = ['normal', 'emphasis', 'blur', 'select'];\r\nexport var Z2_EMPHASIS_LIFT = 10;\r\nexport var Z2_SELECT_LIFT = 9;\r\nexport var HIGHLIGHT_ACTION_TYPE = 'highlight';\r\nexport var DOWNPLAY_ACTION_TYPE = 'downplay';\r\nexport var SELECT_ACTION_TYPE = 'select';\r\nexport var UNSELECT_ACTION_TYPE = 'unselect';\r\nexport var TOGGLE_SELECT_ACTION_TYPE = 'toggleSelect';\r\nfunction hasFillOrStroke(fillOrStroke) {\r\n  return fillOrStroke != null && fillOrStroke !== 'none';\r\n}\r\nfunction doChangeHoverState(el, stateName, hoverStateEnum) {\r\n  if (el.onHoverStateChange && (el.hoverState || 0) !== hoverStateEnum) {\r\n    el.onHoverStateChange(stateName);\r\n  }\r\n  el.hoverState = hoverStateEnum;\r\n}\r\nfunction singleEnterEmphasis(el) {\r\n  // Only mark the flag.\r\n  // States will be applied in the echarts.ts in next frame.\r\n  doChangeHoverState(el, 'emphasis', HOVER_STATE_EMPHASIS);\r\n}\r\nfunction singleLeaveEmphasis(el) {\r\n  // Only mark the flag.\r\n  // States will be applied in the echarts.ts in next frame.\r\n  if (el.hoverState === HOVER_STATE_EMPHASIS) {\r\n    doChangeHoverState(el, 'normal', HOVER_STATE_NORMAL);\r\n  }\r\n}\r\nfunction singleEnterBlur(el) {\r\n  doChangeHoverState(el, 'blur', HOVER_STATE_BLUR);\r\n}\r\nfunction singleLeaveBlur(el) {\r\n  if (el.hoverState === HOVER_STATE_BLUR) {\r\n    doChangeHoverState(el, 'normal', HOVER_STATE_NORMAL);\r\n  }\r\n}\r\nfunction singleEnterSelect(el) {\r\n  el.selected = true;\r\n}\r\nfunction singleLeaveSelect(el) {\r\n  el.selected = false;\r\n}\r\nfunction updateElementState(el, updater, commonParam) {\r\n  updater(el, commonParam);\r\n}\r\nfunction traverseUpdateState(el, updater, commonParam) {\r\n  updateElementState(el, updater, commonParam);\r\n  el.isGroup && el.traverse(function (child) {\r\n    updateElementState(child, updater, commonParam);\r\n  });\r\n}\r\nexport function setStatesFlag(el, stateName) {\r\n  switch (stateName) {\r\n    case 'emphasis':\r\n      el.hoverState = HOVER_STATE_EMPHASIS;\r\n      break;\r\n    case 'normal':\r\n      el.hoverState = HOVER_STATE_NORMAL;\r\n      break;\r\n    case 'blur':\r\n      el.hoverState = HOVER_STATE_BLUR;\r\n      break;\r\n    case 'select':\r\n      el.selected = true;\r\n  }\r\n}\r\n/**\r\n * If we reuse elements when rerender.\r\n * DON'T forget to clearStates before we update the style and shape.\r\n * Or we may update on the wrong state instead of normal state.\r\n */\r\nexport function clearStates(el) {\r\n  if (el.isGroup) {\r\n    el.traverse(function (child) {\r\n      child.clearStates();\r\n    });\r\n  } else {\r\n    el.clearStates();\r\n  }\r\n}\r\nfunction getFromStateStyle(el, props, toStateName, defaultValue) {\r\n  var style = el.style;\r\n  var fromState = {};\r\n  for (var i = 0; i < props.length; i++) {\r\n    var propName = props[i];\r\n    var val = style[propName];\r\n    fromState[propName] = val == null ? defaultValue && defaultValue[propName] : val;\r\n  }\r\n  for (var i = 0; i < el.animators.length; i++) {\r\n    var animator = el.animators[i];\r\n    if (animator.__fromStateTransition\r\n    // Don't consider the animation to emphasis state.\r\n    && animator.__fromStateTransition.indexOf(toStateName) < 0 && animator.targetName === 'style') {\r\n      animator.saveTo(fromState, props);\r\n    }\r\n  }\r\n  return fromState;\r\n}\r\nfunction createEmphasisDefaultState(el, stateName, targetStates, state) {\r\n  var hasSelect = targetStates && indexOf(targetStates, 'select') >= 0;\r\n  var cloned = false;\r\n  if (el instanceof Path) {\r\n    var store = getSavedStates(el);\r\n    var fromFill = hasSelect ? store.selectFill || store.normalFill : store.normalFill;\r\n    var fromStroke = hasSelect ? store.selectStroke || store.normalStroke : store.normalStroke;\r\n    if (hasFillOrStroke(fromFill) || hasFillOrStroke(fromStroke)) {\r\n      state = state || {};\r\n      var emphasisStyle = state.style || {};\r\n      // inherit case\r\n      if (emphasisStyle.fill === 'inherit') {\r\n        cloned = true;\r\n        state = extend({}, state);\r\n        emphasisStyle = extend({}, emphasisStyle);\r\n        emphasisStyle.fill = fromFill;\r\n      }\r\n      // Apply default color lift\r\n      else if (!hasFillOrStroke(emphasisStyle.fill) && hasFillOrStroke(fromFill)) {\r\n        cloned = true;\r\n        // Not modify the original value.\r\n        state = extend({}, state);\r\n        emphasisStyle = extend({}, emphasisStyle);\r\n        // Already being applied 'emphasis'. DON'T lift color multiple times.\r\n        emphasisStyle.fill = liftColor(fromFill);\r\n      }\r\n      // Not highlight stroke if fill has been highlighted.\r\n      else if (!hasFillOrStroke(emphasisStyle.stroke) && hasFillOrStroke(fromStroke)) {\r\n        if (!cloned) {\r\n          state = extend({}, state);\r\n          emphasisStyle = extend({}, emphasisStyle);\r\n        }\r\n        emphasisStyle.stroke = liftColor(fromStroke);\r\n      }\r\n      state.style = emphasisStyle;\r\n    }\r\n  }\r\n  if (state) {\r\n    // TODO Share with textContent?\r\n    if (state.z2 == null) {\r\n      if (!cloned) {\r\n        state = extend({}, state);\r\n      }\r\n      var z2EmphasisLift = el.z2EmphasisLift;\r\n      state.z2 = el.z2 + (z2EmphasisLift != null ? z2EmphasisLift : Z2_EMPHASIS_LIFT);\r\n    }\r\n  }\r\n  return state;\r\n}\r\nfunction createSelectDefaultState(el, stateName, state) {\r\n  // const hasSelect = indexOf(el.currentStates, stateName) >= 0;\r\n  if (state) {\r\n    // TODO Share with textContent?\r\n    if (state.z2 == null) {\r\n      state = extend({}, state);\r\n      var z2SelectLift = el.z2SelectLift;\r\n      state.z2 = el.z2 + (z2SelectLift != null ? z2SelectLift : Z2_SELECT_LIFT);\r\n    }\r\n  }\r\n  return state;\r\n}\r\nfunction createBlurDefaultState(el, stateName, state) {\r\n  var hasBlur = indexOf(el.currentStates, stateName) >= 0;\r\n  var currentOpacity = el.style.opacity;\r\n  var fromState = !hasBlur ? getFromStateStyle(el, ['opacity'], stateName, {\r\n    opacity: 1\r\n  }) : null;\r\n  state = state || {};\r\n  var blurStyle = state.style || {};\r\n  if (blurStyle.opacity == null) {\r\n    // clone state\r\n    state = extend({}, state);\r\n    blurStyle = extend({\r\n      // Already being applied 'emphasis'. DON'T mul opacity multiple times.\r\n      opacity: hasBlur ? currentOpacity : fromState.opacity * 0.1\r\n    }, blurStyle);\r\n    state.style = blurStyle;\r\n  }\r\n  return state;\r\n}\r\nfunction elementStateProxy(stateName, targetStates) {\r\n  var state = this.states[stateName];\r\n  if (this.style) {\r\n    if (stateName === 'emphasis') {\r\n      return createEmphasisDefaultState(this, stateName, targetStates, state);\r\n    } else if (stateName === 'blur') {\r\n      return createBlurDefaultState(this, stateName, state);\r\n    } else if (stateName === 'select') {\r\n      return createSelectDefaultState(this, stateName, state);\r\n    }\r\n  }\r\n  return state;\r\n}\r\n/**\r\n * Set hover style (namely \"emphasis style\") of element.\r\n * @param el Should not be `zrender/graphic/Group`.\r\n * @param focus 'self' | 'selfInSeries' | 'series'\r\n */\r\nexport function setDefaultStateProxy(el) {\r\n  el.stateProxy = elementStateProxy;\r\n  var textContent = el.getTextContent();\r\n  var textGuide = el.getTextGuideLine();\r\n  if (textContent) {\r\n    textContent.stateProxy = elementStateProxy;\r\n  }\r\n  if (textGuide) {\r\n    textGuide.stateProxy = elementStateProxy;\r\n  }\r\n}\r\nexport function enterEmphasisWhenMouseOver(el, e) {\r\n  !shouldSilent(el, e)\r\n  // \"emphasis\" event highlight has higher priority than mouse highlight.\r\n  && !el.__highByOuter && traverseUpdateState(el, singleEnterEmphasis);\r\n}\r\nexport function leaveEmphasisWhenMouseOut(el, e) {\r\n  !shouldSilent(el, e)\r\n  // \"emphasis\" event highlight has higher priority than mouse highlight.\r\n  && !el.__highByOuter && traverseUpdateState(el, singleLeaveEmphasis);\r\n}\r\nexport function enterEmphasis(el, highlightDigit) {\r\n  el.__highByOuter |= 1 << (highlightDigit || 0);\r\n  traverseUpdateState(el, singleEnterEmphasis);\r\n}\r\nexport function leaveEmphasis(el, highlightDigit) {\r\n  !(el.__highByOuter &= ~(1 << (highlightDigit || 0))) && traverseUpdateState(el, singleLeaveEmphasis);\r\n}\r\nexport function enterBlur(el) {\r\n  traverseUpdateState(el, singleEnterBlur);\r\n}\r\nexport function leaveBlur(el) {\r\n  traverseUpdateState(el, singleLeaveBlur);\r\n}\r\nexport function enterSelect(el) {\r\n  traverseUpdateState(el, singleEnterSelect);\r\n}\r\nexport function leaveSelect(el) {\r\n  traverseUpdateState(el, singleLeaveSelect);\r\n}\r\nfunction shouldSilent(el, e) {\r\n  return el.__highDownSilentOnTouch && e.zrByTouch;\r\n}\r\nexport function allLeaveBlur(api) {\r\n  var model = api.getModel();\r\n  var leaveBlurredSeries = [];\r\n  var allComponentViews = [];\r\n  model.eachComponent(function (componentType, componentModel) {\r\n    var componentStates = getComponentStates(componentModel);\r\n    var isSeries = componentType === 'series';\r\n    var view = isSeries ? api.getViewOfSeriesModel(componentModel) : api.getViewOfComponentModel(componentModel);\r\n    !isSeries && allComponentViews.push(view);\r\n    if (componentStates.isBlured) {\r\n      // Leave blur anyway\r\n      view.group.traverse(function (child) {\r\n        singleLeaveBlur(child);\r\n      });\r\n      isSeries && leaveBlurredSeries.push(componentModel);\r\n    }\r\n    componentStates.isBlured = false;\r\n  });\r\n  each(allComponentViews, function (view) {\r\n    if (view && view.toggleBlurSeries) {\r\n      view.toggleBlurSeries(leaveBlurredSeries, false, model);\r\n    }\r\n  });\r\n}\r\nexport function blurSeries(targetSeriesIndex, focus, blurScope, api) {\r\n  var ecModel = api.getModel();\r\n  blurScope = blurScope || 'coordinateSystem';\r\n  function leaveBlurOfIndices(data, dataIndices) {\r\n    for (var i = 0; i < dataIndices.length; i++) {\r\n      var itemEl = data.getItemGraphicEl(dataIndices[i]);\r\n      itemEl && leaveBlur(itemEl);\r\n    }\r\n  }\r\n  if (targetSeriesIndex == null) {\r\n    return;\r\n  }\r\n  if (!focus || focus === 'none') {\r\n    return;\r\n  }\r\n  var targetSeriesModel = ecModel.getSeriesByIndex(targetSeriesIndex);\r\n  var targetCoordSys = targetSeriesModel.coordinateSystem;\r\n  if (targetCoordSys && targetCoordSys.master) {\r\n    targetCoordSys = targetCoordSys.master;\r\n  }\r\n  var blurredSeries = [];\r\n  ecModel.eachSeries(function (seriesModel) {\r\n    var sameSeries = targetSeriesModel === seriesModel;\r\n    var coordSys = seriesModel.coordinateSystem;\r\n    if (coordSys && coordSys.master) {\r\n      coordSys = coordSys.master;\r\n    }\r\n    var sameCoordSys = coordSys && targetCoordSys ? coordSys === targetCoordSys : sameSeries; // If there is no coordinate system. use sameSeries instead.\r\n    if (!(\r\n    // Not blur other series if blurScope series\r\n    blurScope === 'series' && !sameSeries\r\n    // Not blur other coordinate system if blurScope is coordinateSystem\r\n    || blurScope === 'coordinateSystem' && !sameCoordSys\r\n    // Not blur self series if focus is series.\r\n    || focus === 'series' && sameSeries\r\n    // TODO blurScope: coordinate system\r\n    )) {\r\n      var view = api.getViewOfSeriesModel(seriesModel);\r\n      view.group.traverse(function (child) {\r\n        // For the elements that have been triggered by other components,\r\n        // and are still required to be highlighted,\r\n        // because the current is directly forced to blur the element,\r\n        // it will cause the focus self to be unable to highlight, so skip the blur of this element.\r\n        if (child.__highByOuter && sameSeries && focus === 'self') {\r\n          return;\r\n        }\r\n        singleEnterBlur(child);\r\n      });\r\n      if (isArrayLike(focus)) {\r\n        leaveBlurOfIndices(seriesModel.getData(), focus);\r\n      } else if (isObject(focus)) {\r\n        var dataTypes = keys(focus);\r\n        for (var d = 0; d < dataTypes.length; d++) {\r\n          leaveBlurOfIndices(seriesModel.getData(dataTypes[d]), focus[dataTypes[d]]);\r\n        }\r\n      }\r\n      blurredSeries.push(seriesModel);\r\n      getComponentStates(seriesModel).isBlured = true;\r\n    }\r\n  });\r\n  ecModel.eachComponent(function (componentType, componentModel) {\r\n    if (componentType === 'series') {\r\n      return;\r\n    }\r\n    var view = api.getViewOfComponentModel(componentModel);\r\n    if (view && view.toggleBlurSeries) {\r\n      view.toggleBlurSeries(blurredSeries, true, ecModel);\r\n    }\r\n  });\r\n}\r\nexport function blurComponent(componentMainType, componentIndex, api) {\r\n  if (componentMainType == null || componentIndex == null) {\r\n    return;\r\n  }\r\n  var componentModel = api.getModel().getComponent(componentMainType, componentIndex);\r\n  if (!componentModel) {\r\n    return;\r\n  }\r\n  getComponentStates(componentModel).isBlured = true;\r\n  var view = api.getViewOfComponentModel(componentModel);\r\n  if (!view || !view.focusBlurEnabled) {\r\n    return;\r\n  }\r\n  view.group.traverse(function (child) {\r\n    singleEnterBlur(child);\r\n  });\r\n}\r\nexport function blurSeriesFromHighlightPayload(seriesModel, payload, api) {\r\n  var seriesIndex = seriesModel.seriesIndex;\r\n  var data = seriesModel.getData(payload.dataType);\r\n  if (!data) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      error(\"Unknown dataType \" + payload.dataType);\r\n    }\r\n    return;\r\n  }\r\n  var dataIndex = queryDataIndex(data, payload);\r\n  // Pick the first one if there is multiple/none exists.\r\n  dataIndex = (isArray(dataIndex) ? dataIndex[0] : dataIndex) || 0;\r\n  var el = data.getItemGraphicEl(dataIndex);\r\n  if (!el) {\r\n    var count = data.count();\r\n    var current = 0;\r\n    // If data on dataIndex is NaN.\r\n    while (!el && current < count) {\r\n      el = data.getItemGraphicEl(current++);\r\n    }\r\n  }\r\n  if (el) {\r\n    var ecData = getECData(el);\r\n    blurSeries(seriesIndex, ecData.focus, ecData.blurScope, api);\r\n  } else {\r\n    // If there is no element put on the data. Try getting it from raw option\r\n    // TODO Should put it on seriesModel?\r\n    var focus_1 = seriesModel.get(['emphasis', 'focus']);\r\n    var blurScope = seriesModel.get(['emphasis', 'blurScope']);\r\n    if (focus_1 != null) {\r\n      blurSeries(seriesIndex, focus_1, blurScope, api);\r\n    }\r\n  }\r\n}\r\nexport function findComponentHighDownDispatchers(componentMainType, componentIndex, name, api) {\r\n  var ret = {\r\n    focusSelf: false,\r\n    dispatchers: null\r\n  };\r\n  if (componentMainType == null || componentMainType === 'series' || componentIndex == null || name == null) {\r\n    return ret;\r\n  }\r\n  var componentModel = api.getModel().getComponent(componentMainType, componentIndex);\r\n  if (!componentModel) {\r\n    return ret;\r\n  }\r\n  var view = api.getViewOfComponentModel(componentModel);\r\n  if (!view || !view.findHighDownDispatchers) {\r\n    return ret;\r\n  }\r\n  var dispatchers = view.findHighDownDispatchers(name);\r\n  // At presnet, the component (like Geo) only blur inside itself.\r\n  // So we do not use `blurScope` in component.\r\n  var focusSelf;\r\n  for (var i = 0; i < dispatchers.length; i++) {\r\n    if (process.env.NODE_ENV !== 'production' && !isHighDownDispatcher(dispatchers[i])) {\r\n      error('param should be highDownDispatcher');\r\n    }\r\n    if (getECData(dispatchers[i]).focus === 'self') {\r\n      focusSelf = true;\r\n      break;\r\n    }\r\n  }\r\n  return {\r\n    focusSelf: focusSelf,\r\n    dispatchers: dispatchers\r\n  };\r\n}\r\nexport function handleGlobalMouseOverForHighDown(dispatcher, e, api) {\r\n  if (process.env.NODE_ENV !== 'production' && !isHighDownDispatcher(dispatcher)) {\r\n    error('param should be highDownDispatcher');\r\n  }\r\n  var ecData = getECData(dispatcher);\r\n  var _a = findComponentHighDownDispatchers(ecData.componentMainType, ecData.componentIndex, ecData.componentHighDownName, api),\r\n    dispatchers = _a.dispatchers,\r\n    focusSelf = _a.focusSelf;\r\n  // If `findHighDownDispatchers` is supported on the component,\r\n  // highlight/downplay elements with the same name.\r\n  if (dispatchers) {\r\n    if (focusSelf) {\r\n      blurComponent(ecData.componentMainType, ecData.componentIndex, api);\r\n    }\r\n    each(dispatchers, function (dispatcher) {\r\n      return enterEmphasisWhenMouseOver(dispatcher, e);\r\n    });\r\n  } else {\r\n    // Try blur all in the related series. Then emphasis the hoverred.\r\n    // TODO. progressive mode.\r\n    blurSeries(ecData.seriesIndex, ecData.focus, ecData.blurScope, api);\r\n    if (ecData.focus === 'self') {\r\n      blurComponent(ecData.componentMainType, ecData.componentIndex, api);\r\n    }\r\n    // Other than series, component that not support `findHighDownDispatcher` will\r\n    // also use it. But in this case, highlight/downplay are only supported in\r\n    // mouse hover but not in dispatchAction.\r\n    enterEmphasisWhenMouseOver(dispatcher, e);\r\n  }\r\n}\r\nexport function handleGlobalMouseOutForHighDown(dispatcher, e, api) {\r\n  if (process.env.NODE_ENV !== 'production' && !isHighDownDispatcher(dispatcher)) {\r\n    error('param should be highDownDispatcher');\r\n  }\r\n  allLeaveBlur(api);\r\n  var ecData = getECData(dispatcher);\r\n  var dispatchers = findComponentHighDownDispatchers(ecData.componentMainType, ecData.componentIndex, ecData.componentHighDownName, api).dispatchers;\r\n  if (dispatchers) {\r\n    each(dispatchers, function (dispatcher) {\r\n      return leaveEmphasisWhenMouseOut(dispatcher, e);\r\n    });\r\n  } else {\r\n    leaveEmphasisWhenMouseOut(dispatcher, e);\r\n  }\r\n}\r\nexport function toggleSelectionFromPayload(seriesModel, payload, api) {\r\n  if (!isSelectChangePayload(payload)) {\r\n    return;\r\n  }\r\n  var dataType = payload.dataType;\r\n  var data = seriesModel.getData(dataType);\r\n  var dataIndex = queryDataIndex(data, payload);\r\n  if (!isArray(dataIndex)) {\r\n    dataIndex = [dataIndex];\r\n  }\r\n  seriesModel[payload.type === TOGGLE_SELECT_ACTION_TYPE ? 'toggleSelect' : payload.type === SELECT_ACTION_TYPE ? 'select' : 'unselect'](dataIndex, dataType);\r\n}\r\nexport function updateSeriesElementSelection(seriesModel) {\r\n  var allData = seriesModel.getAllData();\r\n  each(allData, function (_a) {\r\n    var data = _a.data,\r\n      type = _a.type;\r\n    data.eachItemGraphicEl(function (el, idx) {\r\n      seriesModel.isSelected(idx, type) ? enterSelect(el) : leaveSelect(el);\r\n    });\r\n  });\r\n}\r\nexport function getAllSelectedIndices(ecModel) {\r\n  var ret = [];\r\n  ecModel.eachSeries(function (seriesModel) {\r\n    var allData = seriesModel.getAllData();\r\n    each(allData, function (_a) {\r\n      var data = _a.data,\r\n        type = _a.type;\r\n      var dataIndices = seriesModel.getSelectedDataIndices();\r\n      if (dataIndices.length > 0) {\r\n        var item = {\r\n          dataIndex: dataIndices,\r\n          seriesIndex: seriesModel.seriesIndex\r\n        };\r\n        if (type != null) {\r\n          item.dataType = type;\r\n        }\r\n        ret.push(item);\r\n      }\r\n    });\r\n  });\r\n  return ret;\r\n}\r\n/**\r\n * Enable the function that mouseover will trigger the emphasis state.\r\n *\r\n * NOTE:\r\n * This function should be used on the element with dataIndex, seriesIndex.\r\n *\r\n */\r\nexport function enableHoverEmphasis(el, focus, blurScope) {\r\n  setAsHighDownDispatcher(el, true);\r\n  traverseUpdateState(el, setDefaultStateProxy);\r\n  enableHoverFocus(el, focus, blurScope);\r\n}\r\nexport function disableHoverEmphasis(el) {\r\n  setAsHighDownDispatcher(el, false);\r\n}\r\nexport function toggleHoverEmphasis(el, focus, blurScope, isDisabled) {\r\n  isDisabled ? disableHoverEmphasis(el) : enableHoverEmphasis(el, focus, blurScope);\r\n}\r\nexport function enableHoverFocus(el, focus, blurScope) {\r\n  var ecData = getECData(el);\r\n  if (focus != null) {\r\n    // TODO dataIndex may be set after this function. This check is not useful.\r\n    // if (ecData.dataIndex == null) {\r\n    //     if (__DEV__) {\r\n    //         console.warn('focus can only been set on element with dataIndex');\r\n    //     }\r\n    // }\r\n    // else {\r\n    ecData.focus = focus;\r\n    ecData.blurScope = blurScope;\r\n    // }\r\n  } else if (ecData.focus) {\r\n    ecData.focus = null;\r\n  }\r\n}\r\nvar OTHER_STATES = ['emphasis', 'blur', 'select'];\r\nvar defaultStyleGetterMap = {\r\n  itemStyle: 'getItemStyle',\r\n  lineStyle: 'getLineStyle',\r\n  areaStyle: 'getAreaStyle'\r\n};\r\n/**\r\n * Set emphasis/blur/selected states of element.\r\n */\r\nexport function setStatesStylesFromModel(el, itemModel, styleType,\r\n// default itemStyle\r\ngetter) {\r\n  styleType = styleType || 'itemStyle';\r\n  for (var i = 0; i < OTHER_STATES.length; i++) {\r\n    var stateName = OTHER_STATES[i];\r\n    var model = itemModel.getModel([stateName, styleType]);\r\n    var state = el.ensureState(stateName);\r\n    // Let it throw error if getterType is not found.\r\n    state.style = getter ? getter(model) : model[defaultStyleGetterMap[styleType]]();\r\n  }\r\n}\r\n/**\r\n *\r\n * Set element as highlight / downplay dispatcher.\r\n * It will be checked when element received mouseover event or from highlight action.\r\n * It's in change of all highlight/downplay behavior of it's children.\r\n *\r\n * @param el\r\n * @param el.highDownSilentOnTouch\r\n *        In touch device, mouseover event will be trigger on touchstart event\r\n *        (see module:zrender/dom/HandlerProxy). By this mechanism, we can\r\n *        conveniently use hoverStyle when tap on touch screen without additional\r\n *        code for compatibility.\r\n *        But if the chart/component has select feature, which usually also use\r\n *        hoverStyle, there might be conflict between 'select-highlight' and\r\n *        'hover-highlight' especially when roam is enabled (see geo for example).\r\n *        In this case, `highDownSilentOnTouch` should be used to disable\r\n *        hover-highlight on touch device.\r\n * @param asDispatcher If `false`, do not set as \"highDownDispatcher\".\r\n */\r\nexport function setAsHighDownDispatcher(el, asDispatcher) {\r\n  var disable = asDispatcher === false;\r\n  var extendedEl = el;\r\n  // Make `highDownSilentOnTouch` and `onStateChange` only work after\r\n  // `setAsHighDownDispatcher` called. Avoid it is modified by user unexpectedly.\r\n  if (el.highDownSilentOnTouch) {\r\n    extendedEl.__highDownSilentOnTouch = el.highDownSilentOnTouch;\r\n  }\r\n  // Simple optimize, since this method might be\r\n  // called for each elements of a group in some cases.\r\n  if (!disable || extendedEl.__highDownDispatcher) {\r\n    // Emphasis, normal can be triggered manually by API or other components like hover link.\r\n    // el[method]('emphasis', onElementEmphasisEvent)[method]('normal', onElementNormalEvent);\r\n    // Also keep previous record.\r\n    extendedEl.__highByOuter = extendedEl.__highByOuter || 0;\r\n    extendedEl.__highDownDispatcher = !disable;\r\n  }\r\n}\r\nexport function isHighDownDispatcher(el) {\r\n  return !!(el && el.__highDownDispatcher);\r\n}\r\n/**\r\n * Enable component highlight/downplay features:\r\n * + hover link (within the same name)\r\n * + focus blur in component\r\n */\r\nexport function enableComponentHighDownFeatures(el, componentModel, componentHighDownName) {\r\n  var ecData = getECData(el);\r\n  ecData.componentMainType = componentModel.mainType;\r\n  ecData.componentIndex = componentModel.componentIndex;\r\n  ecData.componentHighDownName = componentHighDownName;\r\n}\r\n/**\r\n * Support highlight/downplay record on each elements.\r\n * For the case: hover highlight/downplay (legend, visualMap, ...) and\r\n * user triggered highlight/downplay should not conflict.\r\n * Only all of the highlightDigit cleared, return to normal.\r\n * @param {string} highlightKey\r\n * @return {number} highlightDigit\r\n */\r\nexport function getHighlightDigit(highlightKey) {\r\n  var highlightDigit = _highlightKeyMap[highlightKey];\r\n  if (highlightDigit == null && _highlightNextDigit <= 32) {\r\n    highlightDigit = _highlightKeyMap[highlightKey] = _highlightNextDigit++;\r\n  }\r\n  return highlightDigit;\r\n}\r\nexport function isSelectChangePayload(payload) {\r\n  var payloadType = payload.type;\r\n  return payloadType === SELECT_ACTION_TYPE || payloadType === UNSELECT_ACTION_TYPE || payloadType === TOGGLE_SELECT_ACTION_TYPE;\r\n}\r\nexport function isHighDownPayload(payload) {\r\n  var payloadType = payload.type;\r\n  return payloadType === HIGHLIGHT_ACTION_TYPE || payloadType === DOWNPLAY_ACTION_TYPE;\r\n}\r\nexport function savePathStates(el) {\r\n  var store = getSavedStates(el);\r\n  store.normalFill = el.style.fill;\r\n  store.normalStroke = el.style.stroke;\r\n  var selectState = el.states.select || {};\r\n  store.selectFill = selectState.style && selectState.style.fill || null;\r\n  store.selectStroke = selectState.style && selectState.style.stroke || null;\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as pathTool from 'zrender/lib/tool/path.js';\r\nimport * as matrix from 'zrender/lib/core/matrix.js';\r\nimport * as vector from 'zrender/lib/core/vector.js';\r\nimport Path from 'zrender/lib/graphic/Path.js';\r\nimport Transformable from 'zrender/lib/core/Transformable.js';\r\nimport ZRImage from 'zrender/lib/graphic/Image.js';\r\nimport Group from 'zrender/lib/graphic/Group.js';\r\nimport ZRText from 'zrender/lib/graphic/Text.js';\r\nimport Circle from 'zrender/lib/graphic/shape/Circle.js';\r\nimport Ellipse from 'zrender/lib/graphic/shape/Ellipse.js';\r\nimport Sector from 'zrender/lib/graphic/shape/Sector.js';\r\nimport Ring from 'zrender/lib/graphic/shape/Ring.js';\r\nimport Polygon from 'zrender/lib/graphic/shape/Polygon.js';\r\nimport Polyline from 'zrender/lib/graphic/shape/Polyline.js';\r\nimport Rect from 'zrender/lib/graphic/shape/Rect.js';\r\nimport Line from 'zrender/lib/graphic/shape/Line.js';\r\nimport BezierCurve from 'zrender/lib/graphic/shape/BezierCurve.js';\r\nimport Arc from 'zrender/lib/graphic/shape/Arc.js';\r\nimport CompoundPath from 'zrender/lib/graphic/CompoundPath.js';\r\nimport LinearGradient from 'zrender/lib/graphic/LinearGradient.js';\r\nimport RadialGradient from 'zrender/lib/graphic/RadialGradient.js';\r\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\r\nimport OrientedBoundingRect from 'zrender/lib/core/OrientedBoundingRect.js';\r\nimport Point from 'zrender/lib/core/Point.js';\r\nimport IncrementalDisplayable from 'zrender/lib/graphic/IncrementalDisplayable.js';\r\nimport * as subPixelOptimizeUtil from 'zrender/lib/graphic/helper/subPixelOptimize.js';\r\nimport { extend, isArrayLike, map, defaults, isString, keys, each, hasOwn, isArray } from 'zrender/lib/core/util.js';\r\nimport { getECData } from './innerStore.js';\r\nimport { updateProps, initProps, removeElement, removeElementWithFadeOut, isElementRemoved } from '../animation/basicTransition.js';\r\n/**\r\n * @deprecated export for compatitable reason\r\n */\r\nexport { updateProps, initProps, removeElement, removeElementWithFadeOut, isElementRemoved };\r\nvar mathMax = Math.max;\r\nvar mathMin = Math.min;\r\nvar _customShapeMap = {};\r\n/**\r\n * Extend shape with parameters\r\n */\r\nexport function extendShape(opts) {\r\n  return Path.extend(opts);\r\n}\r\nvar extendPathFromString = pathTool.extendFromString;\r\n/**\r\n * Extend path\r\n */\r\nexport function extendPath(pathData, opts) {\r\n  return extendPathFromString(pathData, opts);\r\n}\r\n/**\r\n * Register a user defined shape.\r\n * The shape class can be fetched by `getShapeClass`\r\n * This method will overwrite the registered shapes, including\r\n * the registered built-in shapes, if using the same `name`.\r\n * The shape can be used in `custom series` and\r\n * `graphic component` by declaring `{type: name}`.\r\n *\r\n * @param name\r\n * @param ShapeClass Can be generated by `extendShape`.\r\n */\r\nexport function registerShape(name, ShapeClass) {\r\n  _customShapeMap[name] = ShapeClass;\r\n}\r\n/**\r\n * Find shape class registered by `registerShape`. Usually used in\r\n * fetching user defined shape.\r\n *\r\n * [Caution]:\r\n * (1) This method **MUST NOT be used inside echarts !!!**, unless it is prepared\r\n * to use user registered shapes.\r\n * Because the built-in shape (see `getBuiltInShape`) will be registered by\r\n * `registerShape` by default. That enables users to get both built-in\r\n * shapes as well as the shapes belonging to themsleves. But users can overwrite\r\n * the built-in shapes by using names like 'circle', 'rect' via calling\r\n * `registerShape`. So the echarts inner featrues should not fetch shapes from here\r\n * in case that it is overwritten by users, except that some features, like\r\n * `custom series`, `graphic component`, do it deliberately.\r\n *\r\n * (2) In the features like `custom series`, `graphic component`, the user input\r\n * `{tpye: 'xxx'}` does not only specify shapes but also specify other graphic\r\n * elements like `'group'`, `'text'`, `'image'` or event `'path'`. Those names\r\n * are reserved names, that is, if some user registers a shape named `'image'`,\r\n * the shape will not be used. If we intending to add some more reserved names\r\n * in feature, that might bring break changes (disable some existing user shape\r\n * names). But that case probably rarely happens. So we don't make more mechanism\r\n * to resolve this issue here.\r\n *\r\n * @param name\r\n * @return The shape class. If not found, return nothing.\r\n */\r\nexport function getShapeClass(name) {\r\n  if (_customShapeMap.hasOwnProperty(name)) {\r\n    return _customShapeMap[name];\r\n  }\r\n}\r\n/**\r\n * Create a path element from path data string\r\n * @param pathData\r\n * @param opts\r\n * @param rect\r\n * @param layout 'center' or 'cover' default to be cover\r\n */\r\nexport function makePath(pathData, opts, rect, layout) {\r\n  var path = pathTool.createFromString(pathData, opts);\r\n  if (rect) {\r\n    if (layout === 'center') {\r\n      rect = centerGraphic(rect, path.getBoundingRect());\r\n    }\r\n    resizePath(path, rect);\r\n  }\r\n  return path;\r\n}\r\n/**\r\n * Create a image element from image url\r\n * @param imageUrl image url\r\n * @param opts options\r\n * @param rect constrain rect\r\n * @param layout 'center' or 'cover'. Default to be 'cover'\r\n */\r\nexport function makeImage(imageUrl, rect, layout) {\r\n  var zrImg = new ZRImage({\r\n    style: {\r\n      image: imageUrl,\r\n      x: rect.x,\r\n      y: rect.y,\r\n      width: rect.width,\r\n      height: rect.height\r\n    },\r\n    onload: function (img) {\r\n      if (layout === 'center') {\r\n        var boundingRect = {\r\n          width: img.width,\r\n          height: img.height\r\n        };\r\n        zrImg.setStyle(centerGraphic(rect, boundingRect));\r\n      }\r\n    }\r\n  });\r\n  return zrImg;\r\n}\r\n/**\r\n * Get position of centered element in bounding box.\r\n *\r\n * @param  rect         element local bounding box\r\n * @param  boundingRect constraint bounding box\r\n * @return element position containing x, y, width, and height\r\n */\r\nfunction centerGraphic(rect, boundingRect) {\r\n  // Set rect to center, keep width / height ratio.\r\n  var aspect = boundingRect.width / boundingRect.height;\r\n  var width = rect.height * aspect;\r\n  var height;\r\n  if (width <= rect.width) {\r\n    height = rect.height;\r\n  } else {\r\n    width = rect.width;\r\n    height = width / aspect;\r\n  }\r\n  var cx = rect.x + rect.width / 2;\r\n  var cy = rect.y + rect.height / 2;\r\n  return {\r\n    x: cx - width / 2,\r\n    y: cy - height / 2,\r\n    width: width,\r\n    height: height\r\n  };\r\n}\r\nexport var mergePath = pathTool.mergePath;\r\n/**\r\n * Resize a path to fit the rect\r\n * @param path\r\n * @param rect\r\n */\r\nexport function resizePath(path, rect) {\r\n  if (!path.applyTransform) {\r\n    return;\r\n  }\r\n  var pathRect = path.getBoundingRect();\r\n  var m = pathRect.calculateTransform(rect);\r\n  path.applyTransform(m);\r\n}\r\n/**\r\n * Sub pixel optimize line for canvas\r\n */\r\nexport function subPixelOptimizeLine(shape, lineWidth) {\r\n  subPixelOptimizeUtil.subPixelOptimizeLine(shape, shape, {\r\n    lineWidth: lineWidth\r\n  });\r\n  return shape;\r\n}\r\n/**\r\n * Sub pixel optimize rect for canvas\r\n */\r\nexport function subPixelOptimizeRect(param) {\r\n  subPixelOptimizeUtil.subPixelOptimizeRect(param.shape, param.shape, param.style);\r\n  return param;\r\n}\r\n/**\r\n * Sub pixel optimize for canvas\r\n *\r\n * @param position Coordinate, such as x, y\r\n * @param lineWidth Should be nonnegative integer.\r\n * @param positiveOrNegative Default false (negative).\r\n * @return Optimized position.\r\n */\r\nexport var subPixelOptimize = subPixelOptimizeUtil.subPixelOptimize;\r\n/**\r\n * Get transform matrix of target (param target),\r\n * in coordinate of its ancestor (param ancestor)\r\n *\r\n * @param target\r\n * @param [ancestor]\r\n */\r\nexport function getTransform(target, ancestor) {\r\n  var mat = matrix.identity([]);\r\n  while (target && target !== ancestor) {\r\n    matrix.mul(mat, target.getLocalTransform(), mat);\r\n    target = target.parent;\r\n  }\r\n  return mat;\r\n}\r\n/**\r\n * Apply transform to an vertex.\r\n * @param target [x, y]\r\n * @param transform Can be:\r\n *      + Transform matrix: like [1, 0, 0, 1, 0, 0]\r\n *      + {position, rotation, scale}, the same as `zrender/Transformable`.\r\n * @param invert Whether use invert matrix.\r\n * @return [x, y]\r\n */\r\nexport function applyTransform(target, transform, invert) {\r\n  if (transform && !isArrayLike(transform)) {\r\n    transform = Transformable.getLocalTransform(transform);\r\n  }\r\n  if (invert) {\r\n    transform = matrix.invert([], transform);\r\n  }\r\n  return vector.applyTransform([], target, transform);\r\n}\r\n/**\r\n * @param direction 'left' 'right' 'top' 'bottom'\r\n * @param transform Transform matrix: like [1, 0, 0, 1, 0, 0]\r\n * @param invert Whether use invert matrix.\r\n * @return Transformed direction. 'left' 'right' 'top' 'bottom'\r\n */\r\nexport function transformDirection(direction, transform, invert) {\r\n  // Pick a base, ensure that transform result will not be (0, 0).\r\n  var hBase = transform[4] === 0 || transform[5] === 0 || transform[0] === 0 ? 1 : Math.abs(2 * transform[4] / transform[0]);\r\n  var vBase = transform[4] === 0 || transform[5] === 0 || transform[2] === 0 ? 1 : Math.abs(2 * transform[4] / transform[2]);\r\n  var vertex = [direction === 'left' ? -hBase : direction === 'right' ? hBase : 0, direction === 'top' ? -vBase : direction === 'bottom' ? vBase : 0];\r\n  vertex = applyTransform(vertex, transform, invert);\r\n  return Math.abs(vertex[0]) > Math.abs(vertex[1]) ? vertex[0] > 0 ? 'right' : 'left' : vertex[1] > 0 ? 'bottom' : 'top';\r\n}\r\nfunction isNotGroup(el) {\r\n  return !el.isGroup;\r\n}\r\nfunction isPath(el) {\r\n  return el.shape != null;\r\n}\r\n/**\r\n * Apply group transition animation from g1 to g2.\r\n * If no animatableModel, no animation.\r\n */\r\nexport function groupTransition(g1, g2, animatableModel) {\r\n  if (!g1 || !g2) {\r\n    return;\r\n  }\r\n  function getElMap(g) {\r\n    var elMap = {};\r\n    g.traverse(function (el) {\r\n      if (isNotGroup(el) && el.anid) {\r\n        elMap[el.anid] = el;\r\n      }\r\n    });\r\n    return elMap;\r\n  }\r\n  function getAnimatableProps(el) {\r\n    var obj = {\r\n      x: el.x,\r\n      y: el.y,\r\n      rotation: el.rotation\r\n    };\r\n    if (isPath(el)) {\r\n      obj.shape = extend({}, el.shape);\r\n    }\r\n    return obj;\r\n  }\r\n  var elMap1 = getElMap(g1);\r\n  g2.traverse(function (el) {\r\n    if (isNotGroup(el) && el.anid) {\r\n      var oldEl = elMap1[el.anid];\r\n      if (oldEl) {\r\n        var newProp = getAnimatableProps(el);\r\n        el.attr(getAnimatableProps(oldEl));\r\n        updateProps(el, newProp, animatableModel, getECData(el).dataIndex);\r\n      }\r\n    }\r\n  });\r\n}\r\nexport function clipPointsByRect(points, rect) {\r\n  // FIXME: This way might be incorrect when graphic clipped by a corner\r\n  // and when element has a border.\r\n  return map(points, function (point) {\r\n    var x = point[0];\r\n    x = mathMax(x, rect.x);\r\n    x = mathMin(x, rect.x + rect.width);\r\n    var y = point[1];\r\n    y = mathMax(y, rect.y);\r\n    y = mathMin(y, rect.y + rect.height);\r\n    return [x, y];\r\n  });\r\n}\r\n/**\r\n * Return a new clipped rect. If rect size are negative, return undefined.\r\n */\r\nexport function clipRectByRect(targetRect, rect) {\r\n  var x = mathMax(targetRect.x, rect.x);\r\n  var x2 = mathMin(targetRect.x + targetRect.width, rect.x + rect.width);\r\n  var y = mathMax(targetRect.y, rect.y);\r\n  var y2 = mathMin(targetRect.y + targetRect.height, rect.y + rect.height);\r\n  // If the total rect is cliped, nothing, including the border,\r\n  // should be painted. So return undefined.\r\n  if (x2 >= x && y2 >= y) {\r\n    return {\r\n      x: x,\r\n      y: y,\r\n      width: x2 - x,\r\n      height: y2 - y\r\n    };\r\n  }\r\n}\r\nexport function createIcon(iconStr,\r\n// Support 'image://' or 'path://' or direct svg path.\r\nopt, rect) {\r\n  var innerOpts = extend({\r\n    rectHover: true\r\n  }, opt);\r\n  var style = innerOpts.style = {\r\n    strokeNoScale: true\r\n  };\r\n  rect = rect || {\r\n    x: -1,\r\n    y: -1,\r\n    width: 2,\r\n    height: 2\r\n  };\r\n  if (iconStr) {\r\n    return iconStr.indexOf('image://') === 0 ? (style.image = iconStr.slice(8), defaults(style, rect), new ZRImage(innerOpts)) : makePath(iconStr.replace('path://', ''), innerOpts, rect, 'center');\r\n  }\r\n}\r\n/**\r\n * Return `true` if the given line (line `a`) and the given polygon\r\n * are intersect.\r\n * Note that we do not count colinear as intersect here because no\r\n * requirement for that. We could do that if required in future.\r\n */\r\nexport function linePolygonIntersect(a1x, a1y, a2x, a2y, points) {\r\n  for (var i = 0, p2 = points[points.length - 1]; i < points.length; i++) {\r\n    var p = points[i];\r\n    if (lineLineIntersect(a1x, a1y, a2x, a2y, p[0], p[1], p2[0], p2[1])) {\r\n      return true;\r\n    }\r\n    p2 = p;\r\n  }\r\n}\r\n/**\r\n * Return `true` if the given two lines (line `a` and line `b`)\r\n * are intersect.\r\n * Note that we do not count colinear as intersect here because no\r\n * requirement for that. We could do that if required in future.\r\n */\r\nexport function lineLineIntersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y) {\r\n  // let `vec_m` to be `vec_a2 - vec_a1` and `vec_n` to be `vec_b2 - vec_b1`.\r\n  var mx = a2x - a1x;\r\n  var my = a2y - a1y;\r\n  var nx = b2x - b1x;\r\n  var ny = b2y - b1y;\r\n  // `vec_m` and `vec_n` are parallel iff\r\n  //     existing `k` such that `vec_m = k · vec_n`, equivalent to `vec_m X vec_n = 0`.\r\n  var nmCrossProduct = crossProduct2d(nx, ny, mx, my);\r\n  if (nearZero(nmCrossProduct)) {\r\n    return false;\r\n  }\r\n  // `vec_m` and `vec_n` are intersect iff\r\n  //     existing `p` and `q` in [0, 1] such that `vec_a1 + p * vec_m = vec_b1 + q * vec_n`,\r\n  //     such that `q = ((vec_a1 - vec_b1) X vec_m) / (vec_n X vec_m)`\r\n  //           and `p = ((vec_a1 - vec_b1) X vec_n) / (vec_n X vec_m)`.\r\n  var b1a1x = a1x - b1x;\r\n  var b1a1y = a1y - b1y;\r\n  var q = crossProduct2d(b1a1x, b1a1y, mx, my) / nmCrossProduct;\r\n  if (q < 0 || q > 1) {\r\n    return false;\r\n  }\r\n  var p = crossProduct2d(b1a1x, b1a1y, nx, ny) / nmCrossProduct;\r\n  if (p < 0 || p > 1) {\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\n/**\r\n * Cross product of 2-dimension vector.\r\n */\r\nfunction crossProduct2d(x1, y1, x2, y2) {\r\n  return x1 * y2 - x2 * y1;\r\n}\r\nfunction nearZero(val) {\r\n  return val <= 1e-6 && val >= -1e-6;\r\n}\r\nexport function setTooltipConfig(opt) {\r\n  var itemTooltipOption = opt.itemTooltipOption;\r\n  var componentModel = opt.componentModel;\r\n  var itemName = opt.itemName;\r\n  var itemTooltipOptionObj = isString(itemTooltipOption) ? {\r\n    formatter: itemTooltipOption\r\n  } : itemTooltipOption;\r\n  var mainType = componentModel.mainType;\r\n  var componentIndex = componentModel.componentIndex;\r\n  var formatterParams = {\r\n    componentType: mainType,\r\n    name: itemName,\r\n    $vars: ['name']\r\n  };\r\n  formatterParams[mainType + 'Index'] = componentIndex;\r\n  var formatterParamsExtra = opt.formatterParamsExtra;\r\n  if (formatterParamsExtra) {\r\n    each(keys(formatterParamsExtra), function (key) {\r\n      if (!hasOwn(formatterParams, key)) {\r\n        formatterParams[key] = formatterParamsExtra[key];\r\n        formatterParams.$vars.push(key);\r\n      }\r\n    });\r\n  }\r\n  var ecData = getECData(opt.el);\r\n  ecData.componentMainType = mainType;\r\n  ecData.componentIndex = componentIndex;\r\n  ecData.tooltipConfig = {\r\n    name: itemName,\r\n    option: defaults({\r\n      content: itemName,\r\n      encodeHTMLContent: true,\r\n      formatterParams: formatterParams\r\n    }, itemTooltipOptionObj)\r\n  };\r\n}\r\nfunction traverseElement(el, cb) {\r\n  var stopped;\r\n  // TODO\r\n  // Polyfill for fixing zrender group traverse don't visit it's root issue.\r\n  if (el.isGroup) {\r\n    stopped = cb(el);\r\n  }\r\n  if (!stopped) {\r\n    el.traverse(cb);\r\n  }\r\n}\r\nexport function traverseElements(els, cb) {\r\n  if (els) {\r\n    if (isArray(els)) {\r\n      for (var i = 0; i < els.length; i++) {\r\n        traverseElement(els[i], cb);\r\n      }\r\n    } else {\r\n      traverseElement(els, cb);\r\n    }\r\n  }\r\n}\r\n// Register built-in shapes. These shapes might be overwritten\r\n// by users, although we do not recommend that.\r\nregisterShape('circle', Circle);\r\nregisterShape('ellipse', Ellipse);\r\nregisterShape('sector', Sector);\r\nregisterShape('ring', Ring);\r\nregisterShape('polygon', Polygon);\r\nregisterShape('polyline', Polyline);\r\nregisterShape('rect', Rect);\r\nregisterShape('line', Line);\r\nregisterShape('bezierCurve', BezierCurve);\r\nregisterShape('arc', Arc);\r\nexport { Group, ZRImage as Image, ZRText as Text, Circle, Ellipse, Sector, Ring, Polygon, Polyline, Rect, Line, BezierCurve, Arc, IncrementalDisplayable, CompoundPath, LinearGradient, RadialGradient, BoundingRect, OrientedBoundingRect, Point, Path };", "import PathProxy from '../core/PathProxy.js';\r\nimport { applyTransform as v2ApplyTransform } from '../core/vector.js';\r\nvar CMD = PathProxy.CMD;\r\nvar points = [[], [], []];\r\nvar mathSqrt = Math.sqrt;\r\nvar mathAtan2 = Math.atan2;\r\nexport default function transformPath(path, m) {\r\n    if (!m) {\r\n        return;\r\n    }\r\n    var data = path.data;\r\n    var len = path.len();\r\n    var cmd;\r\n    var nPoint;\r\n    var i;\r\n    var j;\r\n    var k;\r\n    var p;\r\n    var M = CMD.M;\r\n    var C = CMD.C;\r\n    var L = CMD.L;\r\n    var R = CMD.R;\r\n    var A = CMD.A;\r\n    var Q = CMD.Q;\r\n    for (i = 0, j = 0; i < len;) {\r\n        cmd = data[i++];\r\n        j = i;\r\n        nPoint = 0;\r\n        switch (cmd) {\r\n            case M:\r\n                nPoint = 1;\r\n                break;\r\n            case L:\r\n                nPoint = 1;\r\n                break;\r\n            case C:\r\n                nPoint = 3;\r\n                break;\r\n            case Q:\r\n                nPoint = 2;\r\n                break;\r\n            case A:\r\n                var x = m[4];\r\n                var y = m[5];\r\n                var sx = mathSqrt(m[0] * m[0] + m[1] * m[1]);\r\n                var sy = mathSqrt(m[2] * m[2] + m[3] * m[3]);\r\n                var angle = mathAtan2(-m[1] / sy, m[0] / sx);\r\n                data[i] *= sx;\r\n                data[i++] += x;\r\n                data[i] *= sy;\r\n                data[i++] += y;\r\n                data[i++] *= sx;\r\n                data[i++] *= sy;\r\n                data[i++] += angle;\r\n                data[i++] += angle;\r\n                i += 2;\r\n                j = i;\r\n                break;\r\n            case R:\r\n                p[0] = data[i++];\r\n                p[1] = data[i++];\r\n                v2ApplyTransform(p, p, m);\r\n                data[j++] = p[0];\r\n                data[j++] = p[1];\r\n                p[0] += data[i++];\r\n                p[1] += data[i++];\r\n                v2ApplyTransform(p, p, m);\r\n                data[j++] = p[0];\r\n                data[j++] = p[1];\r\n        }\r\n        for (k = 0; k < nPoint; k++) {\r\n            var p_1 = points[k];\r\n            p_1[0] = data[i++];\r\n            p_1[1] = data[i++];\r\n            v2ApplyTransform(p_1, p_1, m);\r\n            data[j++] = p_1[0];\r\n            data[j++] = p_1[1];\r\n        }\r\n    }\r\n    path.increaseVersion();\r\n}\r\n", "import { __extends } from \"tslib\";\r\nimport Path from '../graphic/Path.js';\r\nimport PathProxy from '../core/PathProxy.js';\r\nimport transformPath from './transformPath.js';\r\nimport { extend } from '../core/util.js';\r\nvar mathSqrt = Math.sqrt;\r\nvar mathSin = Math.sin;\r\nvar mathCos = Math.cos;\r\nvar PI = Math.PI;\r\nfunction vMag(v) {\r\n    return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\r\n}\r\n;\r\nfunction vRatio(u, v) {\r\n    return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\r\n}\r\n;\r\nfunction vAngle(u, v) {\r\n    return (u[0] * v[1] < u[1] * v[0] ? -1 : 1)\r\n        * Math.acos(vRatio(u, v));\r\n}\r\n;\r\nfunction processArc(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg, cmd, path) {\r\n    var psi = psiDeg * (PI / 180.0);\r\n    var xp = mathCos(psi) * (x1 - x2) / 2.0\r\n        + mathSin(psi) * (y1 - y2) / 2.0;\r\n    var yp = -1 * mathSin(psi) * (x1 - x2) / 2.0\r\n        + mathCos(psi) * (y1 - y2) / 2.0;\r\n    var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\r\n    if (lambda > 1) {\r\n        rx *= mathSqrt(lambda);\r\n        ry *= mathSqrt(lambda);\r\n    }\r\n    var f = (fa === fs ? -1 : 1)\r\n        * mathSqrt((((rx * rx) * (ry * ry))\r\n            - ((rx * rx) * (yp * yp))\r\n            - ((ry * ry) * (xp * xp))) / ((rx * rx) * (yp * yp)\r\n            + (ry * ry) * (xp * xp))) || 0;\r\n    var cxp = f * rx * yp / ry;\r\n    var cyp = f * -ry * xp / rx;\r\n    var cx = (x1 + x2) / 2.0\r\n        + mathCos(psi) * cxp\r\n        - mathSin(psi) * cyp;\r\n    var cy = (y1 + y2) / 2.0\r\n        + mathSin(psi) * cxp\r\n        + mathCos(psi) * cyp;\r\n    var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\r\n    var u = [(xp - cxp) / rx, (yp - cyp) / ry];\r\n    var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\r\n    var dTheta = vAngle(u, v);\r\n    if (vRatio(u, v) <= -1) {\r\n        dTheta = PI;\r\n    }\r\n    if (vRatio(u, v) >= 1) {\r\n        dTheta = 0;\r\n    }\r\n    if (dTheta < 0) {\r\n        var n = Math.round(dTheta / PI * 1e6) / 1e6;\r\n        dTheta = PI * 2 + (n % 2) * PI;\r\n    }\r\n    path.addData(cmd, cx, cy, rx, ry, theta, dTheta, psi, fs);\r\n}\r\nvar commandReg = /([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig;\r\nvar numberReg = /-?([0-9]*\\.)?[0-9]+([eE]-?[0-9]+)?/g;\r\nfunction createPathProxyFromString(data) {\r\n    var path = new PathProxy();\r\n    if (!data) {\r\n        return path;\r\n    }\r\n    var cpx = 0;\r\n    var cpy = 0;\r\n    var subpathX = cpx;\r\n    var subpathY = cpy;\r\n    var prevCmd;\r\n    var CMD = PathProxy.CMD;\r\n    var cmdList = data.match(commandReg);\r\n    if (!cmdList) {\r\n        return path;\r\n    }\r\n    for (var l = 0; l < cmdList.length; l++) {\r\n        var cmdText = cmdList[l];\r\n        var cmdStr = cmdText.charAt(0);\r\n        var cmd = void 0;\r\n        var p = cmdText.match(numberReg) || [];\r\n        var pLen = p.length;\r\n        for (var i = 0; i < pLen; i++) {\r\n            p[i] = parseFloat(p[i]);\r\n        }\r\n        var off = 0;\r\n        while (off < pLen) {\r\n            var ctlPtx = void 0;\r\n            var ctlPty = void 0;\r\n            var rx = void 0;\r\n            var ry = void 0;\r\n            var psi = void 0;\r\n            var fa = void 0;\r\n            var fs = void 0;\r\n            var x1 = cpx;\r\n            var y1 = cpy;\r\n            var len = void 0;\r\n            var pathData = void 0;\r\n            switch (cmdStr) {\r\n                case 'l':\r\n                    cpx += p[off++];\r\n                    cpy += p[off++];\r\n                    cmd = CMD.L;\r\n                    path.addData(cmd, cpx, cpy);\r\n                    break;\r\n                case 'L':\r\n                    cpx = p[off++];\r\n                    cpy = p[off++];\r\n                    cmd = CMD.L;\r\n                    path.addData(cmd, cpx, cpy);\r\n                    break;\r\n                case 'm':\r\n                    cpx += p[off++];\r\n                    cpy += p[off++];\r\n                    cmd = CMD.M;\r\n                    path.addData(cmd, cpx, cpy);\r\n                    subpathX = cpx;\r\n                    subpathY = cpy;\r\n                    cmdStr = 'l';\r\n                    break;\r\n                case 'M':\r\n                    cpx = p[off++];\r\n                    cpy = p[off++];\r\n                    cmd = CMD.M;\r\n                    path.addData(cmd, cpx, cpy);\r\n                    subpathX = cpx;\r\n                    subpathY = cpy;\r\n                    cmdStr = 'L';\r\n                    break;\r\n                case 'h':\r\n                    cpx += p[off++];\r\n                    cmd = CMD.L;\r\n                    path.addData(cmd, cpx, cpy);\r\n                    break;\r\n                case 'H':\r\n                    cpx = p[off++];\r\n                    cmd = CMD.L;\r\n                    path.addData(cmd, cpx, cpy);\r\n                    break;\r\n                case 'v':\r\n                    cpy += p[off++];\r\n                    cmd = CMD.L;\r\n                    path.addData(cmd, cpx, cpy);\r\n                    break;\r\n                case 'V':\r\n                    cpy = p[off++];\r\n                    cmd = CMD.L;\r\n                    path.addData(cmd, cpx, cpy);\r\n                    break;\r\n                case 'C':\r\n                    cmd = CMD.C;\r\n                    path.addData(cmd, p[off++], p[off++], p[off++], p[off++], p[off++], p[off++]);\r\n                    cpx = p[off - 2];\r\n                    cpy = p[off - 1];\r\n                    break;\r\n                case 'c':\r\n                    cmd = CMD.C;\r\n                    path.addData(cmd, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy);\r\n                    cpx += p[off - 2];\r\n                    cpy += p[off - 1];\r\n                    break;\r\n                case 'S':\r\n                    ctlPtx = cpx;\r\n                    ctlPty = cpy;\r\n                    len = path.len();\r\n                    pathData = path.data;\r\n                    if (prevCmd === CMD.C) {\r\n                        ctlPtx += cpx - pathData[len - 4];\r\n                        ctlPty += cpy - pathData[len - 3];\r\n                    }\r\n                    cmd = CMD.C;\r\n                    x1 = p[off++];\r\n                    y1 = p[off++];\r\n                    cpx = p[off++];\r\n                    cpy = p[off++];\r\n                    path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\r\n                    break;\r\n                case 's':\r\n                    ctlPtx = cpx;\r\n                    ctlPty = cpy;\r\n                    len = path.len();\r\n                    pathData = path.data;\r\n                    if (prevCmd === CMD.C) {\r\n                        ctlPtx += cpx - pathData[len - 4];\r\n                        ctlPty += cpy - pathData[len - 3];\r\n                    }\r\n                    cmd = CMD.C;\r\n                    x1 = cpx + p[off++];\r\n                    y1 = cpy + p[off++];\r\n                    cpx += p[off++];\r\n                    cpy += p[off++];\r\n                    path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\r\n                    break;\r\n                case 'Q':\r\n                    x1 = p[off++];\r\n                    y1 = p[off++];\r\n                    cpx = p[off++];\r\n                    cpy = p[off++];\r\n                    cmd = CMD.Q;\r\n                    path.addData(cmd, x1, y1, cpx, cpy);\r\n                    break;\r\n                case 'q':\r\n                    x1 = p[off++] + cpx;\r\n                    y1 = p[off++] + cpy;\r\n                    cpx += p[off++];\r\n                    cpy += p[off++];\r\n                    cmd = CMD.Q;\r\n                    path.addData(cmd, x1, y1, cpx, cpy);\r\n                    break;\r\n                case 'T':\r\n                    ctlPtx = cpx;\r\n                    ctlPty = cpy;\r\n                    len = path.len();\r\n                    pathData = path.data;\r\n                    if (prevCmd === CMD.Q) {\r\n                        ctlPtx += cpx - pathData[len - 4];\r\n                        ctlPty += cpy - pathData[len - 3];\r\n                    }\r\n                    cpx = p[off++];\r\n                    cpy = p[off++];\r\n                    cmd = CMD.Q;\r\n                    path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\r\n                    break;\r\n                case 't':\r\n                    ctlPtx = cpx;\r\n                    ctlPty = cpy;\r\n                    len = path.len();\r\n                    pathData = path.data;\r\n                    if (prevCmd === CMD.Q) {\r\n                        ctlPtx += cpx - pathData[len - 4];\r\n                        ctlPty += cpy - pathData[len - 3];\r\n                    }\r\n                    cpx += p[off++];\r\n                    cpy += p[off++];\r\n                    cmd = CMD.Q;\r\n                    path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\r\n                    break;\r\n                case 'A':\r\n                    rx = p[off++];\r\n                    ry = p[off++];\r\n                    psi = p[off++];\r\n                    fa = p[off++];\r\n                    fs = p[off++];\r\n                    x1 = cpx, y1 = cpy;\r\n                    cpx = p[off++];\r\n                    cpy = p[off++];\r\n                    cmd = CMD.A;\r\n                    processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\r\n                    break;\r\n                case 'a':\r\n                    rx = p[off++];\r\n                    ry = p[off++];\r\n                    psi = p[off++];\r\n                    fa = p[off++];\r\n                    fs = p[off++];\r\n                    x1 = cpx, y1 = cpy;\r\n                    cpx += p[off++];\r\n                    cpy += p[off++];\r\n                    cmd = CMD.A;\r\n                    processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\r\n                    break;\r\n            }\r\n        }\r\n        if (cmdStr === 'z' || cmdStr === 'Z') {\r\n            cmd = CMD.Z;\r\n            path.addData(cmd);\r\n            cpx = subpathX;\r\n            cpy = subpathY;\r\n        }\r\n        prevCmd = cmd;\r\n    }\r\n    path.toStatic();\r\n    return path;\r\n}\r\nvar SVGPath = (function (_super) {\r\n    __extends(SVGPath, _super);\r\n    function SVGPath() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    SVGPath.prototype.applyTransform = function (m) { };\r\n    return SVGPath;\r\n}(Path));\r\nfunction isPathProxy(path) {\r\n    return path.setData != null;\r\n}\r\nfunction createPathOptions(str, opts) {\r\n    var pathProxy = createPathProxyFromString(str);\r\n    var innerOpts = extend({}, opts);\r\n    innerOpts.buildPath = function (path) {\r\n        if (isPathProxy(path)) {\r\n            path.setData(pathProxy.data);\r\n            var ctx = path.getContext();\r\n            if (ctx) {\r\n                path.rebuildPath(ctx, 1);\r\n            }\r\n        }\r\n        else {\r\n            var ctx = path;\r\n            pathProxy.rebuildPath(ctx, 1);\r\n        }\r\n    };\r\n    innerOpts.applyTransform = function (m) {\r\n        transformPath(pathProxy, m);\r\n        this.dirtyShape();\r\n    };\r\n    return innerOpts;\r\n}\r\nexport function createFromString(str, opts) {\r\n    return new SVGPath(createPathOptions(str, opts));\r\n}\r\nexport function extendFromString(str, defaultOpts) {\r\n    var innerOpts = createPathOptions(str, defaultOpts);\r\n    var Sub = (function (_super) {\r\n        __extends(Sub, _super);\r\n        function Sub(opts) {\r\n            var _this = _super.call(this, opts) || this;\r\n            _this.applyTransform = innerOpts.applyTransform;\r\n            _this.buildPath = innerOpts.buildPath;\r\n            return _this;\r\n        }\r\n        return Sub;\r\n    }(SVGPath));\r\n    return Sub;\r\n}\r\nexport function mergePath(pathEls, opts) {\r\n    var pathList = [];\r\n    var len = pathEls.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var pathEl = pathEls[i];\r\n        pathList.push(pathEl.getUpdatedPathProxy(true));\r\n    }\r\n    var pathBundle = new Path(opts);\r\n    pathBundle.createPathProxy();\r\n    pathBundle.buildPath = function (path) {\r\n        if (isPathProxy(path)) {\r\n            path.appendPath(pathList);\r\n            var ctx = path.getContext();\r\n            if (ctx) {\r\n                path.rebuildPath(ctx, 1);\r\n            }\r\n        }\r\n    };\r\n    return pathBundle;\r\n}\r\nexport function clonePath(sourcePath, opts) {\r\n    opts = opts || {};\r\n    var path = new Path();\r\n    if (sourcePath.shape) {\r\n        path.setShape(sourcePath.shape);\r\n    }\r\n    path.setStyle(sourcePath.style);\r\n    if (opts.bakeTransform) {\r\n        transformPath(path.path, sourcePath.getComputedTransform());\r\n    }\r\n    else {\r\n        if (opts.toLocal) {\r\n            path.setLocalTransform(sourcePath.getComputedTransform());\r\n        }\r\n        else {\r\n            path.copyTransform(sourcePath);\r\n        }\r\n    }\r\n    path.buildPath = sourcePath.buildPath;\r\n    path.applyTransform = path.applyTransform;\r\n    path.z = sourcePath.z;\r\n    path.z2 = sourcePath.z2;\r\n    path.zlevel = sourcePath.zlevel;\r\n    return path;\r\n}\r\n", "import { __extends } from \"tslib\";\r\nimport Path from '../Path.js';\r\nvar CircleShape = (function () {\r\n    function CircleShape() {\r\n        this.cx = 0;\r\n        this.cy = 0;\r\n        this.r = 0;\r\n    }\r\n    return CircleShape;\r\n}());\r\nexport { CircleShape };\r\nvar Circle = (function (_super) {\r\n    __extends(Circle, _super);\r\n    function Circle(opts) {\r\n        return _super.call(this, opts) || this;\r\n    }\r\n    Circle.prototype.getDefaultShape = function () {\r\n        return new CircleShape();\r\n    };\r\n    Circle.prototype.buildPath = function (ctx, shape) {\r\n        ctx.moveTo(shape.cx + shape.r, shape.cy);\r\n        ctx.arc(shape.cx, shape.cy, shape.r, 0, Math.PI * 2);\r\n    };\r\n    return Circle;\r\n}(Path));\r\n;\r\nCircle.prototype.type = 'circle';\r\nexport default Circle;\r\n", "import { __extends } from \"tslib\";\r\nimport Path from '../Path.js';\r\nvar EllipseShape = (function () {\r\n    function EllipseShape() {\r\n        this.cx = 0;\r\n        this.cy = 0;\r\n        this.rx = 0;\r\n        this.ry = 0;\r\n    }\r\n    return EllipseShape;\r\n}());\r\nexport { EllipseShape };\r\nvar Ellipse = (function (_super) {\r\n    __extends(Ellipse, _super);\r\n    function Ellipse(opts) {\r\n        return _super.call(this, opts) || this;\r\n    }\r\n    Ellipse.prototype.getDefaultShape = function () {\r\n        return new EllipseShape();\r\n    };\r\n    Ellipse.prototype.buildPath = function (ctx, shape) {\r\n        var k = 0.5522848;\r\n        var x = shape.cx;\r\n        var y = shape.cy;\r\n        var a = shape.rx;\r\n        var b = shape.ry;\r\n        var ox = a * k;\r\n        var oy = b * k;\r\n        ctx.moveTo(x - a, y);\r\n        ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b);\r\n        ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y);\r\n        ctx.bezierCurveTo(x + a, y + oy, x + ox, y + b, x, y + b);\r\n        ctx.bezierCurveTo(x - ox, y + b, x - a, y + oy, x - a, y);\r\n        ctx.closePath();\r\n    };\r\n    return Ellipse;\r\n}(Path));\r\nEllipse.prototype.type = 'ellipse';\r\nexport default Ellipse;\r\n", "import { isArray } from '../../core/util.js';\r\nvar PI = Math.PI;\r\nvar PI2 = PI * 2;\r\nvar mathSin = Math.sin;\r\nvar mathCos = Math.cos;\r\nvar mathACos = Math.acos;\r\nvar mathATan2 = Math.atan2;\r\nvar mathAbs = Math.abs;\r\nvar mathSqrt = Math.sqrt;\r\nvar mathMax = Math.max;\r\nvar mathMin = Math.min;\r\nvar e = 1e-4;\r\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\r\n    var dx10 = x1 - x0;\r\n    var dy10 = y1 - y0;\r\n    var dx32 = x3 - x2;\r\n    var dy32 = y3 - y2;\r\n    var t = dy32 * dx10 - dx32 * dy10;\r\n    if (t * t < e) {\r\n        return;\r\n    }\r\n    t = (dx32 * (y0 - y2) - dy32 * (x0 - x2)) / t;\r\n    return [x0 + t * dx10, y0 + t * dy10];\r\n}\r\nfunction computeCornerTangents(x0, y0, x1, y1, radius, cr, clockwise) {\r\n    var x01 = x0 - x1;\r\n    var y01 = y0 - y1;\r\n    var lo = (clockwise ? cr : -cr) / mathSqrt(x01 * x01 + y01 * y01);\r\n    var ox = lo * y01;\r\n    var oy = -lo * x01;\r\n    var x11 = x0 + ox;\r\n    var y11 = y0 + oy;\r\n    var x10 = x1 + ox;\r\n    var y10 = y1 + oy;\r\n    var x00 = (x11 + x10) / 2;\r\n    var y00 = (y11 + y10) / 2;\r\n    var dx = x10 - x11;\r\n    var dy = y10 - y11;\r\n    var d2 = dx * dx + dy * dy;\r\n    var r = radius - cr;\r\n    var s = x11 * y10 - x10 * y11;\r\n    var d = (dy < 0 ? -1 : 1) * mathSqrt(mathMax(0, r * r * d2 - s * s));\r\n    var cx0 = (s * dy - dx * d) / d2;\r\n    var cy0 = (-s * dx - dy * d) / d2;\r\n    var cx1 = (s * dy + dx * d) / d2;\r\n    var cy1 = (-s * dx + dy * d) / d2;\r\n    var dx0 = cx0 - x00;\r\n    var dy0 = cy0 - y00;\r\n    var dx1 = cx1 - x00;\r\n    var dy1 = cy1 - y00;\r\n    if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) {\r\n        cx0 = cx1;\r\n        cy0 = cy1;\r\n    }\r\n    return {\r\n        cx: cx0,\r\n        cy: cy0,\r\n        x0: -ox,\r\n        y0: -oy,\r\n        x1: cx0 * (radius / r - 1),\r\n        y1: cy0 * (radius / r - 1)\r\n    };\r\n}\r\nfunction normalizeCornerRadius(cr) {\r\n    var arr;\r\n    if (isArray(cr)) {\r\n        var len = cr.length;\r\n        if (!len) {\r\n            return cr;\r\n        }\r\n        if (len === 1) {\r\n            arr = [cr[0], cr[0], 0, 0];\r\n        }\r\n        else if (len === 2) {\r\n            arr = [cr[0], cr[0], cr[1], cr[1]];\r\n        }\r\n        else if (len === 3) {\r\n            arr = cr.concat(cr[2]);\r\n        }\r\n        else {\r\n            arr = cr;\r\n        }\r\n    }\r\n    else {\r\n        arr = [cr, cr, cr, cr];\r\n    }\r\n    return arr;\r\n}\r\nexport function buildPath(ctx, shape) {\r\n    var _a;\r\n    var radius = mathMax(shape.r, 0);\r\n    var innerRadius = mathMax(shape.r0 || 0, 0);\r\n    var hasRadius = radius > 0;\r\n    var hasInnerRadius = innerRadius > 0;\r\n    if (!hasRadius && !hasInnerRadius) {\r\n        return;\r\n    }\r\n    if (!hasRadius) {\r\n        radius = innerRadius;\r\n        innerRadius = 0;\r\n    }\r\n    if (innerRadius > radius) {\r\n        var tmp = radius;\r\n        radius = innerRadius;\r\n        innerRadius = tmp;\r\n    }\r\n    var startAngle = shape.startAngle, endAngle = shape.endAngle;\r\n    if (isNaN(startAngle) || isNaN(endAngle)) {\r\n        return;\r\n    }\r\n    var cx = shape.cx, cy = shape.cy;\r\n    var clockwise = !!shape.clockwise;\r\n    var arc = mathAbs(endAngle - startAngle);\r\n    var mod = arc > PI2 && arc % PI2;\r\n    mod > e && (arc = mod);\r\n    if (!(radius > e)) {\r\n        ctx.moveTo(cx, cy);\r\n    }\r\n    else if (arc > PI2 - e) {\r\n        ctx.moveTo(cx + radius * mathCos(startAngle), cy + radius * mathSin(startAngle));\r\n        ctx.arc(cx, cy, radius, startAngle, endAngle, !clockwise);\r\n        if (innerRadius > e) {\r\n            ctx.moveTo(cx + innerRadius * mathCos(endAngle), cy + innerRadius * mathSin(endAngle));\r\n            ctx.arc(cx, cy, innerRadius, endAngle, startAngle, clockwise);\r\n        }\r\n    }\r\n    else {\r\n        var icrStart = void 0;\r\n        var icrEnd = void 0;\r\n        var ocrStart = void 0;\r\n        var ocrEnd = void 0;\r\n        var ocrs = void 0;\r\n        var ocre = void 0;\r\n        var icrs = void 0;\r\n        var icre = void 0;\r\n        var ocrMax = void 0;\r\n        var icrMax = void 0;\r\n        var limitedOcrMax = void 0;\r\n        var limitedIcrMax = void 0;\r\n        var xre = void 0;\r\n        var yre = void 0;\r\n        var xirs = void 0;\r\n        var yirs = void 0;\r\n        var xrs = radius * mathCos(startAngle);\r\n        var yrs = radius * mathSin(startAngle);\r\n        var xire = innerRadius * mathCos(endAngle);\r\n        var yire = innerRadius * mathSin(endAngle);\r\n        var hasArc = arc > e;\r\n        if (hasArc) {\r\n            var cornerRadius = shape.cornerRadius;\r\n            if (cornerRadius) {\r\n                _a = normalizeCornerRadius(cornerRadius), icrStart = _a[0], icrEnd = _a[1], ocrStart = _a[2], ocrEnd = _a[3];\r\n            }\r\n            var halfRd = mathAbs(radius - innerRadius) / 2;\r\n            ocrs = mathMin(halfRd, ocrStart);\r\n            ocre = mathMin(halfRd, ocrEnd);\r\n            icrs = mathMin(halfRd, icrStart);\r\n            icre = mathMin(halfRd, icrEnd);\r\n            limitedOcrMax = ocrMax = mathMax(ocrs, ocre);\r\n            limitedIcrMax = icrMax = mathMax(icrs, icre);\r\n            if (ocrMax > e || icrMax > e) {\r\n                xre = radius * mathCos(endAngle);\r\n                yre = radius * mathSin(endAngle);\r\n                xirs = innerRadius * mathCos(startAngle);\r\n                yirs = innerRadius * mathSin(startAngle);\r\n                if (arc < PI) {\r\n                    var it_1 = intersect(xrs, yrs, xirs, yirs, xre, yre, xire, yire);\r\n                    if (it_1) {\r\n                        var x0 = xrs - it_1[0];\r\n                        var y0 = yrs - it_1[1];\r\n                        var x1 = xre - it_1[0];\r\n                        var y1 = yre - it_1[1];\r\n                        var a = 1 / mathSin(mathACos((x0 * x1 + y0 * y1) / (mathSqrt(x0 * x0 + y0 * y0) * mathSqrt(x1 * x1 + y1 * y1))) / 2);\r\n                        var b = mathSqrt(it_1[0] * it_1[0] + it_1[1] * it_1[1]);\r\n                        limitedOcrMax = mathMin(ocrMax, (radius - b) / (a + 1));\r\n                        limitedIcrMax = mathMin(icrMax, (innerRadius - b) / (a - 1));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (!hasArc) {\r\n            ctx.moveTo(cx + xrs, cy + yrs);\r\n        }\r\n        else if (limitedOcrMax > e) {\r\n            var crStart = mathMin(ocrStart, limitedOcrMax);\r\n            var crEnd = mathMin(ocrEnd, limitedOcrMax);\r\n            var ct0 = computeCornerTangents(xirs, yirs, xrs, yrs, radius, crStart, clockwise);\r\n            var ct1 = computeCornerTangents(xre, yre, xire, yire, radius, crEnd, clockwise);\r\n            ctx.moveTo(cx + ct0.cx + ct0.x0, cy + ct0.cy + ct0.y0);\r\n            if (limitedOcrMax < ocrMax && crStart === crEnd) {\r\n                ctx.arc(cx + ct0.cx, cy + ct0.cy, limitedOcrMax, mathATan2(ct0.y0, ct0.x0), mathATan2(ct1.y0, ct1.x0), !clockwise);\r\n            }\r\n            else {\r\n                crStart > 0 && ctx.arc(cx + ct0.cx, cy + ct0.cy, crStart, mathATan2(ct0.y0, ct0.x0), mathATan2(ct0.y1, ct0.x1), !clockwise);\r\n                ctx.arc(cx, cy, radius, mathATan2(ct0.cy + ct0.y1, ct0.cx + ct0.x1), mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1), !clockwise);\r\n                crEnd > 0 && ctx.arc(cx + ct1.cx, cy + ct1.cy, crEnd, mathATan2(ct1.y1, ct1.x1), mathATan2(ct1.y0, ct1.x0), !clockwise);\r\n            }\r\n        }\r\n        else {\r\n            ctx.moveTo(cx + xrs, cy + yrs);\r\n            ctx.arc(cx, cy, radius, startAngle, endAngle, !clockwise);\r\n        }\r\n        if (!(innerRadius > e) || !hasArc) {\r\n            ctx.lineTo(cx + xire, cy + yire);\r\n        }\r\n        else if (limitedIcrMax > e) {\r\n            var crStart = mathMin(icrStart, limitedIcrMax);\r\n            var crEnd = mathMin(icrEnd, limitedIcrMax);\r\n            var ct0 = computeCornerTangents(xire, yire, xre, yre, innerRadius, -crEnd, clockwise);\r\n            var ct1 = computeCornerTangents(xrs, yrs, xirs, yirs, innerRadius, -crStart, clockwise);\r\n            ctx.lineTo(cx + ct0.cx + ct0.x0, cy + ct0.cy + ct0.y0);\r\n            if (limitedIcrMax < icrMax && crStart === crEnd) {\r\n                ctx.arc(cx + ct0.cx, cy + ct0.cy, limitedIcrMax, mathATan2(ct0.y0, ct0.x0), mathATan2(ct1.y0, ct1.x0), !clockwise);\r\n            }\r\n            else {\r\n                crEnd > 0 && ctx.arc(cx + ct0.cx, cy + ct0.cy, crEnd, mathATan2(ct0.y0, ct0.x0), mathATan2(ct0.y1, ct0.x1), !clockwise);\r\n                ctx.arc(cx, cy, innerRadius, mathATan2(ct0.cy + ct0.y1, ct0.cx + ct0.x1), mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1), clockwise);\r\n                crStart > 0 && ctx.arc(cx + ct1.cx, cy + ct1.cy, crStart, mathATan2(ct1.y1, ct1.x1), mathATan2(ct1.y0, ct1.x0), !clockwise);\r\n            }\r\n        }\r\n        else {\r\n            ctx.lineTo(cx + xire, cy + yire);\r\n            ctx.arc(cx, cy, innerRadius, endAngle, startAngle, clockwise);\r\n        }\r\n    }\r\n    ctx.closePath();\r\n}\r\n", "import { __extends } from \"tslib\";\r\nimport Path from '../Path.js';\r\nimport * as roundSectorHelper from '../helper/roundSector.js';\r\nvar SectorShape = (function () {\r\n    function SectorShape() {\r\n        this.cx = 0;\r\n        this.cy = 0;\r\n        this.r0 = 0;\r\n        this.r = 0;\r\n        this.startAngle = 0;\r\n        this.endAngle = Math.PI * 2;\r\n        this.clockwise = true;\r\n        this.cornerRadius = 0;\r\n    }\r\n    return SectorShape;\r\n}());\r\nexport { SectorShape };\r\nvar Sector = (function (_super) {\r\n    __extends(Sector, _super);\r\n    function Sector(opts) {\r\n        return _super.call(this, opts) || this;\r\n    }\r\n    Sector.prototype.getDefaultShape = function () {\r\n        return new SectorShape();\r\n    };\r\n    Sector.prototype.buildPath = function (ctx, shape) {\r\n        roundSectorHelper.buildPath(ctx, shape);\r\n    };\r\n    Sector.prototype.isZeroArea = function () {\r\n        return this.shape.startAngle === this.shape.endAngle\r\n            || this.shape.r === this.shape.r0;\r\n    };\r\n    return Sector;\r\n}(Path));\r\nSector.prototype.type = 'sector';\r\nexport default Sector;\r\n", "import { __extends } from \"tslib\";\r\nimport Path from '../Path.js';\r\nvar RingShape = (function () {\r\n    function RingShape() {\r\n        this.cx = 0;\r\n        this.cy = 0;\r\n        this.r = 0;\r\n        this.r0 = 0;\r\n    }\r\n    return RingShape;\r\n}());\r\nexport { RingShape };\r\nvar Ring = (function (_super) {\r\n    __extends(Ring, _super);\r\n    function Ring(opts) {\r\n        return _super.call(this, opts) || this;\r\n    }\r\n    Ring.prototype.getDefaultShape = function () {\r\n        return new RingShape();\r\n    };\r\n    Ring.prototype.buildPath = function (ctx, shape) {\r\n        var x = shape.cx;\r\n        var y = shape.cy;\r\n        var PI2 = Math.PI * 2;\r\n        ctx.moveTo(x + shape.r, y);\r\n        ctx.arc(x, y, shape.r, 0, PI2, false);\r\n        ctx.moveTo(x + shape.r0, y);\r\n        ctx.arc(x, y, shape.r0, 0, PI2, true);\r\n    };\r\n    return Ring;\r\n}(Path));\r\nRing.prototype.type = 'ring';\r\nexport default Ring;\r\n", "import { min as v2Min, max as v2Max, scale as v2Scale, distance as v2Distance, add as v2Add, clone as v2Clone, sub as v2Sub } from '../../core/vector.js';\r\nexport default function smoothBezier(points, smooth, isLoop, constraint) {\r\n    var cps = [];\r\n    var v = [];\r\n    var v1 = [];\r\n    var v2 = [];\r\n    var prevPoint;\r\n    var nextPoint;\r\n    var min;\r\n    var max;\r\n    if (constraint) {\r\n        min = [Infinity, Infinity];\r\n        max = [-Infinity, -Infinity];\r\n        for (var i = 0, len = points.length; i < len; i++) {\r\n            v2Min(min, min, points[i]);\r\n            v2Max(max, max, points[i]);\r\n        }\r\n        v2Min(min, min, constraint[0]);\r\n        v2Max(max, max, constraint[1]);\r\n    }\r\n    for (var i = 0, len = points.length; i < len; i++) {\r\n        var point = points[i];\r\n        if (isLoop) {\r\n            prevPoint = points[i ? i - 1 : len - 1];\r\n            nextPoint = points[(i + 1) % len];\r\n        }\r\n        else {\r\n            if (i === 0 || i === len - 1) {\r\n                cps.push(v2Clone(points[i]));\r\n                continue;\r\n            }\r\n            else {\r\n                prevPoint = points[i - 1];\r\n                nextPoint = points[i + 1];\r\n            }\r\n        }\r\n        v2Sub(v, nextPoint, prevPoint);\r\n        v2Scale(v, v, smooth);\r\n        var d0 = v2Distance(point, prevPoint);\r\n        var d1 = v2Distance(point, nextPoint);\r\n        var sum = d0 + d1;\r\n        if (sum !== 0) {\r\n            d0 /= sum;\r\n            d1 /= sum;\r\n        }\r\n        v2Scale(v1, v, -d0);\r\n        v2Scale(v2, v, d1);\r\n        var cp0 = v2Add([], point, v1);\r\n        var cp1 = v2Add([], point, v2);\r\n        if (constraint) {\r\n            v2Max(cp0, cp0, min);\r\n            v2Min(cp0, cp0, max);\r\n            v2Max(cp1, cp1, min);\r\n            v2Min(cp1, cp1, max);\r\n        }\r\n        cps.push(cp0);\r\n        cps.push(cp1);\r\n    }\r\n    if (isLoop) {\r\n        cps.push(cps.shift());\r\n    }\r\n    return cps;\r\n}\r\n", "import smoothBezier from './smoothBezier.js';\r\nexport function buildPath(ctx, shape, closePath) {\r\n    var smooth = shape.smooth;\r\n    var points = shape.points;\r\n    if (points && points.length >= 2) {\r\n        if (smooth) {\r\n            var controlPoints = smoothBezier(points, smooth, closePath, shape.smoothConstraint);\r\n            ctx.moveTo(points[0][0], points[0][1]);\r\n            var len = points.length;\r\n            for (var i = 0; i < (closePath ? len : len - 1); i++) {\r\n                var cp1 = controlPoints[i * 2];\r\n                var cp2 = controlPoints[i * 2 + 1];\r\n                var p = points[(i + 1) % len];\r\n                ctx.bezierCurveTo(cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]);\r\n            }\r\n        }\r\n        else {\r\n            ctx.moveTo(points[0][0], points[0][1]);\r\n            for (var i = 1, l = points.length; i < l; i++) {\r\n                ctx.lineTo(points[i][0], points[i][1]);\r\n            }\r\n        }\r\n        closePath && ctx.closePath();\r\n    }\r\n}\r\n", "import { __extends } from \"tslib\";\r\nimport Path from '../Path.js';\r\nimport * as polyHelper from '../helper/poly.js';\r\nvar PolygonShape = (function () {\r\n    function PolygonShape() {\r\n        this.points = null;\r\n        this.smooth = 0;\r\n        this.smoothConstraint = null;\r\n    }\r\n    return PolygonShape;\r\n}());\r\nexport { PolygonShape };\r\nvar Polygon = (function (_super) {\r\n    __extends(Polygon, _super);\r\n    function Polygon(opts) {\r\n        return _super.call(this, opts) || this;\r\n    }\r\n    Polygon.prototype.getDefaultShape = function () {\r\n        return new PolygonShape();\r\n    };\r\n    Polygon.prototype.buildPath = function (ctx, shape) {\r\n        polyHelper.buildPath(ctx, shape, true);\r\n    };\r\n    return Polygon;\r\n}(Path));\r\n;\r\nPolygon.prototype.type = 'polygon';\r\nexport default Polygon;\r\n", "import { __extends } from \"tslib\";\r\nimport Path from '../Path.js';\r\nimport * as polyHelper from '../helper/poly.js';\r\nvar PolylineShape = (function () {\r\n    function PolylineShape() {\r\n        this.points = null;\r\n        this.percent = 1;\r\n        this.smooth = 0;\r\n        this.smoothConstraint = null;\r\n    }\r\n    return PolylineShape;\r\n}());\r\nexport { PolylineShape };\r\nvar Polyline = (function (_super) {\r\n    __extends(Polyline, _super);\r\n    function Polyline(opts) {\r\n        return _super.call(this, opts) || this;\r\n    }\r\n    Polyline.prototype.getDefaultStyle = function () {\r\n        return {\r\n            stroke: '#000',\r\n            fill: null\r\n        };\r\n    };\r\n    Polyline.prototype.getDefaultShape = function () {\r\n        return new PolylineShape();\r\n    };\r\n    Polyline.prototype.buildPath = function (ctx, shape) {\r\n        polyHelper.buildPath(ctx, shape, false);\r\n    };\r\n    return Polyline;\r\n}(Path));\r\nPolyline.prototype.type = 'polyline';\r\nexport default Polyline;\r\n", "import { __extends } from \"tslib\";\r\nimport Path from '../Path.js';\r\nimport { subPixelOptimizeLine } from '../helper/subPixelOptimize.js';\r\nvar subPixelOptimizeOutputShape = {};\r\nvar LineShape = (function () {\r\n    function LineShape() {\r\n        this.x1 = 0;\r\n        this.y1 = 0;\r\n        this.x2 = 0;\r\n        this.y2 = 0;\r\n        this.percent = 1;\r\n    }\r\n    return LineShape;\r\n}());\r\nexport { LineShape };\r\nvar Line = (function (_super) {\r\n    __extends(Line, _super);\r\n    function Line(opts) {\r\n        return _super.call(this, opts) || this;\r\n    }\r\n    Line.prototype.getDefaultStyle = function () {\r\n        return {\r\n            stroke: '#000',\r\n            fill: null\r\n        };\r\n    };\r\n    Line.prototype.getDefaultShape = function () {\r\n        return new LineShape();\r\n    };\r\n    Line.prototype.buildPath = function (ctx, shape) {\r\n        var x1;\r\n        var y1;\r\n        var x2;\r\n        var y2;\r\n        if (this.subPixelOptimize) {\r\n            var optimizedShape = subPixelOptimizeLine(subPixelOptimizeOutputShape, shape, this.style);\r\n            x1 = optimizedShape.x1;\r\n            y1 = optimizedShape.y1;\r\n            x2 = optimizedShape.x2;\r\n            y2 = optimizedShape.y2;\r\n        }\r\n        else {\r\n            x1 = shape.x1;\r\n            y1 = shape.y1;\r\n            x2 = shape.x2;\r\n            y2 = shape.y2;\r\n        }\r\n        var percent = shape.percent;\r\n        if (percent === 0) {\r\n            return;\r\n        }\r\n        ctx.moveTo(x1, y1);\r\n        if (percent < 1) {\r\n            x2 = x1 * (1 - percent) + x2 * percent;\r\n            y2 = y1 * (1 - percent) + y2 * percent;\r\n        }\r\n        ctx.lineTo(x2, y2);\r\n    };\r\n    Line.prototype.pointAt = function (p) {\r\n        var shape = this.shape;\r\n        return [\r\n            shape.x1 * (1 - p) + shape.x2 * p,\r\n            shape.y1 * (1 - p) + shape.y2 * p\r\n        ];\r\n    };\r\n    return Line;\r\n}(Path));\r\nLine.prototype.type = 'line';\r\nexport default Line;\r\n", "import { __extends } from \"tslib\";\r\nimport Path from '../Path.js';\r\nimport * as vec2 from '../../core/vector.js';\r\nimport { quadraticSubdivide, cubicSubdivide, quadraticAt, cubicAt, quadraticDerivativeAt, cubicDerivativeAt } from '../../core/curve.js';\r\nvar out = [];\r\nvar BezierCurveShape = (function () {\r\n    function BezierCurveShape() {\r\n        this.x1 = 0;\r\n        this.y1 = 0;\r\n        this.x2 = 0;\r\n        this.y2 = 0;\r\n        this.cpx1 = 0;\r\n        this.cpy1 = 0;\r\n        this.percent = 1;\r\n    }\r\n    return BezierCurveShape;\r\n}());\r\nexport { BezierCurveShape };\r\nfunction someVectorAt(shape, t, isTangent) {\r\n    var cpx2 = shape.cpx2;\r\n    var cpy2 = shape.cpy2;\r\n    if (cpx2 != null || cpy2 != null) {\r\n        return [\r\n            (isTangent ? cubicDerivativeAt : cubicAt)(shape.x1, shape.cpx1, shape.cpx2, shape.x2, t),\r\n            (isTangent ? cubicDerivativeAt : cubicAt)(shape.y1, shape.cpy1, shape.cpy2, shape.y2, t)\r\n        ];\r\n    }\r\n    else {\r\n        return [\r\n            (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.x1, shape.cpx1, shape.x2, t),\r\n            (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.y1, shape.cpy1, shape.y2, t)\r\n        ];\r\n    }\r\n}\r\nvar BezierCurve = (function (_super) {\r\n    __extends(BezierCurve, _super);\r\n    function BezierCurve(opts) {\r\n        return _super.call(this, opts) || this;\r\n    }\r\n    BezierCurve.prototype.getDefaultStyle = function () {\r\n        return {\r\n            stroke: '#000',\r\n            fill: null\r\n        };\r\n    };\r\n    BezierCurve.prototype.getDefaultShape = function () {\r\n        return new BezierCurveShape();\r\n    };\r\n    BezierCurve.prototype.buildPath = function (ctx, shape) {\r\n        var x1 = shape.x1;\r\n        var y1 = shape.y1;\r\n        var x2 = shape.x2;\r\n        var y2 = shape.y2;\r\n        var cpx1 = shape.cpx1;\r\n        var cpy1 = shape.cpy1;\r\n        var cpx2 = shape.cpx2;\r\n        var cpy2 = shape.cpy2;\r\n        var percent = shape.percent;\r\n        if (percent === 0) {\r\n            return;\r\n        }\r\n        ctx.moveTo(x1, y1);\r\n        if (cpx2 == null || cpy2 == null) {\r\n            if (percent < 1) {\r\n                quadraticSubdivide(x1, cpx1, x2, percent, out);\r\n                cpx1 = out[1];\r\n                x2 = out[2];\r\n                quadraticSubdivide(y1, cpy1, y2, percent, out);\r\n                cpy1 = out[1];\r\n                y2 = out[2];\r\n            }\r\n            ctx.quadraticCurveTo(cpx1, cpy1, x2, y2);\r\n        }\r\n        else {\r\n            if (percent < 1) {\r\n                cubicSubdivide(x1, cpx1, cpx2, x2, percent, out);\r\n                cpx1 = out[1];\r\n                cpx2 = out[2];\r\n                x2 = out[3];\r\n                cubicSubdivide(y1, cpy1, cpy2, y2, percent, out);\r\n                cpy1 = out[1];\r\n                cpy2 = out[2];\r\n                y2 = out[3];\r\n            }\r\n            ctx.bezierCurveTo(cpx1, cpy1, cpx2, cpy2, x2, y2);\r\n        }\r\n    };\r\n    BezierCurve.prototype.pointAt = function (t) {\r\n        return someVectorAt(this.shape, t, false);\r\n    };\r\n    BezierCurve.prototype.tangentAt = function (t) {\r\n        var p = someVectorAt(this.shape, t, true);\r\n        return vec2.normalize(p, p);\r\n    };\r\n    return BezierCurve;\r\n}(Path));\r\n;\r\nBezierCurve.prototype.type = 'bezier-curve';\r\nexport default BezierCurve;\r\n", "import { __extends } from \"tslib\";\r\nimport Path from '../Path.js';\r\nvar ArcShape = (function () {\r\n    function ArcShape() {\r\n        this.cx = 0;\r\n        this.cy = 0;\r\n        this.r = 0;\r\n        this.startAngle = 0;\r\n        this.endAngle = Math.PI * 2;\r\n        this.clockwise = true;\r\n    }\r\n    return ArcShape;\r\n}());\r\nexport { ArcShape };\r\nvar Arc = (function (_super) {\r\n    __extends(Arc, _super);\r\n    function Arc(opts) {\r\n        return _super.call(this, opts) || this;\r\n    }\r\n    Arc.prototype.getDefaultStyle = function () {\r\n        return {\r\n            stroke: '#000',\r\n            fill: null\r\n        };\r\n    };\r\n    Arc.prototype.getDefaultShape = function () {\r\n        return new ArcShape();\r\n    };\r\n    Arc.prototype.buildPath = function (ctx, shape) {\r\n        var x = shape.cx;\r\n        var y = shape.cy;\r\n        var r = Math.max(shape.r, 0);\r\n        var startAngle = shape.startAngle;\r\n        var endAngle = shape.endAngle;\r\n        var clockwise = shape.clockwise;\r\n        var unitX = Math.cos(startAngle);\r\n        var unitY = Math.sin(startAngle);\r\n        ctx.moveTo(unitX * r + x, unitY * r + y);\r\n        ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\r\n    };\r\n    return Arc;\r\n}(Path));\r\nArc.prototype.type = 'arc';\r\nexport default Arc;\r\n", "var Gradient = (function () {\r\n    function Gradient(colorStops) {\r\n        this.colorStops = colorStops || [];\r\n    }\r\n    Gradient.prototype.addColorStop = function (offset, color) {\r\n        this.colorStops.push({\r\n            offset: offset,\r\n            color: color\r\n        });\r\n    };\r\n    return Gradient;\r\n}());\r\nexport default Gradient;\r\n", "import { __extends } from \"tslib\";\r\nimport Gradient from './Gradient.js';\r\nvar LinearGradient = (function (_super) {\r\n    __extends(LinearGradient, _super);\r\n    function LinearGradient(x, y, x2, y2, colorStops, globalCoord) {\r\n        var _this = _super.call(this, colorStops) || this;\r\n        _this.x = x == null ? 0 : x;\r\n        _this.y = y == null ? 0 : y;\r\n        _this.x2 = x2 == null ? 1 : x2;\r\n        _this.y2 = y2 == null ? 0 : y2;\r\n        _this.type = 'linear';\r\n        _this.global = globalCoord || false;\r\n        return _this;\r\n    }\r\n    return LinearGradient;\r\n}(Gradient));\r\nexport default LinearGradient;\r\n;\r\n", "import { __extends } from \"tslib\";\r\nimport Gradient from './Gradient.js';\r\nvar RadialGradient = (function (_super) {\r\n    __extends(RadialGradient, _super);\r\n    function RadialGradient(x, y, r, colorStops, globalCoord) {\r\n        var _this = _super.call(this, colorStops) || this;\r\n        _this.x = x == null ? 0.5 : x;\r\n        _this.y = y == null ? 0.5 : y;\r\n        _this.r = r == null ? 0.5 : r;\r\n        _this.type = 'radial';\r\n        _this.global = globalCoord || false;\r\n        return _this;\r\n    }\r\n    return RadialGradient;\r\n}(Gradient));\r\nexport default RadialGradient;\r\n", "import Point from './Point.js';\r\nvar extent = [0, 0];\r\nvar extent2 = [0, 0];\r\nvar minTv = new Point();\r\nvar maxTv = new Point();\r\nvar OrientedBoundingRect = (function () {\r\n    function OrientedBoundingRect(rect, transform) {\r\n        this._corners = [];\r\n        this._axes = [];\r\n        this._origin = [0, 0];\r\n        for (var i = 0; i < 4; i++) {\r\n            this._corners[i] = new Point();\r\n        }\r\n        for (var i = 0; i < 2; i++) {\r\n            this._axes[i] = new Point();\r\n        }\r\n        if (rect) {\r\n            this.fromBoundingRect(rect, transform);\r\n        }\r\n    }\r\n    OrientedBoundingRect.prototype.fromBoundingRect = function (rect, transform) {\r\n        var corners = this._corners;\r\n        var axes = this._axes;\r\n        var x = rect.x;\r\n        var y = rect.y;\r\n        var x2 = x + rect.width;\r\n        var y2 = y + rect.height;\r\n        corners[0].set(x, y);\r\n        corners[1].set(x2, y);\r\n        corners[2].set(x2, y2);\r\n        corners[3].set(x, y2);\r\n        if (transform) {\r\n            for (var i = 0; i < 4; i++) {\r\n                corners[i].transform(transform);\r\n            }\r\n        }\r\n        Point.sub(axes[0], corners[1], corners[0]);\r\n        Point.sub(axes[1], corners[3], corners[0]);\r\n        axes[0].normalize();\r\n        axes[1].normalize();\r\n        for (var i = 0; i < 2; i++) {\r\n            this._origin[i] = axes[i].dot(corners[0]);\r\n        }\r\n    };\r\n    OrientedBoundingRect.prototype.intersect = function (other, mtv) {\r\n        var overlapped = true;\r\n        var noMtv = !mtv;\r\n        minTv.set(Infinity, Infinity);\r\n        maxTv.set(0, 0);\r\n        if (!this._intersectCheckOneSide(this, other, minTv, maxTv, noMtv, 1)) {\r\n            overlapped = false;\r\n            if (noMtv) {\r\n                return overlapped;\r\n            }\r\n        }\r\n        if (!this._intersectCheckOneSide(other, this, minTv, maxTv, noMtv, -1)) {\r\n            overlapped = false;\r\n            if (noMtv) {\r\n                return overlapped;\r\n            }\r\n        }\r\n        if (!noMtv) {\r\n            Point.copy(mtv, overlapped ? minTv : maxTv);\r\n        }\r\n        return overlapped;\r\n    };\r\n    OrientedBoundingRect.prototype._intersectCheckOneSide = function (self, other, minTv, maxTv, noMtv, inverse) {\r\n        var overlapped = true;\r\n        for (var i = 0; i < 2; i++) {\r\n            var axis = this._axes[i];\r\n            this._getProjMinMaxOnAxis(i, self._corners, extent);\r\n            this._getProjMinMaxOnAxis(i, other._corners, extent2);\r\n            if (extent[1] < extent2[0] || extent[0] > extent2[1]) {\r\n                overlapped = false;\r\n                if (noMtv) {\r\n                    return overlapped;\r\n                }\r\n                var dist0 = Math.abs(extent2[0] - extent[1]);\r\n                var dist1 = Math.abs(extent[0] - extent2[1]);\r\n                if (Math.min(dist0, dist1) > maxTv.len()) {\r\n                    if (dist0 < dist1) {\r\n                        Point.scale(maxTv, axis, -dist0 * inverse);\r\n                    }\r\n                    else {\r\n                        Point.scale(maxTv, axis, dist1 * inverse);\r\n                    }\r\n                }\r\n            }\r\n            else if (minTv) {\r\n                var dist0 = Math.abs(extent2[0] - extent[1]);\r\n                var dist1 = Math.abs(extent[0] - extent2[1]);\r\n                if (Math.min(dist0, dist1) < minTv.len()) {\r\n                    if (dist0 < dist1) {\r\n                        Point.scale(minTv, axis, dist0 * inverse);\r\n                    }\r\n                    else {\r\n                        Point.scale(minTv, axis, -dist1 * inverse);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return overlapped;\r\n    };\r\n    OrientedBoundingRect.prototype._getProjMinMaxOnAxis = function (dim, corners, out) {\r\n        var axis = this._axes[dim];\r\n        var origin = this._origin;\r\n        var proj = corners[0].dot(axis) + origin[dim];\r\n        var min = proj;\r\n        var max = proj;\r\n        for (var i = 1; i < corners.length; i++) {\r\n            var proj_1 = corners[i].dot(axis) + origin[dim];\r\n            min = Math.min(proj_1, min);\r\n            max = Math.max(proj_1, max);\r\n        }\r\n        out[0] = min;\r\n        out[1] = max;\r\n    };\r\n    return OrientedBoundingRect;\r\n}());\r\nexport default OrientedBoundingRect;\r\n", "import { __extends } from \"tslib\";\r\nimport Displayble from './Displayable.js';\r\nimport BoundingRect from '../core/BoundingRect.js';\r\nvar m = [];\r\nvar IncrementalDisplayable = (function (_super) {\r\n    __extends(IncrementalDisplayable, _super);\r\n    function IncrementalDisplayable() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.notClear = true;\r\n        _this.incremental = true;\r\n        _this._displayables = [];\r\n        _this._temporaryDisplayables = [];\r\n        _this._cursor = 0;\r\n        return _this;\r\n    }\r\n    IncrementalDisplayable.prototype.traverse = function (cb, context) {\r\n        cb.call(context, this);\r\n    };\r\n    IncrementalDisplayable.prototype.useStyle = function () {\r\n        this.style = {};\r\n    };\r\n    IncrementalDisplayable.prototype.getCursor = function () {\r\n        return this._cursor;\r\n    };\r\n    IncrementalDisplayable.prototype.innerAfterBrush = function () {\r\n        this._cursor = this._displayables.length;\r\n    };\r\n    IncrementalDisplayable.prototype.clearDisplaybles = function () {\r\n        this._displayables = [];\r\n        this._temporaryDisplayables = [];\r\n        this._cursor = 0;\r\n        this.markRedraw();\r\n        this.notClear = false;\r\n    };\r\n    IncrementalDisplayable.prototype.clearTemporalDisplayables = function () {\r\n        this._temporaryDisplayables = [];\r\n    };\r\n    IncrementalDisplayable.prototype.addDisplayable = function (displayable, notPersistent) {\r\n        if (notPersistent) {\r\n            this._temporaryDisplayables.push(displayable);\r\n        }\r\n        else {\r\n            this._displayables.push(displayable);\r\n        }\r\n        this.markRedraw();\r\n    };\r\n    IncrementalDisplayable.prototype.addDisplayables = function (displayables, notPersistent) {\r\n        notPersistent = notPersistent || false;\r\n        for (var i = 0; i < displayables.length; i++) {\r\n            this.addDisplayable(displayables[i], notPersistent);\r\n        }\r\n    };\r\n    IncrementalDisplayable.prototype.getDisplayables = function () {\r\n        return this._displayables;\r\n    };\r\n    IncrementalDisplayable.prototype.getTemporalDisplayables = function () {\r\n        return this._temporaryDisplayables;\r\n    };\r\n    IncrementalDisplayable.prototype.eachPendingDisplayable = function (cb) {\r\n        for (var i = this._cursor; i < this._displayables.length; i++) {\r\n            cb && cb(this._displayables[i]);\r\n        }\r\n        for (var i = 0; i < this._temporaryDisplayables.length; i++) {\r\n            cb && cb(this._temporaryDisplayables[i]);\r\n        }\r\n    };\r\n    IncrementalDisplayable.prototype.update = function () {\r\n        this.updateTransform();\r\n        for (var i = this._cursor; i < this._displayables.length; i++) {\r\n            var displayable = this._displayables[i];\r\n            displayable.parent = this;\r\n            displayable.update();\r\n            displayable.parent = null;\r\n        }\r\n        for (var i = 0; i < this._temporaryDisplayables.length; i++) {\r\n            var displayable = this._temporaryDisplayables[i];\r\n            displayable.parent = this;\r\n            displayable.update();\r\n            displayable.parent = null;\r\n        }\r\n    };\r\n    IncrementalDisplayable.prototype.getBoundingRect = function () {\r\n        if (!this._rect) {\r\n            var rect = new BoundingRect(Infinity, Infinity, -Infinity, -Infinity);\r\n            for (var i = 0; i < this._displayables.length; i++) {\r\n                var displayable = this._displayables[i];\r\n                var childRect = displayable.getBoundingRect().clone();\r\n                if (displayable.needLocalTransform()) {\r\n                    childRect.applyTransform(displayable.getLocalTransform(m));\r\n                }\r\n                rect.union(childRect);\r\n            }\r\n            this._rect = rect;\r\n        }\r\n        return this._rect;\r\n    };\r\n    IncrementalDisplayable.prototype.contain = function (x, y) {\r\n        var localPos = this.transformCoordToLocal(x, y);\r\n        var rect = this.getBoundingRect();\r\n        if (rect.contain(localPos[0], localPos[1])) {\r\n            for (var i = 0; i < this._displayables.length; i++) {\r\n                var displayable = this._displayables[i];\r\n                if (displayable.contain(x, y)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    return IncrementalDisplayable;\r\n}(Displayble));\r\nexport default IncrementalDisplayable;\r\n", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { isFunction, isObject, retrieve2 } from 'zrender/lib/core/util.js';\r\nimport { makeInner } from '../util/model.js';\r\n// Stored properties for further transition.\r\nexport var transitionStore = makeInner();\r\n/**\r\n * Return null if animation is disabled.\r\n */\r\nexport function getAnimationConfig(animationType, animatableModel, dataIndex,\r\n// Extra opts can override the option in animatable model.\r\nextraOpts,\r\n// TODO It's only for pictorial bar now.\r\nextraDelayParams) {\r\n  var animationPayload;\r\n  // Check if there is global animation configuration from dataZoom/resize can override the config in option.\r\n  // If animation is enabled. Will use this animation config in payload.\r\n  // If animation is disabled. Just ignore it.\r\n  if (animatableModel && animatableModel.ecModel) {\r\n    var updatePayload = animatableModel.ecModel.getUpdatePayload();\r\n    animationPayload = updatePayload && updatePayload.animation;\r\n  }\r\n  var animationEnabled = animatableModel && animatableModel.isAnimationEnabled();\r\n  var isUpdate = animationType === 'update';\r\n  if (animationEnabled) {\r\n    var duration = void 0;\r\n    var easing = void 0;\r\n    var delay = void 0;\r\n    if (extraOpts) {\r\n      duration = retrieve2(extraOpts.duration, 200);\r\n      easing = retrieve2(extraOpts.easing, 'cubicOut');\r\n      delay = 0;\r\n    } else {\r\n      duration = animatableModel.getShallow(isUpdate ? 'animationDurationUpdate' : 'animationDuration');\r\n      easing = animatableModel.getShallow(isUpdate ? 'animationEasingUpdate' : 'animationEasing');\r\n      delay = animatableModel.getShallow(isUpdate ? 'animationDelayUpdate' : 'animationDelay');\r\n    }\r\n    // animation from payload has highest priority.\r\n    if (animationPayload) {\r\n      animationPayload.duration != null && (duration = animationPayload.duration);\r\n      animationPayload.easing != null && (easing = animationPayload.easing);\r\n      animationPayload.delay != null && (delay = animationPayload.delay);\r\n    }\r\n    if (isFunction(delay)) {\r\n      delay = delay(dataIndex, extraDelayParams);\r\n    }\r\n    if (isFunction(duration)) {\r\n      duration = duration(dataIndex);\r\n    }\r\n    var config = {\r\n      duration: duration || 0,\r\n      delay: delay,\r\n      easing: easing\r\n    };\r\n    return config;\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\nfunction animateOrSetProps(animationType, el, props, animatableModel, dataIndex, cb, during) {\r\n  var isFrom = false;\r\n  var removeOpt;\r\n  if (isFunction(dataIndex)) {\r\n    during = cb;\r\n    cb = dataIndex;\r\n    dataIndex = null;\r\n  } else if (isObject(dataIndex)) {\r\n    cb = dataIndex.cb;\r\n    during = dataIndex.during;\r\n    isFrom = dataIndex.isFrom;\r\n    removeOpt = dataIndex.removeOpt;\r\n    dataIndex = dataIndex.dataIndex;\r\n  }\r\n  var isRemove = animationType === 'leave';\r\n  if (!isRemove) {\r\n    // Must stop the remove animation.\r\n    el.stopAnimation('leave');\r\n  }\r\n  var animationConfig = getAnimationConfig(animationType, animatableModel, dataIndex, isRemove ? removeOpt || {} : null, animatableModel && animatableModel.getAnimationDelayParams ? animatableModel.getAnimationDelayParams(el, dataIndex) : null);\r\n  if (animationConfig && animationConfig.duration > 0) {\r\n    var duration = animationConfig.duration;\r\n    var animationDelay = animationConfig.delay;\r\n    var animationEasing = animationConfig.easing;\r\n    var animateConfig = {\r\n      duration: duration,\r\n      delay: animationDelay || 0,\r\n      easing: animationEasing,\r\n      done: cb,\r\n      force: !!cb || !!during,\r\n      // Set to final state in update/init animation.\r\n      // So the post processing based on the path shape can be done correctly.\r\n      setToFinal: !isRemove,\r\n      scope: animationType,\r\n      during: during\r\n    };\r\n    isFrom ? el.animateFrom(props, animateConfig) : el.animateTo(props, animateConfig);\r\n  } else {\r\n    el.stopAnimation();\r\n    // If `isFrom`, the props is the \"from\" props.\r\n    !isFrom && el.attr(props);\r\n    // Call during at least once.\r\n    during && during(1);\r\n    cb && cb();\r\n  }\r\n}\r\n/**\r\n * Update graphic element properties with or without animation according to the\r\n * configuration in series.\r\n *\r\n * Caution: this method will stop previous animation.\r\n * So do not use this method to one element twice before\r\n * animation starts, unless you know what you are doing.\r\n * @example\r\n *     graphic.updateProps(el, {\r\n *         position: [100, 100]\r\n *     }, seriesModel, dataIndex, function () { console.log('Animation done!'); });\r\n *     // Or\r\n *     graphic.updateProps(el, {\r\n *         position: [100, 100]\r\n *     }, seriesModel, function () { console.log('Animation done!'); });\r\n */\r\nfunction updateProps(el, props,\r\n// TODO: TYPE AnimatableModel\r\nanimatableModel, dataIndex, cb, during) {\r\n  animateOrSetProps('update', el, props, animatableModel, dataIndex, cb, during);\r\n}\r\nexport { updateProps };\r\n/**\r\n * Init graphic element properties with or without animation according to the\r\n * configuration in series.\r\n *\r\n * Caution: this method will stop previous animation.\r\n * So do not use this method to one element twice before\r\n * animation starts, unless you know what you are doing.\r\n */\r\nexport function initProps(el, props, animatableModel, dataIndex, cb, during) {\r\n  animateOrSetProps('enter', el, props, animatableModel, dataIndex, cb, during);\r\n}\r\n/**\r\n * If element is removed.\r\n * It can determine if element is having remove animation.\r\n */\r\nexport function isElementRemoved(el) {\r\n  if (!el.__zr) {\r\n    return true;\r\n  }\r\n  for (var i = 0; i < el.animators.length; i++) {\r\n    var animator = el.animators[i];\r\n    if (animator.scope === 'leave') {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n/**\r\n * Remove graphic element\r\n */\r\nexport function removeElement(el, props, animatableModel, dataIndex, cb, during) {\r\n  // Don't do remove animation twice.\r\n  if (isElementRemoved(el)) {\r\n    return;\r\n  }\r\n  animateOrSetProps('leave', el, props, animatableModel, dataIndex, cb, during);\r\n}\r\nfunction fadeOutDisplayable(el, animatableModel, dataIndex, done) {\r\n  el.removeTextContent();\r\n  el.removeTextGuideLine();\r\n  removeElement(el, {\r\n    style: {\r\n      opacity: 0\r\n    }\r\n  }, animatableModel, dataIndex, done);\r\n}\r\nexport function removeElementWithFadeOut(el, animatableModel, dataIndex) {\r\n  function doRemove() {\r\n    el.parent && el.parent.remove(el);\r\n  }\r\n  // Hide label and labelLine first\r\n  // TODO Also use fade out animation?\r\n  if (!el.isGroup) {\r\n    fadeOutDisplayable(el, animatableModel, dataIndex, doRemove);\r\n  } else {\r\n    el.traverse(function (disp) {\r\n      if (!disp.isGroup) {\r\n        // Can invoke doRemove multiple times.\r\n        fadeOutDisplayable(disp, animatableModel, dataIndex, doRemove);\r\n      }\r\n    });\r\n  }\r\n}\r\n/**\r\n * Save old style for style transition in universalTransition module.\r\n * It's used when element will be reused in each render.\r\n * For chart like map, heatmap, which will always create new element.\r\n * We don't need to save this because universalTransition can get old style from the old element\r\n */\r\nexport function saveOldStyle(el) {\r\n  transitionStore(el).oldStyle = el.style;\r\n}\r\nexport function getOldStyle(el) {\r\n  return transitionStore(el).oldStyle;\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport ZRText from 'zrender/lib/graphic/Text.js';\r\nimport { isFunction, retrieve2, extend, keys, trim } from 'zrender/lib/core/util.js';\r\nimport { SPECIAL_STATES, DISPLAY_STATES } from '../util/states.js';\r\nimport { deprecateReplaceLog } from '../util/log.js';\r\nimport { makeInner, interpolateRawValues } from '../util/model.js';\r\nimport { initProps, updateProps } from '../util/graphic.js';\r\nvar EMPTY_OBJ = {};\r\nexport function setLabelText(label, labelTexts) {\r\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\r\n    var stateName = SPECIAL_STATES[i];\r\n    var text = labelTexts[stateName];\r\n    var state = label.ensureState(stateName);\r\n    state.style = state.style || {};\r\n    state.style.text = text;\r\n  }\r\n  var oldStates = label.currentStates.slice();\r\n  label.clearStates(true);\r\n  label.setStyle({\r\n    text: labelTexts.normal\r\n  });\r\n  label.useStates(oldStates, true);\r\n}\r\nfunction getLabelText(opt, stateModels, interpolatedValue) {\r\n  var labelFetcher = opt.labelFetcher;\r\n  var labelDataIndex = opt.labelDataIndex;\r\n  var labelDimIndex = opt.labelDimIndex;\r\n  var normalModel = stateModels.normal;\r\n  var baseText;\r\n  if (labelFetcher) {\r\n    baseText = labelFetcher.getFormattedLabel(labelDataIndex, 'normal', null, labelDimIndex, normalModel && normalModel.get('formatter'), interpolatedValue != null ? {\r\n      interpolatedValue: interpolatedValue\r\n    } : null);\r\n  }\r\n  if (baseText == null) {\r\n    baseText = isFunction(opt.defaultText) ? opt.defaultText(labelDataIndex, opt, interpolatedValue) : opt.defaultText;\r\n  }\r\n  var statesText = {\r\n    normal: baseText\r\n  };\r\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\r\n    var stateName = SPECIAL_STATES[i];\r\n    var stateModel = stateModels[stateName];\r\n    statesText[stateName] = retrieve2(labelFetcher ? labelFetcher.getFormattedLabel(labelDataIndex, stateName, null, labelDimIndex, stateModel && stateModel.get('formatter')) : null, baseText);\r\n  }\r\n  return statesText;\r\n}\r\nfunction setLabelStyle(targetEl, labelStatesModels, opt, stateSpecified\r\n// TODO specified position?\r\n) {\r\n  opt = opt || EMPTY_OBJ;\r\n  var isSetOnText = targetEl instanceof ZRText;\r\n  var needsCreateText = false;\r\n  for (var i = 0; i < DISPLAY_STATES.length; i++) {\r\n    var stateModel = labelStatesModels[DISPLAY_STATES[i]];\r\n    if (stateModel && stateModel.getShallow('show')) {\r\n      needsCreateText = true;\r\n      break;\r\n    }\r\n  }\r\n  var textContent = isSetOnText ? targetEl : targetEl.getTextContent();\r\n  if (needsCreateText) {\r\n    if (!isSetOnText) {\r\n      // Reuse the previous\r\n      if (!textContent) {\r\n        textContent = new ZRText();\r\n        targetEl.setTextContent(textContent);\r\n      }\r\n      // Use same state proxy\r\n      if (targetEl.stateProxy) {\r\n        textContent.stateProxy = targetEl.stateProxy;\r\n      }\r\n    }\r\n    var labelStatesTexts = getLabelText(opt, labelStatesModels);\r\n    var normalModel = labelStatesModels.normal;\r\n    var showNormal = !!normalModel.getShallow('show');\r\n    var normalStyle = createTextStyle(normalModel, stateSpecified && stateSpecified.normal, opt, false, !isSetOnText);\r\n    normalStyle.text = labelStatesTexts.normal;\r\n    if (!isSetOnText) {\r\n      // Always create new\r\n      targetEl.setTextConfig(createTextConfig(normalModel, opt, false));\r\n    }\r\n    for (var i = 0; i < SPECIAL_STATES.length; i++) {\r\n      var stateName = SPECIAL_STATES[i];\r\n      var stateModel = labelStatesModels[stateName];\r\n      if (stateModel) {\r\n        var stateObj = textContent.ensureState(stateName);\r\n        var stateShow = !!retrieve2(stateModel.getShallow('show'), showNormal);\r\n        if (stateShow !== showNormal) {\r\n          stateObj.ignore = !stateShow;\r\n        }\r\n        stateObj.style = createTextStyle(stateModel, stateSpecified && stateSpecified[stateName], opt, true, !isSetOnText);\r\n        stateObj.style.text = labelStatesTexts[stateName];\r\n        if (!isSetOnText) {\r\n          var targetElEmphasisState = targetEl.ensureState(stateName);\r\n          targetElEmphasisState.textConfig = createTextConfig(stateModel, opt, true);\r\n        }\r\n      }\r\n    }\r\n    // PENDING: if there is many requirements that emphasis position\r\n    // need to be different from normal position, we might consider\r\n    // auto silent is those cases.\r\n    textContent.silent = !!normalModel.getShallow('silent');\r\n    // Keep x and y\r\n    if (textContent.style.x != null) {\r\n      normalStyle.x = textContent.style.x;\r\n    }\r\n    if (textContent.style.y != null) {\r\n      normalStyle.y = textContent.style.y;\r\n    }\r\n    textContent.ignore = !showNormal;\r\n    // Always create new style.\r\n    textContent.useStyle(normalStyle);\r\n    textContent.dirty();\r\n    if (opt.enableTextSetter) {\r\n      labelInner(textContent).setLabelText = function (interpolatedValue) {\r\n        var labelStatesTexts = getLabelText(opt, labelStatesModels, interpolatedValue);\r\n        setLabelText(textContent, labelStatesTexts);\r\n      };\r\n    }\r\n  } else if (textContent) {\r\n    // Not display rich text.\r\n    textContent.ignore = true;\r\n  }\r\n  targetEl.dirty();\r\n}\r\nexport { setLabelStyle };\r\nexport function getLabelStatesModels(itemModel, labelName) {\r\n  labelName = labelName || 'label';\r\n  var statesModels = {\r\n    normal: itemModel.getModel(labelName)\r\n  };\r\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\r\n    var stateName = SPECIAL_STATES[i];\r\n    statesModels[stateName] = itemModel.getModel([stateName, labelName]);\r\n  }\r\n  return statesModels;\r\n}\r\n/**\r\n * Set basic textStyle properties.\r\n */\r\nexport function createTextStyle(textStyleModel, specifiedTextStyle,\r\n// Fixed style in the code. Can't be set by model.\r\nopt, isNotNormal, isAttached // If text is attached on an element. If so, auto color will handling in zrender.\r\n) {\r\n  var textStyle = {};\r\n  setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached);\r\n  specifiedTextStyle && extend(textStyle, specifiedTextStyle);\r\n  // textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\r\n  return textStyle;\r\n}\r\nexport function createTextConfig(textStyleModel, opt, isNotNormal) {\r\n  opt = opt || {};\r\n  var textConfig = {};\r\n  var labelPosition;\r\n  var labelRotate = textStyleModel.getShallow('rotate');\r\n  var labelDistance = retrieve2(textStyleModel.getShallow('distance'), isNotNormal ? null : 5);\r\n  var labelOffset = textStyleModel.getShallow('offset');\r\n  labelPosition = textStyleModel.getShallow('position') || (isNotNormal ? null : 'inside');\r\n  // 'outside' is not a valid zr textPostion value, but used\r\n  // in bar series, and magric type should be considered.\r\n  labelPosition === 'outside' && (labelPosition = opt.defaultOutsidePosition || 'top');\r\n  if (labelPosition != null) {\r\n    textConfig.position = labelPosition;\r\n  }\r\n  if (labelOffset != null) {\r\n    textConfig.offset = labelOffset;\r\n  }\r\n  if (labelRotate != null) {\r\n    labelRotate *= Math.PI / 180;\r\n    textConfig.rotation = labelRotate;\r\n  }\r\n  if (labelDistance != null) {\r\n    textConfig.distance = labelDistance;\r\n  }\r\n  // fill and auto is determined by the color of path fill if it's not specified by developers.\r\n  textConfig.outsideFill = textStyleModel.get('color') === 'inherit' ? opt.inheritColor || null : 'auto';\r\n  return textConfig;\r\n}\r\n/**\r\n * The uniform entry of set text style, that is, retrieve style definitions\r\n * from `model` and set to `textStyle` object.\r\n *\r\n * Never in merge mode, but in overwrite mode, that is, all of the text style\r\n * properties will be set. (Consider the states of normal and emphasis and\r\n * default value can be adopted, merge would make the logic too complicated\r\n * to manage.)\r\n */\r\nfunction setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached) {\r\n  // Consider there will be abnormal when merge hover style to normal style if given default value.\r\n  opt = opt || EMPTY_OBJ;\r\n  var ecModel = textStyleModel.ecModel;\r\n  var globalTextStyle = ecModel && ecModel.option.textStyle;\r\n  // Consider case:\r\n  // {\r\n  //     data: [{\r\n  //         value: 12,\r\n  //         label: {\r\n  //             rich: {\r\n  //                 // no 'a' here but using parent 'a'.\r\n  //             }\r\n  //         }\r\n  //     }],\r\n  //     rich: {\r\n  //         a: { ... }\r\n  //     }\r\n  // }\r\n  var richItemNames = getRichItemNames(textStyleModel);\r\n  var richResult;\r\n  if (richItemNames) {\r\n    richResult = {};\r\n    for (var name_1 in richItemNames) {\r\n      if (richItemNames.hasOwnProperty(name_1)) {\r\n        // Cascade is supported in rich.\r\n        var richTextStyle = textStyleModel.getModel(['rich', name_1]);\r\n        // In rich, never `disableBox`.\r\n        // FIXME: consider `label: {formatter: '{a|xx}', color: 'blue', rich: {a: {}}}`,\r\n        // the default color `'blue'` will not be adopted if no color declared in `rich`.\r\n        // That might confuses users. So probably we should put `textStyleModel` as the\r\n        // root ancestor of the `richTextStyle`. But that would be a break change.\r\n        setTokenTextStyle(richResult[name_1] = {}, richTextStyle, globalTextStyle, opt, isNotNormal, isAttached, false, true);\r\n      }\r\n    }\r\n  }\r\n  if (richResult) {\r\n    textStyle.rich = richResult;\r\n  }\r\n  var overflow = textStyleModel.get('overflow');\r\n  if (overflow) {\r\n    textStyle.overflow = overflow;\r\n  }\r\n  var margin = textStyleModel.get('minMargin');\r\n  if (margin != null) {\r\n    textStyle.margin = margin;\r\n  }\r\n  setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, true, false);\r\n}\r\n// Consider case:\r\n// {\r\n//     data: [{\r\n//         value: 12,\r\n//         label: {\r\n//             rich: {\r\n//                 // no 'a' here but using parent 'a'.\r\n//             }\r\n//         }\r\n//     }],\r\n//     rich: {\r\n//         a: { ... }\r\n//     }\r\n// }\r\n// TODO TextStyleModel\r\nfunction getRichItemNames(textStyleModel) {\r\n  // Use object to remove duplicated names.\r\n  var richItemNameMap;\r\n  while (textStyleModel && textStyleModel !== textStyleModel.ecModel) {\r\n    var rich = (textStyleModel.option || EMPTY_OBJ).rich;\r\n    if (rich) {\r\n      richItemNameMap = richItemNameMap || {};\r\n      var richKeys = keys(rich);\r\n      for (var i = 0; i < richKeys.length; i++) {\r\n        var richKey = richKeys[i];\r\n        richItemNameMap[richKey] = 1;\r\n      }\r\n    }\r\n    textStyleModel = textStyleModel.parentModel;\r\n  }\r\n  return richItemNameMap;\r\n}\r\nvar TEXT_PROPS_WITH_GLOBAL = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'];\r\nvar TEXT_PROPS_SELF = ['align', 'lineHeight', 'width', 'height', 'tag', 'verticalAlign', 'ellipsis'];\r\nvar TEXT_PROPS_BOX = ['padding', 'borderWidth', 'borderRadius', 'borderDashOffset', 'backgroundColor', 'borderColor', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\r\nfunction setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, isBlock, inRich) {\r\n  // In merge mode, default value should not be given.\r\n  globalTextStyle = !isNotNormal && globalTextStyle || EMPTY_OBJ;\r\n  var inheritColor = opt && opt.inheritColor;\r\n  var fillColor = textStyleModel.getShallow('color');\r\n  var strokeColor = textStyleModel.getShallow('textBorderColor');\r\n  var opacity = retrieve2(textStyleModel.getShallow('opacity'), globalTextStyle.opacity);\r\n  if (fillColor === 'inherit' || fillColor === 'auto') {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      if (fillColor === 'auto') {\r\n        deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\r\n      }\r\n    }\r\n    if (inheritColor) {\r\n      fillColor = inheritColor;\r\n    } else {\r\n      fillColor = null;\r\n    }\r\n  }\r\n  if (strokeColor === 'inherit' || strokeColor === 'auto') {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      if (strokeColor === 'auto') {\r\n        deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\r\n      }\r\n    }\r\n    if (inheritColor) {\r\n      strokeColor = inheritColor;\r\n    } else {\r\n      strokeColor = null;\r\n    }\r\n  }\r\n  if (!isAttached) {\r\n    // Only use default global textStyle.color if text is individual.\r\n    // Otherwise it will use the strategy of attached text color because text may be on a path.\r\n    fillColor = fillColor || globalTextStyle.color;\r\n    strokeColor = strokeColor || globalTextStyle.textBorderColor;\r\n  }\r\n  if (fillColor != null) {\r\n    textStyle.fill = fillColor;\r\n  }\r\n  if (strokeColor != null) {\r\n    textStyle.stroke = strokeColor;\r\n  }\r\n  var textBorderWidth = retrieve2(textStyleModel.getShallow('textBorderWidth'), globalTextStyle.textBorderWidth);\r\n  if (textBorderWidth != null) {\r\n    textStyle.lineWidth = textBorderWidth;\r\n  }\r\n  var textBorderType = retrieve2(textStyleModel.getShallow('textBorderType'), globalTextStyle.textBorderType);\r\n  if (textBorderType != null) {\r\n    textStyle.lineDash = textBorderType;\r\n  }\r\n  var textBorderDashOffset = retrieve2(textStyleModel.getShallow('textBorderDashOffset'), globalTextStyle.textBorderDashOffset);\r\n  if (textBorderDashOffset != null) {\r\n    textStyle.lineDashOffset = textBorderDashOffset;\r\n  }\r\n  if (!isNotNormal && opacity == null && !inRich) {\r\n    opacity = opt && opt.defaultOpacity;\r\n  }\r\n  if (opacity != null) {\r\n    textStyle.opacity = opacity;\r\n  }\r\n  // TODO\r\n  if (!isNotNormal && !isAttached) {\r\n    // Set default finally.\r\n    if (textStyle.fill == null && opt.inheritColor) {\r\n      textStyle.fill = opt.inheritColor;\r\n    }\r\n  }\r\n  // Do not use `getFont` here, because merge should be supported, where\r\n  // part of these properties may be changed in emphasis style, and the\r\n  // others should remain their original value got from normal style.\r\n  for (var i = 0; i < TEXT_PROPS_WITH_GLOBAL.length; i++) {\r\n    var key = TEXT_PROPS_WITH_GLOBAL[i];\r\n    var val = retrieve2(textStyleModel.getShallow(key), globalTextStyle[key]);\r\n    if (val != null) {\r\n      textStyle[key] = val;\r\n    }\r\n  }\r\n  for (var i = 0; i < TEXT_PROPS_SELF.length; i++) {\r\n    var key = TEXT_PROPS_SELF[i];\r\n    var val = textStyleModel.getShallow(key);\r\n    if (val != null) {\r\n      textStyle[key] = val;\r\n    }\r\n  }\r\n  if (textStyle.verticalAlign == null) {\r\n    var baseline = textStyleModel.getShallow('baseline');\r\n    if (baseline != null) {\r\n      textStyle.verticalAlign = baseline;\r\n    }\r\n  }\r\n  if (!isBlock || !opt.disableBox) {\r\n    for (var i = 0; i < TEXT_PROPS_BOX.length; i++) {\r\n      var key = TEXT_PROPS_BOX[i];\r\n      var val = textStyleModel.getShallow(key);\r\n      if (val != null) {\r\n        textStyle[key] = val;\r\n      }\r\n    }\r\n    var borderType = textStyleModel.getShallow('borderType');\r\n    if (borderType != null) {\r\n      textStyle.borderDash = borderType;\r\n    }\r\n    if ((textStyle.backgroundColor === 'auto' || textStyle.backgroundColor === 'inherit') && inheritColor) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        if (textStyle.backgroundColor === 'auto') {\r\n          deprecateReplaceLog('backgroundColor: \\'auto\\'', 'backgroundColor: \\'inherit\\'');\r\n        }\r\n      }\r\n      textStyle.backgroundColor = inheritColor;\r\n    }\r\n    if ((textStyle.borderColor === 'auto' || textStyle.borderColor === 'inherit') && inheritColor) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        if (textStyle.borderColor === 'auto') {\r\n          deprecateReplaceLog('borderColor: \\'auto\\'', 'borderColor: \\'inherit\\'');\r\n        }\r\n      }\r\n      textStyle.borderColor = inheritColor;\r\n    }\r\n  }\r\n}\r\nexport function getFont(opt, ecModel) {\r\n  var gTextStyleModel = ecModel && ecModel.getModel('textStyle');\r\n  return trim([\r\n  // FIXME in node-canvas fontWeight is before fontStyle\r\n  opt.fontStyle || gTextStyleModel && gTextStyleModel.getShallow('fontStyle') || '', opt.fontWeight || gTextStyleModel && gTextStyleModel.getShallow('fontWeight') || '', (opt.fontSize || gTextStyleModel && gTextStyleModel.getShallow('fontSize') || 12) + 'px', opt.fontFamily || gTextStyleModel && gTextStyleModel.getShallow('fontFamily') || 'sans-serif'].join(' '));\r\n}\r\nexport var labelInner = makeInner();\r\nexport function setLabelValueAnimation(label, labelStatesModels, value, getDefaultText) {\r\n  if (!label) {\r\n    return;\r\n  }\r\n  var obj = labelInner(label);\r\n  obj.prevValue = obj.value;\r\n  obj.value = value;\r\n  var normalLabelModel = labelStatesModels.normal;\r\n  obj.valueAnimation = normalLabelModel.get('valueAnimation');\r\n  if (obj.valueAnimation) {\r\n    obj.precision = normalLabelModel.get('precision');\r\n    obj.defaultInterpolatedText = getDefaultText;\r\n    obj.statesModels = labelStatesModels;\r\n  }\r\n}\r\nexport function animateLabelValue(textEl, dataIndex, data, animatableModel, labelFetcher) {\r\n  var labelInnerStore = labelInner(textEl);\r\n  if (!labelInnerStore.valueAnimation || labelInnerStore.prevValue === labelInnerStore.value) {\r\n    // Value not changed, no new label animation\r\n    return;\r\n  }\r\n  var defaultInterpolatedText = labelInnerStore.defaultInterpolatedText;\r\n  // Consider the case that being animating, do not use the `obj.value`,\r\n  // Otherwise it will jump to the `obj.value` when this new animation started.\r\n  var currValue = retrieve2(labelInnerStore.interpolatedValue, labelInnerStore.prevValue);\r\n  var targetValue = labelInnerStore.value;\r\n  function during(percent) {\r\n    var interpolated = interpolateRawValues(data, labelInnerStore.precision, currValue, targetValue, percent);\r\n    labelInnerStore.interpolatedValue = percent === 1 ? null : interpolated;\r\n    var labelText = getLabelText({\r\n      labelDataIndex: dataIndex,\r\n      labelFetcher: labelFetcher,\r\n      defaultText: defaultInterpolatedText ? defaultInterpolatedText(interpolated) : interpolated + ''\r\n    }, labelInnerStore.statesModels, interpolated);\r\n    setLabelText(textEl, labelText);\r\n  }\r\n  textEl.percent = 0;\r\n  (labelInnerStore.prevValue == null ? initProps : updateProps)(textEl, {\r\n    // percent is used to prevent animation from being aborted #15916\r\n    percent: 1\r\n  }, animatableModel, dataIndex, null, during);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { getFont } from '../../label/labelStyle.js';\r\nimport ZRText from 'zrender/lib/graphic/Text.js';\r\nvar PATH_COLOR = ['textStyle', 'color'];\r\nvar textStyleParams = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'padding', 'lineHeight', 'rich', 'width', 'height', 'overflow'];\r\n// TODO Performance improvement?\r\nvar tmpText = new ZRText();\r\nvar TextStyleMixin = /** @class */function () {\r\n  function TextStyleMixin() {}\r\n  /**\r\n   * Get color property or get color from option.textStyle.color\r\n   */\r\n  // TODO Callback\r\n  TextStyleMixin.prototype.getTextColor = function (isEmphasis) {\r\n    var ecModel = this.ecModel;\r\n    return this.getShallow('color') || (!isEmphasis && ecModel ? ecModel.get(PATH_COLOR) : null);\r\n  };\r\n  /**\r\n   * Create font string from fontStyle, fontWeight, fontSize, fontFamily\r\n   * @return {string}\r\n   */\r\n  TextStyleMixin.prototype.getFont = function () {\r\n    return getFont({\r\n      fontStyle: this.getShallow('fontStyle'),\r\n      fontWeight: this.getShallow('fontWeight'),\r\n      fontSize: this.getShallow('fontSize'),\r\n      fontFamily: this.getShallow('fontFamily')\r\n    }, this.ecModel);\r\n  };\r\n  TextStyleMixin.prototype.getTextRect = function (text) {\r\n    var style = {\r\n      text: text,\r\n      verticalAlign: this.getShallow('verticalAlign') || this.getShallow('baseline')\r\n    };\r\n    for (var i = 0; i < textStyleParams.length; i++) {\r\n      style[textStyleParams[i]] = this.getShallow(textStyleParams[i]);\r\n    }\r\n    tmpText.useStyle(style);\r\n    tmpText.update();\r\n    return tmpText.getBoundingRect();\r\n  };\r\n  return TextStyleMixin;\r\n}();\r\n;\r\nexport default TextStyleMixin;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport makeStyleMapper from './makeStyleMapper.js';\r\nexport var LINE_STYLE_KEY_MAP = [['lineWidth', 'width'], ['stroke', 'color'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'], ['lineDash', 'type'], ['lineDashOffset', 'dashOffset'], ['lineCap', 'cap'], ['lineJoin', 'join'], ['miterLimit']\r\n// Option decal is in `DecalObject` but style.decal is in `PatternObject`.\r\n// So do not transfer decal directly.\r\n];\r\nvar getLineStyle = makeStyleMapper(LINE_STYLE_KEY_MAP);\r\nvar LineStyleMixin = /** @class */function () {\r\n  function LineStyleMixin() {}\r\n  LineStyleMixin.prototype.getLineStyle = function (excludes) {\r\n    return getLineStyle(this, excludes);\r\n  };\r\n  return LineStyleMixin;\r\n}();\r\n;\r\nexport { LineStyleMixin };", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport makeStyleMapper from './makeStyleMapper.js';\r\nexport var ITEM_STYLE_KEY_MAP = [['fill', 'color'], ['stroke', 'borderColor'], ['lineWidth', 'borderWidth'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'], ['lineDash', 'borderType'], ['lineDashOffset', 'borderDashOffset'], ['lineCap', 'borderCap'], ['lineJoin', 'borderJoin'], ['miterLimit', 'borderMiterLimit']\r\n// Option decal is in `DecalObject` but style.decal is in `PatternObject`.\r\n// So do not transfer decal directly.\r\n];\r\nvar getItemStyle = makeStyleMapper(ITEM_STYLE_KEY_MAP);\r\nvar ItemStyleMixin = /** @class */function () {\r\n  function ItemStyleMixin() {}\r\n  ItemStyleMixin.prototype.getItemStyle = function (excludes, includes) {\r\n    return getItemStyle(this, excludes, includes);\r\n  };\r\n  return ItemStyleMixin;\r\n}();\r\nexport { ItemStyleMixin };", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport env from 'zrender/lib/core/env.js';\r\nimport { enableClassExtend, enableClassCheck } from '../util/clazz.js';\r\nimport { AreaStyleMixin } from './mixin/areaStyle.js';\r\nimport TextStyleMixin from './mixin/textStyle.js';\r\nimport { LineStyleMixin } from './mixin/lineStyle.js';\r\nimport { ItemStyleMixin } from './mixin/itemStyle.js';\r\nimport { mixin, clone, merge } from 'zrender/lib/core/util.js';\r\nvar Model = /** @class */function () {\r\n  function Model(option, parentModel, ecModel) {\r\n    this.parentModel = parentModel;\r\n    this.ecModel = ecModel;\r\n    this.option = option;\r\n    // Simple optimization\r\n    // if (this.init) {\r\n    //     if (arguments.length <= 4) {\r\n    //         this.init(option, parentModel, ecModel, extraOpt);\r\n    //     }\r\n    //     else {\r\n    //         this.init.apply(this, arguments);\r\n    //     }\r\n    // }\r\n  }\r\n  Model.prototype.init = function (option, parentModel, ecModel) {\r\n    var rest = [];\r\n    for (var _i = 3; _i < arguments.length; _i++) {\r\n      rest[_i - 3] = arguments[_i];\r\n    }\r\n  };\r\n  /**\r\n   * Merge the input option to me.\r\n   */\r\n  Model.prototype.mergeOption = function (option, ecModel) {\r\n    merge(this.option, option, true);\r\n  };\r\n  // `path` can be 'a.b.c', so the return value type have to be `ModelOption`\r\n  // TODO: TYPE strict key check?\r\n  // get(path: string | string[], ignoreParent?: boolean): ModelOption;\r\n  Model.prototype.get = function (path, ignoreParent) {\r\n    if (path == null) {\r\n      return this.option;\r\n    }\r\n    return this._doGet(this.parsePath(path), !ignoreParent && this.parentModel);\r\n  };\r\n  Model.prototype.getShallow = function (key, ignoreParent) {\r\n    var option = this.option;\r\n    var val = option == null ? option : option[key];\r\n    if (val == null && !ignoreParent) {\r\n      var parentModel = this.parentModel;\r\n      if (parentModel) {\r\n        // FIXME:TS do not know how to make it works\r\n        val = parentModel.getShallow(key);\r\n      }\r\n    }\r\n    return val;\r\n  };\r\n  // `path` can be 'a.b.c', so the return value type have to be `Model<ModelOption>`\r\n  // getModel(path: string | string[], parentModel?: Model): Model;\r\n  // TODO 'a.b.c' is deprecated\r\n  Model.prototype.getModel = function (path, parentModel) {\r\n    var hasPath = path != null;\r\n    var pathFinal = hasPath ? this.parsePath(path) : null;\r\n    var obj = hasPath ? this._doGet(pathFinal) : this.option;\r\n    parentModel = parentModel || this.parentModel && this.parentModel.getModel(this.resolveParentPath(pathFinal));\r\n    return new Model(obj, parentModel, this.ecModel);\r\n  };\r\n  /**\r\n   * If model has option\r\n   */\r\n  Model.prototype.isEmpty = function () {\r\n    return this.option == null;\r\n  };\r\n  Model.prototype.restoreData = function () {};\r\n  // Pending\r\n  Model.prototype.clone = function () {\r\n    var Ctor = this.constructor;\r\n    return new Ctor(clone(this.option));\r\n  };\r\n  // setReadOnly(properties): void {\r\n  // clazzUtil.setReadOnly(this, properties);\r\n  // }\r\n  // If path is null/undefined, return null/undefined.\r\n  Model.prototype.parsePath = function (path) {\r\n    if (typeof path === 'string') {\r\n      return path.split('.');\r\n    }\r\n    return path;\r\n  };\r\n  // Resolve path for parent. Perhaps useful when parent use a different property.\r\n  // Default to be a identity resolver.\r\n  // Can be modified to a different resolver.\r\n  Model.prototype.resolveParentPath = function (path) {\r\n    return path;\r\n  };\r\n  // FIXME:TS check whether put this method here\r\n  Model.prototype.isAnimationEnabled = function () {\r\n    if (!env.node && this.option) {\r\n      if (this.option.animation != null) {\r\n        return !!this.option.animation;\r\n      } else if (this.parentModel) {\r\n        return this.parentModel.isAnimationEnabled();\r\n      }\r\n    }\r\n  };\r\n  Model.prototype._doGet = function (pathArr, parentModel) {\r\n    var obj = this.option;\r\n    if (!pathArr) {\r\n      return obj;\r\n    }\r\n    for (var i = 0; i < pathArr.length; i++) {\r\n      // Ignore empty\r\n      if (!pathArr[i]) {\r\n        continue;\r\n      }\r\n      // obj could be number/string/... (like 0)\r\n      obj = obj && typeof obj === 'object' ? obj[pathArr[i]] : null;\r\n      if (obj == null) {\r\n        break;\r\n      }\r\n    }\r\n    if (obj == null && parentModel) {\r\n      obj = parentModel._doGet(this.resolveParentPath(pathArr), parentModel.parentModel);\r\n    }\r\n    return obj;\r\n  };\r\n  return Model;\r\n}();\r\n;\r\n// Enable Model.extend.\r\nenableClassExtend(Model);\r\nenableClassCheck(Model);\r\nmixin(Model, LineStyleMixin);\r\nmixin(Model, ItemStyleMixin);\r\nmixin(Model, AreaStyleMixin);\r\nmixin(Model, TextStyleMixin);\r\nexport default Model;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n/**\r\n * Language: English.\r\n */\r\nexport default {\r\n  time: {\r\n    month: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\r\n    monthAbbr: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\r\n    dayOfWeek: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\r\n    dayOfWeekAbbr: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\r\n  },\r\n  legend: {\r\n    selector: {\r\n      all: 'All',\r\n      inverse: 'Inv'\r\n    }\r\n  },\r\n  toolbox: {\r\n    brush: {\r\n      title: {\r\n        rect: 'Box Select',\r\n        polygon: 'Lasso Select',\r\n        lineX: 'Horizontally Select',\r\n        lineY: 'Vertically Select',\r\n        keep: 'Keep Selections',\r\n        clear: 'Clear Selections'\r\n      }\r\n    },\r\n    dataView: {\r\n      title: 'Data View',\r\n      lang: ['Data View', 'Close', 'Refresh']\r\n    },\r\n    dataZoom: {\r\n      title: {\r\n        zoom: 'Zoom',\r\n        back: 'Zoom Reset'\r\n      }\r\n    },\r\n    magicType: {\r\n      title: {\r\n        line: 'Switch to Line Chart',\r\n        bar: 'Switch to Bar Chart',\r\n        stack: 'Stack',\r\n        tiled: 'Tile'\r\n      }\r\n    },\r\n    restore: {\r\n      title: 'Restore'\r\n    },\r\n    saveAsImage: {\r\n      title: 'Save as Image',\r\n      lang: ['Right Click to Save Image']\r\n    }\r\n  },\r\n  series: {\r\n    typeNames: {\r\n      pie: 'Pie chart',\r\n      bar: 'Bar chart',\r\n      line: 'Line chart',\r\n      scatter: 'Scatter plot',\r\n      effectScatter: 'Ripple scatter plot',\r\n      radar: 'Radar chart',\r\n      tree: 'Tree',\r\n      treemap: 'Treemap',\r\n      boxplot: 'Boxplot',\r\n      candlestick: 'Candlestick',\r\n      k: 'K line chart',\r\n      heatmap: 'Heat map',\r\n      map: 'Map',\r\n      parallel: 'Parallel coordinate map',\r\n      lines: 'Line graph',\r\n      graph: 'Relationship graph',\r\n      sankey: 'Sankey diagram',\r\n      funnel: 'Funnel chart',\r\n      gauge: 'Gauge',\r\n      pictorialBar: 'Pictorial bar',\r\n      themeRiver: 'Theme River Map',\r\n      sunburst: 'Sunburst',\r\n      custom: 'Custom chart',\r\n      chart: 'Chart'\r\n    }\r\n  },\r\n  aria: {\r\n    general: {\r\n      withTitle: 'This is a chart about \"{title}\"',\r\n      withoutTitle: 'This is a chart'\r\n    },\r\n    series: {\r\n      single: {\r\n        prefix: '',\r\n        withName: ' with type {seriesType} named {seriesName}.',\r\n        withoutName: ' with type {seriesType}.'\r\n      },\r\n      multiple: {\r\n        prefix: '. It consists of {seriesCount} series count.',\r\n        withName: ' The {seriesId} series is a {seriesType} representing {seriesName}.',\r\n        withoutName: ' The {seriesId} series is a {seriesType}.',\r\n        separator: {\r\n          middle: '',\r\n          end: ''\r\n        }\r\n      }\r\n    },\r\n    data: {\r\n      allData: 'The data is as follows: ',\r\n      partialData: 'The first {displayCnt} items are: ',\r\n      withName: 'the data for {name} is {value}',\r\n      withoutName: '{value}',\r\n      separator: {\r\n        middle: ', ',\r\n        end: '. '\r\n      }\r\n    }\r\n  }\r\n};", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\nexport default {\r\n  time: {\r\n    month: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],\r\n    monthAbbr: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],\r\n    dayOfWeek: ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'],\r\n    dayOfWeekAbbr: ['日', '一', '二', '三', '四', '五', '六']\r\n  },\r\n  legend: {\r\n    selector: {\r\n      all: '全选',\r\n      inverse: '反选'\r\n    }\r\n  },\r\n  toolbox: {\r\n    brush: {\r\n      title: {\r\n        rect: '矩形选择',\r\n        polygon: '圈选',\r\n        lineX: '横向选择',\r\n        lineY: '纵向选择',\r\n        keep: '保持选择',\r\n        clear: '清除选择'\r\n      }\r\n    },\r\n    dataView: {\r\n      title: '数据视图',\r\n      lang: ['数据视图', '关闭', '刷新']\r\n    },\r\n    dataZoom: {\r\n      title: {\r\n        zoom: '区域缩放',\r\n        back: '区域缩放还原'\r\n      }\r\n    },\r\n    magicType: {\r\n      title: {\r\n        line: '切换为折线图',\r\n        bar: '切换为柱状图',\r\n        stack: '切换为堆叠',\r\n        tiled: '切换为平铺'\r\n      }\r\n    },\r\n    restore: {\r\n      title: '还原'\r\n    },\r\n    saveAsImage: {\r\n      title: '保存为图片',\r\n      lang: ['右键另存为图片']\r\n    }\r\n  },\r\n  series: {\r\n    typeNames: {\r\n      pie: '饼图',\r\n      bar: '柱状图',\r\n      line: '折线图',\r\n      scatter: '散点图',\r\n      effectScatter: '涟漪散点图',\r\n      radar: '雷达图',\r\n      tree: '树图',\r\n      treemap: '矩形树图',\r\n      boxplot: '箱型图',\r\n      candlestick: 'K线图',\r\n      k: 'K线图',\r\n      heatmap: '热力图',\r\n      map: '地图',\r\n      parallel: '平行坐标图',\r\n      lines: '线图',\r\n      graph: '关系图',\r\n      sankey: '桑基图',\r\n      funnel: '漏斗图',\r\n      gauge: '仪表盘图',\r\n      pictorialBar: '象形柱图',\r\n      themeRiver: '主题河流图',\r\n      sunburst: '旭日图',\r\n      custom: '自定义图表',\r\n      chart: '图表'\r\n    }\r\n  },\r\n  aria: {\r\n    general: {\r\n      withTitle: '这是一个关于“{title}”的图表。',\r\n      withoutTitle: '这是一个图表，'\r\n    },\r\n    series: {\r\n      single: {\r\n        prefix: '',\r\n        withName: '图表类型是{seriesType}，表示{seriesName}。',\r\n        withoutName: '图表类型是{seriesType}。'\r\n      },\r\n      multiple: {\r\n        prefix: '它由{seriesCount}个图表系列组成。',\r\n        withName: '第{seriesId}个系列是一个表示{seriesName}的{seriesType}，',\r\n        withoutName: '第{seriesId}个系列是一个{seriesType}，',\r\n        separator: {\r\n          middle: '；',\r\n          end: '。'\r\n        }\r\n      }\r\n    },\r\n    data: {\r\n      allData: '其数据是——',\r\n      partialData: '其中，前{displayCnt}项是——',\r\n      withName: '{name}的数据是{value}',\r\n      withoutName: '{value}',\r\n      separator: {\r\n        middle: '，',\r\n        end: ''\r\n      }\r\n    }\r\n  }\r\n};", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport Model from '../model/Model.js';\r\nimport env from 'zrender/lib/core/env.js';\r\n// default import ZH and EN lang\r\nimport langEN from '../i18n/langEN.js';\r\nimport langZH from '../i18n/langZH.js';\r\nimport { isString, clone, merge } from 'zrender/lib/core/util.js';\r\nvar LOCALE_ZH = 'ZH';\r\nvar LOCALE_EN = 'EN';\r\nvar DEFAULT_LOCALE = LOCALE_EN;\r\nvar localeStorage = {};\r\nvar localeModels = {};\r\nexport var SYSTEM_LANG = !env.domSupported ? DEFAULT_LOCALE : function () {\r\n  var langStr = (/* eslint-disable-next-line */\r\n  document.documentElement.lang || navigator.language || navigator.browserLanguage || DEFAULT_LOCALE).toUpperCase();\r\n  return langStr.indexOf(LOCALE_ZH) > -1 ? LOCALE_ZH : DEFAULT_LOCALE;\r\n}();\r\nexport function registerLocale(locale, localeObj) {\r\n  locale = locale.toUpperCase();\r\n  localeModels[locale] = new Model(localeObj);\r\n  localeStorage[locale] = localeObj;\r\n}\r\n// export function getLocale(locale: string) {\r\n//     return localeStorage[locale];\r\n// }\r\nexport function createLocaleObject(locale) {\r\n  if (isString(locale)) {\r\n    var localeObj = localeStorage[locale.toUpperCase()] || {};\r\n    if (locale === LOCALE_ZH || locale === LOCALE_EN) {\r\n      return clone(localeObj);\r\n    } else {\r\n      return merge(clone(localeObj), clone(localeStorage[DEFAULT_LOCALE]), false);\r\n    }\r\n  } else {\r\n    return merge(clone(locale), clone(localeStorage[DEFAULT_LOCALE]), false);\r\n  }\r\n}\r\nexport function getLocaleModel(lang) {\r\n  return localeModels[lang];\r\n}\r\nexport function getDefaultLocaleModel() {\r\n  return localeModels[DEFAULT_LOCALE];\r\n}\r\n// Default locale\r\nregisterLocale(LOCALE_EN, langEN);\r\nregisterLocale(LOCALE_ZH, langZH);", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport * as numberUtil from './number.js';\r\nimport { getDefaultLocaleModel, getLocaleModel, SYSTEM_LANG } from '../core/locale.js';\r\nimport Model from '../model/Model.js';\r\nexport var ONE_SECOND = 1000;\r\nexport var ONE_MINUTE = ONE_SECOND * 60;\r\nexport var ONE_HOUR = ONE_MINUTE * 60;\r\nexport var ONE_DAY = ONE_HOUR * 24;\r\nexport var ONE_YEAR = ONE_DAY * 365;\r\nexport var defaultLeveledFormatter = {\r\n  year: '{yyyy}',\r\n  month: '{MMM}',\r\n  day: '{d}',\r\n  hour: '{HH}:{mm}',\r\n  minute: '{HH}:{mm}',\r\n  second: '{HH}:{mm}:{ss}',\r\n  millisecond: '{HH}:{mm}:{ss} {SSS}',\r\n  none: '{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}'\r\n};\r\nvar fullDayFormatter = '{yyyy}-{MM}-{dd}';\r\nexport var fullLeveledFormatter = {\r\n  year: '{yyyy}',\r\n  month: '{yyyy}-{MM}',\r\n  day: fullDayFormatter,\r\n  hour: fullDayFormatter + ' ' + defaultLeveledFormatter.hour,\r\n  minute: fullDayFormatter + ' ' + defaultLeveledFormatter.minute,\r\n  second: fullDayFormatter + ' ' + defaultLeveledFormatter.second,\r\n  millisecond: defaultLeveledFormatter.none\r\n};\r\nexport var primaryTimeUnits = ['year', 'month', 'day', 'hour', 'minute', 'second', 'millisecond'];\r\nexport var timeUnits = ['year', 'half-year', 'quarter', 'month', 'week', 'half-week', 'day', 'half-day', 'quarter-day', 'hour', 'minute', 'second', 'millisecond'];\r\nexport function pad(str, len) {\r\n  str += '';\r\n  return '0000'.substr(0, len - str.length) + str;\r\n}\r\nexport function getPrimaryTimeUnit(timeUnit) {\r\n  switch (timeUnit) {\r\n    case 'half-year':\r\n    case 'quarter':\r\n      return 'month';\r\n    case 'week':\r\n    case 'half-week':\r\n      return 'day';\r\n    case 'half-day':\r\n    case 'quarter-day':\r\n      return 'hour';\r\n    default:\r\n      // year, minutes, second, milliseconds\r\n      return timeUnit;\r\n  }\r\n}\r\nexport function isPrimaryTimeUnit(timeUnit) {\r\n  return timeUnit === getPrimaryTimeUnit(timeUnit);\r\n}\r\nexport function getDefaultFormatPrecisionOfInterval(timeUnit) {\r\n  switch (timeUnit) {\r\n    case 'year':\r\n    case 'month':\r\n      return 'day';\r\n    case 'millisecond':\r\n      return 'millisecond';\r\n    default:\r\n      // Also for day, hour, minute, second\r\n      return 'second';\r\n  }\r\n}\r\nexport function format(\r\n// Note: The result based on `isUTC` are totally different, which can not be just simply\r\n// substituted by the result without `isUTC`. So we make the param `isUTC` mandatory.\r\ntime, template, isUTC, lang) {\r\n  var date = numberUtil.parseDate(time);\r\n  var y = date[fullYearGetterName(isUTC)]();\r\n  var M = date[monthGetterName(isUTC)]() + 1;\r\n  var q = Math.floor((M - 1) / 3) + 1;\r\n  var d = date[dateGetterName(isUTC)]();\r\n  var e = date['get' + (isUTC ? 'UTC' : '') + 'Day']();\r\n  var H = date[hoursGetterName(isUTC)]();\r\n  var h = (H - 1) % 12 + 1;\r\n  var m = date[minutesGetterName(isUTC)]();\r\n  var s = date[secondsGetterName(isUTC)]();\r\n  var S = date[millisecondsGetterName(isUTC)]();\r\n  var a = H >= 12 ? 'pm' : 'am';\r\n  var A = a.toUpperCase();\r\n  var localeModel = lang instanceof Model ? lang : getLocaleModel(lang || SYSTEM_LANG) || getDefaultLocaleModel();\r\n  var timeModel = localeModel.getModel('time');\r\n  var month = timeModel.get('month');\r\n  var monthAbbr = timeModel.get('monthAbbr');\r\n  var dayOfWeek = timeModel.get('dayOfWeek');\r\n  var dayOfWeekAbbr = timeModel.get('dayOfWeekAbbr');\r\n  return (template || '').replace(/{a}/g, a + '').replace(/{A}/g, A + '').replace(/{yyyy}/g, y + '').replace(/{yy}/g, pad(y % 100 + '', 2)).replace(/{Q}/g, q + '').replace(/{MMMM}/g, month[M - 1]).replace(/{MMM}/g, monthAbbr[M - 1]).replace(/{MM}/g, pad(M, 2)).replace(/{M}/g, M + '').replace(/{dd}/g, pad(d, 2)).replace(/{d}/g, d + '').replace(/{eeee}/g, dayOfWeek[e]).replace(/{ee}/g, dayOfWeekAbbr[e]).replace(/{e}/g, e + '').replace(/{HH}/g, pad(H, 2)).replace(/{H}/g, H + '').replace(/{hh}/g, pad(h + '', 2)).replace(/{h}/g, h + '').replace(/{mm}/g, pad(m, 2)).replace(/{m}/g, m + '').replace(/{ss}/g, pad(s, 2)).replace(/{s}/g, s + '').replace(/{SSS}/g, pad(S, 3)).replace(/{S}/g, S + '');\r\n}\r\nexport function leveledFormat(tick, idx, formatter, lang, isUTC) {\r\n  var template = null;\r\n  if (zrUtil.isString(formatter)) {\r\n    // Single formatter for all units at all levels\r\n    template = formatter;\r\n  } else if (zrUtil.isFunction(formatter)) {\r\n    // Callback formatter\r\n    template = formatter(tick.value, idx, {\r\n      level: tick.level\r\n    });\r\n  } else {\r\n    var defaults = zrUtil.extend({}, defaultLeveledFormatter);\r\n    if (tick.level > 0) {\r\n      for (var i = 0; i < primaryTimeUnits.length; ++i) {\r\n        defaults[primaryTimeUnits[i]] = \"{primary|\" + defaults[primaryTimeUnits[i]] + \"}\";\r\n      }\r\n    }\r\n    var mergedFormatter = formatter ? formatter.inherit === false ? formatter // Use formatter with bigger units\r\n    : zrUtil.defaults(formatter, defaults) : defaults;\r\n    var unit = getUnitFromValue(tick.value, isUTC);\r\n    if (mergedFormatter[unit]) {\r\n      template = mergedFormatter[unit];\r\n    } else if (mergedFormatter.inherit) {\r\n      // Unit formatter is not defined and should inherit from bigger units\r\n      var targetId = timeUnits.indexOf(unit);\r\n      for (var i = targetId - 1; i >= 0; --i) {\r\n        if (mergedFormatter[unit]) {\r\n          template = mergedFormatter[unit];\r\n          break;\r\n        }\r\n      }\r\n      template = template || defaults.none;\r\n    }\r\n    if (zrUtil.isArray(template)) {\r\n      var levelId = tick.level == null ? 0 : tick.level >= 0 ? tick.level : template.length + tick.level;\r\n      levelId = Math.min(levelId, template.length - 1);\r\n      template = template[levelId];\r\n    }\r\n  }\r\n  return format(new Date(tick.value), template, isUTC, lang);\r\n}\r\nexport function getUnitFromValue(value, isUTC) {\r\n  var date = numberUtil.parseDate(value);\r\n  var M = date[monthGetterName(isUTC)]() + 1;\r\n  var d = date[dateGetterName(isUTC)]();\r\n  var h = date[hoursGetterName(isUTC)]();\r\n  var m = date[minutesGetterName(isUTC)]();\r\n  var s = date[secondsGetterName(isUTC)]();\r\n  var S = date[millisecondsGetterName(isUTC)]();\r\n  var isSecond = S === 0;\r\n  var isMinute = isSecond && s === 0;\r\n  var isHour = isMinute && m === 0;\r\n  var isDay = isHour && h === 0;\r\n  var isMonth = isDay && d === 1;\r\n  var isYear = isMonth && M === 1;\r\n  if (isYear) {\r\n    return 'year';\r\n  } else if (isMonth) {\r\n    return 'month';\r\n  } else if (isDay) {\r\n    return 'day';\r\n  } else if (isHour) {\r\n    return 'hour';\r\n  } else if (isMinute) {\r\n    return 'minute';\r\n  } else if (isSecond) {\r\n    return 'second';\r\n  } else {\r\n    return 'millisecond';\r\n  }\r\n}\r\nexport function getUnitValue(value, unit, isUTC) {\r\n  var date = zrUtil.isNumber(value) ? numberUtil.parseDate(value) : value;\r\n  unit = unit || getUnitFromValue(value, isUTC);\r\n  switch (unit) {\r\n    case 'year':\r\n      return date[fullYearGetterName(isUTC)]();\r\n    case 'half-year':\r\n      return date[monthGetterName(isUTC)]() >= 6 ? 1 : 0;\r\n    case 'quarter':\r\n      return Math.floor((date[monthGetterName(isUTC)]() + 1) / 4);\r\n    case 'month':\r\n      return date[monthGetterName(isUTC)]();\r\n    case 'day':\r\n      return date[dateGetterName(isUTC)]();\r\n    case 'half-day':\r\n      return date[hoursGetterName(isUTC)]() / 24;\r\n    case 'hour':\r\n      return date[hoursGetterName(isUTC)]();\r\n    case 'minute':\r\n      return date[minutesGetterName(isUTC)]();\r\n    case 'second':\r\n      return date[secondsGetterName(isUTC)]();\r\n    case 'millisecond':\r\n      return date[millisecondsGetterName(isUTC)]();\r\n  }\r\n}\r\nexport function fullYearGetterName(isUTC) {\r\n  return isUTC ? 'getUTCFullYear' : 'getFullYear';\r\n}\r\nexport function monthGetterName(isUTC) {\r\n  return isUTC ? 'getUTCMonth' : 'getMonth';\r\n}\r\nexport function dateGetterName(isUTC) {\r\n  return isUTC ? 'getUTCDate' : 'getDate';\r\n}\r\nexport function hoursGetterName(isUTC) {\r\n  return isUTC ? 'getUTCHours' : 'getHours';\r\n}\r\nexport function minutesGetterName(isUTC) {\r\n  return isUTC ? 'getUTCMinutes' : 'getMinutes';\r\n}\r\nexport function secondsGetterName(isUTC) {\r\n  return isUTC ? 'getUTCSeconds' : 'getSeconds';\r\n}\r\nexport function millisecondsGetterName(isUTC) {\r\n  return isUTC ? 'getUTCMilliseconds' : 'getMilliseconds';\r\n}\r\nexport function fullYearSetterName(isUTC) {\r\n  return isUTC ? 'setUTCFullYear' : 'setFullYear';\r\n}\r\nexport function monthSetterName(isUTC) {\r\n  return isUTC ? 'setUTCMonth' : 'setMonth';\r\n}\r\nexport function dateSetterName(isUTC) {\r\n  return isUTC ? 'setUTCDate' : 'setDate';\r\n}\r\nexport function hoursSetterName(isUTC) {\r\n  return isUTC ? 'setUTCHours' : 'setHours';\r\n}\r\nexport function minutesSetterName(isUTC) {\r\n  return isUTC ? 'setUTCMinutes' : 'setMinutes';\r\n}\r\nexport function secondsSetterName(isUTC) {\r\n  return isUTC ? 'setUTCSeconds' : 'setSeconds';\r\n}\r\nexport function millisecondsSetterName(isUTC) {\r\n  return isUTC ? 'setUTCMilliseconds' : 'setMilliseconds';\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { Text } from '../util/graphic.js';\r\nexport function getTextRect(text, font, align, verticalAlign, padding, rich, truncate, lineHeight) {\r\n  var textEl = new Text({\r\n    style: {\r\n      text: text,\r\n      font: font,\r\n      align: align,\r\n      verticalAlign: verticalAlign,\r\n      padding: padding,\r\n      rich: rich,\r\n      overflow: truncate ? 'truncate' : null,\r\n      lineHeight: lineHeight\r\n    }\r\n  });\r\n  return textEl.getBoundingRect();\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport { encodeHTML } from 'zrender/lib/core/dom.js';\r\nimport { parseDate, isNumeric, numericToNumber } from './number.js';\r\nimport { format as timeFormat, pad } from './time.js';\r\nimport { deprecateReplaceLog } from './log.js';\r\n/**\r\n * Add a comma each three digit.\r\n */\r\nexport function addCommas(x) {\r\n  if (!isNumeric(x)) {\r\n    return zrUtil.isString(x) ? x : '-';\r\n  }\r\n  var parts = (x + '').split('.');\r\n  return parts[0].replace(/(\\d{1,3})(?=(?:\\d{3})+(?!\\d))/g, '$1,') + (parts.length > 1 ? '.' + parts[1] : '');\r\n}\r\nexport function toCamelCase(str, upperCaseFirst) {\r\n  str = (str || '').toLowerCase().replace(/-(.)/g, function (match, group1) {\r\n    return group1.toUpperCase();\r\n  });\r\n  if (upperCaseFirst && str) {\r\n    str = str.charAt(0).toUpperCase() + str.slice(1);\r\n  }\r\n  return str;\r\n}\r\nexport var normalizeCssArray = zrUtil.normalizeCssArray;\r\nexport { encodeHTML };\r\n/**\r\n * Make value user readable for tooltip and label.\r\n * \"User readable\":\r\n *     Try to not print programmer-specific text like NaN, Infinity, null, undefined.\r\n *     Avoid to display an empty string, which users can not recognize there is\r\n *     a value and it might look like a bug.\r\n */\r\nexport function makeValueReadable(value, valueType, useUTC) {\r\n  var USER_READABLE_DEFUALT_TIME_PATTERN = '{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}';\r\n  function stringToUserReadable(str) {\r\n    return str && zrUtil.trim(str) ? str : '-';\r\n  }\r\n  function isNumberUserReadable(num) {\r\n    return !!(num != null && !isNaN(num) && isFinite(num));\r\n  }\r\n  var isTypeTime = valueType === 'time';\r\n  var isValueDate = value instanceof Date;\r\n  if (isTypeTime || isValueDate) {\r\n    var date = isTypeTime ? parseDate(value) : value;\r\n    if (!isNaN(+date)) {\r\n      return timeFormat(date, USER_READABLE_DEFUALT_TIME_PATTERN, useUTC);\r\n    } else if (isValueDate) {\r\n      return '-';\r\n    }\r\n    // In other cases, continue to try to display the value in the following code.\r\n  }\r\n  if (valueType === 'ordinal') {\r\n    return zrUtil.isStringSafe(value) ? stringToUserReadable(value) : zrUtil.isNumber(value) ? isNumberUserReadable(value) ? value + '' : '-' : '-';\r\n  }\r\n  // By default.\r\n  var numericResult = numericToNumber(value);\r\n  return isNumberUserReadable(numericResult) ? addCommas(numericResult) : zrUtil.isStringSafe(value) ? stringToUserReadable(value) : typeof value === 'boolean' ? value + '' : '-';\r\n}\r\nvar TPL_VAR_ALIAS = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];\r\nvar wrapVar = function (varName, seriesIdx) {\r\n  return '{' + varName + (seriesIdx == null ? '' : seriesIdx) + '}';\r\n};\r\n/**\r\n * Template formatter\r\n * @param {Array.<Object>|Object} paramsList\r\n */\r\nexport function formatTpl(tpl, paramsList, encode) {\r\n  if (!zrUtil.isArray(paramsList)) {\r\n    paramsList = [paramsList];\r\n  }\r\n  var seriesLen = paramsList.length;\r\n  if (!seriesLen) {\r\n    return '';\r\n  }\r\n  var $vars = paramsList[0].$vars || [];\r\n  for (var i = 0; i < $vars.length; i++) {\r\n    var alias = TPL_VAR_ALIAS[i];\r\n    tpl = tpl.replace(wrapVar(alias), wrapVar(alias, 0));\r\n  }\r\n  for (var seriesIdx = 0; seriesIdx < seriesLen; seriesIdx++) {\r\n    for (var k = 0; k < $vars.length; k++) {\r\n      var val = paramsList[seriesIdx][$vars[k]];\r\n      tpl = tpl.replace(wrapVar(TPL_VAR_ALIAS[k], seriesIdx), encode ? encodeHTML(val) : val);\r\n    }\r\n  }\r\n  return tpl;\r\n}\r\n/**\r\n * simple Template formatter\r\n */\r\nexport function formatTplSimple(tpl, param, encode) {\r\n  zrUtil.each(param, function (value, key) {\r\n    tpl = tpl.replace('{' + key + '}', encode ? encodeHTML(value) : value);\r\n  });\r\n  return tpl;\r\n}\r\nexport function getTooltipMarker(inOpt, extraCssText) {\r\n  var opt = zrUtil.isString(inOpt) ? {\r\n    color: inOpt,\r\n    extraCssText: extraCssText\r\n  } : inOpt || {};\r\n  var color = opt.color;\r\n  var type = opt.type;\r\n  extraCssText = opt.extraCssText;\r\n  var renderMode = opt.renderMode || 'html';\r\n  if (!color) {\r\n    return '';\r\n  }\r\n  if (renderMode === 'html') {\r\n    return type === 'subItem' ? '<span style=\"display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;' + 'border-radius:4px;width:4px;height:4px;background-color:'\r\n    // Only support string\r\n    + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>' : '<span style=\"display:inline-block;margin-right:4px;' + 'border-radius:10px;width:10px;height:10px;background-color:' + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>';\r\n  } else {\r\n    // Should better not to auto generate style name by auto-increment number here.\r\n    // Because this util is usually called in tooltip formatter, which is probably\r\n    // called repeatedly when mouse move and the auto-increment number increases fast.\r\n    // Users can make their own style name by theirselves, make it unique and readable.\r\n    var markerId = opt.markerId || 'markerX';\r\n    return {\r\n      renderMode: renderMode,\r\n      content: '{' + markerId + '|}  ',\r\n      style: type === 'subItem' ? {\r\n        width: 4,\r\n        height: 4,\r\n        borderRadius: 2,\r\n        backgroundColor: color\r\n      } : {\r\n        width: 10,\r\n        height: 10,\r\n        borderRadius: 5,\r\n        backgroundColor: color\r\n      }\r\n    };\r\n  }\r\n}\r\n/**\r\n * @deprecated Use `time/format` instead.\r\n * ISO Date format\r\n * @param {string} tpl\r\n * @param {number} value\r\n * @param {boolean} [isUTC=false] Default in local time.\r\n *           see `module:echarts/scale/Time`\r\n *           and `module:echarts/util/number#parseDate`.\r\n * @inner\r\n */\r\nexport function formatTime(tpl, value, isUTC) {\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    deprecateReplaceLog('echarts.format.formatTime', 'echarts.time.format');\r\n  }\r\n  if (tpl === 'week' || tpl === 'month' || tpl === 'quarter' || tpl === 'half-year' || tpl === 'year') {\r\n    tpl = 'MM-dd\\nyyyy';\r\n  }\r\n  var date = parseDate(value);\r\n  var getUTC = isUTC ? 'getUTC' : 'get';\r\n  var y = date[getUTC + 'FullYear']();\r\n  var M = date[getUTC + 'Month']() + 1;\r\n  var d = date[getUTC + 'Date']();\r\n  var h = date[getUTC + 'Hours']();\r\n  var m = date[getUTC + 'Minutes']();\r\n  var s = date[getUTC + 'Seconds']();\r\n  var S = date[getUTC + 'Milliseconds']();\r\n  tpl = tpl.replace('MM', pad(M, 2)).replace('M', M).replace('yyyy', y).replace('yy', pad(y % 100 + '', 2)).replace('dd', pad(d, 2)).replace('d', d).replace('hh', pad(h, 2)).replace('h', h).replace('mm', pad(m, 2)).replace('m', m).replace('ss', pad(s, 2)).replace('s', s).replace('SSS', pad(S, 3));\r\n  return tpl;\r\n}\r\n/**\r\n * Capital first\r\n * @param {string} str\r\n * @return {string}\r\n */\r\nexport function capitalFirst(str) {\r\n  return str ? str.charAt(0).toUpperCase() + str.substr(1) : str;\r\n}\r\n/**\r\n * @return Never be null/undefined.\r\n */\r\nexport function convertToColorString(color, defaultColor) {\r\n  defaultColor = defaultColor || 'transparent';\r\n  return zrUtil.isString(color) ? color : zrUtil.isObject(color) ? color.colorStops && (color.colorStops[0] || {}).color || defaultColor : defaultColor;\r\n}\r\nexport { truncateText } from 'zrender/lib/graphic/helper/parseText.js';\r\n/**\r\n * open new tab\r\n * @param link url\r\n * @param target blank or self\r\n */\r\nexport function windowOpen(link, target) {\r\n  /* global window */\r\n  if (target === '_blank' || target === 'blank') {\r\n    var blank = window.open();\r\n    blank.opener = null;\r\n    blank.location.href = link;\r\n  } else {\r\n    window.open(link, target);\r\n  }\r\n}\r\nexport { getTextRect } from '../legacy/getTextRect.js';", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n// Layout helpers for each component positioning\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\r\nimport { parsePercent } from './number.js';\r\nimport * as formatUtil from './format.js';\r\nvar each = zrUtil.each;\r\n/**\r\n * @public\r\n */\r\nexport var LOCATION_PARAMS = ['left', 'right', 'top', 'bottom', 'width', 'height'];\r\n/**\r\n * @public\r\n */\r\nexport var HV_NAMES = [['width', 'left', 'right'], ['height', 'top', 'bottom']];\r\nfunction boxLayout(orient, group, gap, maxWidth, maxHeight) {\r\n  var x = 0;\r\n  var y = 0;\r\n  if (maxWidth == null) {\r\n    maxWidth = Infinity;\r\n  }\r\n  if (maxHeight == null) {\r\n    maxHeight = Infinity;\r\n  }\r\n  var currentLineMaxSize = 0;\r\n  group.eachChild(function (child, idx) {\r\n    var rect = child.getBoundingRect();\r\n    var nextChild = group.childAt(idx + 1);\r\n    var nextChildRect = nextChild && nextChild.getBoundingRect();\r\n    var nextX;\r\n    var nextY;\r\n    if (orient === 'horizontal') {\r\n      var moveX = rect.width + (nextChildRect ? -nextChildRect.x + rect.x : 0);\r\n      nextX = x + moveX;\r\n      // Wrap when width exceeds maxWidth or meet a `newline` group\r\n      // FIXME compare before adding gap?\r\n      if (nextX > maxWidth || child.newline) {\r\n        x = 0;\r\n        nextX = moveX;\r\n        y += currentLineMaxSize + gap;\r\n        currentLineMaxSize = rect.height;\r\n      } else {\r\n        // FIXME: consider rect.y is not `0`?\r\n        currentLineMaxSize = Math.max(currentLineMaxSize, rect.height);\r\n      }\r\n    } else {\r\n      var moveY = rect.height + (nextChildRect ? -nextChildRect.y + rect.y : 0);\r\n      nextY = y + moveY;\r\n      // Wrap when width exceeds maxHeight or meet a `newline` group\r\n      if (nextY > maxHeight || child.newline) {\r\n        x += currentLineMaxSize + gap;\r\n        y = 0;\r\n        nextY = moveY;\r\n        currentLineMaxSize = rect.width;\r\n      } else {\r\n        currentLineMaxSize = Math.max(currentLineMaxSize, rect.width);\r\n      }\r\n    }\r\n    if (child.newline) {\r\n      return;\r\n    }\r\n    child.x = x;\r\n    child.y = y;\r\n    child.markRedraw();\r\n    orient === 'horizontal' ? x = nextX + gap : y = nextY + gap;\r\n  });\r\n}\r\n/**\r\n * VBox or HBox layouting\r\n * @param {string} orient\r\n * @param {module:zrender/graphic/Group} group\r\n * @param {number} gap\r\n * @param {number} [width=Infinity]\r\n * @param {number} [height=Infinity]\r\n */\r\nexport var box = boxLayout;\r\n/**\r\n * VBox layouting\r\n * @param {module:zrender/graphic/Group} group\r\n * @param {number} gap\r\n * @param {number} [width=Infinity]\r\n * @param {number} [height=Infinity]\r\n */\r\nexport var vbox = zrUtil.curry(boxLayout, 'vertical');\r\n/**\r\n * HBox layouting\r\n * @param {module:zrender/graphic/Group} group\r\n * @param {number} gap\r\n * @param {number} [width=Infinity]\r\n * @param {number} [height=Infinity]\r\n */\r\nexport var hbox = zrUtil.curry(boxLayout, 'horizontal');\r\n/**\r\n * If x or x2 is not specified or 'center' 'left' 'right',\r\n * the width would be as long as possible.\r\n * If y or y2 is not specified or 'middle' 'top' 'bottom',\r\n * the height would be as long as possible.\r\n */\r\nexport function getAvailableSize(positionInfo, containerRect, margin) {\r\n  var containerWidth = containerRect.width;\r\n  var containerHeight = containerRect.height;\r\n  var x = parsePercent(positionInfo.left, containerWidth);\r\n  var y = parsePercent(positionInfo.top, containerHeight);\r\n  var x2 = parsePercent(positionInfo.right, containerWidth);\r\n  var y2 = parsePercent(positionInfo.bottom, containerHeight);\r\n  (isNaN(x) || isNaN(parseFloat(positionInfo.left))) && (x = 0);\r\n  (isNaN(x2) || isNaN(parseFloat(positionInfo.right))) && (x2 = containerWidth);\r\n  (isNaN(y) || isNaN(parseFloat(positionInfo.top))) && (y = 0);\r\n  (isNaN(y2) || isNaN(parseFloat(positionInfo.bottom))) && (y2 = containerHeight);\r\n  margin = formatUtil.normalizeCssArray(margin || 0);\r\n  return {\r\n    width: Math.max(x2 - x - margin[1] - margin[3], 0),\r\n    height: Math.max(y2 - y - margin[0] - margin[2], 0)\r\n  };\r\n}\r\n/**\r\n * Parse position info.\r\n */\r\nexport function getLayoutRect(positionInfo, containerRect, margin) {\r\n  margin = formatUtil.normalizeCssArray(margin || 0);\r\n  var containerWidth = containerRect.width;\r\n  var containerHeight = containerRect.height;\r\n  var left = parsePercent(positionInfo.left, containerWidth);\r\n  var top = parsePercent(positionInfo.top, containerHeight);\r\n  var right = parsePercent(positionInfo.right, containerWidth);\r\n  var bottom = parsePercent(positionInfo.bottom, containerHeight);\r\n  var width = parsePercent(positionInfo.width, containerWidth);\r\n  var height = parsePercent(positionInfo.height, containerHeight);\r\n  var verticalMargin = margin[2] + margin[0];\r\n  var horizontalMargin = margin[1] + margin[3];\r\n  var aspect = positionInfo.aspect;\r\n  // If width is not specified, calculate width from left and right\r\n  if (isNaN(width)) {\r\n    width = containerWidth - right - horizontalMargin - left;\r\n  }\r\n  if (isNaN(height)) {\r\n    height = containerHeight - bottom - verticalMargin - top;\r\n  }\r\n  if (aspect != null) {\r\n    // If width and height are not given\r\n    // 1. Graph should not exceeds the container\r\n    // 2. Aspect must be keeped\r\n    // 3. Graph should take the space as more as possible\r\n    // FIXME\r\n    // Margin is not considered, because there is no case that both\r\n    // using margin and aspect so far.\r\n    if (isNaN(width) && isNaN(height)) {\r\n      if (aspect > containerWidth / containerHeight) {\r\n        width = containerWidth * 0.8;\r\n      } else {\r\n        height = containerHeight * 0.8;\r\n      }\r\n    }\r\n    // Calculate width or height with given aspect\r\n    if (isNaN(width)) {\r\n      width = aspect * height;\r\n    }\r\n    if (isNaN(height)) {\r\n      height = width / aspect;\r\n    }\r\n  }\r\n  // If left is not specified, calculate left from right and width\r\n  if (isNaN(left)) {\r\n    left = containerWidth - right - width - horizontalMargin;\r\n  }\r\n  if (isNaN(top)) {\r\n    top = containerHeight - bottom - height - verticalMargin;\r\n  }\r\n  // Align left and top\r\n  switch (positionInfo.left || positionInfo.right) {\r\n    case 'center':\r\n      left = containerWidth / 2 - width / 2 - margin[3];\r\n      break;\r\n    case 'right':\r\n      left = containerWidth - width - horizontalMargin;\r\n      break;\r\n  }\r\n  switch (positionInfo.top || positionInfo.bottom) {\r\n    case 'middle':\r\n    case 'center':\r\n      top = containerHeight / 2 - height / 2 - margin[0];\r\n      break;\r\n    case 'bottom':\r\n      top = containerHeight - height - verticalMargin;\r\n      break;\r\n  }\r\n  // If something is wrong and left, top, width, height are calculated as NaN\r\n  left = left || 0;\r\n  top = top || 0;\r\n  if (isNaN(width)) {\r\n    // Width may be NaN if only one value is given except width\r\n    width = containerWidth - horizontalMargin - left - (right || 0);\r\n  }\r\n  if (isNaN(height)) {\r\n    // Height may be NaN if only one value is given except height\r\n    height = containerHeight - verticalMargin - top - (bottom || 0);\r\n  }\r\n  var rect = new BoundingRect(left + margin[3], top + margin[0], width, height);\r\n  rect.margin = margin;\r\n  return rect;\r\n}\r\n/**\r\n * Position a zr element in viewport\r\n *  Group position is specified by either\r\n *  {left, top}, {right, bottom}\r\n *  If all properties exists, right and bottom will be igonred.\r\n *\r\n * Logic:\r\n *     1. Scale (against origin point in parent coord)\r\n *     2. Rotate (against origin point in parent coord)\r\n *     3. Translate (with el.position by this method)\r\n * So this method only fixes the last step 'Translate', which does not affect\r\n * scaling and rotating.\r\n *\r\n * If be called repeatedly with the same input el, the same result will be gotten.\r\n *\r\n * Return true if the layout happened.\r\n *\r\n * @param el Should have `getBoundingRect` method.\r\n * @param positionInfo\r\n * @param positionInfo.left\r\n * @param positionInfo.top\r\n * @param positionInfo.right\r\n * @param positionInfo.bottom\r\n * @param positionInfo.width Only for opt.boundingModel: 'raw'\r\n * @param positionInfo.height Only for opt.boundingModel: 'raw'\r\n * @param containerRect\r\n * @param margin\r\n * @param opt\r\n * @param opt.hv Only horizontal or only vertical. Default to be [1, 1]\r\n * @param opt.boundingMode\r\n *        Specify how to calculate boundingRect when locating.\r\n *        'all': Position the boundingRect that is transformed and uioned\r\n *               both itself and its descendants.\r\n *               This mode simplies confine the elements in the bounding\r\n *               of their container (e.g., using 'right: 0').\r\n *        'raw': Position the boundingRect that is not transformed and only itself.\r\n *               This mode is useful when you want a element can overflow its\r\n *               container. (Consider a rotated circle needs to be located in a corner.)\r\n *               In this mode positionInfo.width/height can only be number.\r\n */\r\nexport function positionElement(el, positionInfo, containerRect, margin, opt, out) {\r\n  var h = !opt || !opt.hv || opt.hv[0];\r\n  var v = !opt || !opt.hv || opt.hv[1];\r\n  var boundingMode = opt && opt.boundingMode || 'all';\r\n  out = out || el;\r\n  out.x = el.x;\r\n  out.y = el.y;\r\n  if (!h && !v) {\r\n    return false;\r\n  }\r\n  var rect;\r\n  if (boundingMode === 'raw') {\r\n    rect = el.type === 'group' ? new BoundingRect(0, 0, +positionInfo.width || 0, +positionInfo.height || 0) : el.getBoundingRect();\r\n  } else {\r\n    rect = el.getBoundingRect();\r\n    if (el.needLocalTransform()) {\r\n      var transform = el.getLocalTransform();\r\n      // Notice: raw rect may be inner object of el,\r\n      // which should not be modified.\r\n      rect = rect.clone();\r\n      rect.applyTransform(transform);\r\n    }\r\n  }\r\n  // The real width and height can not be specified but calculated by the given el.\r\n  var layoutRect = getLayoutRect(zrUtil.defaults({\r\n    width: rect.width,\r\n    height: rect.height\r\n  }, positionInfo), containerRect, margin);\r\n  // Because 'tranlate' is the last step in transform\r\n  // (see zrender/core/Transformable#getLocalTransform),\r\n  // we can just only modify el.position to get final result.\r\n  var dx = h ? layoutRect.x - rect.x : 0;\r\n  var dy = v ? layoutRect.y - rect.y : 0;\r\n  if (boundingMode === 'raw') {\r\n    out.x = dx;\r\n    out.y = dy;\r\n  } else {\r\n    out.x += dx;\r\n    out.y += dy;\r\n  }\r\n  if (out === el) {\r\n    el.markRedraw();\r\n  }\r\n  return true;\r\n}\r\n/**\r\n * @param option Contains some of the properties in HV_NAMES.\r\n * @param hvIdx 0: horizontal; 1: vertical.\r\n */\r\nexport function sizeCalculable(option, hvIdx) {\r\n  return option[HV_NAMES[hvIdx][0]] != null || option[HV_NAMES[hvIdx][1]] != null && option[HV_NAMES[hvIdx][2]] != null;\r\n}\r\nexport function fetchLayoutMode(ins) {\r\n  var layoutMode = ins.layoutMode || ins.constructor.layoutMode;\r\n  return zrUtil.isObject(layoutMode) ? layoutMode : layoutMode ? {\r\n    type: layoutMode\r\n  } : null;\r\n}\r\n/**\r\n * Consider Case:\r\n * When default option has {left: 0, width: 100}, and we set {right: 0}\r\n * through setOption or media query, using normal zrUtil.merge will cause\r\n * {right: 0} does not take effect.\r\n *\r\n * @example\r\n * ComponentModel.extend({\r\n *     init: function () {\r\n *         ...\r\n *         let inputPositionParams = layout.getLayoutParams(option);\r\n *         this.mergeOption(inputPositionParams);\r\n *     },\r\n *     mergeOption: function (newOption) {\r\n *         newOption && zrUtil.merge(thisOption, newOption, true);\r\n *         layout.mergeLayoutParam(thisOption, newOption);\r\n *     }\r\n * });\r\n *\r\n * @param targetOption\r\n * @param newOption\r\n * @param opt\r\n */\r\nexport function mergeLayoutParam(targetOption, newOption, opt) {\r\n  var ignoreSize = opt && opt.ignoreSize;\r\n  !zrUtil.isArray(ignoreSize) && (ignoreSize = [ignoreSize, ignoreSize]);\r\n  var hResult = merge(HV_NAMES[0], 0);\r\n  var vResult = merge(HV_NAMES[1], 1);\r\n  copy(HV_NAMES[0], targetOption, hResult);\r\n  copy(HV_NAMES[1], targetOption, vResult);\r\n  function merge(names, hvIdx) {\r\n    var newParams = {};\r\n    var newValueCount = 0;\r\n    var merged = {};\r\n    var mergedValueCount = 0;\r\n    var enoughParamNumber = 2;\r\n    each(names, function (name) {\r\n      merged[name] = targetOption[name];\r\n    });\r\n    each(names, function (name) {\r\n      // Consider case: newOption.width is null, which is\r\n      // set by user for removing width setting.\r\n      hasProp(newOption, name) && (newParams[name] = merged[name] = newOption[name]);\r\n      hasValue(newParams, name) && newValueCount++;\r\n      hasValue(merged, name) && mergedValueCount++;\r\n    });\r\n    if (ignoreSize[hvIdx]) {\r\n      // Only one of left/right is premitted to exist.\r\n      if (hasValue(newOption, names[1])) {\r\n        merged[names[2]] = null;\r\n      } else if (hasValue(newOption, names[2])) {\r\n        merged[names[1]] = null;\r\n      }\r\n      return merged;\r\n    }\r\n    // Case: newOption: {width: ..., right: ...},\r\n    // or targetOption: {right: ...} and newOption: {width: ...},\r\n    // There is no conflict when merged only has params count\r\n    // little than enoughParamNumber.\r\n    if (mergedValueCount === enoughParamNumber || !newValueCount) {\r\n      return merged;\r\n    }\r\n    // Case: newOption: {width: ..., right: ...},\r\n    // Than we can make sure user only want those two, and ignore\r\n    // all origin params in targetOption.\r\n    else if (newValueCount >= enoughParamNumber) {\r\n      return newParams;\r\n    } else {\r\n      // Chose another param from targetOption by priority.\r\n      for (var i = 0; i < names.length; i++) {\r\n        var name_1 = names[i];\r\n        if (!hasProp(newParams, name_1) && hasProp(targetOption, name_1)) {\r\n          newParams[name_1] = targetOption[name_1];\r\n          break;\r\n        }\r\n      }\r\n      return newParams;\r\n    }\r\n  }\r\n  function hasProp(obj, name) {\r\n    return obj.hasOwnProperty(name);\r\n  }\r\n  function hasValue(obj, name) {\r\n    return obj[name] != null && obj[name] !== 'auto';\r\n  }\r\n  function copy(names, target, source) {\r\n    each(names, function (name) {\r\n      target[name] = source[name];\r\n    });\r\n  }\r\n}\r\n/**\r\n * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\r\n */\r\nexport function getLayoutParams(source) {\r\n  return copyLayoutParams({}, source);\r\n}\r\n/**\r\n * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\r\n * @param {Object} source\r\n * @return {Object} Result contains those props.\r\n */\r\nexport function copyLayoutParams(target, source) {\r\n  source && target && each(LOCATION_PARAMS, function (name) {\r\n    source.hasOwnProperty(name) && (target[name] = source[name]);\r\n  });\r\n  return target;\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport Model from './Model.js';\r\nimport * as componentUtil from '../util/component.js';\r\nimport { enableClassManagement, parseClassType, isExtendedClass, mountExtend } from '../util/clazz.js';\r\nimport { makeInner, queryReferringComponents } from '../util/model.js';\r\nimport * as layout from '../util/layout.js';\r\nvar inner = makeInner();\r\nvar ComponentModel = /** @class */function (_super) {\r\n  __extends(ComponentModel, _super);\r\n  function ComponentModel(option, parentModel, ecModel) {\r\n    var _this = _super.call(this, option, parentModel, ecModel) || this;\r\n    _this.uid = componentUtil.getUID('ec_cpt_model');\r\n    return _this;\r\n  }\r\n  ComponentModel.prototype.init = function (option, parentModel, ecModel) {\r\n    this.mergeDefaultAndTheme(option, ecModel);\r\n  };\r\n  ComponentModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\r\n    var layoutMode = layout.fetchLayoutMode(this);\r\n    var inputPositionParams = layoutMode ? layout.getLayoutParams(option) : {};\r\n    var themeModel = ecModel.getTheme();\r\n    zrUtil.merge(option, themeModel.get(this.mainType));\r\n    zrUtil.merge(option, this.getDefaultOption());\r\n    if (layoutMode) {\r\n      layout.mergeLayoutParam(option, inputPositionParams, layoutMode);\r\n    }\r\n  };\r\n  ComponentModel.prototype.mergeOption = function (option, ecModel) {\r\n    zrUtil.merge(this.option, option, true);\r\n    var layoutMode = layout.fetchLayoutMode(this);\r\n    if (layoutMode) {\r\n      layout.mergeLayoutParam(this.option, option, layoutMode);\r\n    }\r\n  };\r\n  /**\r\n   * Called immediately after `init` or `mergeOption` of this instance called.\r\n   */\r\n  ComponentModel.prototype.optionUpdated = function (newCptOption, isInit) {};\r\n  /**\r\n   * [How to declare defaultOption]:\r\n   *\r\n   * (A) If using class declaration in typescript (since echarts 5):\r\n   * ```ts\r\n   * import {ComponentOption} from '../model/option.js';\r\n   * export interface XxxOption extends ComponentOption {\r\n   *     aaa: number\r\n   * }\r\n   * export class XxxModel extends Component {\r\n   *     static type = 'xxx';\r\n   *     static defaultOption: XxxOption = {\r\n   *         aaa: 123\r\n   *     }\r\n   * }\r\n   * Component.registerClass(XxxModel);\r\n   * ```\r\n   * ```ts\r\n   * import {inheritDefaultOption} from '../util/component.js';\r\n   * import {XxxModel, XxxOption} from './XxxModel.js';\r\n   * export interface XxxSubOption extends XxxOption {\r\n   *     bbb: number\r\n   * }\r\n   * class XxxSubModel extends XxxModel {\r\n   *     static defaultOption: XxxSubOption = inheritDefaultOption(XxxModel.defaultOption, {\r\n   *         bbb: 456\r\n   *     })\r\n   *     fn() {\r\n   *         let opt = this.getDefaultOption();\r\n   *         // opt is {aaa: 123, bbb: 456}\r\n   *     }\r\n   * }\r\n   * ```\r\n   *\r\n   * (B) If using class extend (previous approach in echarts 3 & 4):\r\n   * ```js\r\n   * let XxxComponent = Component.extend({\r\n   *     defaultOption: {\r\n   *         xx: 123\r\n   *     }\r\n   * })\r\n   * ```\r\n   * ```js\r\n   * let XxxSubComponent = XxxComponent.extend({\r\n   *     defaultOption: {\r\n   *         yy: 456\r\n   *     },\r\n   *     fn: function () {\r\n   *         let opt = this.getDefaultOption();\r\n   *         // opt is {xx: 123, yy: 456}\r\n   *     }\r\n   * })\r\n   * ```\r\n   */\r\n  ComponentModel.prototype.getDefaultOption = function () {\r\n    var ctor = this.constructor;\r\n    // If using class declaration, it is different to travel super class\r\n    // in legacy env and auto merge defaultOption. So if using class\r\n    // declaration, defaultOption should be merged manually.\r\n    if (!isExtendedClass(ctor)) {\r\n      // When using ts class, defaultOption must be declared as static.\r\n      return ctor.defaultOption;\r\n    }\r\n    // FIXME: remove this approach?\r\n    var fields = inner(this);\r\n    if (!fields.defaultOption) {\r\n      var optList = [];\r\n      var clz = ctor;\r\n      while (clz) {\r\n        var opt = clz.prototype.defaultOption;\r\n        opt && optList.push(opt);\r\n        clz = clz.superClass;\r\n      }\r\n      var defaultOption = {};\r\n      for (var i = optList.length - 1; i >= 0; i--) {\r\n        defaultOption = zrUtil.merge(defaultOption, optList[i], true);\r\n      }\r\n      fields.defaultOption = defaultOption;\r\n    }\r\n    return fields.defaultOption;\r\n  };\r\n  /**\r\n   * Notice: always force to input param `useDefault` in case that forget to consider it.\r\n   * The same behavior as `modelUtil.parseFinder`.\r\n   *\r\n   * @param useDefault In many cases like series refer axis and axis refer grid,\r\n   *        If axis index / axis id not specified, use the first target as default.\r\n   *        In other cases like dataZoom refer axis, if not specified, measn no refer.\r\n   */\r\n  ComponentModel.prototype.getReferringComponents = function (mainType, opt) {\r\n    var indexKey = mainType + 'Index';\r\n    var idKey = mainType + 'Id';\r\n    return queryReferringComponents(this.ecModel, mainType, {\r\n      index: this.get(indexKey, true),\r\n      id: this.get(idKey, true)\r\n    }, opt);\r\n  };\r\n  ComponentModel.prototype.getBoxLayoutParams = function () {\r\n    // Consider itself having box layout configs.\r\n    var boxLayoutModel = this;\r\n    return {\r\n      left: boxLayoutModel.get('left'),\r\n      top: boxLayoutModel.get('top'),\r\n      right: boxLayoutModel.get('right'),\r\n      bottom: boxLayoutModel.get('bottom'),\r\n      width: boxLayoutModel.get('width'),\r\n      height: boxLayoutModel.get('height')\r\n    };\r\n  };\r\n  /**\r\n   * Get key for zlevel.\r\n   * If developers don't configure zlevel. We will assign zlevel to series based on the key.\r\n   * For example, lines with trail effect and progressive series will in an individual zlevel.\r\n   */\r\n  ComponentModel.prototype.getZLevelKey = function () {\r\n    return '';\r\n  };\r\n  ComponentModel.prototype.setZLevel = function (zlevel) {\r\n    this.option.zlevel = zlevel;\r\n  };\r\n  ComponentModel.protoInitialize = function () {\r\n    var proto = ComponentModel.prototype;\r\n    proto.type = 'component';\r\n    proto.id = '';\r\n    proto.name = '';\r\n    proto.mainType = '';\r\n    proto.subType = '';\r\n    proto.componentIndex = 0;\r\n  }();\r\n  return ComponentModel;\r\n}(Model);\r\nmountExtend(ComponentModel, Model);\r\nenableClassManagement(ComponentModel);\r\ncomponentUtil.enableSubTypeDefaulter(ComponentModel);\r\ncomponentUtil.enableTopologicalTravel(ComponentModel, getDependencies);\r\nfunction getDependencies(componentType) {\r\n  var deps = [];\r\n  zrUtil.each(ComponentModel.getClassesByMainType(componentType), function (clz) {\r\n    deps = deps.concat(clz.dependencies || clz.prototype.dependencies || []);\r\n  });\r\n  // Ensure main type.\r\n  deps = zrUtil.map(deps, function (type) {\r\n    return parseClassType(type).main;\r\n  });\r\n  // Hack dataset for convenience.\r\n  if (componentType !== 'dataset' && zrUtil.indexOf(deps, 'dataset') <= 0) {\r\n    deps.unshift('dataset');\r\n  }\r\n  return deps;\r\n}\r\nexport default ComponentModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as clazzUtil from '../util/clazz.js';\r\nvar Scale = /** @class */function () {\r\n  function Scale(setting) {\r\n    this._setting = setting || {};\r\n    this._extent = [Infinity, -Infinity];\r\n  }\r\n  Scale.prototype.getSetting = function (name) {\r\n    return this._setting[name];\r\n  };\r\n  /**\r\n   * Set extent from data\r\n   */\r\n  Scale.prototype.unionExtent = function (other) {\r\n    var extent = this._extent;\r\n    other[0] < extent[0] && (extent[0] = other[0]);\r\n    other[1] > extent[1] && (extent[1] = other[1]);\r\n    // not setExtent because in log axis it may transformed to power\r\n    // this.setExtent(extent[0], extent[1]);\r\n  };\r\n  /**\r\n   * Set extent from data\r\n   */\r\n  Scale.prototype.unionExtentFromData = function (data, dim) {\r\n    this.unionExtent(data.getApproximateExtent(dim));\r\n  };\r\n  /**\r\n   * Get extent\r\n   *\r\n   * Extent is always in increase order.\r\n   */\r\n  Scale.prototype.getExtent = function () {\r\n    return this._extent.slice();\r\n  };\r\n  /**\r\n   * Set extent\r\n   */\r\n  Scale.prototype.setExtent = function (start, end) {\r\n    var thisExtent = this._extent;\r\n    if (!isNaN(start)) {\r\n      thisExtent[0] = start;\r\n    }\r\n    if (!isNaN(end)) {\r\n      thisExtent[1] = end;\r\n    }\r\n  };\r\n  /**\r\n   * If value is in extent range\r\n   */\r\n  Scale.prototype.isInExtentRange = function (value) {\r\n    return this._extent[0] <= value && this._extent[1] >= value;\r\n  };\r\n  /**\r\n   * When axis extent depends on data and no data exists,\r\n   * axis ticks should not be drawn, which is named 'blank'.\r\n   */\r\n  Scale.prototype.isBlank = function () {\r\n    return this._isBlank;\r\n  };\r\n  /**\r\n   * When axis extent depends on data and no data exists,\r\n   * axis ticks should not be drawn, which is named 'blank'.\r\n   */\r\n  Scale.prototype.setBlank = function (isBlank) {\r\n    this._isBlank = isBlank;\r\n  };\r\n  return Scale;\r\n}();\r\nclazzUtil.enableClassManagement(Scale);\r\nexport default Scale;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { createHashMap, isObject, map, isString } from 'zrender/lib/core/util.js';\r\nvar uidBase = 0;\r\nvar OrdinalMeta = /** @class */function () {\r\n  function OrdinalMeta(opt) {\r\n    this.categories = opt.categories || [];\r\n    this._needCollect = opt.needCollect;\r\n    this._deduplication = opt.deduplication;\r\n    this.uid = ++uidBase;\r\n  }\r\n  OrdinalMeta.createByAxisModel = function (axisModel) {\r\n    var option = axisModel.option;\r\n    var data = option.data;\r\n    var categories = data && map(data, getName);\r\n    return new OrdinalMeta({\r\n      categories: categories,\r\n      needCollect: !categories,\r\n      // deduplication is default in axis.\r\n      deduplication: option.dedplication !== false\r\n    });\r\n  };\r\n  ;\r\n  OrdinalMeta.prototype.getOrdinal = function (category) {\r\n    // @ts-ignore\r\n    return this._getOrCreateMap().get(category);\r\n  };\r\n  /**\r\n   * @return The ordinal. If not found, return NaN.\r\n   */\r\n  OrdinalMeta.prototype.parseAndCollect = function (category) {\r\n    var index;\r\n    var needCollect = this._needCollect;\r\n    // The value of category dim can be the index of the given category set.\r\n    // This feature is only supported when !needCollect, because we should\r\n    // consider a common case: a value is 2017, which is a number but is\r\n    // expected to be tread as a category. This case usually happen in dataset,\r\n    // where it happent to be no need of the index feature.\r\n    if (!isString(category) && !needCollect) {\r\n      return category;\r\n    }\r\n    // Optimize for the scenario:\r\n    // category is ['2012-01-01', '2012-01-02', ...], where the input\r\n    // data has been ensured not duplicate and is large data.\r\n    // Notice, if a dataset dimension provide categroies, usually echarts\r\n    // should remove duplication except user tell echarts dont do that\r\n    // (set axis.deduplication = false), because echarts do not know whether\r\n    // the values in the category dimension has duplication (consider the\r\n    // parallel-aqi example)\r\n    if (needCollect && !this._deduplication) {\r\n      index = this.categories.length;\r\n      this.categories[index] = category;\r\n      return index;\r\n    }\r\n    var map = this._getOrCreateMap();\r\n    // @ts-ignore\r\n    index = map.get(category);\r\n    if (index == null) {\r\n      if (needCollect) {\r\n        index = this.categories.length;\r\n        this.categories[index] = category;\r\n        // @ts-ignore\r\n        map.set(category, index);\r\n      } else {\r\n        index = NaN;\r\n      }\r\n    }\r\n    return index;\r\n  };\r\n  // Consider big data, do not create map until needed.\r\n  OrdinalMeta.prototype._getOrCreateMap = function () {\r\n    return this._map || (this._map = createHashMap(this.categories));\r\n  };\r\n  return OrdinalMeta;\r\n}();\r\nfunction getName(obj) {\r\n  if (isObject(obj) && obj.value != null) {\r\n    return obj.value;\r\n  } else {\r\n    return obj + '';\r\n  }\r\n}\r\nexport default OrdinalMeta;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { getPrecision, round, nice, quantityExponent } from '../util/number.js';\r\nexport function isValueNice(val) {\r\n  var exp10 = Math.pow(10, quantityExponent(Math.abs(val)));\r\n  var f = Math.abs(val / exp10);\r\n  return f === 0 || f === 1 || f === 2 || f === 3 || f === 5;\r\n}\r\nexport function isIntervalOrLogScale(scale) {\r\n  return scale.type === 'interval' || scale.type === 'log';\r\n}\r\n/**\r\n * @param extent Both extent[0] and extent[1] should be valid number.\r\n *               Should be extent[0] < extent[1].\r\n * @param splitNumber splitNumber should be >= 1.\r\n */\r\nexport function intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval) {\r\n  var result = {};\r\n  var span = extent[1] - extent[0];\r\n  var interval = result.interval = nice(span / splitNumber, true);\r\n  if (minInterval != null && interval < minInterval) {\r\n    interval = result.interval = minInterval;\r\n  }\r\n  if (maxInterval != null && interval > maxInterval) {\r\n    interval = result.interval = maxInterval;\r\n  }\r\n  // Tow more digital for tick.\r\n  var precision = result.intervalPrecision = getIntervalPrecision(interval);\r\n  // Niced extent inside original extent\r\n  var niceTickExtent = result.niceTickExtent = [round(Math.ceil(extent[0] / interval) * interval, precision), round(Math.floor(extent[1] / interval) * interval, precision)];\r\n  fixExtent(niceTickExtent, extent);\r\n  return result;\r\n}\r\nexport function increaseInterval(interval) {\r\n  var exp10 = Math.pow(10, quantityExponent(interval));\r\n  // Increase interval\r\n  var f = interval / exp10;\r\n  if (!f) {\r\n    f = 1;\r\n  } else if (f === 2) {\r\n    f = 3;\r\n  } else if (f === 3) {\r\n    f = 5;\r\n  } else {\r\n    // f is 1 or 5\r\n    f *= 2;\r\n  }\r\n  return round(f * exp10);\r\n}\r\n/**\r\n * @return interval precision\r\n */\r\nexport function getIntervalPrecision(interval) {\r\n  // Tow more digital for tick.\r\n  return getPrecision(interval) + 2;\r\n}\r\nfunction clamp(niceTickExtent, idx, extent) {\r\n  niceTickExtent[idx] = Math.max(Math.min(niceTickExtent[idx], extent[1]), extent[0]);\r\n}\r\n// In some cases (e.g., splitNumber is 1), niceTickExtent may be out of extent.\r\nexport function fixExtent(niceTickExtent, extent) {\r\n  !isFinite(niceTickExtent[0]) && (niceTickExtent[0] = extent[0]);\r\n  !isFinite(niceTickExtent[1]) && (niceTickExtent[1] = extent[1]);\r\n  clamp(niceTickExtent, 0, extent);\r\n  clamp(niceTickExtent, 1, extent);\r\n  if (niceTickExtent[0] > niceTickExtent[1]) {\r\n    niceTickExtent[0] = niceTickExtent[1];\r\n  }\r\n}\r\nexport function contain(val, extent) {\r\n  return val >= extent[0] && val <= extent[1];\r\n}\r\nexport function normalize(val, extent) {\r\n  if (extent[1] === extent[0]) {\r\n    return 0.5;\r\n  }\r\n  return (val - extent[0]) / (extent[1] - extent[0]);\r\n}\r\nexport function scale(val, extent) {\r\n  return val * (extent[1] - extent[0]) + extent[0];\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\n/**\r\n * Linear continuous scale\r\n * http://en.wikipedia.org/wiki/Level_of_measurement\r\n */\r\n// FIXME only one data\r\nimport Scale from './Scale.js';\r\nimport OrdinalMeta from '../data/OrdinalMeta.js';\r\nimport * as scaleHelper from './helper.js';\r\nimport { isArray, map, isObject, isString } from 'zrender/lib/core/util.js';\r\nvar OrdinalScale = /** @class */function (_super) {\r\n  __extends(OrdinalScale, _super);\r\n  function OrdinalScale(setting) {\r\n    var _this = _super.call(this, setting) || this;\r\n    _this.type = 'ordinal';\r\n    var ordinalMeta = _this.getSetting('ordinalMeta');\r\n    // Caution: Should not use instanceof, consider ec-extensions using\r\n    // import approach to get OrdinalMeta class.\r\n    if (!ordinalMeta) {\r\n      ordinalMeta = new OrdinalMeta({});\r\n    }\r\n    if (isArray(ordinalMeta)) {\r\n      ordinalMeta = new OrdinalMeta({\r\n        categories: map(ordinalMeta, function (item) {\r\n          return isObject(item) ? item.value : item;\r\n        })\r\n      });\r\n    }\r\n    _this._ordinalMeta = ordinalMeta;\r\n    _this._extent = _this.getSetting('extent') || [0, ordinalMeta.categories.length - 1];\r\n    return _this;\r\n  }\r\n  OrdinalScale.prototype.parse = function (val) {\r\n    // Caution: Math.round(null) will return `0` rather than `NaN`\r\n    if (val == null) {\r\n      return NaN;\r\n    }\r\n    return isString(val) ? this._ordinalMeta.getOrdinal(val)\r\n    // val might be float.\r\n    : Math.round(val);\r\n  };\r\n  OrdinalScale.prototype.contain = function (rank) {\r\n    rank = this.parse(rank);\r\n    return scaleHelper.contain(rank, this._extent) && this._ordinalMeta.categories[rank] != null;\r\n  };\r\n  /**\r\n   * Normalize given rank or name to linear [0, 1]\r\n   * @param val raw ordinal number.\r\n   * @return normalized value in [0, 1].\r\n   */\r\n  OrdinalScale.prototype.normalize = function (val) {\r\n    val = this._getTickNumber(this.parse(val));\r\n    return scaleHelper.normalize(val, this._extent);\r\n  };\r\n  /**\r\n   * @param val normalized value in [0, 1].\r\n   * @return raw ordinal number.\r\n   */\r\n  OrdinalScale.prototype.scale = function (val) {\r\n    val = Math.round(scaleHelper.scale(val, this._extent));\r\n    return this.getRawOrdinalNumber(val);\r\n  };\r\n  OrdinalScale.prototype.getTicks = function () {\r\n    var ticks = [];\r\n    var extent = this._extent;\r\n    var rank = extent[0];\r\n    while (rank <= extent[1]) {\r\n      ticks.push({\r\n        value: rank\r\n      });\r\n      rank++;\r\n    }\r\n    return ticks;\r\n  };\r\n  OrdinalScale.prototype.getMinorTicks = function (splitNumber) {\r\n    // Not support.\r\n    return;\r\n  };\r\n  /**\r\n   * @see `Ordinal['_ordinalNumbersByTick']`\r\n   */\r\n  OrdinalScale.prototype.setSortInfo = function (info) {\r\n    if (info == null) {\r\n      this._ordinalNumbersByTick = this._ticksByOrdinalNumber = null;\r\n      return;\r\n    }\r\n    var infoOrdinalNumbers = info.ordinalNumbers;\r\n    var ordinalsByTick = this._ordinalNumbersByTick = [];\r\n    var ticksByOrdinal = this._ticksByOrdinalNumber = [];\r\n    // Unnecessary support negative tick in `realtimeSort`.\r\n    var tickNum = 0;\r\n    var allCategoryLen = this._ordinalMeta.categories.length;\r\n    for (var len = Math.min(allCategoryLen, infoOrdinalNumbers.length); tickNum < len; ++tickNum) {\r\n      var ordinalNumber = infoOrdinalNumbers[tickNum];\r\n      ordinalsByTick[tickNum] = ordinalNumber;\r\n      ticksByOrdinal[ordinalNumber] = tickNum;\r\n    }\r\n    // Handle that `series.data` only covers part of the `axis.category.data`.\r\n    var unusedOrdinal = 0;\r\n    for (; tickNum < allCategoryLen; ++tickNum) {\r\n      while (ticksByOrdinal[unusedOrdinal] != null) {\r\n        unusedOrdinal++;\r\n      }\r\n      ;\r\n      ordinalsByTick.push(unusedOrdinal);\r\n      ticksByOrdinal[unusedOrdinal] = tickNum;\r\n    }\r\n  };\r\n  OrdinalScale.prototype._getTickNumber = function (ordinal) {\r\n    var ticksByOrdinalNumber = this._ticksByOrdinalNumber;\r\n    // also support ordinal out of range of `ordinalMeta.categories.length`,\r\n    // where ordinal numbers are used as tick value directly.\r\n    return ticksByOrdinalNumber && ordinal >= 0 && ordinal < ticksByOrdinalNumber.length ? ticksByOrdinalNumber[ordinal] : ordinal;\r\n  };\r\n  /**\r\n   * @usage\r\n   * ```js\r\n   * const ordinalNumber = ordinalScale.getRawOrdinalNumber(tickVal);\r\n   *\r\n   * // case0\r\n   * const rawOrdinalValue = axisModel.getCategories()[ordinalNumber];\r\n   * // case1\r\n   * const rawOrdinalValue = this._ordinalMeta.categories[ordinalNumber];\r\n   * // case2\r\n   * const coord = axis.dataToCoord(ordinalNumber);\r\n   * ```\r\n   *\r\n   * @param {OrdinalNumber} tickNumber index of display\r\n   */\r\n  OrdinalScale.prototype.getRawOrdinalNumber = function (tickNumber) {\r\n    var ordinalNumbersByTick = this._ordinalNumbersByTick;\r\n    // tickNumber may be out of range, e.g., when axis max is larger than `ordinalMeta.categories.length`.,\r\n    // where ordinal numbers are used as tick value directly.\r\n    return ordinalNumbersByTick && tickNumber >= 0 && tickNumber < ordinalNumbersByTick.length ? ordinalNumbersByTick[tickNumber] : tickNumber;\r\n  };\r\n  /**\r\n   * Get item on tick\r\n   */\r\n  OrdinalScale.prototype.getLabel = function (tick) {\r\n    if (!this.isBlank()) {\r\n      var ordinalNumber = this.getRawOrdinalNumber(tick.value);\r\n      var cateogry = this._ordinalMeta.categories[ordinalNumber];\r\n      // Note that if no data, ordinalMeta.categories is an empty array.\r\n      // Return empty if it's not exist.\r\n      return cateogry == null ? '' : cateogry + '';\r\n    }\r\n  };\r\n  OrdinalScale.prototype.count = function () {\r\n    return this._extent[1] - this._extent[0] + 1;\r\n  };\r\n  OrdinalScale.prototype.unionExtentFromData = function (data, dim) {\r\n    this.unionExtent(data.getApproximateExtent(dim));\r\n  };\r\n  /**\r\n   * @override\r\n   * If value is in extent range\r\n   */\r\n  OrdinalScale.prototype.isInExtentRange = function (value) {\r\n    value = this._getTickNumber(value);\r\n    return this._extent[0] <= value && this._extent[1] >= value;\r\n  };\r\n  OrdinalScale.prototype.getOrdinalMeta = function () {\r\n    return this._ordinalMeta;\r\n  };\r\n  OrdinalScale.prototype.calcNiceTicks = function () {};\r\n  OrdinalScale.prototype.calcNiceExtent = function () {};\r\n  OrdinalScale.type = 'ordinal';\r\n  return OrdinalScale;\r\n}(Scale);\r\nScale.registerClass(OrdinalScale);\r\nexport default OrdinalScale;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as numberUtil from '../util/number.js';\r\nimport * as formatUtil from '../util/format.js';\r\nimport Scale from './Scale.js';\r\nimport * as helper from './helper.js';\r\nvar roundNumber = numberUtil.round;\r\nvar IntervalScale = /** @class */function (_super) {\r\n  __extends(IntervalScale, _super);\r\n  function IntervalScale() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n    _this.type = 'interval';\r\n    // Step is calculated in adjustExtent.\r\n    _this._interval = 0;\r\n    _this._intervalPrecision = 2;\r\n    return _this;\r\n  }\r\n  IntervalScale.prototype.parse = function (val) {\r\n    return val;\r\n  };\r\n  IntervalScale.prototype.contain = function (val) {\r\n    return helper.contain(val, this._extent);\r\n  };\r\n  IntervalScale.prototype.normalize = function (val) {\r\n    return helper.normalize(val, this._extent);\r\n  };\r\n  IntervalScale.prototype.scale = function (val) {\r\n    return helper.scale(val, this._extent);\r\n  };\r\n  IntervalScale.prototype.setExtent = function (start, end) {\r\n    var thisExtent = this._extent;\r\n    // start,end may be a Number like '25',so...\r\n    if (!isNaN(start)) {\r\n      thisExtent[0] = parseFloat(start);\r\n    }\r\n    if (!isNaN(end)) {\r\n      thisExtent[1] = parseFloat(end);\r\n    }\r\n  };\r\n  IntervalScale.prototype.unionExtent = function (other) {\r\n    var extent = this._extent;\r\n    other[0] < extent[0] && (extent[0] = other[0]);\r\n    other[1] > extent[1] && (extent[1] = other[1]);\r\n    // unionExtent may called by it's sub classes\r\n    this.setExtent(extent[0], extent[1]);\r\n  };\r\n  IntervalScale.prototype.getInterval = function () {\r\n    return this._interval;\r\n  };\r\n  IntervalScale.prototype.setInterval = function (interval) {\r\n    this._interval = interval;\r\n    // Dropped auto calculated niceExtent and use user-set extent.\r\n    // We assume user wants to set both interval, min, max to get a better result.\r\n    this._niceExtent = this._extent.slice();\r\n    this._intervalPrecision = helper.getIntervalPrecision(interval);\r\n  };\r\n  /**\r\n   * @param expandToNicedExtent Whether expand the ticks to niced extent.\r\n   */\r\n  IntervalScale.prototype.getTicks = function (expandToNicedExtent) {\r\n    var interval = this._interval;\r\n    var extent = this._extent;\r\n    var niceTickExtent = this._niceExtent;\r\n    var intervalPrecision = this._intervalPrecision;\r\n    var ticks = [];\r\n    // If interval is 0, return [];\r\n    if (!interval) {\r\n      return ticks;\r\n    }\r\n    // Consider this case: using dataZoom toolbox, zoom and zoom.\r\n    var safeLimit = 10000;\r\n    if (extent[0] < niceTickExtent[0]) {\r\n      if (expandToNicedExtent) {\r\n        ticks.push({\r\n          value: roundNumber(niceTickExtent[0] - interval, intervalPrecision)\r\n        });\r\n      } else {\r\n        ticks.push({\r\n          value: extent[0]\r\n        });\r\n      }\r\n    }\r\n    var tick = niceTickExtent[0];\r\n    while (tick <= niceTickExtent[1]) {\r\n      ticks.push({\r\n        value: tick\r\n      });\r\n      // Avoid rounding error\r\n      tick = roundNumber(tick + interval, intervalPrecision);\r\n      if (tick === ticks[ticks.length - 1].value) {\r\n        // Consider out of safe float point, e.g.,\r\n        // -3711126.9907707 + 2e-10 === -3711126.9907707\r\n        break;\r\n      }\r\n      if (ticks.length > safeLimit) {\r\n        return [];\r\n      }\r\n    }\r\n    // Consider this case: the last item of ticks is smaller\r\n    // than niceTickExtent[1] and niceTickExtent[1] === extent[1].\r\n    var lastNiceTick = ticks.length ? ticks[ticks.length - 1].value : niceTickExtent[1];\r\n    if (extent[1] > lastNiceTick) {\r\n      if (expandToNicedExtent) {\r\n        ticks.push({\r\n          value: roundNumber(lastNiceTick + interval, intervalPrecision)\r\n        });\r\n      } else {\r\n        ticks.push({\r\n          value: extent[1]\r\n        });\r\n      }\r\n    }\r\n    return ticks;\r\n  };\r\n  IntervalScale.prototype.getMinorTicks = function (splitNumber) {\r\n    var ticks = this.getTicks(true);\r\n    var minorTicks = [];\r\n    var extent = this.getExtent();\r\n    for (var i = 1; i < ticks.length; i++) {\r\n      var nextTick = ticks[i];\r\n      var prevTick = ticks[i - 1];\r\n      var count = 0;\r\n      var minorTicksGroup = [];\r\n      var interval = nextTick.value - prevTick.value;\r\n      var minorInterval = interval / splitNumber;\r\n      while (count < splitNumber - 1) {\r\n        var minorTick = roundNumber(prevTick.value + (count + 1) * minorInterval);\r\n        // For the first and last interval. The count may be less than splitNumber.\r\n        if (minorTick > extent[0] && minorTick < extent[1]) {\r\n          minorTicksGroup.push(minorTick);\r\n        }\r\n        count++;\r\n      }\r\n      minorTicks.push(minorTicksGroup);\r\n    }\r\n    return minorTicks;\r\n  };\r\n  /**\r\n   * @param opt.precision If 'auto', use nice presision.\r\n   * @param opt.pad returns 1.50 but not 1.5 if precision is 2.\r\n   */\r\n  IntervalScale.prototype.getLabel = function (data, opt) {\r\n    if (data == null) {\r\n      return '';\r\n    }\r\n    var precision = opt && opt.precision;\r\n    if (precision == null) {\r\n      precision = numberUtil.getPrecision(data.value) || 0;\r\n    } else if (precision === 'auto') {\r\n      // Should be more precise then tick.\r\n      precision = this._intervalPrecision;\r\n    }\r\n    // (1) If `precision` is set, 12.005 should be display as '12.00500'.\r\n    // (2) Use roundNumber (toFixed) to avoid scientific notation like '3.5e-7'.\r\n    var dataNum = roundNumber(data.value, precision, true);\r\n    return formatUtil.addCommas(dataNum);\r\n  };\r\n  /**\r\n   * @param splitNumber By default `5`.\r\n   */\r\n  IntervalScale.prototype.calcNiceTicks = function (splitNumber, minInterval, maxInterval) {\r\n    splitNumber = splitNumber || 5;\r\n    var extent = this._extent;\r\n    var span = extent[1] - extent[0];\r\n    if (!isFinite(span)) {\r\n      return;\r\n    }\r\n    // User may set axis min 0 and data are all negative\r\n    // FIXME If it needs to reverse ?\r\n    if (span < 0) {\r\n      span = -span;\r\n      extent.reverse();\r\n    }\r\n    var result = helper.intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval);\r\n    this._intervalPrecision = result.intervalPrecision;\r\n    this._interval = result.interval;\r\n    this._niceExtent = result.niceTickExtent;\r\n  };\r\n  IntervalScale.prototype.calcNiceExtent = function (opt) {\r\n    var extent = this._extent;\r\n    // If extent start and end are same, expand them\r\n    if (extent[0] === extent[1]) {\r\n      if (extent[0] !== 0) {\r\n        // Expand extent\r\n        // Note that extents can be both negative. See #13154\r\n        var expandSize = Math.abs(extent[0]);\r\n        // In the fowllowing case\r\n        //      Axis has been fixed max 100\r\n        //      Plus data are all 100 and axis extent are [100, 100].\r\n        // Extend to the both side will cause expanded max is larger than fixed max.\r\n        // So only expand to the smaller side.\r\n        if (!opt.fixMax) {\r\n          extent[1] += expandSize / 2;\r\n          extent[0] -= expandSize / 2;\r\n        } else {\r\n          extent[0] -= expandSize / 2;\r\n        }\r\n      } else {\r\n        extent[1] = 1;\r\n      }\r\n    }\r\n    var span = extent[1] - extent[0];\r\n    // If there are no data and extent are [Infinity, -Infinity]\r\n    if (!isFinite(span)) {\r\n      extent[0] = 0;\r\n      extent[1] = 1;\r\n    }\r\n    this.calcNiceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\r\n    // let extent = this._extent;\r\n    var interval = this._interval;\r\n    if (!opt.fixMin) {\r\n      extent[0] = roundNumber(Math.floor(extent[0] / interval) * interval);\r\n    }\r\n    if (!opt.fixMax) {\r\n      extent[1] = roundNumber(Math.ceil(extent[1] / interval) * interval);\r\n    }\r\n  };\r\n  IntervalScale.prototype.setNiceExtent = function (min, max) {\r\n    this._niceExtent = [min, max];\r\n  };\r\n  IntervalScale.type = 'interval';\r\n  return IntervalScale;\r\n}(Scale);\r\nScale.registerClass(IntervalScale);\r\nexport default IntervalScale;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { createHashMap } from 'zrender/lib/core/util.js';\r\n;\r\n;\r\n;\r\nexport var VISUAL_DIMENSIONS = createHashMap(['tooltip', 'label', 'itemName', 'itemId', 'itemGroupId', 'itemChildGroupId', 'seriesName']);\r\nexport var SOURCE_FORMAT_ORIGINAL = 'original';\r\nexport var SOURCE_FORMAT_ARRAY_ROWS = 'arrayRows';\r\nexport var SOURCE_FORMAT_OBJECT_ROWS = 'objectRows';\r\nexport var SOURCE_FORMAT_KEYED_COLUMNS = 'keyedColumns';\r\nexport var SOURCE_FORMAT_TYPED_ARRAY = 'typedArray';\r\nexport var SOURCE_FORMAT_UNKNOWN = 'unknown';\r\nexport var SERIES_LAYOUT_BY_COLUMN = 'column';\r\nexport var SERIES_LAYOUT_BY_ROW = 'row';\r\n;\r\n;\r\n;\r\n;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { makeInner, getDataItemValue, queryReferringComponents, SINGLE_REFERRING } from '../../util/model.js';\r\nimport { createHashMap, each, isArray, isString, isObject, isTypedArray } from 'zrender/lib/core/util.js';\r\nimport { SOURCE_FORMAT_ORIGINAL, SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS, SERIES_LAYOUT_BY_ROW, SOURCE_FORMAT_KEYED_COLUMNS } from '../../util/types.js';\r\n// The result of `guessOrdinal`.\r\nexport var BE_ORDINAL = {\r\n  Must: 1,\r\n  Might: 2,\r\n  Not: 3 // Other cases\r\n};\r\nvar innerGlobalModel = makeInner();\r\n/**\r\n * MUST be called before mergeOption of all series.\r\n */\r\nexport function resetSourceDefaulter(ecModel) {\r\n  // `datasetMap` is used to make default encode.\r\n  innerGlobalModel(ecModel).datasetMap = createHashMap();\r\n}\r\n/**\r\n * [The strategy of the arrengment of data dimensions for dataset]:\r\n * \"value way\": all axes are non-category axes. So series one by one take\r\n *     several (the number is coordSysDims.length) dimensions from dataset.\r\n *     The result of data arrengment of data dimensions like:\r\n *     | ser0_x | ser0_y | ser1_x | ser1_y | ser2_x | ser2_y |\r\n * \"category way\": at least one axis is category axis. So the the first data\r\n *     dimension is always mapped to the first category axis and shared by\r\n *     all of the series. The other data dimensions are taken by series like\r\n *     \"value way\" does.\r\n *     The result of data arrengment of data dimensions like:\r\n *     | ser_shared_x | ser0_y | ser1_y | ser2_y |\r\n *\r\n * @return encode Never be `null/undefined`.\r\n */\r\nexport function makeSeriesEncodeForAxisCoordSys(coordDimensions, seriesModel, source) {\r\n  var encode = {};\r\n  var datasetModel = querySeriesUpstreamDatasetModel(seriesModel);\r\n  // Currently only make default when using dataset, util more reqirements occur.\r\n  if (!datasetModel || !coordDimensions) {\r\n    return encode;\r\n  }\r\n  var encodeItemName = [];\r\n  var encodeSeriesName = [];\r\n  var ecModel = seriesModel.ecModel;\r\n  var datasetMap = innerGlobalModel(ecModel).datasetMap;\r\n  var key = datasetModel.uid + '_' + source.seriesLayoutBy;\r\n  var baseCategoryDimIndex;\r\n  var categoryWayValueDimStart;\r\n  coordDimensions = coordDimensions.slice();\r\n  each(coordDimensions, function (coordDimInfoLoose, coordDimIdx) {\r\n    var coordDimInfo = isObject(coordDimInfoLoose) ? coordDimInfoLoose : coordDimensions[coordDimIdx] = {\r\n      name: coordDimInfoLoose\r\n    };\r\n    if (coordDimInfo.type === 'ordinal' && baseCategoryDimIndex == null) {\r\n      baseCategoryDimIndex = coordDimIdx;\r\n      categoryWayValueDimStart = getDataDimCountOnCoordDim(coordDimInfo);\r\n    }\r\n    encode[coordDimInfo.name] = [];\r\n  });\r\n  var datasetRecord = datasetMap.get(key) || datasetMap.set(key, {\r\n    categoryWayDim: categoryWayValueDimStart,\r\n    valueWayDim: 0\r\n  });\r\n  // TODO\r\n  // Auto detect first time axis and do arrangement.\r\n  each(coordDimensions, function (coordDimInfo, coordDimIdx) {\r\n    var coordDimName = coordDimInfo.name;\r\n    var count = getDataDimCountOnCoordDim(coordDimInfo);\r\n    // In value way.\r\n    if (baseCategoryDimIndex == null) {\r\n      var start = datasetRecord.valueWayDim;\r\n      pushDim(encode[coordDimName], start, count);\r\n      pushDim(encodeSeriesName, start, count);\r\n      datasetRecord.valueWayDim += count;\r\n      // ??? TODO give a better default series name rule?\r\n      // especially when encode x y specified.\r\n      // consider: when multiple series share one dimension\r\n      // category axis, series name should better use\r\n      // the other dimension name. On the other hand, use\r\n      // both dimensions name.\r\n    }\r\n    // In category way, the first category axis.\r\n    else if (baseCategoryDimIndex === coordDimIdx) {\r\n      pushDim(encode[coordDimName], 0, count);\r\n      pushDim(encodeItemName, 0, count);\r\n    }\r\n    // In category way, the other axis.\r\n    else {\r\n      var start = datasetRecord.categoryWayDim;\r\n      pushDim(encode[coordDimName], start, count);\r\n      pushDim(encodeSeriesName, start, count);\r\n      datasetRecord.categoryWayDim += count;\r\n    }\r\n  });\r\n  function pushDim(dimIdxArr, idxFrom, idxCount) {\r\n    for (var i = 0; i < idxCount; i++) {\r\n      dimIdxArr.push(idxFrom + i);\r\n    }\r\n  }\r\n  function getDataDimCountOnCoordDim(coordDimInfo) {\r\n    var dimsDef = coordDimInfo.dimsDef;\r\n    return dimsDef ? dimsDef.length : 1;\r\n  }\r\n  encodeItemName.length && (encode.itemName = encodeItemName);\r\n  encodeSeriesName.length && (encode.seriesName = encodeSeriesName);\r\n  return encode;\r\n}\r\n/**\r\n * Work for data like [{name: ..., value: ...}, ...].\r\n *\r\n * @return encode Never be `null/undefined`.\r\n */\r\nexport function makeSeriesEncodeForNameBased(seriesModel, source, dimCount) {\r\n  var encode = {};\r\n  var datasetModel = querySeriesUpstreamDatasetModel(seriesModel);\r\n  // Currently only make default when using dataset, util more reqirements occur.\r\n  if (!datasetModel) {\r\n    return encode;\r\n  }\r\n  var sourceFormat = source.sourceFormat;\r\n  var dimensionsDefine = source.dimensionsDefine;\r\n  var potentialNameDimIndex;\r\n  if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\r\n    each(dimensionsDefine, function (dim, idx) {\r\n      if ((isObject(dim) ? dim.name : dim) === 'name') {\r\n        potentialNameDimIndex = idx;\r\n      }\r\n    });\r\n  }\r\n  var idxResult = function () {\r\n    var idxRes0 = {};\r\n    var idxRes1 = {};\r\n    var guessRecords = [];\r\n    // 5 is an experience value.\r\n    for (var i = 0, len = Math.min(5, dimCount); i < len; i++) {\r\n      var guessResult = doGuessOrdinal(source.data, sourceFormat, source.seriesLayoutBy, dimensionsDefine, source.startIndex, i);\r\n      guessRecords.push(guessResult);\r\n      var isPureNumber = guessResult === BE_ORDINAL.Not;\r\n      // [Strategy of idxRes0]: find the first BE_ORDINAL.Not as the value dim,\r\n      // and then find a name dim with the priority:\r\n      // \"BE_ORDINAL.Might|BE_ORDINAL.Must\" > \"other dim\" > \"the value dim itself\".\r\n      if (isPureNumber && idxRes0.v == null && i !== potentialNameDimIndex) {\r\n        idxRes0.v = i;\r\n      }\r\n      if (idxRes0.n == null || idxRes0.n === idxRes0.v || !isPureNumber && guessRecords[idxRes0.n] === BE_ORDINAL.Not) {\r\n        idxRes0.n = i;\r\n      }\r\n      if (fulfilled(idxRes0) && guessRecords[idxRes0.n] !== BE_ORDINAL.Not) {\r\n        return idxRes0;\r\n      }\r\n      // [Strategy of idxRes1]: if idxRes0 not satisfied (that is, no BE_ORDINAL.Not),\r\n      // find the first BE_ORDINAL.Might as the value dim,\r\n      // and then find a name dim with the priority:\r\n      // \"other dim\" > \"the value dim itself\".\r\n      // That is for backward compat: number-like (e.g., `'3'`, `'55'`) can be\r\n      // treated as number.\r\n      if (!isPureNumber) {\r\n        if (guessResult === BE_ORDINAL.Might && idxRes1.v == null && i !== potentialNameDimIndex) {\r\n          idxRes1.v = i;\r\n        }\r\n        if (idxRes1.n == null || idxRes1.n === idxRes1.v) {\r\n          idxRes1.n = i;\r\n        }\r\n      }\r\n    }\r\n    function fulfilled(idxResult) {\r\n      return idxResult.v != null && idxResult.n != null;\r\n    }\r\n    return fulfilled(idxRes0) ? idxRes0 : fulfilled(idxRes1) ? idxRes1 : null;\r\n  }();\r\n  if (idxResult) {\r\n    encode.value = [idxResult.v];\r\n    // `potentialNameDimIndex` has highest priority.\r\n    var nameDimIndex = potentialNameDimIndex != null ? potentialNameDimIndex : idxResult.n;\r\n    // By default, label uses itemName in charts.\r\n    // So we don't set encodeLabel here.\r\n    encode.itemName = [nameDimIndex];\r\n    encode.seriesName = [nameDimIndex];\r\n  }\r\n  return encode;\r\n}\r\n/**\r\n * @return If return null/undefined, indicate that should not use datasetModel.\r\n */\r\nexport function querySeriesUpstreamDatasetModel(seriesModel) {\r\n  // Caution: consider the scenario:\r\n  // A dataset is declared and a series is not expected to use the dataset,\r\n  // and at the beginning `setOption({series: { noData })` (just prepare other\r\n  // option but no data), then `setOption({series: {data: [...]}); In this case,\r\n  // the user should set an empty array to avoid that dataset is used by default.\r\n  var thisData = seriesModel.get('data', true);\r\n  if (!thisData) {\r\n    return queryReferringComponents(seriesModel.ecModel, 'dataset', {\r\n      index: seriesModel.get('datasetIndex', true),\r\n      id: seriesModel.get('datasetId', true)\r\n    }, SINGLE_REFERRING).models[0];\r\n  }\r\n}\r\n/**\r\n * @return Always return an array event empty.\r\n */\r\nexport function queryDatasetUpstreamDatasetModels(datasetModel) {\r\n  // Only these attributes declared, we by default reference to `datasetIndex: 0`.\r\n  // Otherwise, no reference.\r\n  if (!datasetModel.get('transform', true) && !datasetModel.get('fromTransformResult', true)) {\r\n    return [];\r\n  }\r\n  return queryReferringComponents(datasetModel.ecModel, 'dataset', {\r\n    index: datasetModel.get('fromDatasetIndex', true),\r\n    id: datasetModel.get('fromDatasetId', true)\r\n  }, SINGLE_REFERRING).models;\r\n}\r\n/**\r\n * The rule should not be complex, otherwise user might not\r\n * be able to known where the data is wrong.\r\n * The code is ugly, but how to make it neat?\r\n */\r\nexport function guessOrdinal(source, dimIndex) {\r\n  return doGuessOrdinal(source.data, source.sourceFormat, source.seriesLayoutBy, source.dimensionsDefine, source.startIndex, dimIndex);\r\n}\r\n// dimIndex may be overflow source data.\r\n// return {BE_ORDINAL}\r\nfunction doGuessOrdinal(data, sourceFormat, seriesLayoutBy, dimensionsDefine, startIndex, dimIndex) {\r\n  var result;\r\n  // Experience value.\r\n  var maxLoop = 5;\r\n  if (isTypedArray(data)) {\r\n    return BE_ORDINAL.Not;\r\n  }\r\n  // When sourceType is 'objectRows' or 'keyedColumns', dimensionsDefine\r\n  // always exists in source.\r\n  var dimName;\r\n  var dimType;\r\n  if (dimensionsDefine) {\r\n    var dimDefItem = dimensionsDefine[dimIndex];\r\n    if (isObject(dimDefItem)) {\r\n      dimName = dimDefItem.name;\r\n      dimType = dimDefItem.type;\r\n    } else if (isString(dimDefItem)) {\r\n      dimName = dimDefItem;\r\n    }\r\n  }\r\n  if (dimType != null) {\r\n    return dimType === 'ordinal' ? BE_ORDINAL.Must : BE_ORDINAL.Not;\r\n  }\r\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\r\n    var dataArrayRows = data;\r\n    if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\r\n      var sample = dataArrayRows[dimIndex];\r\n      for (var i = 0; i < (sample || []).length && i < maxLoop; i++) {\r\n        if ((result = detectValue(sample[startIndex + i])) != null) {\r\n          return result;\r\n        }\r\n      }\r\n    } else {\r\n      for (var i = 0; i < dataArrayRows.length && i < maxLoop; i++) {\r\n        var row = dataArrayRows[startIndex + i];\r\n        if (row && (result = detectValue(row[dimIndex])) != null) {\r\n          return result;\r\n        }\r\n      }\r\n    }\r\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\r\n    var dataObjectRows = data;\r\n    if (!dimName) {\r\n      return BE_ORDINAL.Not;\r\n    }\r\n    for (var i = 0; i < dataObjectRows.length && i < maxLoop; i++) {\r\n      var item = dataObjectRows[i];\r\n      if (item && (result = detectValue(item[dimName])) != null) {\r\n        return result;\r\n      }\r\n    }\r\n  } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\r\n    var dataKeyedColumns = data;\r\n    if (!dimName) {\r\n      return BE_ORDINAL.Not;\r\n    }\r\n    var sample = dataKeyedColumns[dimName];\r\n    if (!sample || isTypedArray(sample)) {\r\n      return BE_ORDINAL.Not;\r\n    }\r\n    for (var i = 0; i < sample.length && i < maxLoop; i++) {\r\n      if ((result = detectValue(sample[i])) != null) {\r\n        return result;\r\n      }\r\n    }\r\n  } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\r\n    var dataOriginal = data;\r\n    for (var i = 0; i < dataOriginal.length && i < maxLoop; i++) {\r\n      var item = dataOriginal[i];\r\n      var val = getDataItemValue(item);\r\n      if (!isArray(val)) {\r\n        return BE_ORDINAL.Not;\r\n      }\r\n      if ((result = detectValue(val[dimIndex])) != null) {\r\n        return result;\r\n      }\r\n    }\r\n  }\r\n  function detectValue(val) {\r\n    var beStr = isString(val);\r\n    // Consider usage convenience, '1', '2' will be treated as \"number\".\r\n    // `Number('')` (or any whitespace) is `0`.\r\n    if (val != null && Number.isFinite(Number(val)) && val !== '') {\r\n      return beStr ? BE_ORDINAL.Might : BE_ORDINAL.Not;\r\n    } else if (beStr && val !== '-') {\r\n      return BE_ORDINAL.Must;\r\n    }\r\n  }\r\n  return BE_ORDINAL.Not;\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { isTypedArray, clone, createHashMap, isArray, isObject, isArrayLike, hasOwn, assert, each, map, isNumber, isString, keys } from 'zrender/lib/core/util.js';\r\nimport { SOURCE_FORMAT_ORIGINAL, SERIES_LAYOUT_BY_COLUMN, SOURCE_FORMAT_UNKNOWN, SOURCE_FORMAT_KEYED_COLUMNS, SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS, SERIES_LAYOUT_BY_ROW } from '../util/types.js';\r\nimport { getDataItemValue } from '../util/model.js';\r\nimport { BE_ORDINAL, guessOrdinal } from './helper/sourceHelper.js';\r\n;\r\n// @inner\r\nvar SourceImpl = /** @class */function () {\r\n  function SourceImpl(fields) {\r\n    this.data = fields.data || (fields.sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS ? {} : []);\r\n    this.sourceFormat = fields.sourceFormat || SOURCE_FORMAT_UNKNOWN;\r\n    // Visit config\r\n    this.seriesLayoutBy = fields.seriesLayoutBy || SERIES_LAYOUT_BY_COLUMN;\r\n    this.startIndex = fields.startIndex || 0;\r\n    this.dimensionsDetectedCount = fields.dimensionsDetectedCount;\r\n    this.metaRawOption = fields.metaRawOption;\r\n    var dimensionsDefine = this.dimensionsDefine = fields.dimensionsDefine;\r\n    if (dimensionsDefine) {\r\n      for (var i = 0; i < dimensionsDefine.length; i++) {\r\n        var dim = dimensionsDefine[i];\r\n        if (dim.type == null) {\r\n          if (guessOrdinal(this, i) === BE_ORDINAL.Must) {\r\n            dim.type = 'ordinal';\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return SourceImpl;\r\n}();\r\nexport function isSourceInstance(val) {\r\n  return val instanceof SourceImpl;\r\n}\r\n/**\r\n * Create a source from option.\r\n * NOTE: Created source is immutable. Don't change any properties in it.\r\n */\r\nexport function createSource(sourceData, thisMetaRawOption,\r\n// can be null. If not provided, auto detect it from `sourceData`.\r\nsourceFormat) {\r\n  sourceFormat = sourceFormat || detectSourceFormat(sourceData);\r\n  var seriesLayoutBy = thisMetaRawOption.seriesLayoutBy;\r\n  var determined = determineSourceDimensions(sourceData, sourceFormat, seriesLayoutBy, thisMetaRawOption.sourceHeader, thisMetaRawOption.dimensions);\r\n  var source = new SourceImpl({\r\n    data: sourceData,\r\n    sourceFormat: sourceFormat,\r\n    seriesLayoutBy: seriesLayoutBy,\r\n    dimensionsDefine: determined.dimensionsDefine,\r\n    startIndex: determined.startIndex,\r\n    dimensionsDetectedCount: determined.dimensionsDetectedCount,\r\n    metaRawOption: clone(thisMetaRawOption)\r\n  });\r\n  return source;\r\n}\r\n/**\r\n * Wrap original series data for some compatibility cases.\r\n */\r\nexport function createSourceFromSeriesDataOption(data) {\r\n  return new SourceImpl({\r\n    data: data,\r\n    sourceFormat: isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL\r\n  });\r\n}\r\n/**\r\n * Clone source but excludes source data.\r\n */\r\nexport function cloneSourceShallow(source) {\r\n  return new SourceImpl({\r\n    data: source.data,\r\n    sourceFormat: source.sourceFormat,\r\n    seriesLayoutBy: source.seriesLayoutBy,\r\n    dimensionsDefine: clone(source.dimensionsDefine),\r\n    startIndex: source.startIndex,\r\n    dimensionsDetectedCount: source.dimensionsDetectedCount\r\n  });\r\n}\r\n/**\r\n * Note: An empty array will be detected as `SOURCE_FORMAT_ARRAY_ROWS`.\r\n */\r\nexport function detectSourceFormat(data) {\r\n  var sourceFormat = SOURCE_FORMAT_UNKNOWN;\r\n  if (isTypedArray(data)) {\r\n    sourceFormat = SOURCE_FORMAT_TYPED_ARRAY;\r\n  } else if (isArray(data)) {\r\n    // FIXME Whether tolerate null in top level array?\r\n    if (data.length === 0) {\r\n      sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\r\n    }\r\n    for (var i = 0, len = data.length; i < len; i++) {\r\n      var item = data[i];\r\n      if (item == null) {\r\n        continue;\r\n      } else if (isArray(item) || isTypedArray(item)) {\r\n        sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\r\n        break;\r\n      } else if (isObject(item)) {\r\n        sourceFormat = SOURCE_FORMAT_OBJECT_ROWS;\r\n        break;\r\n      }\r\n    }\r\n  } else if (isObject(data)) {\r\n    for (var key in data) {\r\n      if (hasOwn(data, key) && isArrayLike(data[key])) {\r\n        sourceFormat = SOURCE_FORMAT_KEYED_COLUMNS;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  return sourceFormat;\r\n}\r\n/**\r\n * Determine the source definitions from data standalone dimensions definitions\r\n * are not specified.\r\n */\r\nfunction determineSourceDimensions(data, sourceFormat, seriesLayoutBy, sourceHeader,\r\n// standalone raw dimensions definition, like:\r\n// {\r\n//     dimensions: ['aa', 'bb', { name: 'cc', type: 'time' }]\r\n// }\r\n// in `dataset` or `series`\r\ndimensionsDefine) {\r\n  var dimensionsDetectedCount;\r\n  var startIndex;\r\n  // PENDING: Could data be null/undefined here?\r\n  // currently, if `dataset.source` not specified, error thrown.\r\n  // if `series.data` not specified, nothing rendered without error thrown.\r\n  // Should test these cases.\r\n  if (!data) {\r\n    return {\r\n      dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),\r\n      startIndex: startIndex,\r\n      dimensionsDetectedCount: dimensionsDetectedCount\r\n    };\r\n  }\r\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\r\n    var dataArrayRows = data;\r\n    // Rule: Most of the first line are string: it is header.\r\n    // Caution: consider a line with 5 string and 1 number,\r\n    // it still can not be sure it is a head, because the\r\n    // 5 string may be 5 values of category columns.\r\n    if (sourceHeader === 'auto' || sourceHeader == null) {\r\n      arrayRowsTravelFirst(function (val) {\r\n        // '-' is regarded as null/undefined.\r\n        if (val != null && val !== '-') {\r\n          if (isString(val)) {\r\n            startIndex == null && (startIndex = 1);\r\n          } else {\r\n            startIndex = 0;\r\n          }\r\n        }\r\n        // 10 is an experience number, avoid long loop.\r\n      }, seriesLayoutBy, dataArrayRows, 10);\r\n    } else {\r\n      startIndex = isNumber(sourceHeader) ? sourceHeader : sourceHeader ? 1 : 0;\r\n    }\r\n    if (!dimensionsDefine && startIndex === 1) {\r\n      dimensionsDefine = [];\r\n      arrayRowsTravelFirst(function (val, index) {\r\n        dimensionsDefine[index] = val != null ? val + '' : '';\r\n      }, seriesLayoutBy, dataArrayRows, Infinity);\r\n    }\r\n    dimensionsDetectedCount = dimensionsDefine ? dimensionsDefine.length : seriesLayoutBy === SERIES_LAYOUT_BY_ROW ? dataArrayRows.length : dataArrayRows[0] ? dataArrayRows[0].length : null;\r\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\r\n    if (!dimensionsDefine) {\r\n      dimensionsDefine = objectRowsCollectDimensions(data);\r\n    }\r\n  } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\r\n    if (!dimensionsDefine) {\r\n      dimensionsDefine = [];\r\n      each(data, function (colArr, key) {\r\n        dimensionsDefine.push(key);\r\n      });\r\n    }\r\n  } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\r\n    var value0 = getDataItemValue(data[0]);\r\n    dimensionsDetectedCount = isArray(value0) && value0.length || 1;\r\n  } else if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      assert(!!dimensionsDefine, 'dimensions must be given if data is TypedArray.');\r\n    }\r\n  }\r\n  return {\r\n    startIndex: startIndex,\r\n    dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),\r\n    dimensionsDetectedCount: dimensionsDetectedCount\r\n  };\r\n}\r\nfunction objectRowsCollectDimensions(data) {\r\n  var firstIndex = 0;\r\n  var obj;\r\n  while (firstIndex < data.length && !(obj = data[firstIndex++])) {} // jshint ignore: line\r\n  if (obj) {\r\n    return keys(obj);\r\n  }\r\n}\r\n// Consider dimensions defined like ['A', 'price', 'B', 'price', 'C', 'price'],\r\n// which is reasonable. But dimension name is duplicated.\r\n// Returns undefined or an array contains only object without null/undefined or string.\r\nfunction normalizeDimensionsOption(dimensionsDefine) {\r\n  if (!dimensionsDefine) {\r\n    // The meaning of null/undefined is different from empty array.\r\n    return;\r\n  }\r\n  var nameMap = createHashMap();\r\n  return map(dimensionsDefine, function (rawItem, index) {\r\n    rawItem = isObject(rawItem) ? rawItem : {\r\n      name: rawItem\r\n    };\r\n    // Other fields will be discarded.\r\n    var item = {\r\n      name: rawItem.name,\r\n      displayName: rawItem.displayName,\r\n      type: rawItem.type\r\n    };\r\n    // User can set null in dimensions.\r\n    // We don't auto specify name, otherwise a given name may\r\n    // cause it to be referred unexpectedly.\r\n    if (item.name == null) {\r\n      return item;\r\n    }\r\n    // Also consider number form like 2012.\r\n    item.name += '';\r\n    // User may also specify displayName.\r\n    // displayName will always exists except user not\r\n    // specified or dim name is not specified or detected.\r\n    // (A auto generated dim name will not be used as\r\n    // displayName).\r\n    if (item.displayName == null) {\r\n      item.displayName = item.name;\r\n    }\r\n    var exist = nameMap.get(item.name);\r\n    if (!exist) {\r\n      nameMap.set(item.name, {\r\n        count: 1\r\n      });\r\n    } else {\r\n      item.name += '-' + exist.count++;\r\n    }\r\n    return item;\r\n  });\r\n}\r\nfunction arrayRowsTravelFirst(cb, seriesLayoutBy, data, maxLoop) {\r\n  if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\r\n    for (var i = 0; i < data.length && i < maxLoop; i++) {\r\n      cb(data[i] ? data[i][0] : null, i);\r\n    }\r\n  } else {\r\n    var value0 = data[0] || [];\r\n    for (var i = 0; i < value0.length && i < maxLoop; i++) {\r\n      cb(value0[i], i);\r\n    }\r\n  }\r\n}\r\nexport function shouldRetrieveDataByName(source) {\r\n  var sourceFormat = source.sourceFormat;\r\n  return sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS;\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { createHashMap, isObject, retrieve2 } from 'zrender/lib/core/util.js';\r\nimport { makeInner } from '../../util/model.js';\r\nimport { shouldRetrieveDataByName } from '../Source.js';\r\nvar inner = makeInner();\r\nvar dimTypeShort = {\r\n  float: 'f',\r\n  int: 'i',\r\n  ordinal: 'o',\r\n  number: 'n',\r\n  time: 't'\r\n};\r\n/**\r\n * Represents the dimension requirement of a series.\r\n *\r\n * NOTICE:\r\n * When there are too many dimensions in dataset and many series, only the used dimensions\r\n * (i.e., used by coord sys and declared in `series.encode`) are add to `dimensionDefineList`.\r\n * But users may query data by other unused dimension names.\r\n * In this case, users can only query data if and only if they have defined dimension names\r\n * via ec option, so we provide `getDimensionIndexFromSource`, which only query them from\r\n * `source` dimensions.\r\n */\r\nvar SeriesDataSchema = /** @class */function () {\r\n  function SeriesDataSchema(opt) {\r\n    this.dimensions = opt.dimensions;\r\n    this._dimOmitted = opt.dimensionOmitted;\r\n    this.source = opt.source;\r\n    this._fullDimCount = opt.fullDimensionCount;\r\n    this._updateDimOmitted(opt.dimensionOmitted);\r\n  }\r\n  SeriesDataSchema.prototype.isDimensionOmitted = function () {\r\n    return this._dimOmitted;\r\n  };\r\n  SeriesDataSchema.prototype._updateDimOmitted = function (dimensionOmitted) {\r\n    this._dimOmitted = dimensionOmitted;\r\n    if (!dimensionOmitted) {\r\n      return;\r\n    }\r\n    if (!this._dimNameMap) {\r\n      this._dimNameMap = ensureSourceDimNameMap(this.source);\r\n    }\r\n  };\r\n  /**\r\n   * @caution Can only be used when `dimensionOmitted: true`.\r\n   *\r\n   * Get index by user defined dimension name (i.e., not internal generate name).\r\n   * That is, get index from `dimensionsDefine`.\r\n   * If no `dimensionsDefine`, or no name get, return -1.\r\n   */\r\n  SeriesDataSchema.prototype.getSourceDimensionIndex = function (dimName) {\r\n    return retrieve2(this._dimNameMap.get(dimName), -1);\r\n  };\r\n  /**\r\n   * @caution Can only be used when `dimensionOmitted: true`.\r\n   *\r\n   * Notice: may return `null`/`undefined` if user not specify dimension names.\r\n   */\r\n  SeriesDataSchema.prototype.getSourceDimension = function (dimIndex) {\r\n    var dimensionsDefine = this.source.dimensionsDefine;\r\n    if (dimensionsDefine) {\r\n      return dimensionsDefine[dimIndex];\r\n    }\r\n  };\r\n  SeriesDataSchema.prototype.makeStoreSchema = function () {\r\n    var dimCount = this._fullDimCount;\r\n    var willRetrieveDataByName = shouldRetrieveDataByName(this.source);\r\n    var makeHashStrict = !shouldOmitUnusedDimensions(dimCount);\r\n    // If source don't have dimensions or series don't omit unsed dimensions.\r\n    // Generate from seriesDimList directly\r\n    var dimHash = '';\r\n    var dims = [];\r\n    for (var fullDimIdx = 0, seriesDimIdx = 0; fullDimIdx < dimCount; fullDimIdx++) {\r\n      var property = void 0;\r\n      var type = void 0;\r\n      var ordinalMeta = void 0;\r\n      var seriesDimDef = this.dimensions[seriesDimIdx];\r\n      // The list has been sorted by `storeDimIndex` asc.\r\n      if (seriesDimDef && seriesDimDef.storeDimIndex === fullDimIdx) {\r\n        property = willRetrieveDataByName ? seriesDimDef.name : null;\r\n        type = seriesDimDef.type;\r\n        ordinalMeta = seriesDimDef.ordinalMeta;\r\n        seriesDimIdx++;\r\n      } else {\r\n        var sourceDimDef = this.getSourceDimension(fullDimIdx);\r\n        if (sourceDimDef) {\r\n          property = willRetrieveDataByName ? sourceDimDef.name : null;\r\n          type = sourceDimDef.type;\r\n        }\r\n      }\r\n      dims.push({\r\n        property: property,\r\n        type: type,\r\n        ordinalMeta: ordinalMeta\r\n      });\r\n      // If retrieving data by index,\r\n      //   use <index, type, ordinalMeta> to determine whether data can be shared.\r\n      //   (Because in this case there might be no dimension name defined in dataset, but indices always exists).\r\n      //   (Indices are always 0, 1, 2, ..., so we can ignore them to shorten the hash).\r\n      // Otherwise if retrieving data by property name (like `data: [{aa: 123, bb: 765}, ...]`),\r\n      //   use <property, type, ordinalMeta> in hash.\r\n      if (willRetrieveDataByName && property != null\r\n      // For data stack, we have make sure each series has its own dim on this store.\r\n      // So we do not add property to hash to make sure they can share this store.\r\n      && (!seriesDimDef || !seriesDimDef.isCalculationCoord)) {\r\n        dimHash += makeHashStrict\r\n        // Use escape character '`' in case that property name contains '$'.\r\n        ? property.replace(/\\`/g, '`1').replace(/\\$/g, '`2')\r\n        // For better performance, when there are large dimensions, tolerant this defects that hardly meet.\r\n        : property;\r\n      }\r\n      dimHash += '$';\r\n      dimHash += dimTypeShort[type] || 'f';\r\n      if (ordinalMeta) {\r\n        dimHash += ordinalMeta.uid;\r\n      }\r\n      dimHash += '$';\r\n    }\r\n    // Source from endpoint(usually series) will be read differently\r\n    // when seriesLayoutBy or startIndex(which is affected by sourceHeader) are different.\r\n    // So we use this three props as key.\r\n    var source = this.source;\r\n    var hash = [source.seriesLayoutBy, source.startIndex, dimHash].join('$$');\r\n    return {\r\n      dimensions: dims,\r\n      hash: hash\r\n    };\r\n  };\r\n  SeriesDataSchema.prototype.makeOutputDimensionNames = function () {\r\n    var result = [];\r\n    for (var fullDimIdx = 0, seriesDimIdx = 0; fullDimIdx < this._fullDimCount; fullDimIdx++) {\r\n      var name_1 = void 0;\r\n      var seriesDimDef = this.dimensions[seriesDimIdx];\r\n      // The list has been sorted by `storeDimIndex` asc.\r\n      if (seriesDimDef && seriesDimDef.storeDimIndex === fullDimIdx) {\r\n        if (!seriesDimDef.isCalculationCoord) {\r\n          name_1 = seriesDimDef.name;\r\n        }\r\n        seriesDimIdx++;\r\n      } else {\r\n        var sourceDimDef = this.getSourceDimension(fullDimIdx);\r\n        if (sourceDimDef) {\r\n          name_1 = sourceDimDef.name;\r\n        }\r\n      }\r\n      result.push(name_1);\r\n    }\r\n    return result;\r\n  };\r\n  SeriesDataSchema.prototype.appendCalculationDimension = function (dimDef) {\r\n    this.dimensions.push(dimDef);\r\n    dimDef.isCalculationCoord = true;\r\n    this._fullDimCount++;\r\n    // If append dimension on a data store, consider the store\r\n    // might be shared by different series, series dimensions not\r\n    // really map to store dimensions.\r\n    this._updateDimOmitted(true);\r\n  };\r\n  return SeriesDataSchema;\r\n}();\r\nexport { SeriesDataSchema };\r\nexport function isSeriesDataSchema(schema) {\r\n  return schema instanceof SeriesDataSchema;\r\n}\r\nexport function createDimNameMap(dimsDef) {\r\n  var dataDimNameMap = createHashMap();\r\n  for (var i = 0; i < (dimsDef || []).length; i++) {\r\n    var dimDefItemRaw = dimsDef[i];\r\n    var userDimName = isObject(dimDefItemRaw) ? dimDefItemRaw.name : dimDefItemRaw;\r\n    if (userDimName != null && dataDimNameMap.get(userDimName) == null) {\r\n      dataDimNameMap.set(userDimName, i);\r\n    }\r\n  }\r\n  return dataDimNameMap;\r\n}\r\nexport function ensureSourceDimNameMap(source) {\r\n  var innerSource = inner(source);\r\n  return innerSource.dimNameMap || (innerSource.dimNameMap = createDimNameMap(source.dimensionsDefine));\r\n}\r\nexport function shouldOmitUnusedDimensions(dimCount) {\r\n  return dimCount > 30;\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { each, isString } from 'zrender/lib/core/util.js';\r\nimport { isSeriesDataSchema } from './SeriesDataSchema.js';\r\n/**\r\n * Note that it is too complicated to support 3d stack by value\r\n * (have to create two-dimension inverted index), so in 3d case\r\n * we just support that stacked by index.\r\n *\r\n * @param seriesModel\r\n * @param dimensionsInput The same as the input of <module:echarts/data/SeriesData>.\r\n *        The input will be modified.\r\n * @param opt\r\n * @param opt.stackedCoordDimension Specify a coord dimension if needed.\r\n * @param opt.byIndex=false\r\n * @return calculationInfo\r\n * {\r\n *     stackedDimension: string\r\n *     stackedByDimension: string\r\n *     isStackedByIndex: boolean\r\n *     stackedOverDimension: string\r\n *     stackResultDimension: string\r\n * }\r\n */\r\nexport function enableDataStack(seriesModel, dimensionsInput, opt) {\r\n  opt = opt || {};\r\n  var byIndex = opt.byIndex;\r\n  var stackedCoordDimension = opt.stackedCoordDimension;\r\n  var dimensionDefineList;\r\n  var schema;\r\n  var store;\r\n  if (isLegacyDimensionsInput(dimensionsInput)) {\r\n    dimensionDefineList = dimensionsInput;\r\n  } else {\r\n    schema = dimensionsInput.schema;\r\n    dimensionDefineList = schema.dimensions;\r\n    store = dimensionsInput.store;\r\n  }\r\n  // Compatibal: when `stack` is set as '', do not stack.\r\n  var mayStack = !!(seriesModel && seriesModel.get('stack'));\r\n  var stackedByDimInfo;\r\n  var stackedDimInfo;\r\n  var stackResultDimension;\r\n  var stackedOverDimension;\r\n  each(dimensionDefineList, function (dimensionInfo, index) {\r\n    if (isString(dimensionInfo)) {\r\n      dimensionDefineList[index] = dimensionInfo = {\r\n        name: dimensionInfo\r\n      };\r\n    }\r\n    if (mayStack && !dimensionInfo.isExtraCoord) {\r\n      // Find the first ordinal dimension as the stackedByDimInfo.\r\n      if (!byIndex && !stackedByDimInfo && dimensionInfo.ordinalMeta) {\r\n        stackedByDimInfo = dimensionInfo;\r\n      }\r\n      // Find the first stackable dimension as the stackedDimInfo.\r\n      if (!stackedDimInfo && dimensionInfo.type !== 'ordinal' && dimensionInfo.type !== 'time' && (!stackedCoordDimension || stackedCoordDimension === dimensionInfo.coordDim)) {\r\n        stackedDimInfo = dimensionInfo;\r\n      }\r\n    }\r\n  });\r\n  if (stackedDimInfo && !byIndex && !stackedByDimInfo) {\r\n    // Compatible with previous design, value axis (time axis) only stack by index.\r\n    // It may make sense if the user provides elaborately constructed data.\r\n    byIndex = true;\r\n  }\r\n  // Add stack dimension, they can be both calculated by coordinate system in `unionExtent`.\r\n  // That put stack logic in List is for using conveniently in echarts extensions, but it\r\n  // might not be a good way.\r\n  if (stackedDimInfo) {\r\n    // Use a weird name that not duplicated with other names.\r\n    // Also need to use seriesModel.id as postfix because different\r\n    // series may share same data store. The stack dimension needs to be distinguished.\r\n    stackResultDimension = '__\\0ecstackresult_' + seriesModel.id;\r\n    stackedOverDimension = '__\\0ecstackedover_' + seriesModel.id;\r\n    // Create inverted index to fast query index by value.\r\n    if (stackedByDimInfo) {\r\n      stackedByDimInfo.createInvertedIndices = true;\r\n    }\r\n    var stackedDimCoordDim_1 = stackedDimInfo.coordDim;\r\n    var stackedDimType = stackedDimInfo.type;\r\n    var stackedDimCoordIndex_1 = 0;\r\n    each(dimensionDefineList, function (dimensionInfo) {\r\n      if (dimensionInfo.coordDim === stackedDimCoordDim_1) {\r\n        stackedDimCoordIndex_1++;\r\n      }\r\n    });\r\n    var stackedOverDimensionDefine = {\r\n      name: stackResultDimension,\r\n      coordDim: stackedDimCoordDim_1,\r\n      coordDimIndex: stackedDimCoordIndex_1,\r\n      type: stackedDimType,\r\n      isExtraCoord: true,\r\n      isCalculationCoord: true,\r\n      storeDimIndex: dimensionDefineList.length\r\n    };\r\n    var stackResultDimensionDefine = {\r\n      name: stackedOverDimension,\r\n      // This dimension contains stack base (generally, 0), so do not set it as\r\n      // `stackedDimCoordDim` to avoid extent calculation, consider log scale.\r\n      coordDim: stackedOverDimension,\r\n      coordDimIndex: stackedDimCoordIndex_1 + 1,\r\n      type: stackedDimType,\r\n      isExtraCoord: true,\r\n      isCalculationCoord: true,\r\n      storeDimIndex: dimensionDefineList.length + 1\r\n    };\r\n    if (schema) {\r\n      if (store) {\r\n        stackedOverDimensionDefine.storeDimIndex = store.ensureCalculationDimension(stackedOverDimension, stackedDimType);\r\n        stackResultDimensionDefine.storeDimIndex = store.ensureCalculationDimension(stackResultDimension, stackedDimType);\r\n      }\r\n      schema.appendCalculationDimension(stackedOverDimensionDefine);\r\n      schema.appendCalculationDimension(stackResultDimensionDefine);\r\n    } else {\r\n      dimensionDefineList.push(stackedOverDimensionDefine);\r\n      dimensionDefineList.push(stackResultDimensionDefine);\r\n    }\r\n  }\r\n  return {\r\n    stackedDimension: stackedDimInfo && stackedDimInfo.name,\r\n    stackedByDimension: stackedByDimInfo && stackedByDimInfo.name,\r\n    isStackedByIndex: byIndex,\r\n    stackedOverDimension: stackedOverDimension,\r\n    stackResultDimension: stackResultDimension\r\n  };\r\n}\r\nfunction isLegacyDimensionsInput(dimensionsInput) {\r\n  return !isSeriesDataSchema(dimensionsInput.schema);\r\n}\r\nexport function isDimensionStacked(data, stackedDim) {\r\n  // Each single series only maps to one pair of axis. So we do not need to\r\n  // check stackByDim, whatever stacked by a dimension or stacked by index.\r\n  return !!stackedDim && stackedDim === data.getCalculationInfo('stackedDimension');\r\n}\r\nexport function getStackedDimension(data, targetDim) {\r\n  return isDimensionStacked(data, targetDim) ? data.getCalculationInfo('stackResultDimension') : targetDim;\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { makeInner } from '../../util/model.js';\r\n/**\r\n * @return {string} If large mode changed, return string 'reset';\r\n */\r\nexport default function createRenderPlanner() {\r\n  var inner = makeInner();\r\n  return function (seriesModel) {\r\n    var fields = inner(seriesModel);\r\n    var pipelineContext = seriesModel.pipelineContext;\r\n    var originalLarge = !!fields.large;\r\n    var originalProgressive = !!fields.progressiveRender;\r\n    // FIXME: if the planner works on a filtered series, `pipelineContext` does not\r\n    // exists. See #11611 . Probably we need to modify this structure, see the comment\r\n    // on `performRawSeries` in `Schedular.js`.\r\n    var large = fields.large = !!(pipelineContext && pipelineContext.large);\r\n    var progressive = fields.progressiveRender = !!(pipelineContext && pipelineContext.progressiveRender);\r\n    return !!(originalLarge !== large || originalProgressive !== progressive) && 'reset';\r\n  };\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { isArray } from 'zrender/lib/core/util.js';\r\n/* global Float32Array */\r\nvar supportFloat32Array = typeof Float32Array !== 'undefined';\r\nvar Float32ArrayCtor = !supportFloat32Array ? Array : Float32Array;\r\nexport function createFloat32Array(arg) {\r\n  if (isArray(arg)) {\r\n    // Return self directly if don't support TypedArray.\r\n    return supportFloat32Array ? new Float32Array(arg) : arg;\r\n  }\r\n  // Else is number\r\n  return new Float32ArrayCtor(arg);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { each, defaults, keys } from 'zrender/lib/core/util.js';\r\nimport { parsePercent } from '../util/number.js';\r\nimport { isDimensionStacked } from '../data/helper/dataStackHelper.js';\r\nimport createRenderPlanner from '../chart/helper/createRenderPlanner.js';\r\nimport { createFloat32Array } from '../util/vendor.js';\r\nvar STACK_PREFIX = '__ec_stack_';\r\nfunction getSeriesStackId(seriesModel) {\r\n  return seriesModel.get('stack') || STACK_PREFIX + seriesModel.seriesIndex;\r\n}\r\nfunction getAxisKey(axis) {\r\n  return axis.dim + axis.index;\r\n}\r\n/**\r\n * @return {Object} {width, offset, offsetCenter} If axis.type is not 'category', return undefined.\r\n */\r\nexport function getLayoutOnAxis(opt) {\r\n  var params = [];\r\n  var baseAxis = opt.axis;\r\n  var axisKey = 'axis0';\r\n  if (baseAxis.type !== 'category') {\r\n    return;\r\n  }\r\n  var bandWidth = baseAxis.getBandWidth();\r\n  for (var i = 0; i < opt.count || 0; i++) {\r\n    params.push(defaults({\r\n      bandWidth: bandWidth,\r\n      axisKey: axisKey,\r\n      stackId: STACK_PREFIX + i\r\n    }, opt));\r\n  }\r\n  var widthAndOffsets = doCalBarWidthAndOffset(params);\r\n  var result = [];\r\n  for (var i = 0; i < opt.count; i++) {\r\n    var item = widthAndOffsets[axisKey][STACK_PREFIX + i];\r\n    item.offsetCenter = item.offset + item.width / 2;\r\n    result.push(item);\r\n  }\r\n  return result;\r\n}\r\nexport function prepareLayoutBarSeries(seriesType, ecModel) {\r\n  var seriesModels = [];\r\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\r\n    // Check series coordinate, do layout for cartesian2d only\r\n    if (isOnCartesian(seriesModel)) {\r\n      seriesModels.push(seriesModel);\r\n    }\r\n  });\r\n  return seriesModels;\r\n}\r\n/**\r\n * Map from (baseAxis.dim + '_' + baseAxis.index) to min gap of two adjacent\r\n * values.\r\n * This works for time axes, value axes, and log axes.\r\n * For a single time axis, return value is in the form like\r\n * {'x_0': [1000000]}.\r\n * The value of 1000000 is in milliseconds.\r\n */\r\nfunction getValueAxesMinGaps(barSeries) {\r\n  /**\r\n   * Map from axis.index to values.\r\n   * For a single time axis, axisValues is in the form like\r\n   * {'x_0': [1495555200000, 1495641600000, 1495728000000]}.\r\n   * Items in axisValues[x], e.g. 1495555200000, are time values of all\r\n   * series.\r\n   */\r\n  var axisValues = {};\r\n  each(barSeries, function (seriesModel) {\r\n    var cartesian = seriesModel.coordinateSystem;\r\n    var baseAxis = cartesian.getBaseAxis();\r\n    if (baseAxis.type !== 'time' && baseAxis.type !== 'value') {\r\n      return;\r\n    }\r\n    var data = seriesModel.getData();\r\n    var key = baseAxis.dim + '_' + baseAxis.index;\r\n    var dimIdx = data.getDimensionIndex(data.mapDimension(baseAxis.dim));\r\n    var store = data.getStore();\r\n    for (var i = 0, cnt = store.count(); i < cnt; ++i) {\r\n      var value = store.get(dimIdx, i);\r\n      if (!axisValues[key]) {\r\n        // No previous data for the axis\r\n        axisValues[key] = [value];\r\n      } else {\r\n        // No value in previous series\r\n        axisValues[key].push(value);\r\n      }\r\n      // Ignore duplicated time values in the same axis\r\n    }\r\n  });\r\n  var axisMinGaps = {};\r\n  for (var key in axisValues) {\r\n    if (axisValues.hasOwnProperty(key)) {\r\n      var valuesInAxis = axisValues[key];\r\n      if (valuesInAxis) {\r\n        // Sort axis values into ascending order to calculate gaps\r\n        valuesInAxis.sort(function (a, b) {\r\n          return a - b;\r\n        });\r\n        var min = null;\r\n        for (var j = 1; j < valuesInAxis.length; ++j) {\r\n          var delta = valuesInAxis[j] - valuesInAxis[j - 1];\r\n          if (delta > 0) {\r\n            // Ignore 0 delta because they are of the same axis value\r\n            min = min === null ? delta : Math.min(min, delta);\r\n          }\r\n        }\r\n        // Set to null if only have one data\r\n        axisMinGaps[key] = min;\r\n      }\r\n    }\r\n  }\r\n  return axisMinGaps;\r\n}\r\nexport function makeColumnLayout(barSeries) {\r\n  var axisMinGaps = getValueAxesMinGaps(barSeries);\r\n  var seriesInfoList = [];\r\n  each(barSeries, function (seriesModel) {\r\n    var cartesian = seriesModel.coordinateSystem;\r\n    var baseAxis = cartesian.getBaseAxis();\r\n    var axisExtent = baseAxis.getExtent();\r\n    var bandWidth;\r\n    if (baseAxis.type === 'category') {\r\n      bandWidth = baseAxis.getBandWidth();\r\n    } else if (baseAxis.type === 'value' || baseAxis.type === 'time') {\r\n      var key = baseAxis.dim + '_' + baseAxis.index;\r\n      var minGap = axisMinGaps[key];\r\n      var extentSpan = Math.abs(axisExtent[1] - axisExtent[0]);\r\n      var scale = baseAxis.scale.getExtent();\r\n      var scaleSpan = Math.abs(scale[1] - scale[0]);\r\n      bandWidth = minGap ? extentSpan / scaleSpan * minGap : extentSpan; // When there is only one data value\r\n    } else {\r\n      var data = seriesModel.getData();\r\n      bandWidth = Math.abs(axisExtent[1] - axisExtent[0]) / data.count();\r\n    }\r\n    var barWidth = parsePercent(seriesModel.get('barWidth'), bandWidth);\r\n    var barMaxWidth = parsePercent(seriesModel.get('barMaxWidth'), bandWidth);\r\n    var barMinWidth = parsePercent(\r\n    // barMinWidth by default is 0.5 / 1 in cartesian. Because in value axis,\r\n    // the auto-calculated bar width might be less than 0.5 / 1.\r\n    seriesModel.get('barMinWidth') || (isInLargeMode(seriesModel) ? 0.5 : 1), bandWidth);\r\n    var barGap = seriesModel.get('barGap');\r\n    var barCategoryGap = seriesModel.get('barCategoryGap');\r\n    seriesInfoList.push({\r\n      bandWidth: bandWidth,\r\n      barWidth: barWidth,\r\n      barMaxWidth: barMaxWidth,\r\n      barMinWidth: barMinWidth,\r\n      barGap: barGap,\r\n      barCategoryGap: barCategoryGap,\r\n      axisKey: getAxisKey(baseAxis),\r\n      stackId: getSeriesStackId(seriesModel)\r\n    });\r\n  });\r\n  return doCalBarWidthAndOffset(seriesInfoList);\r\n}\r\nfunction doCalBarWidthAndOffset(seriesInfoList) {\r\n  // Columns info on each category axis. Key is cartesian name\r\n  var columnsMap = {};\r\n  each(seriesInfoList, function (seriesInfo, idx) {\r\n    var axisKey = seriesInfo.axisKey;\r\n    var bandWidth = seriesInfo.bandWidth;\r\n    var columnsOnAxis = columnsMap[axisKey] || {\r\n      bandWidth: bandWidth,\r\n      remainedWidth: bandWidth,\r\n      autoWidthCount: 0,\r\n      categoryGap: null,\r\n      gap: '20%',\r\n      stacks: {}\r\n    };\r\n    var stacks = columnsOnAxis.stacks;\r\n    columnsMap[axisKey] = columnsOnAxis;\r\n    var stackId = seriesInfo.stackId;\r\n    if (!stacks[stackId]) {\r\n      columnsOnAxis.autoWidthCount++;\r\n    }\r\n    stacks[stackId] = stacks[stackId] || {\r\n      width: 0,\r\n      maxWidth: 0\r\n    };\r\n    // Caution: In a single coordinate system, these barGrid attributes\r\n    // will be shared by series. Consider that they have default values,\r\n    // only the attributes set on the last series will work.\r\n    // Do not change this fact unless there will be a break change.\r\n    var barWidth = seriesInfo.barWidth;\r\n    if (barWidth && !stacks[stackId].width) {\r\n      // See #6312, do not restrict width.\r\n      stacks[stackId].width = barWidth;\r\n      barWidth = Math.min(columnsOnAxis.remainedWidth, barWidth);\r\n      columnsOnAxis.remainedWidth -= barWidth;\r\n    }\r\n    var barMaxWidth = seriesInfo.barMaxWidth;\r\n    barMaxWidth && (stacks[stackId].maxWidth = barMaxWidth);\r\n    var barMinWidth = seriesInfo.barMinWidth;\r\n    barMinWidth && (stacks[stackId].minWidth = barMinWidth);\r\n    var barGap = seriesInfo.barGap;\r\n    barGap != null && (columnsOnAxis.gap = barGap);\r\n    var barCategoryGap = seriesInfo.barCategoryGap;\r\n    barCategoryGap != null && (columnsOnAxis.categoryGap = barCategoryGap);\r\n  });\r\n  var result = {};\r\n  each(columnsMap, function (columnsOnAxis, coordSysName) {\r\n    result[coordSysName] = {};\r\n    var stacks = columnsOnAxis.stacks;\r\n    var bandWidth = columnsOnAxis.bandWidth;\r\n    var categoryGapPercent = columnsOnAxis.categoryGap;\r\n    if (categoryGapPercent == null) {\r\n      var columnCount = keys(stacks).length;\r\n      // More columns in one group\r\n      // the spaces between group is smaller. Or the column will be too thin.\r\n      categoryGapPercent = Math.max(35 - columnCount * 4, 15) + '%';\r\n    }\r\n    var categoryGap = parsePercent(categoryGapPercent, bandWidth);\r\n    var barGapPercent = parsePercent(columnsOnAxis.gap, 1);\r\n    var remainedWidth = columnsOnAxis.remainedWidth;\r\n    var autoWidthCount = columnsOnAxis.autoWidthCount;\r\n    var autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\r\n    autoWidth = Math.max(autoWidth, 0);\r\n    // Find if any auto calculated bar exceeded maxBarWidth\r\n    each(stacks, function (column) {\r\n      var maxWidth = column.maxWidth;\r\n      var minWidth = column.minWidth;\r\n      if (!column.width) {\r\n        var finalWidth = autoWidth;\r\n        if (maxWidth && maxWidth < finalWidth) {\r\n          finalWidth = Math.min(maxWidth, remainedWidth);\r\n        }\r\n        // `minWidth` has higher priority. `minWidth` decide that whether the\r\n        // bar is able to be visible. So `minWidth` should not be restricted\r\n        // by `maxWidth` or `remainedWidth` (which is from `bandWidth`). In\r\n        // the extreme cases for `value` axis, bars are allowed to overlap\r\n        // with each other if `minWidth` specified.\r\n        if (minWidth && minWidth > finalWidth) {\r\n          finalWidth = minWidth;\r\n        }\r\n        if (finalWidth !== autoWidth) {\r\n          column.width = finalWidth;\r\n          remainedWidth -= finalWidth + barGapPercent * finalWidth;\r\n          autoWidthCount--;\r\n        }\r\n      } else {\r\n        // `barMinWidth/barMaxWidth` has higher priority than `barWidth`, as\r\n        // CSS does. Because barWidth can be a percent value, where\r\n        // `barMaxWidth` can be used to restrict the final width.\r\n        var finalWidth = column.width;\r\n        if (maxWidth) {\r\n          finalWidth = Math.min(finalWidth, maxWidth);\r\n        }\r\n        // `minWidth` has higher priority, as described above\r\n        if (minWidth) {\r\n          finalWidth = Math.max(finalWidth, minWidth);\r\n        }\r\n        column.width = finalWidth;\r\n        remainedWidth -= finalWidth + barGapPercent * finalWidth;\r\n        autoWidthCount--;\r\n      }\r\n    });\r\n    // Recalculate width again\r\n    autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\r\n    autoWidth = Math.max(autoWidth, 0);\r\n    var widthSum = 0;\r\n    var lastColumn;\r\n    each(stacks, function (column, idx) {\r\n      if (!column.width) {\r\n        column.width = autoWidth;\r\n      }\r\n      lastColumn = column;\r\n      widthSum += column.width * (1 + barGapPercent);\r\n    });\r\n    if (lastColumn) {\r\n      widthSum -= lastColumn.width * barGapPercent;\r\n    }\r\n    var offset = -widthSum / 2;\r\n    each(stacks, function (column, stackId) {\r\n      result[coordSysName][stackId] = result[coordSysName][stackId] || {\r\n        bandWidth: bandWidth,\r\n        offset: offset,\r\n        width: column.width\r\n      };\r\n      offset += column.width * (1 + barGapPercent);\r\n    });\r\n  });\r\n  return result;\r\n}\r\nfunction retrieveColumnLayout(barWidthAndOffset, axis, seriesModel) {\r\n  if (barWidthAndOffset && axis) {\r\n    var result = barWidthAndOffset[getAxisKey(axis)];\r\n    if (result != null && seriesModel != null) {\r\n      return result[getSeriesStackId(seriesModel)];\r\n    }\r\n    return result;\r\n  }\r\n}\r\nexport { retrieveColumnLayout };\r\nexport function layout(seriesType, ecModel) {\r\n  var seriesModels = prepareLayoutBarSeries(seriesType, ecModel);\r\n  var barWidthAndOffset = makeColumnLayout(seriesModels);\r\n  each(seriesModels, function (seriesModel) {\r\n    var data = seriesModel.getData();\r\n    var cartesian = seriesModel.coordinateSystem;\r\n    var baseAxis = cartesian.getBaseAxis();\r\n    var stackId = getSeriesStackId(seriesModel);\r\n    var columnLayoutInfo = barWidthAndOffset[getAxisKey(baseAxis)][stackId];\r\n    var columnOffset = columnLayoutInfo.offset;\r\n    var columnWidth = columnLayoutInfo.width;\r\n    data.setLayout({\r\n      bandWidth: columnLayoutInfo.bandWidth,\r\n      offset: columnOffset,\r\n      size: columnWidth\r\n    });\r\n  });\r\n}\r\n// TODO: Do not support stack in large mode yet.\r\nexport function createProgressiveLayout(seriesType) {\r\n  return {\r\n    seriesType: seriesType,\r\n    plan: createRenderPlanner(),\r\n    reset: function (seriesModel) {\r\n      if (!isOnCartesian(seriesModel)) {\r\n        return;\r\n      }\r\n      var data = seriesModel.getData();\r\n      var cartesian = seriesModel.coordinateSystem;\r\n      var baseAxis = cartesian.getBaseAxis();\r\n      var valueAxis = cartesian.getOtherAxis(baseAxis);\r\n      var valueDimIdx = data.getDimensionIndex(data.mapDimension(valueAxis.dim));\r\n      var baseDimIdx = data.getDimensionIndex(data.mapDimension(baseAxis.dim));\r\n      var drawBackground = seriesModel.get('showBackground', true);\r\n      var valueDim = data.mapDimension(valueAxis.dim);\r\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\r\n      var stacked = isDimensionStacked(data, valueDim) && !!data.getCalculationInfo('stackedOnSeries');\r\n      var isValueAxisH = valueAxis.isHorizontal();\r\n      var valueAxisStart = getValueAxisStart(baseAxis, valueAxis);\r\n      var isLarge = isInLargeMode(seriesModel);\r\n      var barMinHeight = seriesModel.get('barMinHeight') || 0;\r\n      var stackedDimIdx = stackResultDim && data.getDimensionIndex(stackResultDim);\r\n      // Layout info.\r\n      var columnWidth = data.getLayout('size');\r\n      var columnOffset = data.getLayout('offset');\r\n      return {\r\n        progress: function (params, data) {\r\n          var count = params.count;\r\n          var largePoints = isLarge && createFloat32Array(count * 3);\r\n          var largeBackgroundPoints = isLarge && drawBackground && createFloat32Array(count * 3);\r\n          var largeDataIndices = isLarge && createFloat32Array(count);\r\n          var coordLayout = cartesian.master.getRect();\r\n          var bgSize = isValueAxisH ? coordLayout.width : coordLayout.height;\r\n          var dataIndex;\r\n          var store = data.getStore();\r\n          var idxOffset = 0;\r\n          while ((dataIndex = params.next()) != null) {\r\n            var value = store.get(stacked ? stackedDimIdx : valueDimIdx, dataIndex);\r\n            var baseValue = store.get(baseDimIdx, dataIndex);\r\n            var baseCoord = valueAxisStart;\r\n            var stackStartValue = void 0;\r\n            // Because of the barMinHeight, we can not use the value in\r\n            // stackResultDimension directly.\r\n            if (stacked) {\r\n              stackStartValue = +value - store.get(valueDimIdx, dataIndex);\r\n            }\r\n            var x = void 0;\r\n            var y = void 0;\r\n            var width = void 0;\r\n            var height = void 0;\r\n            if (isValueAxisH) {\r\n              var coord = cartesian.dataToPoint([value, baseValue]);\r\n              if (stacked) {\r\n                var startCoord = cartesian.dataToPoint([stackStartValue, baseValue]);\r\n                baseCoord = startCoord[0];\r\n              }\r\n              x = baseCoord;\r\n              y = coord[1] + columnOffset;\r\n              width = coord[0] - baseCoord;\r\n              height = columnWidth;\r\n              if (Math.abs(width) < barMinHeight) {\r\n                width = (width < 0 ? -1 : 1) * barMinHeight;\r\n              }\r\n            } else {\r\n              var coord = cartesian.dataToPoint([baseValue, value]);\r\n              if (stacked) {\r\n                var startCoord = cartesian.dataToPoint([baseValue, stackStartValue]);\r\n                baseCoord = startCoord[1];\r\n              }\r\n              x = coord[0] + columnOffset;\r\n              y = baseCoord;\r\n              width = columnWidth;\r\n              height = coord[1] - baseCoord;\r\n              if (Math.abs(height) < barMinHeight) {\r\n                // Include zero to has a positive bar\r\n                height = (height <= 0 ? -1 : 1) * barMinHeight;\r\n              }\r\n            }\r\n            if (!isLarge) {\r\n              data.setItemLayout(dataIndex, {\r\n                x: x,\r\n                y: y,\r\n                width: width,\r\n                height: height\r\n              });\r\n            } else {\r\n              largePoints[idxOffset] = x;\r\n              largePoints[idxOffset + 1] = y;\r\n              largePoints[idxOffset + 2] = isValueAxisH ? width : height;\r\n              if (largeBackgroundPoints) {\r\n                largeBackgroundPoints[idxOffset] = isValueAxisH ? coordLayout.x : x;\r\n                largeBackgroundPoints[idxOffset + 1] = isValueAxisH ? y : coordLayout.y;\r\n                largeBackgroundPoints[idxOffset + 2] = bgSize;\r\n              }\r\n              largeDataIndices[dataIndex] = dataIndex;\r\n            }\r\n            idxOffset += 3;\r\n          }\r\n          if (isLarge) {\r\n            data.setLayout({\r\n              largePoints: largePoints,\r\n              largeDataIndices: largeDataIndices,\r\n              largeBackgroundPoints: largeBackgroundPoints,\r\n              valueAxisHorizontal: isValueAxisH\r\n            });\r\n          }\r\n        }\r\n      };\r\n    }\r\n  };\r\n}\r\nfunction isOnCartesian(seriesModel) {\r\n  return seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'cartesian2d';\r\n}\r\nfunction isInLargeMode(seriesModel) {\r\n  return seriesModel.pipelineContext && seriesModel.pipelineContext.large;\r\n}\r\n// See cases in `test/bar-start.html` and `#7412`, `#8747`.\r\nfunction getValueAxisStart(baseAxis, valueAxis) {\r\n  var startValue = valueAxis.model.get('startValue');\r\n  if (!startValue) {\r\n    startValue = 0;\r\n  }\r\n  return valueAxis.toGlobalCoord(valueAxis.dataToCoord(valueAxis.type === 'log' ? startValue > 0 ? startValue : 1 : startValue));\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\n/*\r\n* A third-party license is embedded for some of the code in this file:\r\n* The \"scaleLevels\" was originally copied from \"d3.js\" with some\r\n* modifications made for this project.\r\n* (See more details in the comment on the definition of \"scaleLevels\" below.)\r\n* The use of the source code of this file is also subject to the terms\r\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\r\n* </licenses/LICENSE-d3>).\r\n*/\r\n// [About UTC and local time zone]:\r\n// In most cases, `number.parseDate` will treat input data string as local time\r\n// (except time zone is specified in time string). And `format.formateTime` returns\r\n// local time by default. option.useUTC is false by default. This design has\r\n// considered these common cases:\r\n// (1) Time that is persistent in server is in UTC, but it is needed to be displayed\r\n// in local time by default.\r\n// (2) By default, the input data string (e.g., '2011-01-02') should be displayed\r\n// as its original time, without any time difference.\r\nimport * as numberUtil from '../util/number.js';\r\nimport { ONE_SECOND, ONE_MINUTE, ONE_HOUR, ONE_DAY, ONE_YEAR, format, leveledFormat, getUnitValue, timeUnits, fullLeveledFormatter, getPrimaryTimeUnit, isPrimaryTimeUnit, getDefaultFormatPrecisionOfInterval, fullYearGetterName, monthSetterName, fullYearSetterName, dateSetterName, hoursGetterName, hoursSetterName, minutesSetterName, secondsSetterName, millisecondsSetterName, monthGetterName, dateGetterName, minutesGetterName, secondsGetterName, millisecondsGetterName } from '../util/time.js';\r\nimport * as scaleHelper from './helper.js';\r\nimport IntervalScale from './Interval.js';\r\nimport Scale from './Scale.js';\r\nimport { warn } from '../util/log.js';\r\nimport { filter, isNumber, map } from 'zrender/lib/core/util.js';\r\n// FIXME 公用？\r\nvar bisect = function (a, x, lo, hi) {\r\n  while (lo < hi) {\r\n    var mid = lo + hi >>> 1;\r\n    if (a[mid][1] < x) {\r\n      lo = mid + 1;\r\n    } else {\r\n      hi = mid;\r\n    }\r\n  }\r\n  return lo;\r\n};\r\nvar TimeScale = /** @class */function (_super) {\r\n  __extends(TimeScale, _super);\r\n  function TimeScale(settings) {\r\n    var _this = _super.call(this, settings) || this;\r\n    _this.type = 'time';\r\n    return _this;\r\n  }\r\n  /**\r\n   * Get label is mainly for other components like dataZoom, tooltip.\r\n   */\r\n  TimeScale.prototype.getLabel = function (tick) {\r\n    var useUTC = this.getSetting('useUTC');\r\n    return format(tick.value, fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))] || fullLeveledFormatter.second, useUTC, this.getSetting('locale'));\r\n  };\r\n  TimeScale.prototype.getFormattedLabel = function (tick, idx, labelFormatter) {\r\n    var isUTC = this.getSetting('useUTC');\r\n    var lang = this.getSetting('locale');\r\n    return leveledFormat(tick, idx, labelFormatter, lang, isUTC);\r\n  };\r\n  /**\r\n   * @override\r\n   */\r\n  TimeScale.prototype.getTicks = function () {\r\n    var interval = this._interval;\r\n    var extent = this._extent;\r\n    var ticks = [];\r\n    // If interval is 0, return [];\r\n    if (!interval) {\r\n      return ticks;\r\n    }\r\n    ticks.push({\r\n      value: extent[0],\r\n      level: 0\r\n    });\r\n    var useUTC = this.getSetting('useUTC');\r\n    var innerTicks = getIntervalTicks(this._minLevelUnit, this._approxInterval, useUTC, extent);\r\n    ticks = ticks.concat(innerTicks);\r\n    ticks.push({\r\n      value: extent[1],\r\n      level: 0\r\n    });\r\n    return ticks;\r\n  };\r\n  TimeScale.prototype.calcNiceExtent = function (opt) {\r\n    var extent = this._extent;\r\n    // If extent start and end are same, expand them\r\n    if (extent[0] === extent[1]) {\r\n      // Expand extent\r\n      extent[0] -= ONE_DAY;\r\n      extent[1] += ONE_DAY;\r\n    }\r\n    // If there are no data and extent are [Infinity, -Infinity]\r\n    if (extent[1] === -Infinity && extent[0] === Infinity) {\r\n      var d = new Date();\r\n      extent[1] = +new Date(d.getFullYear(), d.getMonth(), d.getDate());\r\n      extent[0] = extent[1] - ONE_DAY;\r\n    }\r\n    this.calcNiceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\r\n  };\r\n  TimeScale.prototype.calcNiceTicks = function (approxTickNum, minInterval, maxInterval) {\r\n    approxTickNum = approxTickNum || 10;\r\n    var extent = this._extent;\r\n    var span = extent[1] - extent[0];\r\n    this._approxInterval = span / approxTickNum;\r\n    if (minInterval != null && this._approxInterval < minInterval) {\r\n      this._approxInterval = minInterval;\r\n    }\r\n    if (maxInterval != null && this._approxInterval > maxInterval) {\r\n      this._approxInterval = maxInterval;\r\n    }\r\n    var scaleIntervalsLen = scaleIntervals.length;\r\n    var idx = Math.min(bisect(scaleIntervals, this._approxInterval, 0, scaleIntervalsLen), scaleIntervalsLen - 1);\r\n    // Interval that can be used to calculate ticks\r\n    this._interval = scaleIntervals[idx][1];\r\n    // Min level used when picking ticks from top down.\r\n    // We check one more level to avoid the ticks are to sparse in some case.\r\n    this._minLevelUnit = scaleIntervals[Math.max(idx - 1, 0)][0];\r\n  };\r\n  TimeScale.prototype.parse = function (val) {\r\n    // val might be float.\r\n    return isNumber(val) ? val : +numberUtil.parseDate(val);\r\n  };\r\n  TimeScale.prototype.contain = function (val) {\r\n    return scaleHelper.contain(this.parse(val), this._extent);\r\n  };\r\n  TimeScale.prototype.normalize = function (val) {\r\n    return scaleHelper.normalize(this.parse(val), this._extent);\r\n  };\r\n  TimeScale.prototype.scale = function (val) {\r\n    return scaleHelper.scale(val, this._extent);\r\n  };\r\n  TimeScale.type = 'time';\r\n  return TimeScale;\r\n}(IntervalScale);\r\n/**\r\n * This implementation was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/time/scale.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n */\r\nvar scaleIntervals = [\r\n// Format                           interval\r\n['second', ONE_SECOND], ['minute', ONE_MINUTE], ['hour', ONE_HOUR], ['quarter-day', ONE_HOUR * 6], ['half-day', ONE_HOUR * 12], ['day', ONE_DAY * 1.2], ['half-week', ONE_DAY * 3.5], ['week', ONE_DAY * 7], ['month', ONE_DAY * 31], ['quarter', ONE_DAY * 95], ['half-year', ONE_YEAR / 2], ['year', ONE_YEAR] // 1Y\r\n];\r\nfunction isUnitValueSame(unit, valueA, valueB, isUTC) {\r\n  var dateA = numberUtil.parseDate(valueA);\r\n  var dateB = numberUtil.parseDate(valueB);\r\n  var isSame = function (unit) {\r\n    return getUnitValue(dateA, unit, isUTC) === getUnitValue(dateB, unit, isUTC);\r\n  };\r\n  var isSameYear = function () {\r\n    return isSame('year');\r\n  };\r\n  // const isSameHalfYear = () => isSameYear() && isSame('half-year');\r\n  // const isSameQuater = () => isSameYear() && isSame('quarter');\r\n  var isSameMonth = function () {\r\n    return isSameYear() && isSame('month');\r\n  };\r\n  var isSameDay = function () {\r\n    return isSameMonth() && isSame('day');\r\n  };\r\n  // const isSameHalfDay = () => isSameDay() && isSame('half-day');\r\n  var isSameHour = function () {\r\n    return isSameDay() && isSame('hour');\r\n  };\r\n  var isSameMinute = function () {\r\n    return isSameHour() && isSame('minute');\r\n  };\r\n  var isSameSecond = function () {\r\n    return isSameMinute() && isSame('second');\r\n  };\r\n  var isSameMilliSecond = function () {\r\n    return isSameSecond() && isSame('millisecond');\r\n  };\r\n  switch (unit) {\r\n    case 'year':\r\n      return isSameYear();\r\n    case 'month':\r\n      return isSameMonth();\r\n    case 'day':\r\n      return isSameDay();\r\n    case 'hour':\r\n      return isSameHour();\r\n    case 'minute':\r\n      return isSameMinute();\r\n    case 'second':\r\n      return isSameSecond();\r\n    case 'millisecond':\r\n      return isSameMilliSecond();\r\n  }\r\n}\r\n// const primaryUnitGetters = {\r\n//     year: fullYearGetterName(),\r\n//     month: monthGetterName(),\r\n//     day: dateGetterName(),\r\n//     hour: hoursGetterName(),\r\n//     minute: minutesGetterName(),\r\n//     second: secondsGetterName(),\r\n//     millisecond: millisecondsGetterName()\r\n// };\r\n// const primaryUnitUTCGetters = {\r\n//     year: fullYearGetterName(true),\r\n//     month: monthGetterName(true),\r\n//     day: dateGetterName(true),\r\n//     hour: hoursGetterName(true),\r\n//     minute: minutesGetterName(true),\r\n//     second: secondsGetterName(true),\r\n//     millisecond: millisecondsGetterName(true)\r\n// };\r\n// function moveTick(date: Date, unitName: TimeUnit, step: number, isUTC: boolean) {\r\n//     step = step || 1;\r\n//     switch (getPrimaryTimeUnit(unitName)) {\r\n//         case 'year':\r\n//             date[fullYearSetterName(isUTC)](date[fullYearGetterName(isUTC)]() + step);\r\n//             break;\r\n//         case 'month':\r\n//             date[monthSetterName(isUTC)](date[monthGetterName(isUTC)]() + step);\r\n//             break;\r\n//         case 'day':\r\n//             date[dateSetterName(isUTC)](date[dateGetterName(isUTC)]() + step);\r\n//             break;\r\n//         case 'hour':\r\n//             date[hoursSetterName(isUTC)](date[hoursGetterName(isUTC)]() + step);\r\n//             break;\r\n//         case 'minute':\r\n//             date[minutesSetterName(isUTC)](date[minutesGetterName(isUTC)]() + step);\r\n//             break;\r\n//         case 'second':\r\n//             date[secondsSetterName(isUTC)](date[secondsGetterName(isUTC)]() + step);\r\n//             break;\r\n//         case 'millisecond':\r\n//             date[millisecondsSetterName(isUTC)](date[millisecondsGetterName(isUTC)]() + step);\r\n//             break;\r\n//     }\r\n//     return date.getTime();\r\n// }\r\n// const DATE_INTERVALS = [[8, 7.5], [4, 3.5], [2, 1.5]];\r\n// const MONTH_INTERVALS = [[6, 5.5], [3, 2.5], [2, 1.5]];\r\n// const MINUTES_SECONDS_INTERVALS = [[30, 30], [20, 20], [15, 15], [10, 10], [5, 5], [2, 2]];\r\nfunction getDateInterval(approxInterval, daysInMonth) {\r\n  approxInterval /= ONE_DAY;\r\n  return approxInterval > 16 ? 16\r\n  // Math.floor(daysInMonth / 2) + 1  // In this case we only want one tick between two months.\r\n  : approxInterval > 7.5 ? 7 // TODO week 7 or day 8?\r\n  : approxInterval > 3.5 ? 4 : approxInterval > 1.5 ? 2 : 1;\r\n}\r\nfunction getMonthInterval(approxInterval) {\r\n  var APPROX_ONE_MONTH = 30 * ONE_DAY;\r\n  approxInterval /= APPROX_ONE_MONTH;\r\n  return approxInterval > 6 ? 6 : approxInterval > 3 ? 3 : approxInterval > 2 ? 2 : 1;\r\n}\r\nfunction getHourInterval(approxInterval) {\r\n  approxInterval /= ONE_HOUR;\r\n  return approxInterval > 12 ? 12 : approxInterval > 6 ? 6 : approxInterval > 3.5 ? 4 : approxInterval > 2 ? 2 : 1;\r\n}\r\nfunction getMinutesAndSecondsInterval(approxInterval, isMinutes) {\r\n  approxInterval /= isMinutes ? ONE_MINUTE : ONE_SECOND;\r\n  return approxInterval > 30 ? 30 : approxInterval > 20 ? 20 : approxInterval > 15 ? 15 : approxInterval > 10 ? 10 : approxInterval > 5 ? 5 : approxInterval > 2 ? 2 : 1;\r\n}\r\nfunction getMillisecondsInterval(approxInterval) {\r\n  return numberUtil.nice(approxInterval, true);\r\n}\r\nfunction getFirstTimestampOfUnit(date, unitName, isUTC) {\r\n  var outDate = new Date(date);\r\n  switch (getPrimaryTimeUnit(unitName)) {\r\n    case 'year':\r\n    case 'month':\r\n      outDate[monthSetterName(isUTC)](0);\r\n    case 'day':\r\n      outDate[dateSetterName(isUTC)](1);\r\n    case 'hour':\r\n      outDate[hoursSetterName(isUTC)](0);\r\n    case 'minute':\r\n      outDate[minutesSetterName(isUTC)](0);\r\n    case 'second':\r\n      outDate[secondsSetterName(isUTC)](0);\r\n      outDate[millisecondsSetterName(isUTC)](0);\r\n  }\r\n  return outDate.getTime();\r\n}\r\nfunction getIntervalTicks(bottomUnitName, approxInterval, isUTC, extent) {\r\n  var safeLimit = 10000;\r\n  var unitNames = timeUnits;\r\n  var iter = 0;\r\n  function addTicksInSpan(interval, minTimestamp, maxTimestamp, getMethodName, setMethodName, isDate, out) {\r\n    var date = new Date(minTimestamp);\r\n    var dateTime = minTimestamp;\r\n    var d = date[getMethodName]();\r\n    // if (isDate) {\r\n    //     d -= 1; // Starts with 0;   PENDING\r\n    // }\r\n    while (dateTime < maxTimestamp && dateTime <= extent[1]) {\r\n      out.push({\r\n        value: dateTime\r\n      });\r\n      d += interval;\r\n      date[setMethodName](d);\r\n      dateTime = date.getTime();\r\n    }\r\n    // This extra tick is for calcuating ticks of next level. Will not been added to the final result\r\n    out.push({\r\n      value: dateTime,\r\n      notAdd: true\r\n    });\r\n  }\r\n  function addLevelTicks(unitName, lastLevelTicks, levelTicks) {\r\n    var newAddedTicks = [];\r\n    var isFirstLevel = !lastLevelTicks.length;\r\n    if (isUnitValueSame(getPrimaryTimeUnit(unitName), extent[0], extent[1], isUTC)) {\r\n      return;\r\n    }\r\n    if (isFirstLevel) {\r\n      lastLevelTicks = [{\r\n        // TODO Optimize. Not include so may ticks.\r\n        value: getFirstTimestampOfUnit(new Date(extent[0]), unitName, isUTC)\r\n      }, {\r\n        value: extent[1]\r\n      }];\r\n    }\r\n    for (var i = 0; i < lastLevelTicks.length - 1; i++) {\r\n      var startTick = lastLevelTicks[i].value;\r\n      var endTick = lastLevelTicks[i + 1].value;\r\n      if (startTick === endTick) {\r\n        continue;\r\n      }\r\n      var interval = void 0;\r\n      var getterName = void 0;\r\n      var setterName = void 0;\r\n      var isDate = false;\r\n      switch (unitName) {\r\n        case 'year':\r\n          interval = Math.max(1, Math.round(approxInterval / ONE_DAY / 365));\r\n          getterName = fullYearGetterName(isUTC);\r\n          setterName = fullYearSetterName(isUTC);\r\n          break;\r\n        case 'half-year':\r\n        case 'quarter':\r\n        case 'month':\r\n          interval = getMonthInterval(approxInterval);\r\n          getterName = monthGetterName(isUTC);\r\n          setterName = monthSetterName(isUTC);\r\n          break;\r\n        case 'week': // PENDING If week is added. Ignore day.\r\n        case 'half-week':\r\n        case 'day':\r\n          interval = getDateInterval(approxInterval, 31); // Use 32 days and let interval been 16\r\n          getterName = dateGetterName(isUTC);\r\n          setterName = dateSetterName(isUTC);\r\n          isDate = true;\r\n          break;\r\n        case 'half-day':\r\n        case 'quarter-day':\r\n        case 'hour':\r\n          interval = getHourInterval(approxInterval);\r\n          getterName = hoursGetterName(isUTC);\r\n          setterName = hoursSetterName(isUTC);\r\n          break;\r\n        case 'minute':\r\n          interval = getMinutesAndSecondsInterval(approxInterval, true);\r\n          getterName = minutesGetterName(isUTC);\r\n          setterName = minutesSetterName(isUTC);\r\n          break;\r\n        case 'second':\r\n          interval = getMinutesAndSecondsInterval(approxInterval, false);\r\n          getterName = secondsGetterName(isUTC);\r\n          setterName = secondsSetterName(isUTC);\r\n          break;\r\n        case 'millisecond':\r\n          interval = getMillisecondsInterval(approxInterval);\r\n          getterName = millisecondsGetterName(isUTC);\r\n          setterName = millisecondsSetterName(isUTC);\r\n          break;\r\n      }\r\n      addTicksInSpan(interval, startTick, endTick, getterName, setterName, isDate, newAddedTicks);\r\n      if (unitName === 'year' && levelTicks.length > 1 && i === 0) {\r\n        // Add nearest years to the left extent.\r\n        levelTicks.unshift({\r\n          value: levelTicks[0].value - interval\r\n        });\r\n      }\r\n    }\r\n    for (var i = 0; i < newAddedTicks.length; i++) {\r\n      levelTicks.push(newAddedTicks[i]);\r\n    }\r\n    // newAddedTicks.length && console.log(unitName, newAddedTicks);\r\n    return newAddedTicks;\r\n  }\r\n  var levelsTicks = [];\r\n  var currentLevelTicks = [];\r\n  var tickCount = 0;\r\n  var lastLevelTickCount = 0;\r\n  for (var i = 0; i < unitNames.length && iter++ < safeLimit; ++i) {\r\n    var primaryTimeUnit = getPrimaryTimeUnit(unitNames[i]);\r\n    if (!isPrimaryTimeUnit(unitNames[i])) {\r\n      // TODO\r\n      continue;\r\n    }\r\n    addLevelTicks(unitNames[i], levelsTicks[levelsTicks.length - 1] || [], currentLevelTicks);\r\n    var nextPrimaryTimeUnit = unitNames[i + 1] ? getPrimaryTimeUnit(unitNames[i + 1]) : null;\r\n    if (primaryTimeUnit !== nextPrimaryTimeUnit) {\r\n      if (currentLevelTicks.length) {\r\n        lastLevelTickCount = tickCount;\r\n        // Remove the duplicate so the tick count can be precisely.\r\n        currentLevelTicks.sort(function (a, b) {\r\n          return a.value - b.value;\r\n        });\r\n        var levelTicksRemoveDuplicated = [];\r\n        for (var i_1 = 0; i_1 < currentLevelTicks.length; ++i_1) {\r\n          var tickValue = currentLevelTicks[i_1].value;\r\n          if (i_1 === 0 || currentLevelTicks[i_1 - 1].value !== tickValue) {\r\n            levelTicksRemoveDuplicated.push(currentLevelTicks[i_1]);\r\n            if (tickValue >= extent[0] && tickValue <= extent[1]) {\r\n              tickCount++;\r\n            }\r\n          }\r\n        }\r\n        var targetTickNum = (extent[1] - extent[0]) / approxInterval;\r\n        // Added too much in this level and not too less in last level\r\n        if (tickCount > targetTickNum * 1.5 && lastLevelTickCount > targetTickNum / 1.5) {\r\n          break;\r\n        }\r\n        // Only treat primary time unit as one level.\r\n        levelsTicks.push(levelTicksRemoveDuplicated);\r\n        if (tickCount > targetTickNum || bottomUnitName === unitNames[i]) {\r\n          break;\r\n        }\r\n      }\r\n      // Reset if next unitName is primary\r\n      currentLevelTicks = [];\r\n    }\r\n  }\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    if (iter >= safeLimit) {\r\n      warn('Exceed safe limit.');\r\n    }\r\n  }\r\n  var levelsTicksInExtent = filter(map(levelsTicks, function (levelTicks) {\r\n    return filter(levelTicks, function (tick) {\r\n      return tick.value >= extent[0] && tick.value <= extent[1] && !tick.notAdd;\r\n    });\r\n  }), function (levelTicks) {\r\n    return levelTicks.length > 0;\r\n  });\r\n  var ticks = [];\r\n  var maxLevel = levelsTicksInExtent.length - 1;\r\n  for (var i = 0; i < levelsTicksInExtent.length; ++i) {\r\n    var levelTicks = levelsTicksInExtent[i];\r\n    for (var k = 0; k < levelTicks.length; ++k) {\r\n      ticks.push({\r\n        value: levelTicks[k].value,\r\n        level: maxLevel - i\r\n      });\r\n    }\r\n  }\r\n  ticks.sort(function (a, b) {\r\n    return a.value - b.value;\r\n  });\r\n  // Remove duplicates\r\n  var result = [];\r\n  for (var i = 0; i < ticks.length; ++i) {\r\n    if (i === 0 || ticks[i].value !== ticks[i - 1].value) {\r\n      result.push(ticks[i]);\r\n    }\r\n  }\r\n  return result;\r\n}\r\nScale.registerClass(TimeScale);\r\nexport default TimeScale;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport Scale from './Scale.js';\r\nimport * as numberUtil from '../util/number.js';\r\nimport * as scaleHelper from './helper.js';\r\n// Use some method of IntervalScale\r\nimport IntervalScale from './Interval.js';\r\nvar scaleProto = Scale.prototype;\r\n// FIXME:TS refactor: not good to call it directly with `this`?\r\nvar intervalScaleProto = IntervalScale.prototype;\r\nvar roundingErrorFix = numberUtil.round;\r\nvar mathFloor = Math.floor;\r\nvar mathCeil = Math.ceil;\r\nvar mathPow = Math.pow;\r\nvar mathLog = Math.log;\r\nvar LogScale = /** @class */function (_super) {\r\n  __extends(LogScale, _super);\r\n  function LogScale() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n    _this.type = 'log';\r\n    _this.base = 10;\r\n    _this._originalScale = new IntervalScale();\r\n    // FIXME:TS actually used by `IntervalScale`\r\n    _this._interval = 0;\r\n    return _this;\r\n  }\r\n  /**\r\n   * @param Whether expand the ticks to niced extent.\r\n   */\r\n  LogScale.prototype.getTicks = function (expandToNicedExtent) {\r\n    var originalScale = this._originalScale;\r\n    var extent = this._extent;\r\n    var originalExtent = originalScale.getExtent();\r\n    var ticks = intervalScaleProto.getTicks.call(this, expandToNicedExtent);\r\n    return zrUtil.map(ticks, function (tick) {\r\n      var val = tick.value;\r\n      var powVal = numberUtil.round(mathPow(this.base, val));\r\n      // Fix #4158\r\n      powVal = val === extent[0] && this._fixMin ? fixRoundingError(powVal, originalExtent[0]) : powVal;\r\n      powVal = val === extent[1] && this._fixMax ? fixRoundingError(powVal, originalExtent[1]) : powVal;\r\n      return {\r\n        value: powVal\r\n      };\r\n    }, this);\r\n  };\r\n  LogScale.prototype.setExtent = function (start, end) {\r\n    var base = mathLog(this.base);\r\n    // log(-Infinity) is NaN, so safe guard here\r\n    start = mathLog(Math.max(0, start)) / base;\r\n    end = mathLog(Math.max(0, end)) / base;\r\n    intervalScaleProto.setExtent.call(this, start, end);\r\n  };\r\n  /**\r\n   * @return {number} end\r\n   */\r\n  LogScale.prototype.getExtent = function () {\r\n    var base = this.base;\r\n    var extent = scaleProto.getExtent.call(this);\r\n    extent[0] = mathPow(base, extent[0]);\r\n    extent[1] = mathPow(base, extent[1]);\r\n    // Fix #4158\r\n    var originalScale = this._originalScale;\r\n    var originalExtent = originalScale.getExtent();\r\n    this._fixMin && (extent[0] = fixRoundingError(extent[0], originalExtent[0]));\r\n    this._fixMax && (extent[1] = fixRoundingError(extent[1], originalExtent[1]));\r\n    return extent;\r\n  };\r\n  LogScale.prototype.unionExtent = function (extent) {\r\n    this._originalScale.unionExtent(extent);\r\n    var base = this.base;\r\n    extent[0] = mathLog(extent[0]) / mathLog(base);\r\n    extent[1] = mathLog(extent[1]) / mathLog(base);\r\n    scaleProto.unionExtent.call(this, extent);\r\n  };\r\n  LogScale.prototype.unionExtentFromData = function (data, dim) {\r\n    // TODO\r\n    // filter value that <= 0\r\n    this.unionExtent(data.getApproximateExtent(dim));\r\n  };\r\n  /**\r\n   * Update interval and extent of intervals for nice ticks\r\n   * @param approxTickNum default 10 Given approx tick number\r\n   */\r\n  LogScale.prototype.calcNiceTicks = function (approxTickNum) {\r\n    approxTickNum = approxTickNum || 10;\r\n    var extent = this._extent;\r\n    var span = extent[1] - extent[0];\r\n    if (span === Infinity || span <= 0) {\r\n      return;\r\n    }\r\n    var interval = numberUtil.quantity(span);\r\n    var err = approxTickNum / span * interval;\r\n    // Filter ticks to get closer to the desired count.\r\n    if (err <= 0.5) {\r\n      interval *= 10;\r\n    }\r\n    // Interval should be integer\r\n    while (!isNaN(interval) && Math.abs(interval) < 1 && Math.abs(interval) > 0) {\r\n      interval *= 10;\r\n    }\r\n    var niceExtent = [numberUtil.round(mathCeil(extent[0] / interval) * interval), numberUtil.round(mathFloor(extent[1] / interval) * interval)];\r\n    this._interval = interval;\r\n    this._niceExtent = niceExtent;\r\n  };\r\n  LogScale.prototype.calcNiceExtent = function (opt) {\r\n    intervalScaleProto.calcNiceExtent.call(this, opt);\r\n    this._fixMin = opt.fixMin;\r\n    this._fixMax = opt.fixMax;\r\n  };\r\n  LogScale.prototype.parse = function (val) {\r\n    return val;\r\n  };\r\n  LogScale.prototype.contain = function (val) {\r\n    val = mathLog(val) / mathLog(this.base);\r\n    return scaleHelper.contain(val, this._extent);\r\n  };\r\n  LogScale.prototype.normalize = function (val) {\r\n    val = mathLog(val) / mathLog(this.base);\r\n    return scaleHelper.normalize(val, this._extent);\r\n  };\r\n  LogScale.prototype.scale = function (val) {\r\n    val = scaleHelper.scale(val, this._extent);\r\n    return mathPow(this.base, val);\r\n  };\r\n  LogScale.type = 'log';\r\n  return LogScale;\r\n}(Scale);\r\nvar proto = LogScale.prototype;\r\nproto.getMinorTicks = intervalScaleProto.getMinorTicks;\r\nproto.getLabel = intervalScaleProto.getLabel;\r\nfunction fixRoundingError(val, originalVal) {\r\n  return roundingErrorFix(val, numberUtil.getPrecision(originalVal));\r\n}\r\nScale.registerClass(LogScale);\r\nexport default LogScale;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { assert, isArray, eqNaN, isFunction } from 'zrender/lib/core/util.js';\r\nimport { parsePercent } from 'zrender/lib/contain/text.js';\r\nvar ScaleRawExtentInfo = /** @class */function () {\r\n  function ScaleRawExtentInfo(scale, model,\r\n  // Usually: data extent from all series on this axis.\r\n  originalExtent) {\r\n    this._prepareParams(scale, model, originalExtent);\r\n  }\r\n  /**\r\n   * Parameters depending on outside (like model, user callback)\r\n   * are prepared and fixed here.\r\n   */\r\n  ScaleRawExtentInfo.prototype._prepareParams = function (scale, model,\r\n  // Usually: data extent from all series on this axis.\r\n  dataExtent) {\r\n    if (dataExtent[1] < dataExtent[0]) {\r\n      dataExtent = [NaN, NaN];\r\n    }\r\n    this._dataMin = dataExtent[0];\r\n    this._dataMax = dataExtent[1];\r\n    var isOrdinal = this._isOrdinal = scale.type === 'ordinal';\r\n    this._needCrossZero = scale.type === 'interval' && model.getNeedCrossZero && model.getNeedCrossZero();\r\n    var axisMinValue = model.get('min', true);\r\n    if (axisMinValue == null) {\r\n      axisMinValue = model.get('startValue', true);\r\n    }\r\n    var modelMinRaw = this._modelMinRaw = axisMinValue;\r\n    if (isFunction(modelMinRaw)) {\r\n      // This callback always provides users the full data extent (before data is filtered).\r\n      this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw({\r\n        min: dataExtent[0],\r\n        max: dataExtent[1]\r\n      }));\r\n    } else if (modelMinRaw !== 'dataMin') {\r\n      this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw);\r\n    }\r\n    var modelMaxRaw = this._modelMaxRaw = model.get('max', true);\r\n    if (isFunction(modelMaxRaw)) {\r\n      // This callback always provides users the full data extent (before data is filtered).\r\n      this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw({\r\n        min: dataExtent[0],\r\n        max: dataExtent[1]\r\n      }));\r\n    } else if (modelMaxRaw !== 'dataMax') {\r\n      this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw);\r\n    }\r\n    if (isOrdinal) {\r\n      // FIXME: there is a flaw here: if there is no \"block\" data processor like `dataZoom`,\r\n      // and progressive rendering is using, here the category result might just only contain\r\n      // the processed chunk rather than the entire result.\r\n      this._axisDataLen = model.getCategories().length;\r\n    } else {\r\n      var boundaryGap = model.get('boundaryGap');\r\n      var boundaryGapArr = isArray(boundaryGap) ? boundaryGap : [boundaryGap || 0, boundaryGap || 0];\r\n      if (typeof boundaryGapArr[0] === 'boolean' || typeof boundaryGapArr[1] === 'boolean') {\r\n        if (process.env.NODE_ENV !== 'production') {\r\n          console.warn('Boolean type for boundaryGap is only ' + 'allowed for ordinal axis. Please use string in ' + 'percentage instead, e.g., \"20%\". Currently, ' + 'boundaryGap is set to be 0.');\r\n        }\r\n        this._boundaryGapInner = [0, 0];\r\n      } else {\r\n        this._boundaryGapInner = [parsePercent(boundaryGapArr[0], 1), parsePercent(boundaryGapArr[1], 1)];\r\n      }\r\n    }\r\n  };\r\n  /**\r\n   * Calculate extent by prepared parameters.\r\n   * This method has no external dependency and can be called duplicatedly,\r\n   * getting the same result.\r\n   * If parameters changed, should call this method to recalcuate.\r\n   */\r\n  ScaleRawExtentInfo.prototype.calculate = function () {\r\n    // Notice: When min/max is not set (that is, when there are null/undefined,\r\n    // which is the most common case), these cases should be ensured:\r\n    // (1) For 'ordinal', show all axis.data.\r\n    // (2) For others:\r\n    //      + `boundaryGap` is applied (if min/max set, boundaryGap is\r\n    //      disabled).\r\n    //      + If `needCrossZero`, min/max should be zero, otherwise, min/max should\r\n    //      be the result that originalExtent enlarged by boundaryGap.\r\n    // (3) If no data, it should be ensured that `scale.setBlank` is set.\r\n    var isOrdinal = this._isOrdinal;\r\n    var dataMin = this._dataMin;\r\n    var dataMax = this._dataMax;\r\n    var axisDataLen = this._axisDataLen;\r\n    var boundaryGapInner = this._boundaryGapInner;\r\n    var span = !isOrdinal ? dataMax - dataMin || Math.abs(dataMin) : null;\r\n    // Currently if a `'value'` axis model min is specified as 'dataMin'/'dataMax',\r\n    // `boundaryGap` will not be used. It's the different from specifying as `null`/`undefined`.\r\n    var min = this._modelMinRaw === 'dataMin' ? dataMin : this._modelMinNum;\r\n    var max = this._modelMaxRaw === 'dataMax' ? dataMax : this._modelMaxNum;\r\n    // If `_modelMinNum`/`_modelMaxNum` is `null`/`undefined`, should not be fixed.\r\n    var minFixed = min != null;\r\n    var maxFixed = max != null;\r\n    if (min == null) {\r\n      min = isOrdinal ? axisDataLen ? 0 : NaN : dataMin - boundaryGapInner[0] * span;\r\n    }\r\n    if (max == null) {\r\n      max = isOrdinal ? axisDataLen ? axisDataLen - 1 : NaN : dataMax + boundaryGapInner[1] * span;\r\n    }\r\n    (min == null || !isFinite(min)) && (min = NaN);\r\n    (max == null || !isFinite(max)) && (max = NaN);\r\n    var isBlank = eqNaN(min) || eqNaN(max) || isOrdinal && !axisDataLen;\r\n    // If data extent modified, need to recalculated to ensure cross zero.\r\n    if (this._needCrossZero) {\r\n      // Axis is over zero and min is not set\r\n      if (min > 0 && max > 0 && !minFixed) {\r\n        min = 0;\r\n        // minFixed = true;\r\n      }\r\n      // Axis is under zero and max is not set\r\n      if (min < 0 && max < 0 && !maxFixed) {\r\n        max = 0;\r\n        // maxFixed = true;\r\n      }\r\n      // PENDING:\r\n      // When `needCrossZero` and all data is positive/negative, should it be ensured\r\n      // that the results processed by boundaryGap are positive/negative?\r\n      // If so, here `minFixed`/`maxFixed` need to be set.\r\n    }\r\n    var determinedMin = this._determinedMin;\r\n    var determinedMax = this._determinedMax;\r\n    if (determinedMin != null) {\r\n      min = determinedMin;\r\n      minFixed = true;\r\n    }\r\n    if (determinedMax != null) {\r\n      max = determinedMax;\r\n      maxFixed = true;\r\n    }\r\n    // Ensure min/max be finite number or NaN here. (not to be null/undefined)\r\n    // `NaN` means min/max axis is blank.\r\n    return {\r\n      min: min,\r\n      max: max,\r\n      minFixed: minFixed,\r\n      maxFixed: maxFixed,\r\n      isBlank: isBlank\r\n    };\r\n  };\r\n  ScaleRawExtentInfo.prototype.modifyDataMinMax = function (minMaxName, val) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      assert(!this.frozen);\r\n    }\r\n    this[DATA_MIN_MAX_ATTR[minMaxName]] = val;\r\n  };\r\n  ScaleRawExtentInfo.prototype.setDeterminedMinMax = function (minMaxName, val) {\r\n    var attr = DETERMINED_MIN_MAX_ATTR[minMaxName];\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      assert(!this.frozen\r\n      // Earse them usually means logic flaw.\r\n      && this[attr] == null);\r\n    }\r\n    this[attr] = val;\r\n  };\r\n  ScaleRawExtentInfo.prototype.freeze = function () {\r\n    // @ts-ignore\r\n    this.frozen = true;\r\n  };\r\n  return ScaleRawExtentInfo;\r\n}();\r\nexport { ScaleRawExtentInfo };\r\nvar DETERMINED_MIN_MAX_ATTR = {\r\n  min: '_determinedMin',\r\n  max: '_determinedMax'\r\n};\r\nvar DATA_MIN_MAX_ATTR = {\r\n  min: '_dataMin',\r\n  max: '_dataMax'\r\n};\r\n/**\r\n * Get scale min max and related info only depends on model settings.\r\n * This method can be called after coordinate system created.\r\n * For example, in data processing stage.\r\n *\r\n * Scale extent info probably be required multiple times during a workflow.\r\n * For example:\r\n * (1) `dataZoom` depends it to get the axis extent in \"100%\" state.\r\n * (2) `processor/extentCalculator` depends it to make sure whether axis extent is specified.\r\n * (3) `coordSys.update` use it to finally decide the scale extent.\r\n * But the callback of `min`/`max` should not be called multiple times.\r\n * The code below should not be implemented repeatedly either.\r\n * So we cache the result in the scale instance, which will be recreated at the beginning\r\n * of the workflow (because `scale` instance will be recreated each round of the workflow).\r\n */\r\nexport function ensureScaleRawExtentInfo(scale, model,\r\n// Usually: data extent from all series on this axis.\r\noriginalExtent) {\r\n  // Do not permit to recreate.\r\n  var rawExtentInfo = scale.rawExtentInfo;\r\n  if (rawExtentInfo) {\r\n    return rawExtentInfo;\r\n  }\r\n  rawExtentInfo = new ScaleRawExtentInfo(scale, model, originalExtent);\r\n  // @ts-ignore\r\n  scale.rawExtentInfo = rawExtentInfo;\r\n  return rawExtentInfo;\r\n}\r\nexport function parseAxisModelMinMax(scale, minMax) {\r\n  return minMax == null ? null : eqNaN(minMax) ? NaN : scale.parse(minMax);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport OrdinalScale from '../scale/Ordinal.js';\r\nimport IntervalScale from '../scale/Interval.js';\r\nimport Scale from '../scale/Scale.js';\r\nimport { prepareLayoutBarSeries, makeColumnLayout, retrieveColumnLayout } from '../layout/barGrid.js';\r\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\r\nimport TimeScale from '../scale/Time.js';\r\nimport LogScale from '../scale/Log.js';\r\nimport { getStackedDimension } from '../data/helper/dataStackHelper.js';\r\nimport { ensureScaleRawExtentInfo } from './scaleRawExtentInfo.js';\r\n/**\r\n * Get axis scale extent before niced.\r\n * Item of returned array can only be number (including Infinity and NaN).\r\n *\r\n * Caution:\r\n * Precondition of calling this method:\r\n * The scale extent has been initialized using series data extent via\r\n * `scale.setExtent` or `scale.unionExtentFromData`;\r\n */\r\nexport function getScaleExtent(scale, model) {\r\n  var scaleType = scale.type;\r\n  var rawExtentResult = ensureScaleRawExtentInfo(scale, model, scale.getExtent()).calculate();\r\n  scale.setBlank(rawExtentResult.isBlank);\r\n  var min = rawExtentResult.min;\r\n  var max = rawExtentResult.max;\r\n  // If bars are placed on a base axis of type time or interval account for axis boundary overflow and current axis\r\n  // is base axis\r\n  // FIXME\r\n  // (1) Consider support value axis, where below zero and axis `onZero` should be handled properly.\r\n  // (2) Refactor the logic with `barGrid`. Is it not need to `makeBarWidthAndOffsetInfo` twice with different extent?\r\n  //     Should not depend on series type `bar`?\r\n  // (3) Fix that might overlap when using dataZoom.\r\n  // (4) Consider other chart types using `barGrid`?\r\n  // See #6728, #4862, `test/bar-overflow-time-plot.html`\r\n  var ecModel = model.ecModel;\r\n  if (ecModel && scaleType === 'time' /* || scaleType === 'interval' */) {\r\n    var barSeriesModels = prepareLayoutBarSeries('bar', ecModel);\r\n    var isBaseAxisAndHasBarSeries_1 = false;\r\n    zrUtil.each(barSeriesModels, function (seriesModel) {\r\n      isBaseAxisAndHasBarSeries_1 = isBaseAxisAndHasBarSeries_1 || seriesModel.getBaseAxis() === model.axis;\r\n    });\r\n    if (isBaseAxisAndHasBarSeries_1) {\r\n      // Calculate placement of bars on axis. TODO should be decoupled\r\n      // with barLayout\r\n      var barWidthAndOffset = makeColumnLayout(barSeriesModels);\r\n      // Adjust axis min and max to account for overflow\r\n      var adjustedScale = adjustScaleForOverflow(min, max, model, barWidthAndOffset);\r\n      min = adjustedScale.min;\r\n      max = adjustedScale.max;\r\n    }\r\n  }\r\n  return {\r\n    extent: [min, max],\r\n    // \"fix\" means \"fixed\", the value should not be\r\n    // changed in the subsequent steps.\r\n    fixMin: rawExtentResult.minFixed,\r\n    fixMax: rawExtentResult.maxFixed\r\n  };\r\n}\r\nfunction adjustScaleForOverflow(min, max, model,\r\n// Only support cartesian coord yet.\r\nbarWidthAndOffset) {\r\n  // Get Axis Length\r\n  var axisExtent = model.axis.getExtent();\r\n  var axisLength = Math.abs(axisExtent[1] - axisExtent[0]);\r\n  // Get bars on current base axis and calculate min and max overflow\r\n  var barsOnCurrentAxis = retrieveColumnLayout(barWidthAndOffset, model.axis);\r\n  if (barsOnCurrentAxis === undefined) {\r\n    return {\r\n      min: min,\r\n      max: max\r\n    };\r\n  }\r\n  var minOverflow = Infinity;\r\n  zrUtil.each(barsOnCurrentAxis, function (item) {\r\n    minOverflow = Math.min(item.offset, minOverflow);\r\n  });\r\n  var maxOverflow = -Infinity;\r\n  zrUtil.each(barsOnCurrentAxis, function (item) {\r\n    maxOverflow = Math.max(item.offset + item.width, maxOverflow);\r\n  });\r\n  minOverflow = Math.abs(minOverflow);\r\n  maxOverflow = Math.abs(maxOverflow);\r\n  var totalOverFlow = minOverflow + maxOverflow;\r\n  // Calculate required buffer based on old range and overflow\r\n  var oldRange = max - min;\r\n  var oldRangePercentOfNew = 1 - (minOverflow + maxOverflow) / axisLength;\r\n  var overflowBuffer = oldRange / oldRangePercentOfNew - oldRange;\r\n  max += overflowBuffer * (maxOverflow / totalOverFlow);\r\n  min -= overflowBuffer * (minOverflow / totalOverFlow);\r\n  return {\r\n    min: min,\r\n    max: max\r\n  };\r\n}\r\n// Precondition of calling this method:\r\n// The scale extent has been initialized using series data extent via\r\n// `scale.setExtent` or `scale.unionExtentFromData`;\r\nexport function niceScaleExtent(scale, inModel) {\r\n  var model = inModel;\r\n  var extentInfo = getScaleExtent(scale, model);\r\n  var extent = extentInfo.extent;\r\n  var splitNumber = model.get('splitNumber');\r\n  if (scale instanceof LogScale) {\r\n    scale.base = model.get('logBase');\r\n  }\r\n  var scaleType = scale.type;\r\n  var interval = model.get('interval');\r\n  var isIntervalOrTime = scaleType === 'interval' || scaleType === 'time';\r\n  scale.setExtent(extent[0], extent[1]);\r\n  scale.calcNiceExtent({\r\n    splitNumber: splitNumber,\r\n    fixMin: extentInfo.fixMin,\r\n    fixMax: extentInfo.fixMax,\r\n    minInterval: isIntervalOrTime ? model.get('minInterval') : null,\r\n    maxInterval: isIntervalOrTime ? model.get('maxInterval') : null\r\n  });\r\n  // If some one specified the min, max. And the default calculated interval\r\n  // is not good enough. He can specify the interval. It is often appeared\r\n  // in angle axis with angle 0 - 360. Interval calculated in interval scale is hard\r\n  // to be 60.\r\n  // FIXME\r\n  if (interval != null) {\r\n    scale.setInterval && scale.setInterval(interval);\r\n  }\r\n}\r\n/**\r\n * @param axisType Default retrieve from model.type\r\n */\r\nexport function createScaleByModel(model, axisType) {\r\n  axisType = axisType || model.get('type');\r\n  if (axisType) {\r\n    switch (axisType) {\r\n      // Buildin scale\r\n      case 'category':\r\n        return new OrdinalScale({\r\n          ordinalMeta: model.getOrdinalMeta ? model.getOrdinalMeta() : model.getCategories(),\r\n          extent: [Infinity, -Infinity]\r\n        });\r\n      case 'time':\r\n        return new TimeScale({\r\n          locale: model.ecModel.getLocaleModel(),\r\n          useUTC: model.ecModel.get('useUTC')\r\n        });\r\n      default:\r\n        // case 'value'/'interval', 'log', or others.\r\n        return new (Scale.getClass(axisType) || IntervalScale)();\r\n    }\r\n  }\r\n}\r\n/**\r\n * Check if the axis cross 0\r\n */\r\nexport function ifAxisCrossZero(axis) {\r\n  var dataExtent = axis.scale.getExtent();\r\n  var min = dataExtent[0];\r\n  var max = dataExtent[1];\r\n  return !(min > 0 && max > 0 || min < 0 && max < 0);\r\n}\r\n/**\r\n * @param axis\r\n * @return Label formatter function.\r\n *         param: {number} tickValue,\r\n *         param: {number} idx, the index in all ticks.\r\n *                         If category axis, this param is not required.\r\n *         return: {string} label string.\r\n */\r\nexport function makeLabelFormatter(axis) {\r\n  var labelFormatter = axis.getLabelModel().get('formatter');\r\n  var categoryTickStart = axis.type === 'category' ? axis.scale.getExtent()[0] : null;\r\n  if (axis.scale.type === 'time') {\r\n    return function (tpl) {\r\n      return function (tick, idx) {\r\n        return axis.scale.getFormattedLabel(tick, idx, tpl);\r\n      };\r\n    }(labelFormatter);\r\n  } else if (zrUtil.isString(labelFormatter)) {\r\n    return function (tpl) {\r\n      return function (tick) {\r\n        // For category axis, get raw value; for numeric axis,\r\n        // get formatted label like '1,333,444'.\r\n        var label = axis.scale.getLabel(tick);\r\n        var text = tpl.replace('{value}', label != null ? label : '');\r\n        return text;\r\n      };\r\n    }(labelFormatter);\r\n  } else if (zrUtil.isFunction(labelFormatter)) {\r\n    return function (cb) {\r\n      return function (tick, idx) {\r\n        // The original intention of `idx` is \"the index of the tick in all ticks\".\r\n        // But the previous implementation of category axis do not consider the\r\n        // `axisLabel.interval`, which cause that, for example, the `interval` is\r\n        // `1`, then the ticks \"name5\", \"name7\", \"name9\" are displayed, where the\r\n        // corresponding `idx` are `0`, `2`, `4`, but not `0`, `1`, `2`. So we keep\r\n        // the definition here for back compatibility.\r\n        if (categoryTickStart != null) {\r\n          idx = tick.value - categoryTickStart;\r\n        }\r\n        return cb(getAxisRawValue(axis, tick), idx, tick.level != null ? {\r\n          level: tick.level\r\n        } : null);\r\n      };\r\n    }(labelFormatter);\r\n  } else {\r\n    return function (tick) {\r\n      return axis.scale.getLabel(tick);\r\n    };\r\n  }\r\n}\r\nexport function getAxisRawValue(axis, tick) {\r\n  // In category axis with data zoom, tick is not the original\r\n  // index of axis.data. So tick should not be exposed to user\r\n  // in category axis.\r\n  return axis.type === 'category' ? axis.scale.getLabel(tick) : tick.value;\r\n}\r\n/**\r\n * @param axis\r\n * @return Be null/undefined if no labels.\r\n */\r\nexport function estimateLabelUnionRect(axis) {\r\n  var axisModel = axis.model;\r\n  var scale = axis.scale;\r\n  if (!axisModel.get(['axisLabel', 'show']) || scale.isBlank()) {\r\n    return;\r\n  }\r\n  var realNumberScaleTicks;\r\n  var tickCount;\r\n  var categoryScaleExtent = scale.getExtent();\r\n  // Optimize for large category data, avoid call `getTicks()`.\r\n  if (scale instanceof OrdinalScale) {\r\n    tickCount = scale.count();\r\n  } else {\r\n    realNumberScaleTicks = scale.getTicks();\r\n    tickCount = realNumberScaleTicks.length;\r\n  }\r\n  var axisLabelModel = axis.getLabelModel();\r\n  var labelFormatter = makeLabelFormatter(axis);\r\n  var rect;\r\n  var step = 1;\r\n  // Simple optimization for large amount of labels\r\n  if (tickCount > 40) {\r\n    step = Math.ceil(tickCount / 40);\r\n  }\r\n  for (var i = 0; i < tickCount; i += step) {\r\n    var tick = realNumberScaleTicks ? realNumberScaleTicks[i] : {\r\n      value: categoryScaleExtent[0] + i\r\n    };\r\n    var label = labelFormatter(tick, i);\r\n    var unrotatedSingleRect = axisLabelModel.getTextRect(label);\r\n    var singleRect = rotateTextRect(unrotatedSingleRect, axisLabelModel.get('rotate') || 0);\r\n    rect ? rect.union(singleRect) : rect = singleRect;\r\n  }\r\n  return rect;\r\n}\r\nfunction rotateTextRect(textRect, rotate) {\r\n  var rotateRadians = rotate * Math.PI / 180;\r\n  var beforeWidth = textRect.width;\r\n  var beforeHeight = textRect.height;\r\n  var afterWidth = beforeWidth * Math.abs(Math.cos(rotateRadians)) + Math.abs(beforeHeight * Math.sin(rotateRadians));\r\n  var afterHeight = beforeWidth * Math.abs(Math.sin(rotateRadians)) + Math.abs(beforeHeight * Math.cos(rotateRadians));\r\n  var rotatedRect = new BoundingRect(textRect.x, textRect.y, afterWidth, afterHeight);\r\n  return rotatedRect;\r\n}\r\n/**\r\n * @param model axisLabelModel or axisTickModel\r\n * @return {number|String} Can be null|'auto'|number|function\r\n */\r\nexport function getOptionCategoryInterval(model) {\r\n  var interval = model.get('interval');\r\n  return interval == null ? 'auto' : interval;\r\n}\r\n/**\r\n * Set `categoryInterval` as 0 implicitly indicates that\r\n * show all labels regardless of overlap.\r\n * @param {Object} axis axisModel.axis\r\n */\r\nexport function shouldShowAllLabels(axis) {\r\n  return axis.type === 'category' && getOptionCategoryInterval(axis.getLabelModel()) === 0;\r\n}\r\nexport function getDataDimensionsOnAxis(data, axisDim) {\r\n  // Remove duplicated dat dimensions caused by `getStackedDimension`.\r\n  var dataDimMap = {};\r\n  // Currently `mapDimensionsAll` will contain stack result dimension ('__\\0ecstackresult').\r\n  // PENDING: is it reasonable? Do we need to remove the original dim from \"coord dim\" since\r\n  // there has been stacked result dim?\r\n  zrUtil.each(data.mapDimensionsAll(axisDim), function (dataDim) {\r\n    // For example, the extent of the original dimension\r\n    // is [0.1, 0.5], the extent of the `stackResultDimension`\r\n    // is [7, 9], the final extent should NOT include [0.1, 0.5],\r\n    // because there is no graphic corresponding to [0.1, 0.5].\r\n    // See the case in `test/area-stack.html` `main1`, where area line\r\n    // stack needs `yAxis` not start from 0.\r\n    dataDimMap[getStackedDimension(data, dataDim)] = true;\r\n  });\r\n  return zrUtil.keys(dataDimMap);\r\n}\r\nexport function unionAxisExtentFromData(dataExtent, data, axisDim) {\r\n  if (data) {\r\n    zrUtil.each(getDataDimensionsOnAxis(data, axisDim), function (dim) {\r\n      var seriesExtent = data.getApproximateExtent(dim);\r\n      seriesExtent[0] < dataExtent[0] && (dataExtent[0] = seriesExtent[0]);\r\n      seriesExtent[1] > dataExtent[1] && (dataExtent[1] = seriesExtent[1]);\r\n    });\r\n  }\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport * as textContain from 'zrender/lib/contain/text.js';\r\nimport { makeInner } from '../util/model.js';\r\nimport { makeLabelFormatter, getOptionCategoryInterval, shouldShowAllLabels } from './axisHelper.js';\r\nvar inner = makeInner();\r\nfunction tickValuesToNumbers(axis, values) {\r\n  var nums = zrUtil.map(values, function (val) {\r\n    return axis.scale.parse(val);\r\n  });\r\n  if (axis.type === 'time' && nums.length > 0) {\r\n    // Time axis needs duplicate first/last tick (see TimeScale.getTicks())\r\n    // The first and last tick/label don't get drawn\r\n    nums.sort();\r\n    nums.unshift(nums[0]);\r\n    nums.push(nums[nums.length - 1]);\r\n  }\r\n  return nums;\r\n}\r\nexport function createAxisLabels(axis) {\r\n  var custom = axis.getLabelModel().get('customValues');\r\n  if (custom) {\r\n    var labelFormatter_1 = makeLabelFormatter(axis);\r\n    var extent_1 = axis.scale.getExtent();\r\n    var tickNumbers = tickValuesToNumbers(axis, custom);\r\n    var ticks = zrUtil.filter(tickNumbers, function (val) {\r\n      return val >= extent_1[0] && val <= extent_1[1];\r\n    });\r\n    return {\r\n      labels: zrUtil.map(ticks, function (numval) {\r\n        var tick = {\r\n          value: numval\r\n        };\r\n        return {\r\n          formattedLabel: labelFormatter_1(tick),\r\n          rawLabel: axis.scale.getLabel(tick),\r\n          tickValue: numval\r\n        };\r\n      })\r\n    };\r\n  }\r\n  // Only ordinal scale support tick interval\r\n  return axis.type === 'category' ? makeCategoryLabels(axis) : makeRealNumberLabels(axis);\r\n}\r\n/**\r\n * @param {module:echats/coord/Axis} axis\r\n * @param {module:echarts/model/Model} tickModel For example, can be axisTick, splitLine, splitArea.\r\n * @return {Object} {\r\n *     ticks: Array.<number>\r\n *     tickCategoryInterval: number\r\n * }\r\n */\r\nexport function createAxisTicks(axis, tickModel) {\r\n  var custom = axis.getTickModel().get('customValues');\r\n  if (custom) {\r\n    var extent_2 = axis.scale.getExtent();\r\n    var tickNumbers = tickValuesToNumbers(axis, custom);\r\n    return {\r\n      ticks: zrUtil.filter(tickNumbers, function (val) {\r\n        return val >= extent_2[0] && val <= extent_2[1];\r\n      })\r\n    };\r\n  }\r\n  // Only ordinal scale support tick interval\r\n  return axis.type === 'category' ? makeCategoryTicks(axis, tickModel) : {\r\n    ticks: zrUtil.map(axis.scale.getTicks(), function (tick) {\r\n      return tick.value;\r\n    })\r\n  };\r\n}\r\nfunction makeCategoryLabels(axis) {\r\n  var labelModel = axis.getLabelModel();\r\n  var result = makeCategoryLabelsActually(axis, labelModel);\r\n  return !labelModel.get('show') || axis.scale.isBlank() ? {\r\n    labels: [],\r\n    labelCategoryInterval: result.labelCategoryInterval\r\n  } : result;\r\n}\r\nfunction makeCategoryLabelsActually(axis, labelModel) {\r\n  var labelsCache = getListCache(axis, 'labels');\r\n  var optionLabelInterval = getOptionCategoryInterval(labelModel);\r\n  var result = listCacheGet(labelsCache, optionLabelInterval);\r\n  if (result) {\r\n    return result;\r\n  }\r\n  var labels;\r\n  var numericLabelInterval;\r\n  if (zrUtil.isFunction(optionLabelInterval)) {\r\n    labels = makeLabelsByCustomizedCategoryInterval(axis, optionLabelInterval);\r\n  } else {\r\n    numericLabelInterval = optionLabelInterval === 'auto' ? makeAutoCategoryInterval(axis) : optionLabelInterval;\r\n    labels = makeLabelsByNumericCategoryInterval(axis, numericLabelInterval);\r\n  }\r\n  // Cache to avoid calling interval function repeatedly.\r\n  return listCacheSet(labelsCache, optionLabelInterval, {\r\n    labels: labels,\r\n    labelCategoryInterval: numericLabelInterval\r\n  });\r\n}\r\nfunction makeCategoryTicks(axis, tickModel) {\r\n  var ticksCache = getListCache(axis, 'ticks');\r\n  var optionTickInterval = getOptionCategoryInterval(tickModel);\r\n  var result = listCacheGet(ticksCache, optionTickInterval);\r\n  if (result) {\r\n    return result;\r\n  }\r\n  var ticks;\r\n  var tickCategoryInterval;\r\n  // Optimize for the case that large category data and no label displayed,\r\n  // we should not return all ticks.\r\n  if (!tickModel.get('show') || axis.scale.isBlank()) {\r\n    ticks = [];\r\n  }\r\n  if (zrUtil.isFunction(optionTickInterval)) {\r\n    ticks = makeLabelsByCustomizedCategoryInterval(axis, optionTickInterval, true);\r\n  }\r\n  // Always use label interval by default despite label show. Consider this\r\n  // scenario, Use multiple grid with the xAxis sync, and only one xAxis shows\r\n  // labels. `splitLine` and `axisTick` should be consistent in this case.\r\n  else if (optionTickInterval === 'auto') {\r\n    var labelsResult = makeCategoryLabelsActually(axis, axis.getLabelModel());\r\n    tickCategoryInterval = labelsResult.labelCategoryInterval;\r\n    ticks = zrUtil.map(labelsResult.labels, function (labelItem) {\r\n      return labelItem.tickValue;\r\n    });\r\n  } else {\r\n    tickCategoryInterval = optionTickInterval;\r\n    ticks = makeLabelsByNumericCategoryInterval(axis, tickCategoryInterval, true);\r\n  }\r\n  // Cache to avoid calling interval function repeatedly.\r\n  return listCacheSet(ticksCache, optionTickInterval, {\r\n    ticks: ticks,\r\n    tickCategoryInterval: tickCategoryInterval\r\n  });\r\n}\r\nfunction makeRealNumberLabels(axis) {\r\n  var ticks = axis.scale.getTicks();\r\n  var labelFormatter = makeLabelFormatter(axis);\r\n  return {\r\n    labels: zrUtil.map(ticks, function (tick, idx) {\r\n      return {\r\n        level: tick.level,\r\n        formattedLabel: labelFormatter(tick, idx),\r\n        rawLabel: axis.scale.getLabel(tick),\r\n        tickValue: tick.value\r\n      };\r\n    })\r\n  };\r\n}\r\nfunction getListCache(axis, prop) {\r\n  // Because key can be a function, and cache size always is small, we use array cache.\r\n  return inner(axis)[prop] || (inner(axis)[prop] = []);\r\n}\r\nfunction listCacheGet(cache, key) {\r\n  for (var i = 0; i < cache.length; i++) {\r\n    if (cache[i].key === key) {\r\n      return cache[i].value;\r\n    }\r\n  }\r\n}\r\nfunction listCacheSet(cache, key, value) {\r\n  cache.push({\r\n    key: key,\r\n    value: value\r\n  });\r\n  return value;\r\n}\r\nfunction makeAutoCategoryInterval(axis) {\r\n  var result = inner(axis).autoInterval;\r\n  return result != null ? result : inner(axis).autoInterval = axis.calculateCategoryInterval();\r\n}\r\n/**\r\n * Calculate interval for category axis ticks and labels.\r\n * To get precise result, at least one of `getRotate` and `isHorizontal`\r\n * should be implemented in axis.\r\n */\r\nexport function calculateCategoryInterval(axis) {\r\n  var params = fetchAutoCategoryIntervalCalculationParams(axis);\r\n  var labelFormatter = makeLabelFormatter(axis);\r\n  var rotation = (params.axisRotate - params.labelRotate) / 180 * Math.PI;\r\n  var ordinalScale = axis.scale;\r\n  var ordinalExtent = ordinalScale.getExtent();\r\n  // Providing this method is for optimization:\r\n  // avoid generating a long array by `getTicks`\r\n  // in large category data case.\r\n  var tickCount = ordinalScale.count();\r\n  if (ordinalExtent[1] - ordinalExtent[0] < 1) {\r\n    return 0;\r\n  }\r\n  var step = 1;\r\n  // Simple optimization. Empirical value: tick count should less than 40.\r\n  if (tickCount > 40) {\r\n    step = Math.max(1, Math.floor(tickCount / 40));\r\n  }\r\n  var tickValue = ordinalExtent[0];\r\n  var unitSpan = axis.dataToCoord(tickValue + 1) - axis.dataToCoord(tickValue);\r\n  var unitW = Math.abs(unitSpan * Math.cos(rotation));\r\n  var unitH = Math.abs(unitSpan * Math.sin(rotation));\r\n  var maxW = 0;\r\n  var maxH = 0;\r\n  // Caution: Performance sensitive for large category data.\r\n  // Consider dataZoom, we should make appropriate step to avoid O(n) loop.\r\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\r\n    var width = 0;\r\n    var height = 0;\r\n    // Not precise, do not consider align and vertical align\r\n    // and each distance from axis line yet.\r\n    var rect = textContain.getBoundingRect(labelFormatter({\r\n      value: tickValue\r\n    }), params.font, 'center', 'top');\r\n    // Magic number\r\n    width = rect.width * 1.3;\r\n    height = rect.height * 1.3;\r\n    // Min size, void long loop.\r\n    maxW = Math.max(maxW, width, 7);\r\n    maxH = Math.max(maxH, height, 7);\r\n  }\r\n  var dw = maxW / unitW;\r\n  var dh = maxH / unitH;\r\n  // 0/0 is NaN, 1/0 is Infinity.\r\n  isNaN(dw) && (dw = Infinity);\r\n  isNaN(dh) && (dh = Infinity);\r\n  var interval = Math.max(0, Math.floor(Math.min(dw, dh)));\r\n  var cache = inner(axis.model);\r\n  var axisExtent = axis.getExtent();\r\n  var lastAutoInterval = cache.lastAutoInterval;\r\n  var lastTickCount = cache.lastTickCount;\r\n  // Use cache to keep interval stable while moving zoom window,\r\n  // otherwise the calculated interval might jitter when the zoom\r\n  // window size is close to the interval-changing size.\r\n  // For example, if all of the axis labels are `a, b, c, d, e, f, g`.\r\n  // The jitter will cause that sometimes the displayed labels are\r\n  // `a, d, g` (interval: 2) sometimes `a, c, e`(interval: 1).\r\n  if (lastAutoInterval != null && lastTickCount != null && Math.abs(lastAutoInterval - interval) <= 1 && Math.abs(lastTickCount - tickCount) <= 1\r\n  // Always choose the bigger one, otherwise the critical\r\n  // point is not the same when zooming in or zooming out.\r\n  && lastAutoInterval > interval\r\n  // If the axis change is caused by chart resize, the cache should not\r\n  // be used. Otherwise some hidden labels might not be shown again.\r\n  && cache.axisExtent0 === axisExtent[0] && cache.axisExtent1 === axisExtent[1]) {\r\n    interval = lastAutoInterval;\r\n  }\r\n  // Only update cache if cache not used, otherwise the\r\n  // changing of interval is too insensitive.\r\n  else {\r\n    cache.lastTickCount = tickCount;\r\n    cache.lastAutoInterval = interval;\r\n    cache.axisExtent0 = axisExtent[0];\r\n    cache.axisExtent1 = axisExtent[1];\r\n  }\r\n  return interval;\r\n}\r\nfunction fetchAutoCategoryIntervalCalculationParams(axis) {\r\n  var labelModel = axis.getLabelModel();\r\n  return {\r\n    axisRotate: axis.getRotate ? axis.getRotate() : axis.isHorizontal && !axis.isHorizontal() ? 90 : 0,\r\n    labelRotate: labelModel.get('rotate') || 0,\r\n    font: labelModel.getFont()\r\n  };\r\n}\r\nfunction makeLabelsByNumericCategoryInterval(axis, categoryInterval, onlyTick) {\r\n  var labelFormatter = makeLabelFormatter(axis);\r\n  var ordinalScale = axis.scale;\r\n  var ordinalExtent = ordinalScale.getExtent();\r\n  var labelModel = axis.getLabelModel();\r\n  var result = [];\r\n  // TODO: axisType: ordinalTime, pick the tick from each month/day/year/...\r\n  var step = Math.max((categoryInterval || 0) + 1, 1);\r\n  var startTick = ordinalExtent[0];\r\n  var tickCount = ordinalScale.count();\r\n  // Calculate start tick based on zero if possible to keep label consistent\r\n  // while zooming and moving while interval > 0. Otherwise the selection\r\n  // of displayable ticks and symbols probably keep changing.\r\n  // 3 is empirical value.\r\n  if (startTick !== 0 && step > 1 && tickCount / step > 2) {\r\n    startTick = Math.round(Math.ceil(startTick / step) * step);\r\n  }\r\n  // (1) Only add min max label here but leave overlap checking\r\n  // to render stage, which also ensure the returned list\r\n  // suitable for splitLine and splitArea rendering.\r\n  // (2) Scales except category always contain min max label so\r\n  // do not need to perform this process.\r\n  var showAllLabel = shouldShowAllLabels(axis);\r\n  var includeMinLabel = labelModel.get('showMinLabel') || showAllLabel;\r\n  var includeMaxLabel = labelModel.get('showMaxLabel') || showAllLabel;\r\n  if (includeMinLabel && startTick !== ordinalExtent[0]) {\r\n    addItem(ordinalExtent[0]);\r\n  }\r\n  // Optimize: avoid generating large array by `ordinalScale.getTicks()`.\r\n  var tickValue = startTick;\r\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\r\n    addItem(tickValue);\r\n  }\r\n  if (includeMaxLabel && tickValue - step !== ordinalExtent[1]) {\r\n    addItem(ordinalExtent[1]);\r\n  }\r\n  function addItem(tickValue) {\r\n    var tickObj = {\r\n      value: tickValue\r\n    };\r\n    result.push(onlyTick ? tickValue : {\r\n      formattedLabel: labelFormatter(tickObj),\r\n      rawLabel: ordinalScale.getLabel(tickObj),\r\n      tickValue: tickValue\r\n    });\r\n  }\r\n  return result;\r\n}\r\nfunction makeLabelsByCustomizedCategoryInterval(axis, categoryInterval, onlyTick) {\r\n  var ordinalScale = axis.scale;\r\n  var labelFormatter = makeLabelFormatter(axis);\r\n  var result = [];\r\n  zrUtil.each(ordinalScale.getTicks(), function (tick) {\r\n    var rawLabel = ordinalScale.getLabel(tick);\r\n    var tickValue = tick.value;\r\n    if (categoryInterval(tick.value, rawLabel)) {\r\n      result.push(onlyTick ? tickValue : {\r\n        formattedLabel: labelFormatter(tick),\r\n        rawLabel: rawLabel,\r\n        tickValue: tickValue\r\n      });\r\n    }\r\n  });\r\n  return result;\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { each, map } from 'zrender/lib/core/util.js';\r\nimport { linearMap, getPixelPrecision, round } from '../util/number.js';\r\nimport { createAxisTicks, createAxisLabels, calculateCategoryInterval } from './axisTickLabelBuilder.js';\r\nvar NORMALIZED_EXTENT = [0, 1];\r\n/**\r\n * Base class of Axis.\r\n */\r\nvar Axis = /** @class */function () {\r\n  function Axis(dim, scale, extent) {\r\n    this.onBand = false;\r\n    this.inverse = false;\r\n    this.dim = dim;\r\n    this.scale = scale;\r\n    this._extent = extent || [0, 0];\r\n  }\r\n  /**\r\n   * If axis extent contain given coord\r\n   */\r\n  Axis.prototype.contain = function (coord) {\r\n    var extent = this._extent;\r\n    var min = Math.min(extent[0], extent[1]);\r\n    var max = Math.max(extent[0], extent[1]);\r\n    return coord >= min && coord <= max;\r\n  };\r\n  /**\r\n   * If axis extent contain given data\r\n   */\r\n  Axis.prototype.containData = function (data) {\r\n    return this.scale.contain(data);\r\n  };\r\n  /**\r\n   * Get coord extent.\r\n   */\r\n  Axis.prototype.getExtent = function () {\r\n    return this._extent.slice();\r\n  };\r\n  /**\r\n   * Get precision used for formatting\r\n   */\r\n  Axis.prototype.getPixelPrecision = function (dataExtent) {\r\n    return getPixelPrecision(dataExtent || this.scale.getExtent(), this._extent);\r\n  };\r\n  /**\r\n   * Set coord extent\r\n   */\r\n  Axis.prototype.setExtent = function (start, end) {\r\n    var extent = this._extent;\r\n    extent[0] = start;\r\n    extent[1] = end;\r\n  };\r\n  /**\r\n   * Convert data to coord. Data is the rank if it has an ordinal scale\r\n   */\r\n  Axis.prototype.dataToCoord = function (data, clamp) {\r\n    var extent = this._extent;\r\n    var scale = this.scale;\r\n    data = scale.normalize(data);\r\n    if (this.onBand && scale.type === 'ordinal') {\r\n      extent = extent.slice();\r\n      fixExtentWithBands(extent, scale.count());\r\n    }\r\n    return linearMap(data, NORMALIZED_EXTENT, extent, clamp);\r\n  };\r\n  /**\r\n   * Convert coord to data. Data is the rank if it has an ordinal scale\r\n   */\r\n  Axis.prototype.coordToData = function (coord, clamp) {\r\n    var extent = this._extent;\r\n    var scale = this.scale;\r\n    if (this.onBand && scale.type === 'ordinal') {\r\n      extent = extent.slice();\r\n      fixExtentWithBands(extent, scale.count());\r\n    }\r\n    var t = linearMap(coord, extent, NORMALIZED_EXTENT, clamp);\r\n    return this.scale.scale(t);\r\n  };\r\n  /**\r\n   * Convert pixel point to data in axis\r\n   */\r\n  Axis.prototype.pointToData = function (point, clamp) {\r\n    // Should be implemented in derived class if necessary.\r\n    return;\r\n  };\r\n  /**\r\n   * Different from `zrUtil.map(axis.getTicks(), axis.dataToCoord, axis)`,\r\n   * `axis.getTicksCoords` considers `onBand`, which is used by\r\n   * `boundaryGap:true` of category axis and splitLine and splitArea.\r\n   * @param opt.tickModel default: axis.model.getModel('axisTick')\r\n   * @param opt.clamp If `true`, the first and the last\r\n   *        tick must be at the axis end points. Otherwise, clip ticks\r\n   *        that outside the axis extent.\r\n   */\r\n  Axis.prototype.getTicksCoords = function (opt) {\r\n    opt = opt || {};\r\n    var tickModel = opt.tickModel || this.getTickModel();\r\n    var result = createAxisTicks(this, tickModel);\r\n    var ticks = result.ticks;\r\n    var ticksCoords = map(ticks, function (tickVal) {\r\n      return {\r\n        coord: this.dataToCoord(this.scale.type === 'ordinal' ? this.scale.getRawOrdinalNumber(tickVal) : tickVal),\r\n        tickValue: tickVal\r\n      };\r\n    }, this);\r\n    var alignWithLabel = tickModel.get('alignWithLabel');\r\n    fixOnBandTicksCoords(this, ticksCoords, alignWithLabel, opt.clamp);\r\n    return ticksCoords;\r\n  };\r\n  Axis.prototype.getMinorTicksCoords = function () {\r\n    if (this.scale.type === 'ordinal') {\r\n      // Category axis doesn't support minor ticks\r\n      return [];\r\n    }\r\n    var minorTickModel = this.model.getModel('minorTick');\r\n    var splitNumber = minorTickModel.get('splitNumber');\r\n    // Protection.\r\n    if (!(splitNumber > 0 && splitNumber < 100)) {\r\n      splitNumber = 5;\r\n    }\r\n    var minorTicks = this.scale.getMinorTicks(splitNumber);\r\n    var minorTicksCoords = map(minorTicks, function (minorTicksGroup) {\r\n      return map(minorTicksGroup, function (minorTick) {\r\n        return {\r\n          coord: this.dataToCoord(minorTick),\r\n          tickValue: minorTick\r\n        };\r\n      }, this);\r\n    }, this);\r\n    return minorTicksCoords;\r\n  };\r\n  Axis.prototype.getViewLabels = function () {\r\n    return createAxisLabels(this).labels;\r\n  };\r\n  Axis.prototype.getLabelModel = function () {\r\n    return this.model.getModel('axisLabel');\r\n  };\r\n  /**\r\n   * Notice here we only get the default tick model. For splitLine\r\n   * or splitArea, we should pass the splitLineModel or splitAreaModel\r\n   * manually when calling `getTicksCoords`.\r\n   * In GL, this method may be overridden to:\r\n   * `axisModel.getModel('axisTick', grid3DModel.getModel('axisTick'));`\r\n   */\r\n  Axis.prototype.getTickModel = function () {\r\n    return this.model.getModel('axisTick');\r\n  };\r\n  /**\r\n   * Get width of band\r\n   */\r\n  Axis.prototype.getBandWidth = function () {\r\n    var axisExtent = this._extent;\r\n    var dataExtent = this.scale.getExtent();\r\n    var len = dataExtent[1] - dataExtent[0] + (this.onBand ? 1 : 0);\r\n    // Fix #2728, avoid NaN when only one data.\r\n    len === 0 && (len = 1);\r\n    var size = Math.abs(axisExtent[1] - axisExtent[0]);\r\n    return Math.abs(size) / len;\r\n  };\r\n  /**\r\n   * Only be called in category axis.\r\n   * Can be overridden, consider other axes like in 3D.\r\n   * @return Auto interval for cateogry axis tick and label\r\n   */\r\n  Axis.prototype.calculateCategoryInterval = function () {\r\n    return calculateCategoryInterval(this);\r\n  };\r\n  return Axis;\r\n}();\r\nfunction fixExtentWithBands(extent, nTick) {\r\n  var size = extent[1] - extent[0];\r\n  var len = nTick;\r\n  var margin = size / len / 2;\r\n  extent[0] += margin;\r\n  extent[1] -= margin;\r\n}\r\n// If axis has labels [1, 2, 3, 4]. Bands on the axis are\r\n// |---1---|---2---|---3---|---4---|.\r\n// So the displayed ticks and splitLine/splitArea should between\r\n// each data item, otherwise cause misleading (e.g., split tow bars\r\n// of a single data item when there are two bar series).\r\n// Also consider if tickCategoryInterval > 0 and onBand, ticks and\r\n// splitLine/spliteArea should layout appropriately corresponding\r\n// to displayed labels. (So we should not use `getBandWidth` in this\r\n// case).\r\nfunction fixOnBandTicksCoords(axis, ticksCoords, alignWithLabel, clamp) {\r\n  var ticksLen = ticksCoords.length;\r\n  if (!axis.onBand || alignWithLabel || !ticksLen) {\r\n    return;\r\n  }\r\n  var axisExtent = axis.getExtent();\r\n  var last;\r\n  var diffSize;\r\n  if (ticksLen === 1) {\r\n    ticksCoords[0].coord = axisExtent[0];\r\n    last = ticksCoords[1] = {\r\n      coord: axisExtent[1],\r\n      tickValue: ticksCoords[0].tickValue\r\n    };\r\n  } else {\r\n    var crossLen = ticksCoords[ticksLen - 1].tickValue - ticksCoords[0].tickValue;\r\n    var shift_1 = (ticksCoords[ticksLen - 1].coord - ticksCoords[0].coord) / crossLen;\r\n    each(ticksCoords, function (ticksItem) {\r\n      ticksItem.coord -= shift_1 / 2;\r\n    });\r\n    var dataExtent = axis.scale.getExtent();\r\n    diffSize = 1 + dataExtent[1] - ticksCoords[ticksLen - 1].tickValue;\r\n    last = {\r\n      coord: ticksCoords[ticksLen - 1].coord + shift_1 * diffSize,\r\n      tickValue: dataExtent[1] + 1\r\n    };\r\n    ticksCoords.push(last);\r\n  }\r\n  var inverse = axisExtent[0] > axisExtent[1];\r\n  // Handling clamp.\r\n  if (littleThan(ticksCoords[0].coord, axisExtent[0])) {\r\n    clamp ? ticksCoords[0].coord = axisExtent[0] : ticksCoords.shift();\r\n  }\r\n  if (clamp && littleThan(axisExtent[0], ticksCoords[0].coord)) {\r\n    ticksCoords.unshift({\r\n      coord: axisExtent[0]\r\n    });\r\n  }\r\n  if (littleThan(axisExtent[1], last.coord)) {\r\n    clamp ? last.coord = axisExtent[1] : ticksCoords.pop();\r\n  }\r\n  if (clamp && littleThan(last.coord, axisExtent[1])) {\r\n    ticksCoords.push({\r\n      coord: axisExtent[1]\r\n    });\r\n  }\r\n  function littleThan(a, b) {\r\n    // Avoid rounding error cause calculated tick coord different with extent.\r\n    // It may cause an extra unnecessary tick added.\r\n    a = round(a);\r\n    b = round(b);\r\n    return inverse ? a > b : a < b;\r\n  }\r\n}\r\nexport default Axis;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nvar ORIGIN_METHOD = '\\0__throttleOriginMethod';\r\nvar RATE = '\\0__throttleRate';\r\nvar THROTTLE_TYPE = '\\0__throttleType';\r\n;\r\n/**\r\n * @public\r\n * @param {(Function)} fn\r\n * @param {number} [delay=0] Unit: ms.\r\n * @param {boolean} [debounce=false]\r\n *        true: If call interval less than `delay`, only the last call works.\r\n *        false: If call interval less than `delay, call works on fixed rate.\r\n * @return {(Function)} throttled fn.\r\n */\r\nexport function throttle(fn, delay, debounce) {\r\n  var currCall;\r\n  var lastCall = 0;\r\n  var lastExec = 0;\r\n  var timer = null;\r\n  var diff;\r\n  var scope;\r\n  var args;\r\n  var debounceNextCall;\r\n  delay = delay || 0;\r\n  function exec() {\r\n    lastExec = new Date().getTime();\r\n    timer = null;\r\n    fn.apply(scope, args || []);\r\n  }\r\n  var cb = function () {\r\n    var cbArgs = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n      cbArgs[_i] = arguments[_i];\r\n    }\r\n    currCall = new Date().getTime();\r\n    scope = this;\r\n    args = cbArgs;\r\n    var thisDelay = debounceNextCall || delay;\r\n    var thisDebounce = debounceNextCall || debounce;\r\n    debounceNextCall = null;\r\n    diff = currCall - (thisDebounce ? lastCall : lastExec) - thisDelay;\r\n    clearTimeout(timer);\r\n    // Here we should make sure that: the `exec` SHOULD NOT be called later\r\n    // than a new call of `cb`, that is, preserving the command order. Consider\r\n    // calculating \"scale rate\" when roaming as an example. When a call of `cb`\r\n    // happens, either the `exec` is called dierectly, or the call is delayed.\r\n    // But the delayed call should never be later than next call of `cb`. Under\r\n    // this assurance, we can simply update view state each time `dispatchAction`\r\n    // triggered by user roaming, but not need to add extra code to avoid the\r\n    // state being \"rolled-back\".\r\n    if (thisDebounce) {\r\n      timer = setTimeout(exec, thisDelay);\r\n    } else {\r\n      if (diff >= 0) {\r\n        exec();\r\n      } else {\r\n        timer = setTimeout(exec, -diff);\r\n      }\r\n    }\r\n    lastCall = currCall;\r\n  };\r\n  /**\r\n   * Clear throttle.\r\n   * @public\r\n   */\r\n  cb.clear = function () {\r\n    if (timer) {\r\n      clearTimeout(timer);\r\n      timer = null;\r\n    }\r\n  };\r\n  /**\r\n   * Enable debounce once.\r\n   */\r\n  cb.debounceNextCall = function (debounceDelay) {\r\n    debounceNextCall = debounceDelay;\r\n  };\r\n  return cb;\r\n}\r\n/**\r\n * Create throttle method or update throttle rate.\r\n *\r\n * @example\r\n * ComponentView.prototype.render = function () {\r\n *     ...\r\n *     throttle.createOrUpdate(\r\n *         this,\r\n *         '_dispatchAction',\r\n *         this.model.get('throttle'),\r\n *         'fixRate'\r\n *     );\r\n * };\r\n * ComponentView.prototype.remove = function () {\r\n *     throttle.clear(this, '_dispatchAction');\r\n * };\r\n * ComponentView.prototype.dispose = function () {\r\n *     throttle.clear(this, '_dispatchAction');\r\n * };\r\n *\r\n */\r\nexport function createOrUpdate(obj, fnAttr, rate, throttleType) {\r\n  var fn = obj[fnAttr];\r\n  if (!fn) {\r\n    return;\r\n  }\r\n  var originFn = fn[ORIGIN_METHOD] || fn;\r\n  var lastThrottleType = fn[THROTTLE_TYPE];\r\n  var lastRate = fn[RATE];\r\n  if (lastRate !== rate || lastThrottleType !== throttleType) {\r\n    if (rate == null || !throttleType) {\r\n      return obj[fnAttr] = originFn;\r\n    }\r\n    fn = obj[fnAttr] = throttle(originFn, rate, throttleType === 'debounce');\r\n    fn[ORIGIN_METHOD] = originFn;\r\n    fn[THROTTLE_TYPE] = throttleType;\r\n    fn[RATE] = rate;\r\n  }\r\n  return fn;\r\n}\r\n/**\r\n * Clear throttle. Example see throttle.createOrUpdate.\r\n */\r\nexport function clear(obj, fnAttr) {\r\n  var fn = obj[fnAttr];\r\n  if (fn && fn[ORIGIN_METHOD]) {\r\n    // Clear throttle\r\n    fn.clear && fn.clear();\r\n    obj[fnAttr] = fn[ORIGIN_METHOD];\r\n  }\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { makeInner, normalizeToArray } from '../../util/model.js';\r\nvar innerColor = makeInner();\r\nvar innerDecal = makeInner();\r\nvar PaletteMixin = /** @class */function () {\r\n  function PaletteMixin() {}\r\n  PaletteMixin.prototype.getColorFromPalette = function (name, scope, requestNum) {\r\n    var defaultPalette = normalizeToArray(this.get('color', true));\r\n    var layeredPalette = this.get('colorLayer', true);\r\n    return getFromPalette(this, innerColor, defaultPalette, layeredPalette, name, scope, requestNum);\r\n  };\r\n  PaletteMixin.prototype.clearColorPalette = function () {\r\n    clearPalette(this, innerColor);\r\n  };\r\n  return PaletteMixin;\r\n}();\r\nexport function getDecalFromPalette(ecModel, name, scope, requestNum) {\r\n  var defaultDecals = normalizeToArray(ecModel.get(['aria', 'decal', 'decals']));\r\n  return getFromPalette(ecModel, innerDecal, defaultDecals, null, name, scope, requestNum);\r\n}\r\nfunction getNearestPalette(palettes, requestColorNum) {\r\n  var paletteNum = palettes.length;\r\n  // TODO palettes must be in order\r\n  for (var i = 0; i < paletteNum; i++) {\r\n    if (palettes[i].length > requestColorNum) {\r\n      return palettes[i];\r\n    }\r\n  }\r\n  return palettes[paletteNum - 1];\r\n}\r\n/**\r\n * @param name MUST NOT be null/undefined. Otherwise call this function\r\n *             twise with the same parameters will get different result.\r\n * @param scope default this.\r\n * @return Can be null/undefined\r\n */\r\nfunction getFromPalette(that, inner, defaultPalette, layeredPalette, name, scope, requestNum) {\r\n  scope = scope || that;\r\n  var scopeFields = inner(scope);\r\n  var paletteIdx = scopeFields.paletteIdx || 0;\r\n  var paletteNameMap = scopeFields.paletteNameMap = scopeFields.paletteNameMap || {};\r\n  // Use `hasOwnProperty` to avoid conflict with Object.prototype.\r\n  if (paletteNameMap.hasOwnProperty(name)) {\r\n    return paletteNameMap[name];\r\n  }\r\n  var palette = requestNum == null || !layeredPalette ? defaultPalette : getNearestPalette(layeredPalette, requestNum);\r\n  // In case can't find in layered color palette.\r\n  palette = palette || defaultPalette;\r\n  if (!palette || !palette.length) {\r\n    return;\r\n  }\r\n  var pickedPaletteItem = palette[paletteIdx];\r\n  if (name) {\r\n    paletteNameMap[name] = pickedPaletteItem;\r\n  }\r\n  scopeFields.paletteIdx = (paletteIdx + 1) % palette.length;\r\n  return pickedPaletteItem;\r\n}\r\nfunction clearPalette(that, inner) {\r\n  inner(that).paletteIdx = 0;\r\n  inner(that).paletteNameMap = {};\r\n}\r\nexport { PaletteMixin };", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nvar _a, _b, _c;\r\n// TODO\r\n// ??? refactor? check the outer usage of data provider.\r\n// merge with defaultDimValueGetter?\r\nimport { isTypedArray, extend, assert, each, isObject, bind } from 'zrender/lib/core/util.js';\r\nimport { getDataItemValue } from '../../util/model.js';\r\nimport { createSourceFromSeriesDataOption, isSourceInstance } from '../Source.js';\r\nimport { SOURCE_FORMAT_ORIGINAL, SOURCE_FORMAT_OBJECT_ROWS, SOURCE_FORMAT_KEYED_COLUMNS, SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ARRAY_ROWS, SERIES_LAYOUT_BY_COLUMN, SERIES_LAYOUT_BY_ROW } from '../../util/types.js';\r\nvar providerMethods;\r\nvar mountMethods;\r\n/**\r\n * If normal array used, mutable chunk size is supported.\r\n * If typed array used, chunk size must be fixed.\r\n */\r\nvar DefaultDataProvider = /** @class */function () {\r\n  function DefaultDataProvider(sourceParam, dimSize) {\r\n    // let source: Source;\r\n    var source = !isSourceInstance(sourceParam) ? createSourceFromSeriesDataOption(sourceParam) : sourceParam;\r\n    // declare source is Source;\r\n    this._source = source;\r\n    var data = this._data = source.data;\r\n    // Typed array. TODO IE10+?\r\n    if (source.sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        if (dimSize == null) {\r\n          throw new Error('Typed array data must specify dimension size');\r\n        }\r\n      }\r\n      this._offset = 0;\r\n      this._dimSize = dimSize;\r\n      this._data = data;\r\n    }\r\n    mountMethods(this, data, source);\r\n  }\r\n  DefaultDataProvider.prototype.getSource = function () {\r\n    return this._source;\r\n  };\r\n  DefaultDataProvider.prototype.count = function () {\r\n    return 0;\r\n  };\r\n  DefaultDataProvider.prototype.getItem = function (idx, out) {\r\n    return;\r\n  };\r\n  DefaultDataProvider.prototype.appendData = function (newData) {};\r\n  DefaultDataProvider.prototype.clean = function () {};\r\n  DefaultDataProvider.protoInitialize = function () {\r\n    // PENDING: To avoid potential incompat (e.g., prototype\r\n    // is visited somewhere), still init them on prototype.\r\n    var proto = DefaultDataProvider.prototype;\r\n    proto.pure = false;\r\n    proto.persistent = true;\r\n  }();\r\n  DefaultDataProvider.internalField = function () {\r\n    var _a;\r\n    mountMethods = function (provider, data, source) {\r\n      var sourceFormat = source.sourceFormat;\r\n      var seriesLayoutBy = source.seriesLayoutBy;\r\n      var startIndex = source.startIndex;\r\n      var dimsDef = source.dimensionsDefine;\r\n      var methods = providerMethods[getMethodMapKey(sourceFormat, seriesLayoutBy)];\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        assert(methods, 'Invalide sourceFormat: ' + sourceFormat);\r\n      }\r\n      extend(provider, methods);\r\n      if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\r\n        provider.getItem = getItemForTypedArray;\r\n        provider.count = countForTypedArray;\r\n        provider.fillStorage = fillStorageForTypedArray;\r\n      } else {\r\n        var rawItemGetter = getRawSourceItemGetter(sourceFormat, seriesLayoutBy);\r\n        provider.getItem = bind(rawItemGetter, null, data, startIndex, dimsDef);\r\n        var rawCounter = getRawSourceDataCounter(sourceFormat, seriesLayoutBy);\r\n        provider.count = bind(rawCounter, null, data, startIndex, dimsDef);\r\n      }\r\n    };\r\n    var getItemForTypedArray = function (idx, out) {\r\n      idx = idx - this._offset;\r\n      out = out || [];\r\n      var data = this._data;\r\n      var dimSize = this._dimSize;\r\n      var offset = dimSize * idx;\r\n      for (var i = 0; i < dimSize; i++) {\r\n        out[i] = data[offset + i];\r\n      }\r\n      return out;\r\n    };\r\n    var fillStorageForTypedArray = function (start, end, storage, extent) {\r\n      var data = this._data;\r\n      var dimSize = this._dimSize;\r\n      for (var dim = 0; dim < dimSize; dim++) {\r\n        var dimExtent = extent[dim];\r\n        var min = dimExtent[0] == null ? Infinity : dimExtent[0];\r\n        var max = dimExtent[1] == null ? -Infinity : dimExtent[1];\r\n        var count = end - start;\r\n        var arr = storage[dim];\r\n        for (var i = 0; i < count; i++) {\r\n          // appendData with TypedArray will always do replace in provider.\r\n          var val = data[i * dimSize + dim];\r\n          arr[start + i] = val;\r\n          val < min && (min = val);\r\n          val > max && (max = val);\r\n        }\r\n        dimExtent[0] = min;\r\n        dimExtent[1] = max;\r\n      }\r\n    };\r\n    var countForTypedArray = function () {\r\n      return this._data ? this._data.length / this._dimSize : 0;\r\n    };\r\n    providerMethods = (_a = {}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = {\r\n      pure: true,\r\n      appendData: appendDataSimply\r\n    }, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = {\r\n      pure: true,\r\n      appendData: function () {\r\n        throw new Error('Do not support appendData when set seriesLayoutBy: \"row\".');\r\n      }\r\n    }, _a[SOURCE_FORMAT_OBJECT_ROWS] = {\r\n      pure: true,\r\n      appendData: appendDataSimply\r\n    }, _a[SOURCE_FORMAT_KEYED_COLUMNS] = {\r\n      pure: true,\r\n      appendData: function (newData) {\r\n        var data = this._data;\r\n        each(newData, function (newCol, key) {\r\n          var oldCol = data[key] || (data[key] = []);\r\n          for (var i = 0; i < (newCol || []).length; i++) {\r\n            oldCol.push(newCol[i]);\r\n          }\r\n        });\r\n      }\r\n    }, _a[SOURCE_FORMAT_ORIGINAL] = {\r\n      appendData: appendDataSimply\r\n    }, _a[SOURCE_FORMAT_TYPED_ARRAY] = {\r\n      persistent: false,\r\n      pure: true,\r\n      appendData: function (newData) {\r\n        if (process.env.NODE_ENV !== 'production') {\r\n          assert(isTypedArray(newData), 'Added data must be TypedArray if data in initialization is TypedArray');\r\n        }\r\n        this._data = newData;\r\n      },\r\n      // Clean self if data is already used.\r\n      clean: function () {\r\n        // PENDING\r\n        this._offset += this.count();\r\n        this._data = null;\r\n      }\r\n    }, _a);\r\n    function appendDataSimply(newData) {\r\n      for (var i = 0; i < newData.length; i++) {\r\n        this._data.push(newData[i]);\r\n      }\r\n    }\r\n  }();\r\n  return DefaultDataProvider;\r\n}();\r\nexport { DefaultDataProvider };\r\nvar getItemSimply = function (rawData, startIndex, dimsDef, idx) {\r\n  return rawData[idx];\r\n};\r\nvar rawSourceItemGetterMap = (_a = {}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef, idx) {\r\n  return rawData[idx + startIndex];\r\n}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef, idx, out) {\r\n  idx += startIndex;\r\n  var item = out || [];\r\n  var data = rawData;\r\n  for (var i = 0; i < data.length; i++) {\r\n    var row = data[i];\r\n    item[i] = row ? row[idx] : null;\r\n  }\r\n  return item;\r\n}, _a[SOURCE_FORMAT_OBJECT_ROWS] = getItemSimply, _a[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef, idx, out) {\r\n  var item = out || [];\r\n  for (var i = 0; i < dimsDef.length; i++) {\r\n    var dimName = dimsDef[i].name;\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      if (dimName == null) {\r\n        throw new Error();\r\n      }\r\n    }\r\n    var col = rawData[dimName];\r\n    item[i] = col ? col[idx] : null;\r\n  }\r\n  return item;\r\n}, _a[SOURCE_FORMAT_ORIGINAL] = getItemSimply, _a);\r\nexport function getRawSourceItemGetter(sourceFormat, seriesLayoutBy) {\r\n  var method = rawSourceItemGetterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    assert(method, 'Do not support get item on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\r\n  }\r\n  return method;\r\n}\r\nvar countSimply = function (rawData, startIndex, dimsDef) {\r\n  return rawData.length;\r\n};\r\nvar rawSourceDataCounterMap = (_b = {}, _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef) {\r\n  return Math.max(0, rawData.length - startIndex);\r\n}, _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef) {\r\n  var row = rawData[0];\r\n  return row ? Math.max(0, row.length - startIndex) : 0;\r\n}, _b[SOURCE_FORMAT_OBJECT_ROWS] = countSimply, _b[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef) {\r\n  var dimName = dimsDef[0].name;\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    if (dimName == null) {\r\n      throw new Error();\r\n    }\r\n  }\r\n  var col = rawData[dimName];\r\n  return col ? col.length : 0;\r\n}, _b[SOURCE_FORMAT_ORIGINAL] = countSimply, _b);\r\nexport function getRawSourceDataCounter(sourceFormat, seriesLayoutBy) {\r\n  var method = rawSourceDataCounterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    assert(method, 'Do not support count on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\r\n  }\r\n  return method;\r\n}\r\nvar getRawValueSimply = function (dataItem, dimIndex, property) {\r\n  return dataItem[dimIndex];\r\n};\r\nvar rawSourceValueGetterMap = (_c = {}, _c[SOURCE_FORMAT_ARRAY_ROWS] = getRawValueSimply, _c[SOURCE_FORMAT_OBJECT_ROWS] = function (dataItem, dimIndex, property) {\r\n  return dataItem[property];\r\n}, _c[SOURCE_FORMAT_KEYED_COLUMNS] = getRawValueSimply, _c[SOURCE_FORMAT_ORIGINAL] = function (dataItem, dimIndex, property) {\r\n  // FIXME: In some case (markpoint in geo (geo-map.html)),\r\n  // dataItem is {coord: [...]}\r\n  var value = getDataItemValue(dataItem);\r\n  return !(value instanceof Array) ? value : value[dimIndex];\r\n}, _c[SOURCE_FORMAT_TYPED_ARRAY] = getRawValueSimply, _c);\r\nexport function getRawSourceValueGetter(sourceFormat) {\r\n  var method = rawSourceValueGetterMap[sourceFormat];\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    assert(method, 'Do not support get value on \"' + sourceFormat + '\".');\r\n  }\r\n  return method;\r\n}\r\nfunction getMethodMapKey(sourceFormat, seriesLayoutBy) {\r\n  return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS ? sourceFormat + '_' + seriesLayoutBy : sourceFormat;\r\n}\r\n// ??? FIXME can these logic be more neat: getRawValue, getRawDataItem,\r\n// Consider persistent.\r\n// Caution: why use raw value to display on label or tooltip?\r\n// A reason is to avoid format. For example time value we do not know\r\n// how to format is expected. More over, if stack is used, calculated\r\n// value may be 0.91000000001, which have brings trouble to display.\r\n// TODO: consider how to treat null/undefined/NaN when display?\r\nexport function retrieveRawValue(data, dataIndex,\r\n// If dimIndex is null/undefined, return OptionDataItem.\r\n// Otherwise, return OptionDataValue.\r\ndim) {\r\n  if (!data) {\r\n    return;\r\n  }\r\n  // Consider data may be not persistent.\r\n  var dataItem = data.getRawDataItem(dataIndex);\r\n  if (dataItem == null) {\r\n    return;\r\n  }\r\n  var store = data.getStore();\r\n  var sourceFormat = store.getSource().sourceFormat;\r\n  if (dim != null) {\r\n    var dimIndex = data.getDimensionIndex(dim);\r\n    var property = store.getDimensionProperty(dimIndex);\r\n    return getRawSourceValueGetter(sourceFormat)(dataItem, dimIndex, property);\r\n  } else {\r\n    var result = dataItem;\r\n    if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\r\n      result = getDataItemValue(dataItem);\r\n    }\r\n    return result;\r\n  }\r\n}\r\n/**\r\n * Compatible with some cases (in pie, map) like:\r\n * data: [{name: 'xx', value: 5, selected: true}, ...]\r\n * where only sourceFormat is 'original' and 'objectRows' supported.\r\n *\r\n * // TODO\r\n * Supported detail options in data item when using 'arrayRows'.\r\n *\r\n * @param data\r\n * @param dataIndex\r\n * @param attr like 'selected'\r\n */\r\nexport function retrieveRawAttr(data, dataIndex, attr) {\r\n  if (!data) {\r\n    return;\r\n  }\r\n  var sourceFormat = data.getStore().getSource().sourceFormat;\r\n  if (sourceFormat !== SOURCE_FORMAT_ORIGINAL && sourceFormat !== SOURCE_FORMAT_OBJECT_ROWS) {\r\n    return;\r\n  }\r\n  var dataItem = data.getRawDataItem(dataIndex);\r\n  if (sourceFormat === SOURCE_FORMAT_ORIGINAL && !isObject(dataItem)) {\r\n    dataItem = null;\r\n  }\r\n  if (dataItem) {\r\n    return dataItem[attr];\r\n  }\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\r\nimport { formatTpl } from '../../util/format.js';\r\nimport { error, makePrintable } from '../../util/log.js';\r\nvar DIMENSION_LABEL_REG = /\\{@(.+?)\\}/g;\r\nvar DataFormatMixin = /** @class */function () {\r\n  function DataFormatMixin() {}\r\n  /**\r\n   * Get params for formatter\r\n   */\r\n  DataFormatMixin.prototype.getDataParams = function (dataIndex, dataType) {\r\n    var data = this.getData(dataType);\r\n    var rawValue = this.getRawValue(dataIndex, dataType);\r\n    var rawDataIndex = data.getRawIndex(dataIndex);\r\n    var name = data.getName(dataIndex);\r\n    var itemOpt = data.getRawDataItem(dataIndex);\r\n    var style = data.getItemVisual(dataIndex, 'style');\r\n    var color = style && style[data.getItemVisual(dataIndex, 'drawType') || 'fill'];\r\n    var borderColor = style && style.stroke;\r\n    var mainType = this.mainType;\r\n    var isSeries = mainType === 'series';\r\n    var userOutput = data.userOutput && data.userOutput.get();\r\n    return {\r\n      componentType: mainType,\r\n      componentSubType: this.subType,\r\n      componentIndex: this.componentIndex,\r\n      seriesType: isSeries ? this.subType : null,\r\n      seriesIndex: this.seriesIndex,\r\n      seriesId: isSeries ? this.id : null,\r\n      seriesName: isSeries ? this.name : null,\r\n      name: name,\r\n      dataIndex: rawDataIndex,\r\n      data: itemOpt,\r\n      dataType: dataType,\r\n      value: rawValue,\r\n      color: color,\r\n      borderColor: borderColor,\r\n      dimensionNames: userOutput ? userOutput.fullDimensions : null,\r\n      encode: userOutput ? userOutput.encode : null,\r\n      // Param name list for mapping `a`, `b`, `c`, `d`, `e`\r\n      $vars: ['seriesName', 'name', 'value']\r\n    };\r\n  };\r\n  /**\r\n   * Format label\r\n   * @param dataIndex\r\n   * @param status 'normal' by default\r\n   * @param dataType\r\n   * @param labelDimIndex Only used in some chart that\r\n   *        use formatter in different dimensions, like radar.\r\n   * @param formatter Formatter given outside.\r\n   * @return return null/undefined if no formatter\r\n   */\r\n  DataFormatMixin.prototype.getFormattedLabel = function (dataIndex, status, dataType, labelDimIndex, formatter, extendParams) {\r\n    status = status || 'normal';\r\n    var data = this.getData(dataType);\r\n    var params = this.getDataParams(dataIndex, dataType);\r\n    if (extendParams) {\r\n      params.value = extendParams.interpolatedValue;\r\n    }\r\n    if (labelDimIndex != null && zrUtil.isArray(params.value)) {\r\n      params.value = params.value[labelDimIndex];\r\n    }\r\n    if (!formatter) {\r\n      var itemModel = data.getItemModel(dataIndex);\r\n      // @ts-ignore\r\n      formatter = itemModel.get(status === 'normal' ? ['label', 'formatter'] : [status, 'label', 'formatter']);\r\n    }\r\n    if (zrUtil.isFunction(formatter)) {\r\n      params.status = status;\r\n      params.dimensionIndex = labelDimIndex;\r\n      return formatter(params);\r\n    } else if (zrUtil.isString(formatter)) {\r\n      var str = formatTpl(formatter, params);\r\n      // Support 'aaa{@[3]}bbb{@product}ccc'.\r\n      // Do not support '}' in dim name util have to.\r\n      return str.replace(DIMENSION_LABEL_REG, function (origin, dimStr) {\r\n        var len = dimStr.length;\r\n        var dimLoose = dimStr;\r\n        if (dimLoose.charAt(0) === '[' && dimLoose.charAt(len - 1) === ']') {\r\n          dimLoose = +dimLoose.slice(1, len - 1); // Also support: '[]' => 0\r\n          if (process.env.NODE_ENV !== 'production') {\r\n            if (isNaN(dimLoose)) {\r\n              error(\"Invalide label formatter: @\" + dimStr + \", only support @[0], @[1], @[2], ...\");\r\n            }\r\n          }\r\n        }\r\n        var val = retrieveRawValue(data, dataIndex, dimLoose);\r\n        if (extendParams && zrUtil.isArray(extendParams.interpolatedValue)) {\r\n          var dimIndex = data.getDimensionIndex(dimLoose);\r\n          if (dimIndex >= 0) {\r\n            val = extendParams.interpolatedValue[dimIndex];\r\n          }\r\n        }\r\n        return val != null ? val + '' : '';\r\n      });\r\n    }\r\n  };\r\n  /**\r\n   * Get raw value in option\r\n   */\r\n  DataFormatMixin.prototype.getRawValue = function (idx, dataType) {\r\n    return retrieveRawValue(this.getData(dataType), idx);\r\n  };\r\n  /**\r\n   * Should be implemented.\r\n   * @param {number} dataIndex\r\n   * @param {boolean} [multipleSeries=false]\r\n   * @param {string} [dataType]\r\n   */\r\n  DataFormatMixin.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\r\n    // Empty function\r\n    return;\r\n  };\r\n  return DataFormatMixin;\r\n}();\r\nexport { DataFormatMixin };\r\n;\r\n// PENDING: previously we accept this type when calling `formatTooltip`,\r\n// but guess little chance has been used outside. Do we need to backward\r\n// compat it?\r\n// type TooltipFormatResultLegacyObject = {\r\n//     // `html` means the markup language text, either in 'html' or 'richText'.\r\n//     // The name `html` is not appropriate because in 'richText' it is not a HTML\r\n//     // string. But still support it for backward compatibility.\r\n//     html: string;\r\n//     markers: Dictionary<ColorString>;\r\n// };\r\n/**\r\n * For backward compat, normalize the return from `formatTooltip`.\r\n */\r\nexport function normalizeTooltipFormatResult(result) {\r\n  var markupText;\r\n  // let markers: Dictionary<ColorString>;\r\n  var markupFragment;\r\n  if (zrUtil.isObject(result)) {\r\n    if (result.type) {\r\n      markupFragment = result;\r\n    } else {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        console.warn('The return type of `formatTooltip` is not supported: ' + makePrintable(result));\r\n      }\r\n    }\r\n    // else {\r\n    //     markupText = (result as TooltipFormatResultLegacyObject).html;\r\n    //     markers = (result as TooltipFormatResultLegacyObject).markers;\r\n    //     if (markersExisting) {\r\n    //         markers = zrUtil.merge(markersExisting, markers);\r\n    //     }\r\n    // }\r\n  } else {\r\n    markupText = result;\r\n  }\r\n  return {\r\n    text: markupText,\r\n    // markers: markers || markersExisting,\r\n    frag: markupFragment\r\n  };\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { assert, isArray } from 'zrender/lib/core/util.js';\r\n;\r\n/**\r\n * @param {Object} define\r\n * @return See the return of `createTask`.\r\n */\r\nexport function createTask(define) {\r\n  return new Task(define);\r\n}\r\nvar Task = /** @class */function () {\r\n  function Task(define) {\r\n    define = define || {};\r\n    this._reset = define.reset;\r\n    this._plan = define.plan;\r\n    this._count = define.count;\r\n    this._onDirty = define.onDirty;\r\n    this._dirty = true;\r\n  }\r\n  /**\r\n   * @param step Specified step.\r\n   * @param skip Skip customer perform call.\r\n   * @param modBy Sampling window size.\r\n   * @param modDataCount Sampling count.\r\n   * @return whether unfinished.\r\n   */\r\n  Task.prototype.perform = function (performArgs) {\r\n    var upTask = this._upstream;\r\n    var skip = performArgs && performArgs.skip;\r\n    // TODO some refactor.\r\n    // Pull data. Must pull data each time, because context.data\r\n    // may be updated by Series.setData.\r\n    if (this._dirty && upTask) {\r\n      var context = this.context;\r\n      context.data = context.outputData = upTask.context.outputData;\r\n    }\r\n    if (this.__pipeline) {\r\n      this.__pipeline.currentTask = this;\r\n    }\r\n    var planResult;\r\n    if (this._plan && !skip) {\r\n      planResult = this._plan(this.context);\r\n    }\r\n    // Support sharding by mod, which changes the render sequence and makes the rendered graphic\r\n    // elements uniformed distributed when progress, especially when moving or zooming.\r\n    var lastModBy = normalizeModBy(this._modBy);\r\n    var lastModDataCount = this._modDataCount || 0;\r\n    var modBy = normalizeModBy(performArgs && performArgs.modBy);\r\n    var modDataCount = performArgs && performArgs.modDataCount || 0;\r\n    if (lastModBy !== modBy || lastModDataCount !== modDataCount) {\r\n      planResult = 'reset';\r\n    }\r\n    function normalizeModBy(val) {\r\n      !(val >= 1) && (val = 1); // jshint ignore:line\r\n      return val;\r\n    }\r\n    var forceFirstProgress;\r\n    if (this._dirty || planResult === 'reset') {\r\n      this._dirty = false;\r\n      forceFirstProgress = this._doReset(skip);\r\n    }\r\n    this._modBy = modBy;\r\n    this._modDataCount = modDataCount;\r\n    var step = performArgs && performArgs.step;\r\n    if (upTask) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        assert(upTask._outputDueEnd != null);\r\n      }\r\n      this._dueEnd = upTask._outputDueEnd;\r\n    }\r\n    // DataTask or overallTask\r\n    else {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        assert(!this._progress || this._count);\r\n      }\r\n      this._dueEnd = this._count ? this._count(this.context) : Infinity;\r\n    }\r\n    // Note: Stubs, that its host overall task let it has progress, has progress.\r\n    // If no progress, pass index from upstream to downstream each time plan called.\r\n    if (this._progress) {\r\n      var start = this._dueIndex;\r\n      var end = Math.min(step != null ? this._dueIndex + step : Infinity, this._dueEnd);\r\n      if (!skip && (forceFirstProgress || start < end)) {\r\n        var progress = this._progress;\r\n        if (isArray(progress)) {\r\n          for (var i = 0; i < progress.length; i++) {\r\n            this._doProgress(progress[i], start, end, modBy, modDataCount);\r\n          }\r\n        } else {\r\n          this._doProgress(progress, start, end, modBy, modDataCount);\r\n        }\r\n      }\r\n      this._dueIndex = end;\r\n      // If no `outputDueEnd`, assume that output data and\r\n      // input data is the same, so use `dueIndex` as `outputDueEnd`.\r\n      var outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : end;\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        // ??? Can not rollback.\r\n        assert(outputDueEnd >= this._outputDueEnd);\r\n      }\r\n      this._outputDueEnd = outputDueEnd;\r\n    } else {\r\n      // (1) Some overall task has no progress.\r\n      // (2) Stubs, that its host overall task do not let it has progress, has no progress.\r\n      // This should always be performed so it can be passed to downstream.\r\n      this._dueIndex = this._outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : this._dueEnd;\r\n    }\r\n    return this.unfinished();\r\n  };\r\n  Task.prototype.dirty = function () {\r\n    this._dirty = true;\r\n    this._onDirty && this._onDirty(this.context);\r\n  };\r\n  Task.prototype._doProgress = function (progress, start, end, modBy, modDataCount) {\r\n    iterator.reset(start, end, modBy, modDataCount);\r\n    this._callingProgress = progress;\r\n    this._callingProgress({\r\n      start: start,\r\n      end: end,\r\n      count: end - start,\r\n      next: iterator.next\r\n    }, this.context);\r\n  };\r\n  Task.prototype._doReset = function (skip) {\r\n    this._dueIndex = this._outputDueEnd = this._dueEnd = 0;\r\n    this._settedOutputEnd = null;\r\n    var progress;\r\n    var forceFirstProgress;\r\n    if (!skip && this._reset) {\r\n      progress = this._reset(this.context);\r\n      if (progress && progress.progress) {\r\n        forceFirstProgress = progress.forceFirstProgress;\r\n        progress = progress.progress;\r\n      }\r\n      // To simplify no progress checking, array must has item.\r\n      if (isArray(progress) && !progress.length) {\r\n        progress = null;\r\n      }\r\n    }\r\n    this._progress = progress;\r\n    this._modBy = this._modDataCount = null;\r\n    var downstream = this._downstream;\r\n    downstream && downstream.dirty();\r\n    return forceFirstProgress;\r\n  };\r\n  Task.prototype.unfinished = function () {\r\n    return this._progress && this._dueIndex < this._dueEnd;\r\n  };\r\n  /**\r\n   * @param downTask The downstream task.\r\n   * @return The downstream task.\r\n   */\r\n  Task.prototype.pipe = function (downTask) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      assert(downTask && !downTask._disposed && downTask !== this);\r\n    }\r\n    // If already downstream, do not dirty downTask.\r\n    if (this._downstream !== downTask || this._dirty) {\r\n      this._downstream = downTask;\r\n      downTask._upstream = this;\r\n      downTask.dirty();\r\n    }\r\n  };\r\n  Task.prototype.dispose = function () {\r\n    if (this._disposed) {\r\n      return;\r\n    }\r\n    this._upstream && (this._upstream._downstream = null);\r\n    this._downstream && (this._downstream._upstream = null);\r\n    this._dirty = false;\r\n    this._disposed = true;\r\n  };\r\n  Task.prototype.getUpstream = function () {\r\n    return this._upstream;\r\n  };\r\n  Task.prototype.getDownstream = function () {\r\n    return this._downstream;\r\n  };\r\n  Task.prototype.setOutputEnd = function (end) {\r\n    // This only happens in dataTask, dataZoom, map, currently.\r\n    // where dataZoom do not set end each time, but only set\r\n    // when reset. So we should record the set end, in case\r\n    // that the stub of dataZoom perform again and earse the\r\n    // set end by upstream.\r\n    this._outputDueEnd = this._settedOutputEnd = end;\r\n  };\r\n  return Task;\r\n}();\r\nexport { Task };\r\nvar iterator = function () {\r\n  var end;\r\n  var current;\r\n  var modBy;\r\n  var modDataCount;\r\n  var winCount;\r\n  var it = {\r\n    reset: function (s, e, sStep, sCount) {\r\n      current = s;\r\n      end = e;\r\n      modBy = sStep;\r\n      modDataCount = sCount;\r\n      winCount = Math.ceil(modDataCount / modBy);\r\n      it.next = modBy > 1 && modDataCount > 0 ? modNext : sequentialNext;\r\n    }\r\n  };\r\n  return it;\r\n  function sequentialNext() {\r\n    return current < end ? current++ : null;\r\n  }\r\n  function modNext() {\r\n    var dataIndex = current % winCount * modBy + Math.ceil(current / winCount);\r\n    var result = current >= end ? null : dataIndex < modDataCount ? dataIndex\r\n    // If modDataCount is smaller than data.count() (consider `appendData` case),\r\n    // Use normal linear rendering mode.\r\n    : current;\r\n    current++;\r\n    return result;\r\n  }\r\n}();\r\n// -----------------------------------------------------------------------------\r\n// For stream debug (Should be commented out after used!)\r\n// @usage: printTask(this, 'begin');\r\n// @usage: printTask(this, null, {someExtraProp});\r\n// @usage: Use `__idxInPipeline` as conditional breakpiont.\r\n//\r\n// window.printTask = function (task: any, prefix: string, extra: { [key: string]: unknown }): void {\r\n//     window.ecTaskUID == null && (window.ecTaskUID = 0);\r\n//     task.uidDebug == null && (task.uidDebug = `task_${window.ecTaskUID++}`);\r\n//     task.agent && task.agent.uidDebug == null && (task.agent.uidDebug = `task_${window.ecTaskUID++}`);\r\n//     let props = [];\r\n//     if (task.__pipeline) {\r\n//         let val = `${task.__idxInPipeline}/${task.__pipeline.tail.__idxInPipeline} ${task.agent ? '(stub)' : ''}`;\r\n//         props.push({text: '__idxInPipeline/total', value: val});\r\n//     } else {\r\n//         let stubCount = 0;\r\n//         task.agentStubMap.each(() => stubCount++);\r\n//         props.push({text: 'idx', value: `overall (stubs: ${stubCount})`});\r\n//     }\r\n//     props.push({text: 'uid', value: task.uidDebug});\r\n//     if (task.__pipeline) {\r\n//         props.push({text: 'pipelineId', value: task.__pipeline.id});\r\n//         task.agent && props.push(\r\n//             {text: 'stubFor', value: task.agent.uidDebug}\r\n//         );\r\n//     }\r\n//     props.push(\r\n//         {text: 'dirty', value: task._dirty},\r\n//         {text: 'dueIndex', value: task._dueIndex},\r\n//         {text: 'dueEnd', value: task._dueEnd},\r\n//         {text: 'outputDueEnd', value: task._outputDueEnd}\r\n//     );\r\n//     if (extra) {\r\n//         Object.keys(extra).forEach(key => {\r\n//             props.push({text: key, value: extra[key]});\r\n//         });\r\n//     }\r\n//     let args = ['color: blue'];\r\n//     let msg = `%c[${prefix || 'T'}] %c` + props.map(item => (\r\n//         args.push('color: green', 'color: red'),\r\n//         `${item.text}: %c${item.value}`\r\n//     )).join('%c, ');\r\n//     console.log.apply(console, [msg].concat(args));\r\n//     // console.log(this);\r\n// };\r\n// window.printPipeline = function (task: any, prefix: string) {\r\n//     const pipeline = task.__pipeline;\r\n//     let currTask = pipeline.head;\r\n//     while (currTask) {\r\n//         window.printTask(currTask, prefix);\r\n//         currTask = currTask._downstream;\r\n//     }\r\n// };\r\n// window.showChain = function (chainHeadTask) {\r\n//     var chain = [];\r\n//     var task = chainHeadTask;\r\n//     while (task) {\r\n//         chain.push({\r\n//             task: task,\r\n//             up: task._upstream,\r\n//             down: task._downstream,\r\n//             idxInPipeline: task.__idxInPipeline\r\n//         });\r\n//         task = task._downstream;\r\n//     }\r\n//     return chain;\r\n// };\r\n// window.findTaskInChain = function (task, chainHeadTask) {\r\n//     let chain = window.showChain(chainHeadTask);\r\n//     let result = [];\r\n//     for (let i = 0; i < chain.length; i++) {\r\n//         let chainItem = chain[i];\r\n//         if (chainItem.task === task) {\r\n//             result.push(i);\r\n//         }\r\n//     }\r\n//     return result;\r\n// };\r\n// window.printChainAEachInChainB = function (chainHeadTaskA, chainHeadTaskB) {\r\n//     let chainA = window.showChain(chainHeadTaskA);\r\n//     for (let i = 0; i < chainA.length; i++) {\r\n//         console.log('chainAIdx:', i, 'inChainB:', window.findTaskInChain(chainA[i].task, chainHeadTaskB));\r\n//     }\r\n// };", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { parseDate, numericToNumber } from '../../util/number.js';\r\nimport { createHashMap, trim, hasOwn, isString, isNumber } from 'zrender/lib/core/util.js';\r\nimport { throwError } from '../../util/log.js';\r\n/**\r\n * Convert raw the value in to inner value in List.\r\n *\r\n * [Performance sensitive]\r\n *\r\n * [Caution]: this is the key logic of user value parser.\r\n * For backward compatibility, do not modify it until you have to!\r\n */\r\nexport function parseDataValue(value,\r\n// For high performance, do not omit the second param.\r\nopt) {\r\n  // Performance sensitive.\r\n  var dimType = opt && opt.type;\r\n  if (dimType === 'ordinal') {\r\n    // If given value is a category string\r\n    return value;\r\n  }\r\n  if (dimType === 'time'\r\n  // spead up when using timestamp\r\n  && !isNumber(value) && value != null && value !== '-') {\r\n    value = +parseDate(value);\r\n  }\r\n  // dimType defaults 'number'.\r\n  // If dimType is not ordinal and value is null or undefined or NaN or '-',\r\n  // parse to NaN.\r\n  // number-like string (like ' 123 ') can be converted to a number.\r\n  // where null/undefined or other string will be converted to NaN.\r\n  return value == null || value === '' ? NaN\r\n  // If string (like '-'), using '+' parse to NaN\r\n  // If object, also parse to NaN\r\n  : Number(value);\r\n}\r\n;\r\nvar valueParserMap = createHashMap({\r\n  'number': function (val) {\r\n    // Do not use `numericToNumber` here. We have `numericToNumber` by default.\r\n    // Here the number parser can have loose rule:\r\n    // enable to cut suffix: \"120px\" => 120, \"14%\" => 14.\r\n    return parseFloat(val);\r\n  },\r\n  'time': function (val) {\r\n    // return timestamp.\r\n    return +parseDate(val);\r\n  },\r\n  'trim': function (val) {\r\n    return isString(val) ? trim(val) : val;\r\n  }\r\n});\r\nexport function getRawValueParser(type) {\r\n  return valueParserMap.get(type);\r\n}\r\nvar ORDER_COMPARISON_OP_MAP = {\r\n  lt: function (lval, rval) {\r\n    return lval < rval;\r\n  },\r\n  lte: function (lval, rval) {\r\n    return lval <= rval;\r\n  },\r\n  gt: function (lval, rval) {\r\n    return lval > rval;\r\n  },\r\n  gte: function (lval, rval) {\r\n    return lval >= rval;\r\n  }\r\n};\r\nvar FilterOrderComparator = /** @class */function () {\r\n  function FilterOrderComparator(op, rval) {\r\n    if (!isNumber(rval)) {\r\n      var errMsg = '';\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        errMsg = 'rvalue of \"<\", \">\", \"<=\", \">=\" can only be number in filter.';\r\n      }\r\n      throwError(errMsg);\r\n    }\r\n    this._opFn = ORDER_COMPARISON_OP_MAP[op];\r\n    this._rvalFloat = numericToNumber(rval);\r\n  }\r\n  // Performance sensitive.\r\n  FilterOrderComparator.prototype.evaluate = function (lval) {\r\n    // Most cases is 'number', and typeof maybe 10 times faseter than parseFloat.\r\n    return isNumber(lval) ? this._opFn(lval, this._rvalFloat) : this._opFn(numericToNumber(lval), this._rvalFloat);\r\n  };\r\n  return FilterOrderComparator;\r\n}();\r\nvar SortOrderComparator = /** @class */function () {\r\n  /**\r\n   * @param order by default: 'asc'\r\n   * @param incomparable by default: Always on the tail.\r\n   *        That is, if 'asc' => 'max', if 'desc' => 'min'\r\n   *        See the definition of \"incomparable\" in [SORT_COMPARISON_RULE].\r\n   */\r\n  function SortOrderComparator(order, incomparable) {\r\n    var isDesc = order === 'desc';\r\n    this._resultLT = isDesc ? 1 : -1;\r\n    if (incomparable == null) {\r\n      incomparable = isDesc ? 'min' : 'max';\r\n    }\r\n    this._incomparable = incomparable === 'min' ? -Infinity : Infinity;\r\n  }\r\n  // See [SORT_COMPARISON_RULE].\r\n  // Performance sensitive.\r\n  SortOrderComparator.prototype.evaluate = function (lval, rval) {\r\n    // Most cases is 'number', and typeof maybe 10 times faseter than parseFloat.\r\n    var lvalFloat = isNumber(lval) ? lval : numericToNumber(lval);\r\n    var rvalFloat = isNumber(rval) ? rval : numericToNumber(rval);\r\n    var lvalNotNumeric = isNaN(lvalFloat);\r\n    var rvalNotNumeric = isNaN(rvalFloat);\r\n    if (lvalNotNumeric) {\r\n      lvalFloat = this._incomparable;\r\n    }\r\n    if (rvalNotNumeric) {\r\n      rvalFloat = this._incomparable;\r\n    }\r\n    if (lvalNotNumeric && rvalNotNumeric) {\r\n      var lvalIsStr = isString(lval);\r\n      var rvalIsStr = isString(rval);\r\n      if (lvalIsStr) {\r\n        lvalFloat = rvalIsStr ? lval : 0;\r\n      }\r\n      if (rvalIsStr) {\r\n        rvalFloat = lvalIsStr ? rval : 0;\r\n      }\r\n    }\r\n    return lvalFloat < rvalFloat ? this._resultLT : lvalFloat > rvalFloat ? -this._resultLT : 0;\r\n  };\r\n  return SortOrderComparator;\r\n}();\r\nexport { SortOrderComparator };\r\nvar FilterEqualityComparator = /** @class */function () {\r\n  function FilterEqualityComparator(isEq, rval) {\r\n    this._rval = rval;\r\n    this._isEQ = isEq;\r\n    this._rvalTypeof = typeof rval;\r\n    this._rvalFloat = numericToNumber(rval);\r\n  }\r\n  // Performance sensitive.\r\n  FilterEqualityComparator.prototype.evaluate = function (lval) {\r\n    var eqResult = lval === this._rval;\r\n    if (!eqResult) {\r\n      var lvalTypeof = typeof lval;\r\n      if (lvalTypeof !== this._rvalTypeof && (lvalTypeof === 'number' || this._rvalTypeof === 'number')) {\r\n        eqResult = numericToNumber(lval) === this._rvalFloat;\r\n      }\r\n    }\r\n    return this._isEQ ? eqResult : !eqResult;\r\n  };\r\n  return FilterEqualityComparator;\r\n}();\r\n/**\r\n * [FILTER_COMPARISON_RULE]\r\n * `lt`|`lte`|`gt`|`gte`:\r\n * + rval must be a number. And lval will be converted to number (`numericToNumber`) to compare.\r\n * `eq`:\r\n * + If same type, compare with `===`.\r\n * + If there is one number, convert to number (`numericToNumber`) to compare.\r\n * + Else return `false`.\r\n * `ne`:\r\n * + Not `eq`.\r\n *\r\n *\r\n * [SORT_COMPARISON_RULE]\r\n * All the values are grouped into three categories:\r\n * + \"numeric\" (number and numeric string)\r\n * + \"non-numeric-string\" (string that excluding numeric string)\r\n * + \"others\"\r\n * \"numeric\" vs \"numeric\": values are ordered by number order.\r\n * \"non-numeric-string\" vs \"non-numeric-string\": values are ordered by ES spec (#sec-abstract-relational-comparison).\r\n * \"others\" vs \"others\": do not change order (always return 0).\r\n * \"numeric\" vs \"non-numeric-string\": \"non-numeric-string\" is treated as \"incomparable\".\r\n * \"number\" vs \"others\": \"others\" is treated as \"incomparable\".\r\n * \"non-numeric-string\" vs \"others\": \"others\" is treated as \"incomparable\".\r\n * \"incomparable\" will be seen as -Infinity or Infinity (depends on the settings).\r\n * MEMO:\r\n *   Non-numeric string sort makes sense when we need to put the items with the same tag together.\r\n *   But if we support string sort, we still need to avoid the misleading like `'2' > '12'`,\r\n *   So we treat \"numeric-string\" sorted by number order rather than string comparison.\r\n *\r\n *\r\n * [CHECK_LIST_OF_THE_RULE_DESIGN]\r\n * + Do not support string comparison until required. And also need to\r\n *   avoid the misleading of \"2\" > \"12\".\r\n * + Should avoid the misleading case:\r\n *   `\" 22 \" gte \"22\"` is `true` but `\" 22 \" eq \"22\"` is `false`.\r\n * + JS bad case should be avoided: null <= 0, [] <= 0, ' ' <= 0, ...\r\n * + Only \"numeric\" can be converted to comparable number, otherwise converted to NaN.\r\n *   See `util/number.ts#numericToNumber`.\r\n *\r\n * @return If `op` is not `RelationalOperator`, return null;\r\n */\r\nexport function createFilterComparator(op, rval) {\r\n  return op === 'eq' || op === 'ne' ? new FilterEqualityComparator(op === 'eq', rval) : hasOwn(ORDER_COMPARISON_OP_MAP, op) ? new FilterOrderComparator(op, rval) : null;\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { SERIES_LAYOUT_BY_COLUMN, SOURCE_FORMAT_OBJECT_ROWS, SOURCE_FORMAT_ARRAY_ROWS } from '../../util/types.js';\r\nimport { normalizeToArray } from '../../util/model.js';\r\nimport { createHashMap, bind, each, hasOwn, map, clone, isObject, extend, isNumber } from 'zrender/lib/core/util.js';\r\nimport { getRawSourceItemGetter, getRawSourceDataCounter, getRawSourceValueGetter } from './dataProvider.js';\r\nimport { parseDataValue } from './dataValueHelper.js';\r\nimport { log, makePrintable, throwError } from '../../util/log.js';\r\nimport { createSource, detectSourceFormat } from '../Source.js';\r\n/**\r\n * TODO: disable writable.\r\n * This structure will be exposed to users.\r\n */\r\nvar ExternalSource = /** @class */function () {\r\n  function ExternalSource() {}\r\n  ExternalSource.prototype.getRawData = function () {\r\n    // Only built-in transform available.\r\n    throw new Error('not supported');\r\n  };\r\n  ExternalSource.prototype.getRawDataItem = function (dataIndex) {\r\n    // Only built-in transform available.\r\n    throw new Error('not supported');\r\n  };\r\n  ExternalSource.prototype.cloneRawData = function () {\r\n    return;\r\n  };\r\n  /**\r\n   * @return If dimension not found, return null/undefined.\r\n   */\r\n  ExternalSource.prototype.getDimensionInfo = function (dim) {\r\n    return;\r\n  };\r\n  /**\r\n   * dimensions defined if and only if either:\r\n   * (a) dataset.dimensions are declared.\r\n   * (b) dataset data include dimensions definitions in data (detected or via specified `sourceHeader`).\r\n   * If dimensions are defined, `dimensionInfoAll` is corresponding to\r\n   * the defined dimensions.\r\n   * Otherwise, `dimensionInfoAll` is determined by data columns.\r\n   * @return Always return an array (even empty array).\r\n   */\r\n  ExternalSource.prototype.cloneAllDimensionInfo = function () {\r\n    return;\r\n  };\r\n  ExternalSource.prototype.count = function () {\r\n    return;\r\n  };\r\n  /**\r\n   * Only support by dimension index.\r\n   * No need to support by dimension name in transform function,\r\n   * because transform function is not case-specific, no need to use name literally.\r\n   */\r\n  ExternalSource.prototype.retrieveValue = function (dataIndex, dimIndex) {\r\n    return;\r\n  };\r\n  ExternalSource.prototype.retrieveValueFromItem = function (dataItem, dimIndex) {\r\n    return;\r\n  };\r\n  ExternalSource.prototype.convertValue = function (rawVal, dimInfo) {\r\n    return parseDataValue(rawVal, dimInfo);\r\n  };\r\n  return ExternalSource;\r\n}();\r\nexport { ExternalSource };\r\nfunction createExternalSource(internalSource, externalTransform) {\r\n  var extSource = new ExternalSource();\r\n  var data = internalSource.data;\r\n  var sourceFormat = extSource.sourceFormat = internalSource.sourceFormat;\r\n  var sourceHeaderCount = internalSource.startIndex;\r\n  var errMsg = '';\r\n  if (internalSource.seriesLayoutBy !== SERIES_LAYOUT_BY_COLUMN) {\r\n    // For the logic simplicity in transformer, only 'culumn' is\r\n    // supported in data transform. Otherwise, the `dimensionsDefine`\r\n    // might be detected by 'row', which probably confuses users.\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      errMsg = '`seriesLayoutBy` of upstream dataset can only be \"column\" in data transform.';\r\n    }\r\n    throwError(errMsg);\r\n  }\r\n  // [MEMO]\r\n  // Create a new dimensions structure for exposing.\r\n  // Do not expose all dimension info to users directly.\r\n  // Because the dimension is probably auto detected from data and not might reliable.\r\n  // Should not lead the transformers to think that is reliable and return it.\r\n  // See [DIMENSION_INHERIT_RULE] in `sourceManager.ts`.\r\n  var dimensions = [];\r\n  var dimsByName = {};\r\n  var dimsDef = internalSource.dimensionsDefine;\r\n  if (dimsDef) {\r\n    each(dimsDef, function (dimDef, idx) {\r\n      var name = dimDef.name;\r\n      var dimDefExt = {\r\n        index: idx,\r\n        name: name,\r\n        displayName: dimDef.displayName\r\n      };\r\n      dimensions.push(dimDefExt);\r\n      // Users probably do not specify dimension name. For simplicity, data transform\r\n      // does not generate dimension name.\r\n      if (name != null) {\r\n        // Dimension name should not be duplicated.\r\n        // For simplicity, data transform forbids name duplication, do not generate\r\n        // new name like module `completeDimensions.ts` did, but just tell users.\r\n        var errMsg_1 = '';\r\n        if (hasOwn(dimsByName, name)) {\r\n          if (process.env.NODE_ENV !== 'production') {\r\n            errMsg_1 = 'dimension name \"' + name + '\" duplicated.';\r\n          }\r\n          throwError(errMsg_1);\r\n        }\r\n        dimsByName[name] = dimDefExt;\r\n      }\r\n    });\r\n  }\r\n  // If dimension definitions are not defined and can not be detected.\r\n  // e.g., pure data `[[11, 22], ...]`.\r\n  else {\r\n    for (var i = 0; i < internalSource.dimensionsDetectedCount || 0; i++) {\r\n      // Do not generete name or anything others. The consequence process in\r\n      // `transform` or `series` probably have there own name generation strategry.\r\n      dimensions.push({\r\n        index: i\r\n      });\r\n    }\r\n  }\r\n  // Implement public methods:\r\n  var rawItemGetter = getRawSourceItemGetter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\r\n  if (externalTransform.__isBuiltIn) {\r\n    extSource.getRawDataItem = function (dataIndex) {\r\n      return rawItemGetter(data, sourceHeaderCount, dimensions, dataIndex);\r\n    };\r\n    extSource.getRawData = bind(getRawData, null, internalSource);\r\n  }\r\n  extSource.cloneRawData = bind(cloneRawData, null, internalSource);\r\n  var rawCounter = getRawSourceDataCounter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\r\n  extSource.count = bind(rawCounter, null, data, sourceHeaderCount, dimensions);\r\n  var rawValueGetter = getRawSourceValueGetter(sourceFormat);\r\n  extSource.retrieveValue = function (dataIndex, dimIndex) {\r\n    var rawItem = rawItemGetter(data, sourceHeaderCount, dimensions, dataIndex);\r\n    return retrieveValueFromItem(rawItem, dimIndex);\r\n  };\r\n  var retrieveValueFromItem = extSource.retrieveValueFromItem = function (dataItem, dimIndex) {\r\n    if (dataItem == null) {\r\n      return;\r\n    }\r\n    var dimDef = dimensions[dimIndex];\r\n    // When `dimIndex` is `null`, `rawValueGetter` return the whole item.\r\n    if (dimDef) {\r\n      return rawValueGetter(dataItem, dimIndex, dimDef.name);\r\n    }\r\n  };\r\n  extSource.getDimensionInfo = bind(getDimensionInfo, null, dimensions, dimsByName);\r\n  extSource.cloneAllDimensionInfo = bind(cloneAllDimensionInfo, null, dimensions);\r\n  return extSource;\r\n}\r\nfunction getRawData(upstream) {\r\n  var sourceFormat = upstream.sourceFormat;\r\n  if (!isSupportedSourceFormat(sourceFormat)) {\r\n    var errMsg = '';\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      errMsg = '`getRawData` is not supported in source format ' + sourceFormat;\r\n    }\r\n    throwError(errMsg);\r\n  }\r\n  return upstream.data;\r\n}\r\nfunction cloneRawData(upstream) {\r\n  var sourceFormat = upstream.sourceFormat;\r\n  var data = upstream.data;\r\n  if (!isSupportedSourceFormat(sourceFormat)) {\r\n    var errMsg = '';\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      errMsg = '`cloneRawData` is not supported in source format ' + sourceFormat;\r\n    }\r\n    throwError(errMsg);\r\n  }\r\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\r\n    var result = [];\r\n    for (var i = 0, len = data.length; i < len; i++) {\r\n      // Not strictly clone for performance\r\n      result.push(data[i].slice());\r\n    }\r\n    return result;\r\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\r\n    var result = [];\r\n    for (var i = 0, len = data.length; i < len; i++) {\r\n      // Not strictly clone for performance\r\n      result.push(extend({}, data[i]));\r\n    }\r\n    return result;\r\n  }\r\n}\r\nfunction getDimensionInfo(dimensions, dimsByName, dim) {\r\n  if (dim == null) {\r\n    return;\r\n  }\r\n  // Keep the same logic as `List::getDimension` did.\r\n  if (isNumber(dim)\r\n  // If being a number-like string but not being defined a dimension name.\r\n  || !isNaN(dim) && !hasOwn(dimsByName, dim)) {\r\n    return dimensions[dim];\r\n  } else if (hasOwn(dimsByName, dim)) {\r\n    return dimsByName[dim];\r\n  }\r\n}\r\nfunction cloneAllDimensionInfo(dimensions) {\r\n  return clone(dimensions);\r\n}\r\nvar externalTransformMap = createHashMap();\r\nexport function registerExternalTransform(externalTransform) {\r\n  externalTransform = clone(externalTransform);\r\n  var type = externalTransform.type;\r\n  var errMsg = '';\r\n  if (!type) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      errMsg = 'Must have a `type` when `registerTransform`.';\r\n    }\r\n    throwError(errMsg);\r\n  }\r\n  var typeParsed = type.split(':');\r\n  if (typeParsed.length !== 2) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      errMsg = 'Name must include namespace like \"ns:regression\".';\r\n    }\r\n    throwError(errMsg);\r\n  }\r\n  // Namespace 'echarts:xxx' is official namespace, where the transforms should\r\n  // be called directly via 'xxx' rather than 'echarts:xxx'.\r\n  var isBuiltIn = false;\r\n  if (typeParsed[0] === 'echarts') {\r\n    type = typeParsed[1];\r\n    isBuiltIn = true;\r\n  }\r\n  externalTransform.__isBuiltIn = isBuiltIn;\r\n  externalTransformMap.set(type, externalTransform);\r\n}\r\nexport function applyDataTransform(rawTransOption, sourceList, infoForPrint) {\r\n  var pipedTransOption = normalizeToArray(rawTransOption);\r\n  var pipeLen = pipedTransOption.length;\r\n  var errMsg = '';\r\n  if (!pipeLen) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      errMsg = 'If `transform` declared, it should at least contain one transform.';\r\n    }\r\n    throwError(errMsg);\r\n  }\r\n  for (var i = 0, len = pipeLen; i < len; i++) {\r\n    var transOption = pipedTransOption[i];\r\n    sourceList = applySingleDataTransform(transOption, sourceList, infoForPrint, pipeLen === 1 ? null : i);\r\n    // piped transform only support single input, except the fist one.\r\n    // piped transform only support single output, except the last one.\r\n    if (i !== len - 1) {\r\n      sourceList.length = Math.max(sourceList.length, 1);\r\n    }\r\n  }\r\n  return sourceList;\r\n}\r\nfunction applySingleDataTransform(transOption, upSourceList, infoForPrint,\r\n// If `pipeIndex` is null/undefined, no piped transform.\r\npipeIndex) {\r\n  var errMsg = '';\r\n  if (!upSourceList.length) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      errMsg = 'Must have at least one upstream dataset.';\r\n    }\r\n    throwError(errMsg);\r\n  }\r\n  if (!isObject(transOption)) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      errMsg = 'transform declaration must be an object rather than ' + typeof transOption + '.';\r\n    }\r\n    throwError(errMsg);\r\n  }\r\n  var transType = transOption.type;\r\n  var externalTransform = externalTransformMap.get(transType);\r\n  if (!externalTransform) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      errMsg = 'Can not find transform on type \"' + transType + '\".';\r\n    }\r\n    throwError(errMsg);\r\n  }\r\n  // Prepare source\r\n  var extUpSourceList = map(upSourceList, function (upSource) {\r\n    return createExternalSource(upSource, externalTransform);\r\n  });\r\n  var resultList = normalizeToArray(externalTransform.transform({\r\n    upstream: extUpSourceList[0],\r\n    upstreamList: extUpSourceList,\r\n    config: clone(transOption.config)\r\n  }));\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    if (transOption.print) {\r\n      var printStrArr = map(resultList, function (extSource) {\r\n        var pipeIndexStr = pipeIndex != null ? ' === pipe index: ' + pipeIndex : '';\r\n        return ['=== dataset index: ' + infoForPrint.datasetIndex + pipeIndexStr + ' ===', '- transform result data:', makePrintable(extSource.data), '- transform result dimensions:', makePrintable(extSource.dimensions)].join('\\n');\r\n      }).join('\\n');\r\n      log(printStrArr);\r\n    }\r\n  }\r\n  return map(resultList, function (result, resultIndex) {\r\n    var errMsg = '';\r\n    if (!isObject(result)) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        errMsg = 'A transform should not return some empty results.';\r\n      }\r\n      throwError(errMsg);\r\n    }\r\n    if (!result.data) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        errMsg = 'Transform result data should be not be null or undefined';\r\n      }\r\n      throwError(errMsg);\r\n    }\r\n    var sourceFormat = detectSourceFormat(result.data);\r\n    if (!isSupportedSourceFormat(sourceFormat)) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        errMsg = 'Transform result data should be array rows or object rows.';\r\n      }\r\n      throwError(errMsg);\r\n    }\r\n    var resultMetaRawOption;\r\n    var firstUpSource = upSourceList[0];\r\n    /**\r\n     * Intuitively, the end users known the content of the original `dataset.source`,\r\n     * calucating the transform result in mind.\r\n     * Suppose the original `dataset.source` is:\r\n     * ```js\r\n     * [\r\n     *     ['product', '2012', '2013', '2014', '2015'],\r\n     *     ['AAA', 41.1, 30.4, 65.1, 53.3],\r\n     *     ['BBB', 86.5, 92.1, 85.7, 83.1],\r\n     *     ['CCC', 24.1, 67.2, 79.5, 86.4]\r\n     * ]\r\n     * ```\r\n     * The dimension info have to be detected from the source data.\r\n     * Some of the transformers (like filter, sort) will follow the dimension info\r\n     * of upstream, while others use new dimensions (like aggregate).\r\n     * Transformer can output a field `dimensions` to define the its own output dimensions.\r\n     * We also allow transformers to ignore the output `dimensions` field, and\r\n     * inherit the upstream dimensions definition. It can reduce the burden of handling\r\n     * dimensions in transformers.\r\n     *\r\n     * See also [DIMENSION_INHERIT_RULE] in `sourceManager.ts`.\r\n     */\r\n    if (firstUpSource && resultIndex === 0\r\n    // If transformer returns `dimensions`, it means that the transformer has different\r\n    // dimensions definitions. We do not inherit anything from upstream.\r\n    && !result.dimensions) {\r\n      var startIndex = firstUpSource.startIndex;\r\n      // We copy the header of upstream to the result, because:\r\n      // (1) The returned data always does not contain header line and can not be used\r\n      // as dimension-detection. In this case we can not use \"detected dimensions\" of\r\n      // upstream directly, because it might be detected based on different `seriesLayoutBy`.\r\n      // (2) We should support that the series read the upstream source in `seriesLayoutBy: 'row'`.\r\n      // So the original detected header should be add to the result, otherwise they can not be read.\r\n      if (startIndex) {\r\n        result.data = firstUpSource.data.slice(0, startIndex).concat(result.data);\r\n      }\r\n      resultMetaRawOption = {\r\n        seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\r\n        sourceHeader: startIndex,\r\n        dimensions: firstUpSource.metaRawOption.dimensions\r\n      };\r\n    } else {\r\n      resultMetaRawOption = {\r\n        seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\r\n        sourceHeader: 0,\r\n        dimensions: result.dimensions\r\n      };\r\n    }\r\n    return createSource(result.data, resultMetaRawOption, null);\r\n  });\r\n}\r\nfunction isSupportedSourceFormat(sourceFormat) {\r\n  return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS || sourceFormat === SOURCE_FORMAT_OBJECT_ROWS;\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { assert, clone, createHashMap, isFunction, keys, map, reduce } from 'zrender/lib/core/util.js';\r\nimport { parseDataValue } from './helper/dataValueHelper.js';\r\nimport { shouldRetrieveDataByName } from './Source.js';\r\nvar UNDEFINED = 'undefined';\r\n/* global Float64Array, Int32Array, Uint32Array, Uint16Array */\r\n// Caution: MUST not use `new CtorUint32Array(arr, 0, len)`, because the Ctor of array is\r\n// different from the Ctor of typed array.\r\nexport var CtorUint32Array = typeof Uint32Array === UNDEFINED ? Array : Uint32Array;\r\nexport var CtorUint16Array = typeof Uint16Array === UNDEFINED ? Array : Uint16Array;\r\nexport var CtorInt32Array = typeof Int32Array === UNDEFINED ? Array : Int32Array;\r\nexport var CtorFloat64Array = typeof Float64Array === UNDEFINED ? Array : Float64Array;\r\n/**\r\n * Multi dimensional data store\r\n */\r\nvar dataCtors = {\r\n  'float': CtorFloat64Array,\r\n  'int': CtorInt32Array,\r\n  // Ordinal data type can be string or int\r\n  'ordinal': Array,\r\n  'number': Array,\r\n  'time': CtorFloat64Array\r\n};\r\nvar defaultDimValueGetters;\r\nfunction getIndicesCtor(rawCount) {\r\n  // The possible max value in this._indicies is always this._rawCount despite of filtering.\r\n  return rawCount > 65535 ? CtorUint32Array : CtorUint16Array;\r\n}\r\n;\r\nfunction getInitialExtent() {\r\n  return [Infinity, -Infinity];\r\n}\r\n;\r\nfunction cloneChunk(originalChunk) {\r\n  var Ctor = originalChunk.constructor;\r\n  // Only shallow clone is enough when Array.\r\n  return Ctor === Array ? originalChunk.slice() : new Ctor(originalChunk);\r\n}\r\nfunction prepareStore(store, dimIdx, dimType, end, append) {\r\n  var DataCtor = dataCtors[dimType || 'float'];\r\n  if (append) {\r\n    var oldStore = store[dimIdx];\r\n    var oldLen = oldStore && oldStore.length;\r\n    if (!(oldLen === end)) {\r\n      var newStore = new DataCtor(end);\r\n      // The cost of the copy is probably inconsiderable\r\n      // within the initial chunkSize.\r\n      for (var j = 0; j < oldLen; j++) {\r\n        newStore[j] = oldStore[j];\r\n      }\r\n      store[dimIdx] = newStore;\r\n    }\r\n  } else {\r\n    store[dimIdx] = new DataCtor(end);\r\n  }\r\n}\r\n;\r\n/**\r\n * Basically, DataStore API keep immutable.\r\n */\r\nvar DataStore = /** @class */function () {\r\n  function DataStore() {\r\n    this._chunks = [];\r\n    // It will not be calculated until needed.\r\n    this._rawExtent = [];\r\n    this._extent = [];\r\n    this._count = 0;\r\n    this._rawCount = 0;\r\n    this._calcDimNameToIdx = createHashMap();\r\n  }\r\n  /**\r\n   * Initialize from data\r\n   */\r\n  DataStore.prototype.initData = function (provider, inputDimensions, dimValueGetter) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      assert(isFunction(provider.getItem) && isFunction(provider.count), 'Invalid data provider.');\r\n    }\r\n    this._provider = provider;\r\n    // Clear\r\n    this._chunks = [];\r\n    this._indices = null;\r\n    this.getRawIndex = this._getRawIdxIdentity;\r\n    var source = provider.getSource();\r\n    var defaultGetter = this.defaultDimValueGetter = defaultDimValueGetters[source.sourceFormat];\r\n    // Default dim value getter\r\n    this._dimValueGetter = dimValueGetter || defaultGetter;\r\n    // Reset raw extent.\r\n    this._rawExtent = [];\r\n    var willRetrieveDataByName = shouldRetrieveDataByName(source);\r\n    this._dimensions = map(inputDimensions, function (dim) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        if (willRetrieveDataByName) {\r\n          assert(dim.property != null);\r\n        }\r\n      }\r\n      return {\r\n        // Only pick these two props. Not leak other properties like orderMeta.\r\n        type: dim.type,\r\n        property: dim.property\r\n      };\r\n    });\r\n    this._initDataFromProvider(0, provider.count());\r\n  };\r\n  DataStore.prototype.getProvider = function () {\r\n    return this._provider;\r\n  };\r\n  /**\r\n   * Caution: even when a `source` instance owned by a series, the created data store\r\n   * may still be shared by different sereis (the source hash does not use all `source`\r\n   * props, see `sourceManager`). In this case, the `source` props that are not used in\r\n   * hash (like `source.dimensionDefine`) probably only belongs to a certain series and\r\n   * thus should not be fetch here.\r\n   */\r\n  DataStore.prototype.getSource = function () {\r\n    return this._provider.getSource();\r\n  };\r\n  /**\r\n   * @caution Only used in dataStack.\r\n   */\r\n  DataStore.prototype.ensureCalculationDimension = function (dimName, type) {\r\n    var calcDimNameToIdx = this._calcDimNameToIdx;\r\n    var dimensions = this._dimensions;\r\n    var calcDimIdx = calcDimNameToIdx.get(dimName);\r\n    if (calcDimIdx != null) {\r\n      if (dimensions[calcDimIdx].type === type) {\r\n        return calcDimIdx;\r\n      }\r\n    } else {\r\n      calcDimIdx = dimensions.length;\r\n    }\r\n    dimensions[calcDimIdx] = {\r\n      type: type\r\n    };\r\n    calcDimNameToIdx.set(dimName, calcDimIdx);\r\n    this._chunks[calcDimIdx] = new dataCtors[type || 'float'](this._rawCount);\r\n    this._rawExtent[calcDimIdx] = getInitialExtent();\r\n    return calcDimIdx;\r\n  };\r\n  DataStore.prototype.collectOrdinalMeta = function (dimIdx, ordinalMeta) {\r\n    var chunk = this._chunks[dimIdx];\r\n    var dim = this._dimensions[dimIdx];\r\n    var rawExtents = this._rawExtent;\r\n    var offset = dim.ordinalOffset || 0;\r\n    var len = chunk.length;\r\n    if (offset === 0) {\r\n      // We need to reset the rawExtent if collect is from start.\r\n      // Because this dimension may be guessed as number and calcuating a wrong extent.\r\n      rawExtents[dimIdx] = getInitialExtent();\r\n    }\r\n    var dimRawExtent = rawExtents[dimIdx];\r\n    // Parse from previous data offset. len may be changed after appendData\r\n    for (var i = offset; i < len; i++) {\r\n      var val = chunk[i] = ordinalMeta.parseAndCollect(chunk[i]);\r\n      if (!isNaN(val)) {\r\n        dimRawExtent[0] = Math.min(val, dimRawExtent[0]);\r\n        dimRawExtent[1] = Math.max(val, dimRawExtent[1]);\r\n      }\r\n    }\r\n    dim.ordinalMeta = ordinalMeta;\r\n    dim.ordinalOffset = len;\r\n    dim.type = 'ordinal'; // Force to be ordinal\r\n  };\r\n  DataStore.prototype.getOrdinalMeta = function (dimIdx) {\r\n    var dimInfo = this._dimensions[dimIdx];\r\n    var ordinalMeta = dimInfo.ordinalMeta;\r\n    return ordinalMeta;\r\n  };\r\n  DataStore.prototype.getDimensionProperty = function (dimIndex) {\r\n    var item = this._dimensions[dimIndex];\r\n    return item && item.property;\r\n  };\r\n  /**\r\n   * Caution: Can be only called on raw data (before `this._indices` created).\r\n   */\r\n  DataStore.prototype.appendData = function (data) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      assert(!this._indices, 'appendData can only be called on raw data.');\r\n    }\r\n    var provider = this._provider;\r\n    var start = this.count();\r\n    provider.appendData(data);\r\n    var end = provider.count();\r\n    if (!provider.persistent) {\r\n      end += start;\r\n    }\r\n    if (start < end) {\r\n      this._initDataFromProvider(start, end, true);\r\n    }\r\n    return [start, end];\r\n  };\r\n  DataStore.prototype.appendValues = function (values, minFillLen) {\r\n    var chunks = this._chunks;\r\n    var dimensions = this._dimensions;\r\n    var dimLen = dimensions.length;\r\n    var rawExtent = this._rawExtent;\r\n    var start = this.count();\r\n    var end = start + Math.max(values.length, minFillLen || 0);\r\n    for (var i = 0; i < dimLen; i++) {\r\n      var dim = dimensions[i];\r\n      prepareStore(chunks, i, dim.type, end, true);\r\n    }\r\n    var emptyDataItem = [];\r\n    for (var idx = start; idx < end; idx++) {\r\n      var sourceIdx = idx - start;\r\n      // Store the data by dimensions\r\n      for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {\r\n        var dim = dimensions[dimIdx];\r\n        var val = defaultDimValueGetters.arrayRows.call(this, values[sourceIdx] || emptyDataItem, dim.property, sourceIdx, dimIdx);\r\n        chunks[dimIdx][idx] = val;\r\n        var dimRawExtent = rawExtent[dimIdx];\r\n        val < dimRawExtent[0] && (dimRawExtent[0] = val);\r\n        val > dimRawExtent[1] && (dimRawExtent[1] = val);\r\n      }\r\n    }\r\n    this._rawCount = this._count = end;\r\n    return {\r\n      start: start,\r\n      end: end\r\n    };\r\n  };\r\n  DataStore.prototype._initDataFromProvider = function (start, end, append) {\r\n    var provider = this._provider;\r\n    var chunks = this._chunks;\r\n    var dimensions = this._dimensions;\r\n    var dimLen = dimensions.length;\r\n    var rawExtent = this._rawExtent;\r\n    var dimNames = map(dimensions, function (dim) {\r\n      return dim.property;\r\n    });\r\n    for (var i = 0; i < dimLen; i++) {\r\n      var dim = dimensions[i];\r\n      if (!rawExtent[i]) {\r\n        rawExtent[i] = getInitialExtent();\r\n      }\r\n      prepareStore(chunks, i, dim.type, end, append);\r\n    }\r\n    if (provider.fillStorage) {\r\n      provider.fillStorage(start, end, chunks, rawExtent);\r\n    } else {\r\n      var dataItem = [];\r\n      for (var idx = start; idx < end; idx++) {\r\n        // NOTICE: Try not to write things into dataItem\r\n        dataItem = provider.getItem(idx, dataItem);\r\n        // Each data item is value\r\n        // [1, 2]\r\n        // 2\r\n        // Bar chart, line chart which uses category axis\r\n        // only gives the 'y' value. 'x' value is the indices of category\r\n        // Use a tempValue to normalize the value to be a (x, y) value\r\n        // Store the data by dimensions\r\n        for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {\r\n          var dimStorage = chunks[dimIdx];\r\n          // PENDING NULL is empty or zero\r\n          var val = this._dimValueGetter(dataItem, dimNames[dimIdx], idx, dimIdx);\r\n          dimStorage[idx] = val;\r\n          var dimRawExtent = rawExtent[dimIdx];\r\n          val < dimRawExtent[0] && (dimRawExtent[0] = val);\r\n          val > dimRawExtent[1] && (dimRawExtent[1] = val);\r\n        }\r\n      }\r\n    }\r\n    if (!provider.persistent && provider.clean) {\r\n      // Clean unused data if data source is typed array.\r\n      provider.clean();\r\n    }\r\n    this._rawCount = this._count = end;\r\n    // Reset data extent\r\n    this._extent = [];\r\n  };\r\n  DataStore.prototype.count = function () {\r\n    return this._count;\r\n  };\r\n  /**\r\n   * Get value. Return NaN if idx is out of range.\r\n   */\r\n  DataStore.prototype.get = function (dim, idx) {\r\n    if (!(idx >= 0 && idx < this._count)) {\r\n      return NaN;\r\n    }\r\n    var dimStore = this._chunks[dim];\r\n    return dimStore ? dimStore[this.getRawIndex(idx)] : NaN;\r\n  };\r\n  DataStore.prototype.getValues = function (dimensions, idx) {\r\n    var values = [];\r\n    var dimArr = [];\r\n    if (idx == null) {\r\n      idx = dimensions;\r\n      // TODO get all from store?\r\n      dimensions = [];\r\n      // All dimensions\r\n      for (var i = 0; i < this._dimensions.length; i++) {\r\n        dimArr.push(i);\r\n      }\r\n    } else {\r\n      dimArr = dimensions;\r\n    }\r\n    for (var i = 0, len = dimArr.length; i < len; i++) {\r\n      values.push(this.get(dimArr[i], idx));\r\n    }\r\n    return values;\r\n  };\r\n  /**\r\n   * @param dim concrete dim\r\n   */\r\n  DataStore.prototype.getByRawIndex = function (dim, rawIdx) {\r\n    if (!(rawIdx >= 0 && rawIdx < this._rawCount)) {\r\n      return NaN;\r\n    }\r\n    var dimStore = this._chunks[dim];\r\n    return dimStore ? dimStore[rawIdx] : NaN;\r\n  };\r\n  /**\r\n   * Get sum of data in one dimension\r\n   */\r\n  DataStore.prototype.getSum = function (dim) {\r\n    var dimData = this._chunks[dim];\r\n    var sum = 0;\r\n    if (dimData) {\r\n      for (var i = 0, len = this.count(); i < len; i++) {\r\n        var value = this.get(dim, i);\r\n        if (!isNaN(value)) {\r\n          sum += value;\r\n        }\r\n      }\r\n    }\r\n    return sum;\r\n  };\r\n  /**\r\n   * Get median of data in one dimension\r\n   */\r\n  DataStore.prototype.getMedian = function (dim) {\r\n    var dimDataArray = [];\r\n    // map all data of one dimension\r\n    this.each([dim], function (val) {\r\n      if (!isNaN(val)) {\r\n        dimDataArray.push(val);\r\n      }\r\n    });\r\n    // TODO\r\n    // Use quick select?\r\n    var sortedDimDataArray = dimDataArray.sort(function (a, b) {\r\n      return a - b;\r\n    });\r\n    var len = this.count();\r\n    // calculate median\r\n    return len === 0 ? 0 : len % 2 === 1 ? sortedDimDataArray[(len - 1) / 2] : (sortedDimDataArray[len / 2] + sortedDimDataArray[len / 2 - 1]) / 2;\r\n  };\r\n  /**\r\n   * Retrieve the index with given raw data index.\r\n   */\r\n  DataStore.prototype.indexOfRawIndex = function (rawIndex) {\r\n    if (rawIndex >= this._rawCount || rawIndex < 0) {\r\n      return -1;\r\n    }\r\n    if (!this._indices) {\r\n      return rawIndex;\r\n    }\r\n    // Indices are ascending\r\n    var indices = this._indices;\r\n    // If rawIndex === dataIndex\r\n    var rawDataIndex = indices[rawIndex];\r\n    if (rawDataIndex != null && rawDataIndex < this._count && rawDataIndex === rawIndex) {\r\n      return rawIndex;\r\n    }\r\n    var left = 0;\r\n    var right = this._count - 1;\r\n    while (left <= right) {\r\n      var mid = (left + right) / 2 | 0;\r\n      if (indices[mid] < rawIndex) {\r\n        left = mid + 1;\r\n      } else if (indices[mid] > rawIndex) {\r\n        right = mid - 1;\r\n      } else {\r\n        return mid;\r\n      }\r\n    }\r\n    return -1;\r\n  };\r\n  /**\r\n   * Retrieve the index of nearest value.\r\n   * @param dim\r\n   * @param value\r\n   * @param [maxDistance=Infinity]\r\n   * @return If and only if multiple indices have\r\n   *         the same value, they are put to the result.\r\n   */\r\n  DataStore.prototype.indicesOfNearest = function (dim, value, maxDistance) {\r\n    var chunks = this._chunks;\r\n    var dimData = chunks[dim];\r\n    var nearestIndices = [];\r\n    if (!dimData) {\r\n      return nearestIndices;\r\n    }\r\n    if (maxDistance == null) {\r\n      maxDistance = Infinity;\r\n    }\r\n    var minDist = Infinity;\r\n    var minDiff = -1;\r\n    var nearestIndicesLen = 0;\r\n    // Check the test case of `test/ut/spec/data/SeriesData.js`.\r\n    for (var i = 0, len = this.count(); i < len; i++) {\r\n      var dataIndex = this.getRawIndex(i);\r\n      var diff = value - dimData[dataIndex];\r\n      var dist = Math.abs(diff);\r\n      if (dist <= maxDistance) {\r\n        // When the `value` is at the middle of `this.get(dim, i)` and `this.get(dim, i+1)`,\r\n        // we'd better not push both of them to `nearestIndices`, otherwise it is easy to\r\n        // get more than one item in `nearestIndices` (more specifically, in `tooltip`).\r\n        // So we choose the one that `diff >= 0` in this case.\r\n        // But if `this.get(dim, i)` and `this.get(dim, j)` get the same value, both of them\r\n        // should be push to `nearestIndices`.\r\n        if (dist < minDist || dist === minDist && diff >= 0 && minDiff < 0) {\r\n          minDist = dist;\r\n          minDiff = diff;\r\n          nearestIndicesLen = 0;\r\n        }\r\n        if (diff === minDiff) {\r\n          nearestIndices[nearestIndicesLen++] = i;\r\n        }\r\n      }\r\n    }\r\n    nearestIndices.length = nearestIndicesLen;\r\n    return nearestIndices;\r\n  };\r\n  DataStore.prototype.getIndices = function () {\r\n    var newIndices;\r\n    var indices = this._indices;\r\n    if (indices) {\r\n      var Ctor = indices.constructor;\r\n      var thisCount = this._count;\r\n      // `new Array(a, b, c)` is different from `new Uint32Array(a, b, c)`.\r\n      if (Ctor === Array) {\r\n        newIndices = new Ctor(thisCount);\r\n        for (var i = 0; i < thisCount; i++) {\r\n          newIndices[i] = indices[i];\r\n        }\r\n      } else {\r\n        newIndices = new Ctor(indices.buffer, 0, thisCount);\r\n      }\r\n    } else {\r\n      var Ctor = getIndicesCtor(this._rawCount);\r\n      newIndices = new Ctor(this.count());\r\n      for (var i = 0; i < newIndices.length; i++) {\r\n        newIndices[i] = i;\r\n      }\r\n    }\r\n    return newIndices;\r\n  };\r\n  /**\r\n   * Data filter.\r\n   */\r\n  DataStore.prototype.filter = function (dims, cb) {\r\n    if (!this._count) {\r\n      return this;\r\n    }\r\n    var newStore = this.clone();\r\n    var count = newStore.count();\r\n    var Ctor = getIndicesCtor(newStore._rawCount);\r\n    var newIndices = new Ctor(count);\r\n    var value = [];\r\n    var dimSize = dims.length;\r\n    var offset = 0;\r\n    var dim0 = dims[0];\r\n    var chunks = newStore._chunks;\r\n    for (var i = 0; i < count; i++) {\r\n      var keep = void 0;\r\n      var rawIdx = newStore.getRawIndex(i);\r\n      // Simple optimization\r\n      if (dimSize === 0) {\r\n        keep = cb(i);\r\n      } else if (dimSize === 1) {\r\n        var val = chunks[dim0][rawIdx];\r\n        keep = cb(val, i);\r\n      } else {\r\n        var k = 0;\r\n        for (; k < dimSize; k++) {\r\n          value[k] = chunks[dims[k]][rawIdx];\r\n        }\r\n        value[k] = i;\r\n        keep = cb.apply(null, value);\r\n      }\r\n      if (keep) {\r\n        newIndices[offset++] = rawIdx;\r\n      }\r\n    }\r\n    // Set indices after filtered.\r\n    if (offset < count) {\r\n      newStore._indices = newIndices;\r\n    }\r\n    newStore._count = offset;\r\n    // Reset data extent\r\n    newStore._extent = [];\r\n    newStore._updateGetRawIdx();\r\n    return newStore;\r\n  };\r\n  /**\r\n   * Select data in range. (For optimization of filter)\r\n   * (Manually inline code, support 5 million data filtering in data zoom.)\r\n   */\r\n  DataStore.prototype.selectRange = function (range) {\r\n    var newStore = this.clone();\r\n    var len = newStore._count;\r\n    if (!len) {\r\n      return this;\r\n    }\r\n    var dims = keys(range);\r\n    var dimSize = dims.length;\r\n    if (!dimSize) {\r\n      return this;\r\n    }\r\n    var originalCount = newStore.count();\r\n    var Ctor = getIndicesCtor(newStore._rawCount);\r\n    var newIndices = new Ctor(originalCount);\r\n    var offset = 0;\r\n    var dim0 = dims[0];\r\n    var min = range[dim0][0];\r\n    var max = range[dim0][1];\r\n    var storeArr = newStore._chunks;\r\n    var quickFinished = false;\r\n    if (!newStore._indices) {\r\n      // Extreme optimization for common case. About 2x faster in chrome.\r\n      var idx = 0;\r\n      if (dimSize === 1) {\r\n        var dimStorage = storeArr[dims[0]];\r\n        for (var i = 0; i < len; i++) {\r\n          var val = dimStorage[i];\r\n          // NaN will not be filtered. Consider the case, in line chart, empty\r\n          // value indicates the line should be broken. But for the case like\r\n          // scatter plot, a data item with empty value will not be rendered,\r\n          // but the axis extent may be effected if some other dim of the data\r\n          // item has value. Fortunately it is not a significant negative effect.\r\n          if (val >= min && val <= max || isNaN(val)) {\r\n            newIndices[offset++] = idx;\r\n          }\r\n          idx++;\r\n        }\r\n        quickFinished = true;\r\n      } else if (dimSize === 2) {\r\n        var dimStorage = storeArr[dims[0]];\r\n        var dimStorage2 = storeArr[dims[1]];\r\n        var min2 = range[dims[1]][0];\r\n        var max2 = range[dims[1]][1];\r\n        for (var i = 0; i < len; i++) {\r\n          var val = dimStorage[i];\r\n          var val2 = dimStorage2[i];\r\n          // Do not filter NaN, see comment above.\r\n          if ((val >= min && val <= max || isNaN(val)) && (val2 >= min2 && val2 <= max2 || isNaN(val2))) {\r\n            newIndices[offset++] = idx;\r\n          }\r\n          idx++;\r\n        }\r\n        quickFinished = true;\r\n      }\r\n    }\r\n    if (!quickFinished) {\r\n      if (dimSize === 1) {\r\n        for (var i = 0; i < originalCount; i++) {\r\n          var rawIndex = newStore.getRawIndex(i);\r\n          var val = storeArr[dims[0]][rawIndex];\r\n          // Do not filter NaN, see comment above.\r\n          if (val >= min && val <= max || isNaN(val)) {\r\n            newIndices[offset++] = rawIndex;\r\n          }\r\n        }\r\n      } else {\r\n        for (var i = 0; i < originalCount; i++) {\r\n          var keep = true;\r\n          var rawIndex = newStore.getRawIndex(i);\r\n          for (var k = 0; k < dimSize; k++) {\r\n            var dimk = dims[k];\r\n            var val = storeArr[dimk][rawIndex];\r\n            // Do not filter NaN, see comment above.\r\n            if (val < range[dimk][0] || val > range[dimk][1]) {\r\n              keep = false;\r\n            }\r\n          }\r\n          if (keep) {\r\n            newIndices[offset++] = newStore.getRawIndex(i);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // Set indices after filtered.\r\n    if (offset < originalCount) {\r\n      newStore._indices = newIndices;\r\n    }\r\n    newStore._count = offset;\r\n    // Reset data extent\r\n    newStore._extent = [];\r\n    newStore._updateGetRawIdx();\r\n    return newStore;\r\n  };\r\n  // /**\r\n  //  * Data mapping to a plain array\r\n  //  */\r\n  // mapArray(dims: DimensionIndex[], cb: MapArrayCb): any[] {\r\n  //     const result: any[] = [];\r\n  //     this.each(dims, function () {\r\n  //         result.push(cb && (cb as MapArrayCb).apply(null, arguments));\r\n  //     });\r\n  //     return result;\r\n  // }\r\n  /**\r\n   * Data mapping to a new List with given dimensions\r\n   */\r\n  DataStore.prototype.map = function (dims, cb) {\r\n    // TODO only clone picked chunks.\r\n    var target = this.clone(dims);\r\n    this._updateDims(target, dims, cb);\r\n    return target;\r\n  };\r\n  /**\r\n   * @caution Danger!! Only used in dataStack.\r\n   */\r\n  DataStore.prototype.modify = function (dims, cb) {\r\n    this._updateDims(this, dims, cb);\r\n  };\r\n  DataStore.prototype._updateDims = function (target, dims, cb) {\r\n    var targetChunks = target._chunks;\r\n    var tmpRetValue = [];\r\n    var dimSize = dims.length;\r\n    var dataCount = target.count();\r\n    var values = [];\r\n    var rawExtent = target._rawExtent;\r\n    for (var i = 0; i < dims.length; i++) {\r\n      rawExtent[dims[i]] = getInitialExtent();\r\n    }\r\n    for (var dataIndex = 0; dataIndex < dataCount; dataIndex++) {\r\n      var rawIndex = target.getRawIndex(dataIndex);\r\n      for (var k = 0; k < dimSize; k++) {\r\n        values[k] = targetChunks[dims[k]][rawIndex];\r\n      }\r\n      values[dimSize] = dataIndex;\r\n      var retValue = cb && cb.apply(null, values);\r\n      if (retValue != null) {\r\n        // a number or string (in oridinal dimension)?\r\n        if (typeof retValue !== 'object') {\r\n          tmpRetValue[0] = retValue;\r\n          retValue = tmpRetValue;\r\n        }\r\n        for (var i = 0; i < retValue.length; i++) {\r\n          var dim = dims[i];\r\n          var val = retValue[i];\r\n          var rawExtentOnDim = rawExtent[dim];\r\n          var dimStore = targetChunks[dim];\r\n          if (dimStore) {\r\n            dimStore[rawIndex] = val;\r\n          }\r\n          if (val < rawExtentOnDim[0]) {\r\n            rawExtentOnDim[0] = val;\r\n          }\r\n          if (val > rawExtentOnDim[1]) {\r\n            rawExtentOnDim[1] = val;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n  /**\r\n   * Large data down sampling using largest-triangle-three-buckets\r\n   * @param {string} valueDimension\r\n   * @param {number} targetCount\r\n   */\r\n  DataStore.prototype.lttbDownSample = function (valueDimension, rate) {\r\n    var target = this.clone([valueDimension], true);\r\n    var targetStorage = target._chunks;\r\n    var dimStore = targetStorage[valueDimension];\r\n    var len = this.count();\r\n    var sampledIndex = 0;\r\n    var frameSize = Math.floor(1 / rate);\r\n    var currentRawIndex = this.getRawIndex(0);\r\n    var maxArea;\r\n    var area;\r\n    var nextRawIndex;\r\n    var newIndices = new (getIndicesCtor(this._rawCount))(Math.min((Math.ceil(len / frameSize) + 2) * 2, len));\r\n    // First frame use the first data.\r\n    newIndices[sampledIndex++] = currentRawIndex;\r\n    for (var i = 1; i < len - 1; i += frameSize) {\r\n      var nextFrameStart = Math.min(i + frameSize, len - 1);\r\n      var nextFrameEnd = Math.min(i + frameSize * 2, len);\r\n      var avgX = (nextFrameEnd + nextFrameStart) / 2;\r\n      var avgY = 0;\r\n      for (var idx = nextFrameStart; idx < nextFrameEnd; idx++) {\r\n        var rawIndex = this.getRawIndex(idx);\r\n        var y = dimStore[rawIndex];\r\n        if (isNaN(y)) {\r\n          continue;\r\n        }\r\n        avgY += y;\r\n      }\r\n      avgY /= nextFrameEnd - nextFrameStart;\r\n      var frameStart = i;\r\n      var frameEnd = Math.min(i + frameSize, len);\r\n      var pointAX = i - 1;\r\n      var pointAY = dimStore[currentRawIndex];\r\n      maxArea = -1;\r\n      nextRawIndex = frameStart;\r\n      var firstNaNIndex = -1;\r\n      var countNaN = 0;\r\n      // Find a point from current frame that construct a triangle with largest area with previous selected point\r\n      // And the average of next frame.\r\n      for (var idx = frameStart; idx < frameEnd; idx++) {\r\n        var rawIndex = this.getRawIndex(idx);\r\n        var y = dimStore[rawIndex];\r\n        if (isNaN(y)) {\r\n          countNaN++;\r\n          if (firstNaNIndex < 0) {\r\n            firstNaNIndex = rawIndex;\r\n          }\r\n          continue;\r\n        }\r\n        // Calculate triangle area over three buckets\r\n        area = Math.abs((pointAX - avgX) * (y - pointAY) - (pointAX - idx) * (avgY - pointAY));\r\n        if (area > maxArea) {\r\n          maxArea = area;\r\n          nextRawIndex = rawIndex; // Next a is this b\r\n        }\r\n      }\r\n      if (countNaN > 0 && countNaN < frameEnd - frameStart) {\r\n        // Append first NaN point in every bucket.\r\n        // It is necessary to ensure the correct order of indices.\r\n        newIndices[sampledIndex++] = Math.min(firstNaNIndex, nextRawIndex);\r\n        nextRawIndex = Math.max(firstNaNIndex, nextRawIndex);\r\n      }\r\n      newIndices[sampledIndex++] = nextRawIndex;\r\n      currentRawIndex = nextRawIndex; // This a is the next a (chosen b)\r\n    }\r\n    // First frame use the last data.\r\n    newIndices[sampledIndex++] = this.getRawIndex(len - 1);\r\n    target._count = sampledIndex;\r\n    target._indices = newIndices;\r\n    target.getRawIndex = this._getRawIdx;\r\n    return target;\r\n  };\r\n  /**\r\n   * Large data down sampling using min-max\r\n   * @param {string} valueDimension\r\n   * @param {number} rate\r\n   */\r\n  DataStore.prototype.minmaxDownSample = function (valueDimension, rate) {\r\n    var target = this.clone([valueDimension], true);\r\n    var targetStorage = target._chunks;\r\n    var frameSize = Math.floor(1 / rate);\r\n    var dimStore = targetStorage[valueDimension];\r\n    var len = this.count();\r\n    // Each frame results in 2 data points, one for min and one for max\r\n    var newIndices = new (getIndicesCtor(this._rawCount))(Math.ceil(len / frameSize) * 2);\r\n    var offset = 0;\r\n    for (var i = 0; i < len; i += frameSize) {\r\n      var minIndex = i;\r\n      var minValue = dimStore[this.getRawIndex(minIndex)];\r\n      var maxIndex = i;\r\n      var maxValue = dimStore[this.getRawIndex(maxIndex)];\r\n      var thisFrameSize = frameSize;\r\n      // Handle final smaller frame\r\n      if (i + frameSize > len) {\r\n        thisFrameSize = len - i;\r\n      }\r\n      // Determine min and max within the current frame\r\n      for (var k = 0; k < thisFrameSize; k++) {\r\n        var rawIndex = this.getRawIndex(i + k);\r\n        var value = dimStore[rawIndex];\r\n        if (value < minValue) {\r\n          minValue = value;\r\n          minIndex = i + k;\r\n        }\r\n        if (value > maxValue) {\r\n          maxValue = value;\r\n          maxIndex = i + k;\r\n        }\r\n      }\r\n      var rawMinIndex = this.getRawIndex(minIndex);\r\n      var rawMaxIndex = this.getRawIndex(maxIndex);\r\n      // Set the order of the min and max values, based on their ordering in the frame\r\n      if (minIndex < maxIndex) {\r\n        newIndices[offset++] = rawMinIndex;\r\n        newIndices[offset++] = rawMaxIndex;\r\n      } else {\r\n        newIndices[offset++] = rawMaxIndex;\r\n        newIndices[offset++] = rawMinIndex;\r\n      }\r\n    }\r\n    target._count = offset;\r\n    target._indices = newIndices;\r\n    target._updateGetRawIdx();\r\n    return target;\r\n  };\r\n  /**\r\n   * Large data down sampling on given dimension\r\n   * @param sampleIndex Sample index for name and id\r\n   */\r\n  DataStore.prototype.downSample = function (dimension, rate, sampleValue, sampleIndex) {\r\n    var target = this.clone([dimension], true);\r\n    var targetStorage = target._chunks;\r\n    var frameValues = [];\r\n    var frameSize = Math.floor(1 / rate);\r\n    var dimStore = targetStorage[dimension];\r\n    var len = this.count();\r\n    var rawExtentOnDim = target._rawExtent[dimension] = getInitialExtent();\r\n    var newIndices = new (getIndicesCtor(this._rawCount))(Math.ceil(len / frameSize));\r\n    var offset = 0;\r\n    for (var i = 0; i < len; i += frameSize) {\r\n      // Last frame\r\n      if (frameSize > len - i) {\r\n        frameSize = len - i;\r\n        frameValues.length = frameSize;\r\n      }\r\n      for (var k = 0; k < frameSize; k++) {\r\n        var dataIdx = this.getRawIndex(i + k);\r\n        frameValues[k] = dimStore[dataIdx];\r\n      }\r\n      var value = sampleValue(frameValues);\r\n      var sampleFrameIdx = this.getRawIndex(Math.min(i + sampleIndex(frameValues, value) || 0, len - 1));\r\n      // Only write value on the filtered data\r\n      dimStore[sampleFrameIdx] = value;\r\n      if (value < rawExtentOnDim[0]) {\r\n        rawExtentOnDim[0] = value;\r\n      }\r\n      if (value > rawExtentOnDim[1]) {\r\n        rawExtentOnDim[1] = value;\r\n      }\r\n      newIndices[offset++] = sampleFrameIdx;\r\n    }\r\n    target._count = offset;\r\n    target._indices = newIndices;\r\n    target._updateGetRawIdx();\r\n    return target;\r\n  };\r\n  /**\r\n   * Data iteration\r\n   * @param ctx default this\r\n   * @example\r\n   *  list.each('x', function (x, idx) {});\r\n   *  list.each(['x', 'y'], function (x, y, idx) {});\r\n   *  list.each(function (idx) {})\r\n   */\r\n  DataStore.prototype.each = function (dims, cb) {\r\n    if (!this._count) {\r\n      return;\r\n    }\r\n    var dimSize = dims.length;\r\n    var chunks = this._chunks;\r\n    for (var i = 0, len = this.count(); i < len; i++) {\r\n      var rawIdx = this.getRawIndex(i);\r\n      // Simple optimization\r\n      switch (dimSize) {\r\n        case 0:\r\n          cb(i);\r\n          break;\r\n        case 1:\r\n          cb(chunks[dims[0]][rawIdx], i);\r\n          break;\r\n        case 2:\r\n          cb(chunks[dims[0]][rawIdx], chunks[dims[1]][rawIdx], i);\r\n          break;\r\n        default:\r\n          var k = 0;\r\n          var value = [];\r\n          for (; k < dimSize; k++) {\r\n            value[k] = chunks[dims[k]][rawIdx];\r\n          }\r\n          // Index\r\n          value[k] = i;\r\n          cb.apply(null, value);\r\n      }\r\n    }\r\n  };\r\n  /**\r\n   * Get extent of data in one dimension\r\n   */\r\n  DataStore.prototype.getDataExtent = function (dim) {\r\n    // Make sure use concrete dim as cache name.\r\n    var dimData = this._chunks[dim];\r\n    var initialExtent = getInitialExtent();\r\n    if (!dimData) {\r\n      return initialExtent;\r\n    }\r\n    // Make more strict checkings to ensure hitting cache.\r\n    var currEnd = this.count();\r\n    // Consider the most cases when using data zoom, `getDataExtent`\r\n    // happened before filtering. We cache raw extent, which is not\r\n    // necessary to be cleared and recalculated when restore data.\r\n    var useRaw = !this._indices;\r\n    var dimExtent;\r\n    if (useRaw) {\r\n      return this._rawExtent[dim].slice();\r\n    }\r\n    dimExtent = this._extent[dim];\r\n    if (dimExtent) {\r\n      return dimExtent.slice();\r\n    }\r\n    dimExtent = initialExtent;\r\n    var min = dimExtent[0];\r\n    var max = dimExtent[1];\r\n    for (var i = 0; i < currEnd; i++) {\r\n      var rawIdx = this.getRawIndex(i);\r\n      var value = dimData[rawIdx];\r\n      value < min && (min = value);\r\n      value > max && (max = value);\r\n    }\r\n    dimExtent = [min, max];\r\n    this._extent[dim] = dimExtent;\r\n    return dimExtent;\r\n  };\r\n  /**\r\n   * Get raw data item\r\n   */\r\n  DataStore.prototype.getRawDataItem = function (idx) {\r\n    var rawIdx = this.getRawIndex(idx);\r\n    if (!this._provider.persistent) {\r\n      var val = [];\r\n      var chunks = this._chunks;\r\n      for (var i = 0; i < chunks.length; i++) {\r\n        val.push(chunks[i][rawIdx]);\r\n      }\r\n      return val;\r\n    } else {\r\n      return this._provider.getItem(rawIdx);\r\n    }\r\n  };\r\n  /**\r\n   * Clone shallow.\r\n   *\r\n   * @param clonedDims Determine which dims to clone. Will share the data if not specified.\r\n   */\r\n  DataStore.prototype.clone = function (clonedDims, ignoreIndices) {\r\n    var target = new DataStore();\r\n    var chunks = this._chunks;\r\n    var clonedDimsMap = clonedDims && reduce(clonedDims, function (obj, dimIdx) {\r\n      obj[dimIdx] = true;\r\n      return obj;\r\n    }, {});\r\n    if (clonedDimsMap) {\r\n      for (var i = 0; i < chunks.length; i++) {\r\n        // Not clone if dim is not picked.\r\n        target._chunks[i] = !clonedDimsMap[i] ? chunks[i] : cloneChunk(chunks[i]);\r\n      }\r\n    } else {\r\n      target._chunks = chunks;\r\n    }\r\n    this._copyCommonProps(target);\r\n    if (!ignoreIndices) {\r\n      target._indices = this._cloneIndices();\r\n    }\r\n    target._updateGetRawIdx();\r\n    return target;\r\n  };\r\n  DataStore.prototype._copyCommonProps = function (target) {\r\n    target._count = this._count;\r\n    target._rawCount = this._rawCount;\r\n    target._provider = this._provider;\r\n    target._dimensions = this._dimensions;\r\n    target._extent = clone(this._extent);\r\n    target._rawExtent = clone(this._rawExtent);\r\n  };\r\n  DataStore.prototype._cloneIndices = function () {\r\n    if (this._indices) {\r\n      var Ctor = this._indices.constructor;\r\n      var indices = void 0;\r\n      if (Ctor === Array) {\r\n        var thisCount = this._indices.length;\r\n        indices = new Ctor(thisCount);\r\n        for (var i = 0; i < thisCount; i++) {\r\n          indices[i] = this._indices[i];\r\n        }\r\n      } else {\r\n        indices = new Ctor(this._indices);\r\n      }\r\n      return indices;\r\n    }\r\n    return null;\r\n  };\r\n  DataStore.prototype._getRawIdxIdentity = function (idx) {\r\n    return idx;\r\n  };\r\n  DataStore.prototype._getRawIdx = function (idx) {\r\n    if (idx < this._count && idx >= 0) {\r\n      return this._indices[idx];\r\n    }\r\n    return -1;\r\n  };\r\n  DataStore.prototype._updateGetRawIdx = function () {\r\n    this.getRawIndex = this._indices ? this._getRawIdx : this._getRawIdxIdentity;\r\n  };\r\n  DataStore.internalField = function () {\r\n    function getDimValueSimply(dataItem, property, dataIndex, dimIndex) {\r\n      return parseDataValue(dataItem[dimIndex], this._dimensions[dimIndex]);\r\n    }\r\n    defaultDimValueGetters = {\r\n      arrayRows: getDimValueSimply,\r\n      objectRows: function (dataItem, property, dataIndex, dimIndex) {\r\n        return parseDataValue(dataItem[property], this._dimensions[dimIndex]);\r\n      },\r\n      keyedColumns: getDimValueSimply,\r\n      original: function (dataItem, property, dataIndex, dimIndex) {\r\n        // Performance sensitive, do not use modelUtil.getDataItemValue.\r\n        // If dataItem is an plain object with no value field, the let `value`\r\n        // will be assigned with the object, but it will be tread correctly\r\n        // in the `convertValue`.\r\n        var value = dataItem && (dataItem.value == null ? dataItem : dataItem.value);\r\n        return parseDataValue(value instanceof Array ? value[dimIndex]\r\n        // If value is a single number or something else not array.\r\n        : value, this._dimensions[dimIndex]);\r\n      },\r\n      typedArray: function (dataItem, property, dataIndex, dimIndex) {\r\n        return dataItem[dimIndex];\r\n      }\r\n    };\r\n  }();\r\n  return DataStore;\r\n}();\r\nexport default DataStore;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { setAsPrimitive, map, isTypedArray, assert, each, retrieve2 } from 'zrender/lib/core/util.js';\r\nimport { createSource, cloneSourceShallow } from '../Source.js';\r\nimport { SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ORIGINAL } from '../../util/types.js';\r\nimport { querySeriesUpstreamDatasetModel, queryDatasetUpstreamDatasetModels } from './sourceHelper.js';\r\nimport { applyDataTransform } from './transform.js';\r\nimport DataStore from '../DataStore.js';\r\nimport { DefaultDataProvider } from './dataProvider.js';\r\n/**\r\n * [REQUIREMENT_MEMO]:\r\n * (0) `metaRawOption` means `dimensions`/`sourceHeader`/`seriesLayoutBy` in raw option.\r\n * (1) Keep support the feature: `metaRawOption` can be specified both on `series` and\r\n * `root-dataset`. Them on `series` has higher priority.\r\n * (2) Do not support to set `metaRawOption` on a `non-root-dataset`, because it might\r\n * confuse users: whether those props indicate how to visit the upstream source or visit\r\n * the transform result source, and some transforms has nothing to do with these props,\r\n * and some transforms might have multiple upstream.\r\n * (3) Transforms should specify `metaRawOption` in each output, just like they can be\r\n * declared in `root-dataset`.\r\n * (4) At present only support visit source in `SERIES_LAYOUT_BY_COLUMN` in transforms.\r\n * That is for reducing complexity in transforms.\r\n * PENDING: Whether to provide transposition transform?\r\n *\r\n * [IMPLEMENTAION_MEMO]:\r\n * \"sourceVisitConfig\" are calculated from `metaRawOption` and `data`.\r\n * They will not be calculated until `source` is about to be visited (to prevent from\r\n * duplicate calcuation). `source` is visited only in series and input to transforms.\r\n *\r\n * [DIMENSION_INHERIT_RULE]:\r\n * By default the dimensions are inherited from ancestors, unless a transform return\r\n * a new dimensions definition.\r\n * Consider the case:\r\n * ```js\r\n * dataset: [{\r\n *     source: [ ['Product', 'Sales', 'Prise'], ['Cookies', 321, 44.21], ...]\r\n * }, {\r\n *     transform: { type: 'filter', ... }\r\n * }]\r\n * dataset: [{\r\n *     dimension: ['Product', 'Sales', 'Prise'],\r\n *     source: [ ['Cookies', 321, 44.21], ...]\r\n * }, {\r\n *     transform: { type: 'filter', ... }\r\n * }]\r\n * ```\r\n * The two types of option should have the same behavior after transform.\r\n *\r\n *\r\n * [SCENARIO]:\r\n * (1) Provide source data directly:\r\n * ```js\r\n * series: {\r\n *     encode: {...},\r\n *     dimensions: [...]\r\n *     seriesLayoutBy: 'row',\r\n *     data: [[...]]\r\n * }\r\n * ```\r\n * (2) Series refer to dataset.\r\n * ```js\r\n * series: [{\r\n *     encode: {...}\r\n *     // Ignore datasetIndex means `datasetIndex: 0`\r\n *     // and the dimensions defination in dataset is used\r\n * }, {\r\n *     encode: {...},\r\n *     seriesLayoutBy: 'column',\r\n *     datasetIndex: 1\r\n * }]\r\n * ```\r\n * (3) dataset transform\r\n * ```js\r\n * dataset: [{\r\n *     source: [...]\r\n * }, {\r\n *     source: [...]\r\n * }, {\r\n *     // By default from 0.\r\n *     transform: { type: 'filter', config: {...} }\r\n * }, {\r\n *     // Piped.\r\n *     transform: [\r\n *         { type: 'filter', config: {...} },\r\n *         { type: 'sort', config: {...} }\r\n *     ]\r\n * }, {\r\n *     id: 'regressionData',\r\n *     fromDatasetIndex: 1,\r\n *     // Third-party transform\r\n *     transform: { type: 'ecStat:regression', config: {...} }\r\n * }, {\r\n *     // retrieve the extra result.\r\n *     id: 'regressionFormula',\r\n *     fromDatasetId: 'regressionData',\r\n *     fromTransformResult: 1\r\n * }]\r\n * ```\r\n */\r\nvar SourceManager = /** @class */function () {\r\n  function SourceManager(sourceHost) {\r\n    // Cached source. Do not repeat calculating if not dirty.\r\n    this._sourceList = [];\r\n    this._storeList = [];\r\n    // version sign of each upstream source manager.\r\n    this._upstreamSignList = [];\r\n    this._versionSignBase = 0;\r\n    this._dirty = true;\r\n    this._sourceHost = sourceHost;\r\n  }\r\n  /**\r\n   * Mark dirty.\r\n   */\r\n  SourceManager.prototype.dirty = function () {\r\n    this._setLocalSource([], []);\r\n    this._storeList = [];\r\n    this._dirty = true;\r\n  };\r\n  SourceManager.prototype._setLocalSource = function (sourceList, upstreamSignList) {\r\n    this._sourceList = sourceList;\r\n    this._upstreamSignList = upstreamSignList;\r\n    this._versionSignBase++;\r\n    if (this._versionSignBase > 9e10) {\r\n      this._versionSignBase = 0;\r\n    }\r\n  };\r\n  /**\r\n   * For detecting whether the upstream source is dirty, so that\r\n   * the local cached source (in `_sourceList`) should be discarded.\r\n   */\r\n  SourceManager.prototype._getVersionSign = function () {\r\n    return this._sourceHost.uid + '_' + this._versionSignBase;\r\n  };\r\n  /**\r\n   * Always return a source instance. Otherwise throw error.\r\n   */\r\n  SourceManager.prototype.prepareSource = function () {\r\n    // For the case that call `setOption` multiple time but no data changed,\r\n    // cache the result source to prevent from repeating transform.\r\n    if (this._isDirty()) {\r\n      this._createSource();\r\n      this._dirty = false;\r\n    }\r\n  };\r\n  SourceManager.prototype._createSource = function () {\r\n    this._setLocalSource([], []);\r\n    var sourceHost = this._sourceHost;\r\n    var upSourceMgrList = this._getUpstreamSourceManagers();\r\n    var hasUpstream = !!upSourceMgrList.length;\r\n    var resultSourceList;\r\n    var upstreamSignList;\r\n    if (isSeries(sourceHost)) {\r\n      var seriesModel = sourceHost;\r\n      var data = void 0;\r\n      var sourceFormat = void 0;\r\n      var upSource = void 0;\r\n      // Has upstream dataset\r\n      if (hasUpstream) {\r\n        var upSourceMgr = upSourceMgrList[0];\r\n        upSourceMgr.prepareSource();\r\n        upSource = upSourceMgr.getSource();\r\n        data = upSource.data;\r\n        sourceFormat = upSource.sourceFormat;\r\n        upstreamSignList = [upSourceMgr._getVersionSign()];\r\n      }\r\n      // Series data is from own.\r\n      else {\r\n        data = seriesModel.get('data', true);\r\n        sourceFormat = isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL;\r\n        upstreamSignList = [];\r\n      }\r\n      // See [REQUIREMENT_MEMO], merge settings on series and parent dataset if it is root.\r\n      var newMetaRawOption = this._getSourceMetaRawOption() || {};\r\n      var upMetaRawOption = upSource && upSource.metaRawOption || {};\r\n      var seriesLayoutBy = retrieve2(newMetaRawOption.seriesLayoutBy, upMetaRawOption.seriesLayoutBy) || null;\r\n      var sourceHeader = retrieve2(newMetaRawOption.sourceHeader, upMetaRawOption.sourceHeader);\r\n      // Note here we should not use `upSource.dimensionsDefine`. Consider the case:\r\n      // `upSource.dimensionsDefine` is detected by `seriesLayoutBy: 'column'`,\r\n      // but series need `seriesLayoutBy: 'row'`.\r\n      var dimensions = retrieve2(newMetaRawOption.dimensions, upMetaRawOption.dimensions);\r\n      // We share source with dataset as much as possible\r\n      // to avoid extra memory cost of high dimensional data.\r\n      var needsCreateSource = seriesLayoutBy !== upMetaRawOption.seriesLayoutBy || !!sourceHeader !== !!upMetaRawOption.sourceHeader || dimensions;\r\n      resultSourceList = needsCreateSource ? [createSource(data, {\r\n        seriesLayoutBy: seriesLayoutBy,\r\n        sourceHeader: sourceHeader,\r\n        dimensions: dimensions\r\n      }, sourceFormat)] : [];\r\n    } else {\r\n      var datasetModel = sourceHost;\r\n      // Has upstream dataset.\r\n      if (hasUpstream) {\r\n        var result = this._applyTransform(upSourceMgrList);\r\n        resultSourceList = result.sourceList;\r\n        upstreamSignList = result.upstreamSignList;\r\n      }\r\n      // Is root dataset.\r\n      else {\r\n        var sourceData = datasetModel.get('source', true);\r\n        resultSourceList = [createSource(sourceData, this._getSourceMetaRawOption(), null)];\r\n        upstreamSignList = [];\r\n      }\r\n    }\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      assert(resultSourceList && upstreamSignList);\r\n    }\r\n    this._setLocalSource(resultSourceList, upstreamSignList);\r\n  };\r\n  SourceManager.prototype._applyTransform = function (upMgrList) {\r\n    var datasetModel = this._sourceHost;\r\n    var transformOption = datasetModel.get('transform', true);\r\n    var fromTransformResult = datasetModel.get('fromTransformResult', true);\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      assert(fromTransformResult != null || transformOption != null);\r\n    }\r\n    if (fromTransformResult != null) {\r\n      var errMsg = '';\r\n      if (upMgrList.length !== 1) {\r\n        if (process.env.NODE_ENV !== 'production') {\r\n          errMsg = 'When using `fromTransformResult`, there should be only one upstream dataset';\r\n        }\r\n        doThrow(errMsg);\r\n      }\r\n    }\r\n    var sourceList;\r\n    var upSourceList = [];\r\n    var upstreamSignList = [];\r\n    each(upMgrList, function (upMgr) {\r\n      upMgr.prepareSource();\r\n      var upSource = upMgr.getSource(fromTransformResult || 0);\r\n      var errMsg = '';\r\n      if (fromTransformResult != null && !upSource) {\r\n        if (process.env.NODE_ENV !== 'production') {\r\n          errMsg = 'Can not retrieve result by `fromTransformResult`: ' + fromTransformResult;\r\n        }\r\n        doThrow(errMsg);\r\n      }\r\n      upSourceList.push(upSource);\r\n      upstreamSignList.push(upMgr._getVersionSign());\r\n    });\r\n    if (transformOption) {\r\n      sourceList = applyDataTransform(transformOption, upSourceList, {\r\n        datasetIndex: datasetModel.componentIndex\r\n      });\r\n    } else if (fromTransformResult != null) {\r\n      sourceList = [cloneSourceShallow(upSourceList[0])];\r\n    }\r\n    return {\r\n      sourceList: sourceList,\r\n      upstreamSignList: upstreamSignList\r\n    };\r\n  };\r\n  SourceManager.prototype._isDirty = function () {\r\n    if (this._dirty) {\r\n      return true;\r\n    }\r\n    // All sourceList is from the some upstream.\r\n    var upSourceMgrList = this._getUpstreamSourceManagers();\r\n    for (var i = 0; i < upSourceMgrList.length; i++) {\r\n      var upSrcMgr = upSourceMgrList[i];\r\n      if (\r\n      // Consider the case that there is ancestor diry, call it recursively.\r\n      // The performance is probably not an issue because usually the chain is not long.\r\n      upSrcMgr._isDirty() || this._upstreamSignList[i] !== upSrcMgr._getVersionSign()) {\r\n        return true;\r\n      }\r\n    }\r\n  };\r\n  /**\r\n   * @param sourceIndex By default 0, means \"main source\".\r\n   *                    In most cases there is only one source.\r\n   */\r\n  SourceManager.prototype.getSource = function (sourceIndex) {\r\n    sourceIndex = sourceIndex || 0;\r\n    var source = this._sourceList[sourceIndex];\r\n    if (!source) {\r\n      // Series may share source instance with dataset.\r\n      var upSourceMgrList = this._getUpstreamSourceManagers();\r\n      return upSourceMgrList[0] && upSourceMgrList[0].getSource(sourceIndex);\r\n    }\r\n    return source;\r\n  };\r\n  /**\r\n   *\r\n   * Get a data store which can be shared across series.\r\n   * Only available for series.\r\n   *\r\n   * @param seriesDimRequest Dimensions that are generated in series.\r\n   *        Should have been sorted by `storeDimIndex` asc.\r\n   */\r\n  SourceManager.prototype.getSharedDataStore = function (seriesDimRequest) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      assert(isSeries(this._sourceHost), 'Can only call getDataStore on series source manager.');\r\n    }\r\n    var schema = seriesDimRequest.makeStoreSchema();\r\n    return this._innerGetDataStore(schema.dimensions, seriesDimRequest.source, schema.hash);\r\n  };\r\n  SourceManager.prototype._innerGetDataStore = function (storeDims, seriesSource, sourceReadKey) {\r\n    // TODO Can use other sourceIndex?\r\n    var sourceIndex = 0;\r\n    var storeList = this._storeList;\r\n    var cachedStoreMap = storeList[sourceIndex];\r\n    if (!cachedStoreMap) {\r\n      cachedStoreMap = storeList[sourceIndex] = {};\r\n    }\r\n    var cachedStore = cachedStoreMap[sourceReadKey];\r\n    if (!cachedStore) {\r\n      var upSourceMgr = this._getUpstreamSourceManagers()[0];\r\n      if (isSeries(this._sourceHost) && upSourceMgr) {\r\n        cachedStore = upSourceMgr._innerGetDataStore(storeDims, seriesSource, sourceReadKey);\r\n      } else {\r\n        cachedStore = new DataStore();\r\n        // Always create store from source of series.\r\n        cachedStore.initData(new DefaultDataProvider(seriesSource, storeDims.length), storeDims);\r\n      }\r\n      cachedStoreMap[sourceReadKey] = cachedStore;\r\n    }\r\n    return cachedStore;\r\n  };\r\n  /**\r\n   * PENDING: Is it fast enough?\r\n   * If no upstream, return empty array.\r\n   */\r\n  SourceManager.prototype._getUpstreamSourceManagers = function () {\r\n    // Always get the relationship from the raw option.\r\n    // Do not cache the link of the dependency graph, so that\r\n    // there is no need to update them when change happens.\r\n    var sourceHost = this._sourceHost;\r\n    if (isSeries(sourceHost)) {\r\n      var datasetModel = querySeriesUpstreamDatasetModel(sourceHost);\r\n      return !datasetModel ? [] : [datasetModel.getSourceManager()];\r\n    } else {\r\n      return map(queryDatasetUpstreamDatasetModels(sourceHost), function (datasetModel) {\r\n        return datasetModel.getSourceManager();\r\n      });\r\n    }\r\n  };\r\n  SourceManager.prototype._getSourceMetaRawOption = function () {\r\n    var sourceHost = this._sourceHost;\r\n    var seriesLayoutBy;\r\n    var sourceHeader;\r\n    var dimensions;\r\n    if (isSeries(sourceHost)) {\r\n      seriesLayoutBy = sourceHost.get('seriesLayoutBy', true);\r\n      sourceHeader = sourceHost.get('sourceHeader', true);\r\n      dimensions = sourceHost.get('dimensions', true);\r\n    }\r\n    // See [REQUIREMENT_MEMO], `non-root-dataset` do not support them.\r\n    else if (!this._getUpstreamSourceManagers().length) {\r\n      var model = sourceHost;\r\n      seriesLayoutBy = model.get('seriesLayoutBy', true);\r\n      sourceHeader = model.get('sourceHeader', true);\r\n      dimensions = model.get('dimensions', true);\r\n    }\r\n    return {\r\n      seriesLayoutBy: seriesLayoutBy,\r\n      sourceHeader: sourceHeader,\r\n      dimensions: dimensions\r\n    };\r\n  };\r\n  return SourceManager;\r\n}();\r\nexport { SourceManager };\r\n// Call this method after `super.init` and `super.mergeOption` to\r\n// disable the transform merge, but do not disable transform clone from rawOption.\r\nexport function disableTransformOptionMerge(datasetModel) {\r\n  var transformOption = datasetModel.option.transform;\r\n  transformOption && setAsPrimitive(datasetModel.option.transform);\r\n}\r\nfunction isSeries(sourceHost) {\r\n  // Avoid circular dependency with Series.ts\r\n  return sourceHost.mainType === 'series';\r\n}\r\nfunction doThrow(errMsg) {\r\n  throw new Error(errMsg);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { getTooltipMarker, encodeHTML, makeValueReadable, convertToColorString } from '../../util/format.js';\r\nimport { isString, each, hasOwn, isArray, map, assert, extend } from 'zrender/lib/core/util.js';\r\nimport { SortOrderComparator } from '../../data/helper/dataValueHelper.js';\r\nimport { getRandomIdBase } from '../../util/number.js';\r\nvar TOOLTIP_LINE_HEIGHT_CSS = 'line-height:1';\r\nfunction getTooltipLineHeight(textStyle) {\r\n  var lineHeight = textStyle.lineHeight;\r\n  if (lineHeight == null) {\r\n    return TOOLTIP_LINE_HEIGHT_CSS;\r\n  } else {\r\n    return \"line-height:\" + encodeHTML(lineHeight + '') + \"px\";\r\n  }\r\n}\r\n// TODO: more textStyle option\r\nfunction getTooltipTextStyle(textStyle, renderMode) {\r\n  var nameFontColor = textStyle.color || '#6e7079';\r\n  var nameFontSize = textStyle.fontSize || 12;\r\n  var nameFontWeight = textStyle.fontWeight || '400';\r\n  var valueFontColor = textStyle.color || '#464646';\r\n  var valueFontSize = textStyle.fontSize || 14;\r\n  var valueFontWeight = textStyle.fontWeight || '900';\r\n  if (renderMode === 'html') {\r\n    // `textStyle` is probably from user input, should be encoded to reduce security risk.\r\n    return {\r\n      // eslint-disable-next-line max-len\r\n      nameStyle: \"font-size:\" + encodeHTML(nameFontSize + '') + \"px;color:\" + encodeHTML(nameFontColor) + \";font-weight:\" + encodeHTML(nameFontWeight + ''),\r\n      // eslint-disable-next-line max-len\r\n      valueStyle: \"font-size:\" + encodeHTML(valueFontSize + '') + \"px;color:\" + encodeHTML(valueFontColor) + \";font-weight:\" + encodeHTML(valueFontWeight + '')\r\n    };\r\n  } else {\r\n    return {\r\n      nameStyle: {\r\n        fontSize: nameFontSize,\r\n        fill: nameFontColor,\r\n        fontWeight: nameFontWeight\r\n      },\r\n      valueStyle: {\r\n        fontSize: valueFontSize,\r\n        fill: valueFontColor,\r\n        fontWeight: valueFontWeight\r\n      }\r\n    };\r\n  }\r\n}\r\n// See `TooltipMarkupLayoutIntent['innerGapLevel']`.\r\n// (value from UI design)\r\nvar HTML_GAPS = [0, 10, 20, 30];\r\nvar RICH_TEXT_GAPS = ['', '\\n', '\\n\\n', '\\n\\n\\n'];\r\n// eslint-disable-next-line max-len\r\nexport function createTooltipMarkup(type, option) {\r\n  option.type = type;\r\n  return option;\r\n}\r\nfunction isSectionFragment(frag) {\r\n  return frag.type === 'section';\r\n}\r\nfunction getBuilder(frag) {\r\n  return isSectionFragment(frag) ? buildSection : buildNameValue;\r\n}\r\nfunction getBlockGapLevel(frag) {\r\n  if (isSectionFragment(frag)) {\r\n    var gapLevel_1 = 0;\r\n    var subBlockLen = frag.blocks.length;\r\n    var hasInnerGap_1 = subBlockLen > 1 || subBlockLen > 0 && !frag.noHeader;\r\n    each(frag.blocks, function (subBlock) {\r\n      var subGapLevel = getBlockGapLevel(subBlock);\r\n      // If the some of the sub-blocks have some gaps (like 10px) inside, this block\r\n      // should use a larger gap (like 20px) to distinguish those sub-blocks.\r\n      if (subGapLevel >= gapLevel_1) {\r\n        gapLevel_1 = subGapLevel + +(hasInnerGap_1 && (\r\n        // 0 always can not be readable gap level.\r\n        !subGapLevel\r\n        // If no header, always keep the sub gap level. Otherwise\r\n        // look weird in case `multipleSeries`.\r\n        || isSectionFragment(subBlock) && !subBlock.noHeader));\r\n      }\r\n    });\r\n    return gapLevel_1;\r\n  }\r\n  return 0;\r\n}\r\nfunction buildSection(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\r\n  var noHeader = fragment.noHeader;\r\n  var gaps = getGap(getBlockGapLevel(fragment));\r\n  var subMarkupTextList = [];\r\n  var subBlocks = fragment.blocks || [];\r\n  assert(!subBlocks || isArray(subBlocks));\r\n  subBlocks = subBlocks || [];\r\n  var orderMode = ctx.orderMode;\r\n  if (fragment.sortBlocks && orderMode) {\r\n    subBlocks = subBlocks.slice();\r\n    var orderMap = {\r\n      valueAsc: 'asc',\r\n      valueDesc: 'desc'\r\n    };\r\n    if (hasOwn(orderMap, orderMode)) {\r\n      var comparator_1 = new SortOrderComparator(orderMap[orderMode], null);\r\n      subBlocks.sort(function (a, b) {\r\n        return comparator_1.evaluate(a.sortParam, b.sortParam);\r\n      });\r\n    }\r\n    // FIXME 'seriesDesc' necessary?\r\n    else if (orderMode === 'seriesDesc') {\r\n      subBlocks.reverse();\r\n    }\r\n  }\r\n  each(subBlocks, function (subBlock, idx) {\r\n    var valueFormatter = fragment.valueFormatter;\r\n    var subMarkupText = getBuilder(subBlock)(\r\n    // Inherit valueFormatter\r\n    valueFormatter ? extend(extend({}, ctx), {\r\n      valueFormatter: valueFormatter\r\n    }) : ctx, subBlock, idx > 0 ? gaps.html : 0, toolTipTextStyle);\r\n    subMarkupText != null && subMarkupTextList.push(subMarkupText);\r\n  });\r\n  var subMarkupText = ctx.renderMode === 'richText' ? subMarkupTextList.join(gaps.richText) : wrapBlockHTML(toolTipTextStyle, subMarkupTextList.join(''), noHeader ? topMarginForOuterGap : gaps.html);\r\n  if (noHeader) {\r\n    return subMarkupText;\r\n  }\r\n  var displayableHeader = makeValueReadable(fragment.header, 'ordinal', ctx.useUTC);\r\n  var nameStyle = getTooltipTextStyle(toolTipTextStyle, ctx.renderMode).nameStyle;\r\n  var tooltipLineHeight = getTooltipLineHeight(toolTipTextStyle);\r\n  if (ctx.renderMode === 'richText') {\r\n    return wrapInlineNameRichText(ctx, displayableHeader, nameStyle) + gaps.richText + subMarkupText;\r\n  } else {\r\n    return wrapBlockHTML(toolTipTextStyle, \"<div style=\\\"\" + nameStyle + \";\" + tooltipLineHeight + \";\\\">\" + encodeHTML(displayableHeader) + '</div>' + subMarkupText, topMarginForOuterGap);\r\n  }\r\n}\r\nfunction buildNameValue(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\r\n  var renderMode = ctx.renderMode;\r\n  var noName = fragment.noName;\r\n  var noValue = fragment.noValue;\r\n  var noMarker = !fragment.markerType;\r\n  var name = fragment.name;\r\n  var useUTC = ctx.useUTC;\r\n  var valueFormatter = fragment.valueFormatter || ctx.valueFormatter || function (value) {\r\n    value = isArray(value) ? value : [value];\r\n    return map(value, function (val, idx) {\r\n      return makeValueReadable(val, isArray(valueTypeOption) ? valueTypeOption[idx] : valueTypeOption, useUTC);\r\n    });\r\n  };\r\n  if (noName && noValue) {\r\n    return;\r\n  }\r\n  var markerStr = noMarker ? '' : ctx.markupStyleCreator.makeTooltipMarker(fragment.markerType, fragment.markerColor || '#333', renderMode);\r\n  var readableName = noName ? '' : makeValueReadable(name, 'ordinal', useUTC);\r\n  var valueTypeOption = fragment.valueType;\r\n  var readableValueList = noValue ? [] : valueFormatter(fragment.value, fragment.dataIndex);\r\n  var valueAlignRight = !noMarker || !noName;\r\n  // It little weird if only value next to marker but far from marker.\r\n  var valueCloseToMarker = !noMarker && noName;\r\n  var _a = getTooltipTextStyle(toolTipTextStyle, renderMode),\r\n    nameStyle = _a.nameStyle,\r\n    valueStyle = _a.valueStyle;\r\n  return renderMode === 'richText' ? (noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameRichText(ctx, readableName, nameStyle))\r\n  // Value has commas inside, so use ' ' as delimiter for multiple values.\r\n  + (noValue ? '' : wrapInlineValueRichText(ctx, readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)) : wrapBlockHTML(toolTipTextStyle, (noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameHTML(readableName, !noMarker, nameStyle)) + (noValue ? '' : wrapInlineValueHTML(readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)), topMarginForOuterGap);\r\n}\r\n/**\r\n * @return markupText. null/undefined means no content.\r\n */\r\nexport function buildTooltipMarkup(fragment, markupStyleCreator, renderMode, orderMode, useUTC, toolTipTextStyle) {\r\n  if (!fragment) {\r\n    return;\r\n  }\r\n  var builder = getBuilder(fragment);\r\n  var ctx = {\r\n    useUTC: useUTC,\r\n    renderMode: renderMode,\r\n    orderMode: orderMode,\r\n    markupStyleCreator: markupStyleCreator,\r\n    valueFormatter: fragment.valueFormatter\r\n  };\r\n  return builder(ctx, fragment, 0, toolTipTextStyle);\r\n}\r\nfunction getGap(gapLevel) {\r\n  return {\r\n    html: HTML_GAPS[gapLevel],\r\n    richText: RICH_TEXT_GAPS[gapLevel]\r\n  };\r\n}\r\nfunction wrapBlockHTML(textStyle, encodedContent, topGap) {\r\n  var clearfix = '<div style=\"clear:both\"></div>';\r\n  var marginCSS = \"margin: \" + topGap + \"px 0 0\";\r\n  var tooltipLineHeight = getTooltipLineHeight(textStyle);\r\n  return \"<div style=\\\"\" + marginCSS + \";\" + tooltipLineHeight + \";\\\">\" + encodedContent + clearfix + '</div>';\r\n}\r\nfunction wrapInlineNameHTML(name, leftHasMarker, style) {\r\n  var marginCss = leftHasMarker ? 'margin-left:2px' : '';\r\n  return \"<span style=\\\"\" + style + \";\" + marginCss + \"\\\">\" + encodeHTML(name) + '</span>';\r\n}\r\nfunction wrapInlineValueHTML(valueList, alignRight, valueCloseToMarker, style) {\r\n  // Do not too close to marker, considering there are multiple values separated by spaces.\r\n  var paddingStr = valueCloseToMarker ? '10px' : '20px';\r\n  var alignCSS = alignRight ? \"float:right;margin-left:\" + paddingStr : '';\r\n  valueList = isArray(valueList) ? valueList : [valueList];\r\n  return \"<span style=\\\"\" + alignCSS + \";\" + style + \"\\\">\"\r\n  // Value has commas inside, so use '  ' as delimiter for multiple values.\r\n  + map(valueList, function (value) {\r\n    return encodeHTML(value);\r\n  }).join('&nbsp;&nbsp;') + '</span>';\r\n}\r\nfunction wrapInlineNameRichText(ctx, name, style) {\r\n  return ctx.markupStyleCreator.wrapRichTextStyle(name, style);\r\n}\r\nfunction wrapInlineValueRichText(ctx, values, alignRight, valueCloseToMarker, style) {\r\n  var styles = [style];\r\n  var paddingLeft = valueCloseToMarker ? 10 : 20;\r\n  alignRight && styles.push({\r\n    padding: [0, 0, 0, paddingLeft],\r\n    align: 'right'\r\n  });\r\n  // Value has commas inside, so use '  ' as delimiter for multiple values.\r\n  return ctx.markupStyleCreator.wrapRichTextStyle(isArray(values) ? values.join('  ') : values, styles);\r\n}\r\nexport function retrieveVisualColorForTooltipMarker(series, dataIndex) {\r\n  var style = series.getData().getItemVisual(dataIndex, 'style');\r\n  var color = style[series.visualDrawType];\r\n  return convertToColorString(color);\r\n}\r\nexport function getPaddingFromTooltipModel(model, renderMode) {\r\n  var padding = model.get('padding');\r\n  return padding != null ? padding\r\n  // We give slightly different to look pretty.\r\n  : renderMode === 'richText' ? [8, 10] : 10;\r\n}\r\n/**\r\n * The major feature is generate styles for `renderMode: 'richText'`.\r\n * But it also serves `renderMode: 'html'` to provide\r\n * \"renderMode-independent\" API.\r\n */\r\nvar TooltipMarkupStyleCreator = /** @class */function () {\r\n  function TooltipMarkupStyleCreator() {\r\n    this.richTextStyles = {};\r\n    // Notice that \"generate a style name\" usually happens repeatedly when mouse is moving and\r\n    // a tooltip is displayed. So we put the `_nextStyleNameId` as a member of each creator\r\n    // rather than static shared by all creators (which will cause it increase to fast).\r\n    this._nextStyleNameId = getRandomIdBase();\r\n  }\r\n  TooltipMarkupStyleCreator.prototype._generateStyleName = function () {\r\n    return '__EC_aUTo_' + this._nextStyleNameId++;\r\n  };\r\n  TooltipMarkupStyleCreator.prototype.makeTooltipMarker = function (markerType, colorStr, renderMode) {\r\n    var markerId = renderMode === 'richText' ? this._generateStyleName() : null;\r\n    var marker = getTooltipMarker({\r\n      color: colorStr,\r\n      type: markerType,\r\n      renderMode: renderMode,\r\n      markerId: markerId\r\n    });\r\n    if (isString(marker)) {\r\n      return marker;\r\n    } else {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        assert(markerId);\r\n      }\r\n      this.richTextStyles[markerId] = marker.style;\r\n      return marker.content;\r\n    }\r\n  };\r\n  /**\r\n   * @usage\r\n   * ```ts\r\n   * const styledText = markupStyleCreator.wrapRichTextStyle([\r\n   *     // The styles will be auto merged.\r\n   *     {\r\n   *         fontSize: 12,\r\n   *         color: 'blue'\r\n   *     },\r\n   *     {\r\n   *         padding: 20\r\n   *     }\r\n   * ]);\r\n   * ```\r\n   */\r\n  TooltipMarkupStyleCreator.prototype.wrapRichTextStyle = function (text, styles) {\r\n    var finalStl = {};\r\n    if (isArray(styles)) {\r\n      each(styles, function (stl) {\r\n        return extend(finalStl, stl);\r\n      });\r\n    } else {\r\n      extend(finalStl, styles);\r\n    }\r\n    var styleName = this._generateStyleName();\r\n    this.richTextStyles[styleName] = finalStl;\r\n    return \"{\" + styleName + \"|\" + text + \"}\";\r\n  };\r\n  return TooltipMarkupStyleCreator;\r\n}();\r\nexport { TooltipMarkupStyleCreator };", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { trim, isArray, each, reduce } from 'zrender/lib/core/util.js';\r\nimport { retrieveVisualColorForTooltipMarker, createTooltipMarkup } from './tooltipMarkup.js';\r\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\r\nimport { isNameSpecified } from '../../util/model.js';\r\nexport function defaultSeriesFormatTooltip(opt) {\r\n  var series = opt.series;\r\n  var dataIndex = opt.dataIndex;\r\n  var multipleSeries = opt.multipleSeries;\r\n  var data = series.getData();\r\n  var tooltipDims = data.mapDimensionsAll('defaultedTooltip');\r\n  var tooltipDimLen = tooltipDims.length;\r\n  var value = series.getRawValue(dataIndex);\r\n  var isValueArr = isArray(value);\r\n  var markerColor = retrieveVisualColorForTooltipMarker(series, dataIndex);\r\n  // Complicated rule for pretty tooltip.\r\n  var inlineValue;\r\n  var inlineValueType;\r\n  var subBlocks;\r\n  var sortParam;\r\n  if (tooltipDimLen > 1 || isValueArr && !tooltipDimLen) {\r\n    var formatArrResult = formatTooltipArrayValue(value, series, dataIndex, tooltipDims, markerColor);\r\n    inlineValue = formatArrResult.inlineValues;\r\n    inlineValueType = formatArrResult.inlineValueTypes;\r\n    subBlocks = formatArrResult.blocks;\r\n    // Only support tooltip sort by the first inline value. It's enough in most cases.\r\n    sortParam = formatArrResult.inlineValues[0];\r\n  } else if (tooltipDimLen) {\r\n    var dimInfo = data.getDimensionInfo(tooltipDims[0]);\r\n    sortParam = inlineValue = retrieveRawValue(data, dataIndex, tooltipDims[0]);\r\n    inlineValueType = dimInfo.type;\r\n  } else {\r\n    sortParam = inlineValue = isValueArr ? value[0] : value;\r\n  }\r\n  // Do not show generated series name. It might not be readable.\r\n  var seriesNameSpecified = isNameSpecified(series);\r\n  var seriesName = seriesNameSpecified && series.name || '';\r\n  var itemName = data.getName(dataIndex);\r\n  var inlineName = multipleSeries ? seriesName : itemName;\r\n  return createTooltipMarkup('section', {\r\n    header: seriesName,\r\n    // When series name is not specified, do not show a header line with only '-'.\r\n    // This case always happens in tooltip.trigger: 'item'.\r\n    noHeader: multipleSeries || !seriesNameSpecified,\r\n    sortParam: sortParam,\r\n    blocks: [createTooltipMarkup('nameValue', {\r\n      markerType: 'item',\r\n      markerColor: markerColor,\r\n      // Do not mix display seriesName and itemName in one tooltip,\r\n      // which might confuses users.\r\n      name: inlineName,\r\n      // name dimension might be auto assigned, where the name might\r\n      // be not readable. So we check trim here.\r\n      noName: !trim(inlineName),\r\n      value: inlineValue,\r\n      valueType: inlineValueType,\r\n      dataIndex: dataIndex\r\n    })].concat(subBlocks || [])\r\n  });\r\n}\r\nfunction formatTooltipArrayValue(value, series, dataIndex, tooltipDims, colorStr) {\r\n  // check: category-no-encode-has-axis-data in dataset.html\r\n  var data = series.getData();\r\n  var isValueMultipleLine = reduce(value, function (isValueMultipleLine, val, idx) {\r\n    var dimItem = data.getDimensionInfo(idx);\r\n    return isValueMultipleLine = isValueMultipleLine || dimItem && dimItem.tooltip !== false && dimItem.displayName != null;\r\n  }, false);\r\n  var inlineValues = [];\r\n  var inlineValueTypes = [];\r\n  var blocks = [];\r\n  tooltipDims.length ? each(tooltipDims, function (dim) {\r\n    setEachItem(retrieveRawValue(data, dataIndex, dim), dim);\r\n  })\r\n  // By default, all dims is used on tooltip.\r\n  : each(value, setEachItem);\r\n  function setEachItem(val, dim) {\r\n    var dimInfo = data.getDimensionInfo(dim);\r\n    // If `dimInfo.tooltip` is not set, show tooltip.\r\n    if (!dimInfo || dimInfo.otherDims.tooltip === false) {\r\n      return;\r\n    }\r\n    if (isValueMultipleLine) {\r\n      blocks.push(createTooltipMarkup('nameValue', {\r\n        markerType: 'subItem',\r\n        markerColor: colorStr,\r\n        name: dimInfo.displayName,\r\n        value: val,\r\n        valueType: dimInfo.type\r\n      }));\r\n    } else {\r\n      inlineValues.push(val);\r\n      inlineValueTypes.push(dimInfo.type);\r\n    }\r\n  }\r\n  return {\r\n    inlineValues: inlineValues,\r\n    inlineValueTypes: inlineValueTypes,\r\n    blocks: blocks\r\n  };\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport env from 'zrender/lib/core/env.js';\r\nimport * as modelUtil from '../util/model.js';\r\nimport ComponentModel from './Component.js';\r\nimport { PaletteMixin } from './mixin/palette.js';\r\nimport { DataFormatMixin } from '../model/mixin/dataFormat.js';\r\nimport { getLayoutParams, mergeLayoutParam, fetchLayoutMode } from '../util/layout.js';\r\nimport { createTask } from '../core/task.js';\r\nimport { mountExtend } from '../util/clazz.js';\r\nimport { SourceManager } from '../data/helper/sourceManager.js';\r\nimport { defaultSeriesFormatTooltip } from '../component/tooltip/seriesFormatTooltip.js';\r\nvar inner = modelUtil.makeInner();\r\nfunction getSelectionKey(data, dataIndex) {\r\n  return data.getName(dataIndex) || data.getId(dataIndex);\r\n}\r\nexport var SERIES_UNIVERSAL_TRANSITION_PROP = '__universalTransitionEnabled';\r\nvar SeriesModel = /** @class */function (_super) {\r\n  __extends(SeriesModel, _super);\r\n  function SeriesModel() {\r\n    // [Caution]: Because this class or desecendants can be used as `XXX.extend(subProto)`,\r\n    // the class members must not be initialized in constructor or declaration place.\r\n    // Otherwise there is bad case:\r\n    //   class A {xxx = 1;}\r\n    //   enableClassExtend(A);\r\n    //   class B extends A {}\r\n    //   var C = B.extend({xxx: 5});\r\n    //   var c = new C();\r\n    //   console.log(c.xxx); // expect 5 but always 1.\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n    // ---------------------------------------\r\n    // Props about data selection\r\n    // ---------------------------------------\r\n    _this._selectedDataIndicesMap = {};\r\n    return _this;\r\n  }\r\n  SeriesModel.prototype.init = function (option, parentModel, ecModel) {\r\n    this.seriesIndex = this.componentIndex;\r\n    this.dataTask = createTask({\r\n      count: dataTaskCount,\r\n      reset: dataTaskReset\r\n    });\r\n    this.dataTask.context = {\r\n      model: this\r\n    };\r\n    this.mergeDefaultAndTheme(option, ecModel);\r\n    var sourceManager = inner(this).sourceManager = new SourceManager(this);\r\n    sourceManager.prepareSource();\r\n    var data = this.getInitialData(option, ecModel);\r\n    wrapData(data, this);\r\n    this.dataTask.context.data = data;\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      zrUtil.assert(data, 'getInitialData returned invalid data.');\r\n    }\r\n    inner(this).dataBeforeProcessed = data;\r\n    // If we reverse the order (make data firstly, and then make\r\n    // dataBeforeProcessed by cloneShallow), cloneShallow will\r\n    // cause data.graph.data !== data when using\r\n    // module:echarts/data/Graph or module:echarts/data/Tree.\r\n    // See module:echarts/data/helper/linkSeriesData\r\n    // Theoretically, it is unreasonable to call `seriesModel.getData()` in the model\r\n    // init or merge stage, because the data can be restored. So we do not `restoreData`\r\n    // and `setData` here, which forbids calling `seriesModel.getData()` in this stage.\r\n    // Call `seriesModel.getRawData()` instead.\r\n    // this.restoreData();\r\n    autoSeriesName(this);\r\n    this._initSelectedMapFromData(data);\r\n  };\r\n  /**\r\n   * Util for merge default and theme to option\r\n   */\r\n  SeriesModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\r\n    var layoutMode = fetchLayoutMode(this);\r\n    var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\r\n    // Backward compat: using subType on theme.\r\n    // But if name duplicate between series subType\r\n    // (for example: parallel) add component mainType,\r\n    // add suffix 'Series'.\r\n    var themeSubType = this.subType;\r\n    if (ComponentModel.hasClass(themeSubType)) {\r\n      themeSubType += 'Series';\r\n    }\r\n    zrUtil.merge(option, ecModel.getTheme().get(this.subType));\r\n    zrUtil.merge(option, this.getDefaultOption());\r\n    // Default label emphasis `show`\r\n    modelUtil.defaultEmphasis(option, 'label', ['show']);\r\n    this.fillDataTextStyle(option.data);\r\n    if (layoutMode) {\r\n      mergeLayoutParam(option, inputPositionParams, layoutMode);\r\n    }\r\n  };\r\n  SeriesModel.prototype.mergeOption = function (newSeriesOption, ecModel) {\r\n    // this.settingTask.dirty();\r\n    newSeriesOption = zrUtil.merge(this.option, newSeriesOption, true);\r\n    this.fillDataTextStyle(newSeriesOption.data);\r\n    var layoutMode = fetchLayoutMode(this);\r\n    if (layoutMode) {\r\n      mergeLayoutParam(this.option, newSeriesOption, layoutMode);\r\n    }\r\n    var sourceManager = inner(this).sourceManager;\r\n    sourceManager.dirty();\r\n    sourceManager.prepareSource();\r\n    var data = this.getInitialData(newSeriesOption, ecModel);\r\n    wrapData(data, this);\r\n    this.dataTask.dirty();\r\n    this.dataTask.context.data = data;\r\n    inner(this).dataBeforeProcessed = data;\r\n    autoSeriesName(this);\r\n    this._initSelectedMapFromData(data);\r\n  };\r\n  SeriesModel.prototype.fillDataTextStyle = function (data) {\r\n    // Default data label emphasis `show`\r\n    // FIXME Tree structure data ?\r\n    // FIXME Performance ?\r\n    if (data && !zrUtil.isTypedArray(data)) {\r\n      var props = ['show'];\r\n      for (var i = 0; i < data.length; i++) {\r\n        if (data[i] && data[i].label) {\r\n          modelUtil.defaultEmphasis(data[i], 'label', props);\r\n        }\r\n      }\r\n    }\r\n  };\r\n  /**\r\n   * Init a data structure from data related option in series\r\n   * Must be overridden.\r\n   */\r\n  SeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n    return;\r\n  };\r\n  /**\r\n   * Append data to list\r\n   */\r\n  SeriesModel.prototype.appendData = function (params) {\r\n    // FIXME ???\r\n    // (1) If data from dataset, forbidden append.\r\n    // (2) support append data of dataset.\r\n    var data = this.getRawData();\r\n    data.appendData(params.data);\r\n  };\r\n  /**\r\n   * Consider some method like `filter`, `map` need make new data,\r\n   * We should make sure that `seriesModel.getData()` get correct\r\n   * data in the stream procedure. So we fetch data from upstream\r\n   * each time `task.perform` called.\r\n   */\r\n  SeriesModel.prototype.getData = function (dataType) {\r\n    var task = getCurrentTask(this);\r\n    if (task) {\r\n      var data = task.context.data;\r\n      return dataType == null || !data.getLinkedData ? data : data.getLinkedData(dataType);\r\n    } else {\r\n      // When series is not alive (that may happen when click toolbox\r\n      // restore or setOption with not merge mode), series data may\r\n      // be still need to judge animation or something when graphic\r\n      // elements want to know whether fade out.\r\n      return inner(this).data;\r\n    }\r\n  };\r\n  SeriesModel.prototype.getAllData = function () {\r\n    var mainData = this.getData();\r\n    return mainData && mainData.getLinkedDataAll ? mainData.getLinkedDataAll() : [{\r\n      data: mainData\r\n    }];\r\n  };\r\n  SeriesModel.prototype.setData = function (data) {\r\n    var task = getCurrentTask(this);\r\n    if (task) {\r\n      var context = task.context;\r\n      // Consider case: filter, data sample.\r\n      // FIXME:TS never used, so comment it\r\n      // if (context.data !== data && task.modifyOutputEnd) {\r\n      //     task.setOutputEnd(data.count());\r\n      // }\r\n      context.outputData = data;\r\n      // Caution: setData should update context.data,\r\n      // Because getData may be called multiply in a\r\n      // single stage and expect to get the data just\r\n      // set. (For example, AxisProxy, x y both call\r\n      // getData and setDate sequentially).\r\n      // So the context.data should be fetched from\r\n      // upstream each time when a stage starts to be\r\n      // performed.\r\n      if (task !== this.dataTask) {\r\n        context.data = data;\r\n      }\r\n    }\r\n    inner(this).data = data;\r\n  };\r\n  SeriesModel.prototype.getEncode = function () {\r\n    var encode = this.get('encode', true);\r\n    if (encode) {\r\n      return zrUtil.createHashMap(encode);\r\n    }\r\n  };\r\n  SeriesModel.prototype.getSourceManager = function () {\r\n    return inner(this).sourceManager;\r\n  };\r\n  SeriesModel.prototype.getSource = function () {\r\n    return this.getSourceManager().getSource();\r\n  };\r\n  /**\r\n   * Get data before processed\r\n   */\r\n  SeriesModel.prototype.getRawData = function () {\r\n    return inner(this).dataBeforeProcessed;\r\n  };\r\n  SeriesModel.prototype.getColorBy = function () {\r\n    var colorBy = this.get('colorBy');\r\n    return colorBy || 'series';\r\n  };\r\n  SeriesModel.prototype.isColorBySeries = function () {\r\n    return this.getColorBy() === 'series';\r\n  };\r\n  /**\r\n   * Get base axis if has coordinate system and has axis.\r\n   * By default use coordSys.getBaseAxis();\r\n   * Can be overridden for some chart.\r\n   * @return {type} description\r\n   */\r\n  SeriesModel.prototype.getBaseAxis = function () {\r\n    var coordSys = this.coordinateSystem;\r\n    // @ts-ignore\r\n    return coordSys && coordSys.getBaseAxis && coordSys.getBaseAxis();\r\n  };\r\n  /**\r\n   * Default tooltip formatter\r\n   *\r\n   * @param dataIndex\r\n   * @param multipleSeries\r\n   * @param dataType\r\n   * @param renderMode valid values: 'html'(by default) and 'richText'.\r\n   *        'html' is used for rendering tooltip in extra DOM form, and the result\r\n   *        string is used as DOM HTML content.\r\n   *        'richText' is used for rendering tooltip in rich text form, for those where\r\n   *        DOM operation is not supported.\r\n   * @return formatted tooltip with `html` and `markers`\r\n   *        Notice: The override method can also return string\r\n   */\r\n  SeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\r\n    return defaultSeriesFormatTooltip({\r\n      series: this,\r\n      dataIndex: dataIndex,\r\n      multipleSeries: multipleSeries\r\n    });\r\n  };\r\n  SeriesModel.prototype.isAnimationEnabled = function () {\r\n    var ecModel = this.ecModel;\r\n    // Disable animation if using echarts in node but not give ssr flag.\r\n    // In ssr mode, renderToString will generate svg with css animation.\r\n    if (env.node && !(ecModel && ecModel.ssr)) {\r\n      return false;\r\n    }\r\n    var animationEnabled = this.getShallow('animation');\r\n    if (animationEnabled) {\r\n      if (this.getData().count() > this.getShallow('animationThreshold')) {\r\n        animationEnabled = false;\r\n      }\r\n    }\r\n    return !!animationEnabled;\r\n  };\r\n  SeriesModel.prototype.restoreData = function () {\r\n    this.dataTask.dirty();\r\n  };\r\n  SeriesModel.prototype.getColorFromPalette = function (name, scope, requestColorNum) {\r\n    var ecModel = this.ecModel;\r\n    // PENDING\r\n    var color = PaletteMixin.prototype.getColorFromPalette.call(this, name, scope, requestColorNum);\r\n    if (!color) {\r\n      color = ecModel.getColorFromPalette(name, scope, requestColorNum);\r\n    }\r\n    return color;\r\n  };\r\n  /**\r\n   * Use `data.mapDimensionsAll(coordDim)` instead.\r\n   * @deprecated\r\n   */\r\n  SeriesModel.prototype.coordDimToDataDim = function (coordDim) {\r\n    return this.getRawData().mapDimensionsAll(coordDim);\r\n  };\r\n  /**\r\n   * Get progressive rendering count each step\r\n   */\r\n  SeriesModel.prototype.getProgressive = function () {\r\n    return this.get('progressive');\r\n  };\r\n  /**\r\n   * Get progressive rendering count each step\r\n   */\r\n  SeriesModel.prototype.getProgressiveThreshold = function () {\r\n    return this.get('progressiveThreshold');\r\n  };\r\n  // PENGING If selectedMode is null ?\r\n  SeriesModel.prototype.select = function (innerDataIndices, dataType) {\r\n    this._innerSelect(this.getData(dataType), innerDataIndices);\r\n  };\r\n  SeriesModel.prototype.unselect = function (innerDataIndices, dataType) {\r\n    var selectedMap = this.option.selectedMap;\r\n    if (!selectedMap) {\r\n      return;\r\n    }\r\n    var selectedMode = this.option.selectedMode;\r\n    var data = this.getData(dataType);\r\n    if (selectedMode === 'series' || selectedMap === 'all') {\r\n      this.option.selectedMap = {};\r\n      this._selectedDataIndicesMap = {};\r\n      return;\r\n    }\r\n    for (var i = 0; i < innerDataIndices.length; i++) {\r\n      var dataIndex = innerDataIndices[i];\r\n      var nameOrId = getSelectionKey(data, dataIndex);\r\n      selectedMap[nameOrId] = false;\r\n      this._selectedDataIndicesMap[nameOrId] = -1;\r\n    }\r\n  };\r\n  SeriesModel.prototype.toggleSelect = function (innerDataIndices, dataType) {\r\n    var tmpArr = [];\r\n    for (var i = 0; i < innerDataIndices.length; i++) {\r\n      tmpArr[0] = innerDataIndices[i];\r\n      this.isSelected(innerDataIndices[i], dataType) ? this.unselect(tmpArr, dataType) : this.select(tmpArr, dataType);\r\n    }\r\n  };\r\n  SeriesModel.prototype.getSelectedDataIndices = function () {\r\n    if (this.option.selectedMap === 'all') {\r\n      return [].slice.call(this.getData().getIndices());\r\n    }\r\n    var selectedDataIndicesMap = this._selectedDataIndicesMap;\r\n    var nameOrIds = zrUtil.keys(selectedDataIndicesMap);\r\n    var dataIndices = [];\r\n    for (var i = 0; i < nameOrIds.length; i++) {\r\n      var dataIndex = selectedDataIndicesMap[nameOrIds[i]];\r\n      if (dataIndex >= 0) {\r\n        dataIndices.push(dataIndex);\r\n      }\r\n    }\r\n    return dataIndices;\r\n  };\r\n  SeriesModel.prototype.isSelected = function (dataIndex, dataType) {\r\n    var selectedMap = this.option.selectedMap;\r\n    if (!selectedMap) {\r\n      return false;\r\n    }\r\n    var data = this.getData(dataType);\r\n    return (selectedMap === 'all' || selectedMap[getSelectionKey(data, dataIndex)]) && !data.getItemModel(dataIndex).get(['select', 'disabled']);\r\n  };\r\n  SeriesModel.prototype.isUniversalTransitionEnabled = function () {\r\n    if (this[SERIES_UNIVERSAL_TRANSITION_PROP]) {\r\n      return true;\r\n    }\r\n    var universalTransitionOpt = this.option.universalTransition;\r\n    // Quick reject\r\n    if (!universalTransitionOpt) {\r\n      return false;\r\n    }\r\n    if (universalTransitionOpt === true) {\r\n      return true;\r\n    }\r\n    // Can be simply 'universalTransition: true'\r\n    return universalTransitionOpt && universalTransitionOpt.enabled;\r\n  };\r\n  SeriesModel.prototype._innerSelect = function (data, innerDataIndices) {\r\n    var _a, _b;\r\n    var option = this.option;\r\n    var selectedMode = option.selectedMode;\r\n    var len = innerDataIndices.length;\r\n    if (!selectedMode || !len) {\r\n      return;\r\n    }\r\n    if (selectedMode === 'series') {\r\n      option.selectedMap = 'all';\r\n    } else if (selectedMode === 'multiple') {\r\n      if (!zrUtil.isObject(option.selectedMap)) {\r\n        option.selectedMap = {};\r\n      }\r\n      var selectedMap = option.selectedMap;\r\n      for (var i = 0; i < len; i++) {\r\n        var dataIndex = innerDataIndices[i];\r\n        // TODO different types of data share same object.\r\n        var nameOrId = getSelectionKey(data, dataIndex);\r\n        selectedMap[nameOrId] = true;\r\n        this._selectedDataIndicesMap[nameOrId] = data.getRawIndex(dataIndex);\r\n      }\r\n    } else if (selectedMode === 'single' || selectedMode === true) {\r\n      var lastDataIndex = innerDataIndices[len - 1];\r\n      var nameOrId = getSelectionKey(data, lastDataIndex);\r\n      option.selectedMap = (_a = {}, _a[nameOrId] = true, _a);\r\n      this._selectedDataIndicesMap = (_b = {}, _b[nameOrId] = data.getRawIndex(lastDataIndex), _b);\r\n    }\r\n  };\r\n  SeriesModel.prototype._initSelectedMapFromData = function (data) {\r\n    // Ignore select info in data if selectedMap exists.\r\n    // NOTE It's only for legacy usage. edge data is not supported.\r\n    if (this.option.selectedMap) {\r\n      return;\r\n    }\r\n    var dataIndices = [];\r\n    if (data.hasItemOption) {\r\n      data.each(function (idx) {\r\n        var rawItem = data.getRawDataItem(idx);\r\n        if (rawItem && rawItem.selected) {\r\n          dataIndices.push(idx);\r\n        }\r\n      });\r\n    }\r\n    if (dataIndices.length > 0) {\r\n      this._innerSelect(data, dataIndices);\r\n    }\r\n  };\r\n  // /**\r\n  //  * @see {module:echarts/stream/Scheduler}\r\n  //  */\r\n  // abstract pipeTask: null\r\n  SeriesModel.registerClass = function (clz) {\r\n    return ComponentModel.registerClass(clz);\r\n  };\r\n  SeriesModel.protoInitialize = function () {\r\n    var proto = SeriesModel.prototype;\r\n    proto.type = 'series.__base__';\r\n    proto.seriesIndex = 0;\r\n    proto.ignoreStyleOnData = false;\r\n    proto.hasSymbolVisual = false;\r\n    proto.defaultSymbol = 'circle';\r\n    // Make sure the values can be accessed!\r\n    proto.visualStyleAccessPath = 'itemStyle';\r\n    proto.visualDrawType = 'fill';\r\n  }();\r\n  return SeriesModel;\r\n}(ComponentModel);\r\nzrUtil.mixin(SeriesModel, DataFormatMixin);\r\nzrUtil.mixin(SeriesModel, PaletteMixin);\r\nmountExtend(SeriesModel, ComponentModel);\r\n/**\r\n * MUST be called after `prepareSource` called\r\n * Here we need to make auto series, especially for auto legend. But we\r\n * do not modify series.name in option to avoid side effects.\r\n */\r\nfunction autoSeriesName(seriesModel) {\r\n  // User specified name has higher priority, otherwise it may cause\r\n  // series can not be queried unexpectedly.\r\n  var name = seriesModel.name;\r\n  if (!modelUtil.isNameSpecified(seriesModel)) {\r\n    seriesModel.name = getSeriesAutoName(seriesModel) || name;\r\n  }\r\n}\r\nfunction getSeriesAutoName(seriesModel) {\r\n  var data = seriesModel.getRawData();\r\n  var dataDims = data.mapDimensionsAll('seriesName');\r\n  var nameArr = [];\r\n  zrUtil.each(dataDims, function (dataDim) {\r\n    var dimInfo = data.getDimensionInfo(dataDim);\r\n    dimInfo.displayName && nameArr.push(dimInfo.displayName);\r\n  });\r\n  return nameArr.join(' ');\r\n}\r\nfunction dataTaskCount(context) {\r\n  return context.model.getRawData().count();\r\n}\r\nfunction dataTaskReset(context) {\r\n  var seriesModel = context.model;\r\n  seriesModel.setData(seriesModel.getRawData().cloneShallow());\r\n  return dataTaskProgress;\r\n}\r\nfunction dataTaskProgress(param, context) {\r\n  // Avoid repeat cloneShallow when data just created in reset.\r\n  if (context.outputData && param.end > context.outputData.count()) {\r\n    context.model.getRawData().cloneShallow(context.outputData);\r\n  }\r\n}\r\n// TODO refactor\r\nfunction wrapData(data, seriesModel) {\r\n  zrUtil.each(zrUtil.concatArray(data.CHANGABLE_METHODS, data.DOWNSAMPLE_METHODS), function (methodName) {\r\n    data.wrapMethod(methodName, zrUtil.curry(onDataChange, seriesModel));\r\n  });\r\n}\r\nfunction onDataChange(seriesModel, newList) {\r\n  var task = getCurrentTask(seriesModel);\r\n  if (task) {\r\n    // Consider case: filter, selectRange\r\n    task.setOutputEnd((newList || this).count());\r\n  }\r\n  return newList;\r\n}\r\nfunction getCurrentTask(seriesModel) {\r\n  var scheduler = (seriesModel.ecModel || {}).scheduler;\r\n  var pipeline = scheduler && scheduler.getPipeline(seriesModel.uid);\r\n  if (pipeline) {\r\n    // When pipline finished, the currrentTask keep the last\r\n    // task (renderTask).\r\n    var task = pipeline.currentTask;\r\n    if (task) {\r\n      var agentStubMap = task.agentStubMap;\r\n      if (agentStubMap) {\r\n        task = agentStubMap.get(seriesModel.uid);\r\n      }\r\n    }\r\n    return task;\r\n  }\r\n}\r\nexport default SeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { each } from 'zrender/lib/core/util.js';\r\nimport Group from 'zrender/lib/graphic/Group.js';\r\nimport * as componentUtil from '../util/component.js';\r\nimport * as clazzUtil from '../util/clazz.js';\r\nimport * as modelUtil from '../util/model.js';\r\nimport { enterEmphasis, leaveEmphasis, getHighlightDigit, isHighDownDispatcher } from '../util/states.js';\r\nimport { createTask } from '../core/task.js';\r\nimport createRenderPlanner from '../chart/helper/createRenderPlanner.js';\r\nimport { traverseElements } from '../util/graphic.js';\r\nimport { error } from '../util/log.js';\r\nvar inner = modelUtil.makeInner();\r\nvar renderPlanner = createRenderPlanner();\r\nvar ChartView = /** @class */function () {\r\n  function ChartView() {\r\n    this.group = new Group();\r\n    this.uid = componentUtil.getUID('viewChart');\r\n    this.renderTask = createTask({\r\n      plan: renderTaskPlan,\r\n      reset: renderTaskReset\r\n    });\r\n    this.renderTask.context = {\r\n      view: this\r\n    };\r\n  }\r\n  ChartView.prototype.init = function (ecModel, api) {};\r\n  ChartView.prototype.render = function (seriesModel, ecModel, api, payload) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      throw new Error('render method must been implemented');\r\n    }\r\n  };\r\n  /**\r\n   * Highlight series or specified data item.\r\n   */\r\n  ChartView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\r\n    var data = seriesModel.getData(payload && payload.dataType);\r\n    if (!data) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        error(\"Unknown dataType \" + payload.dataType);\r\n      }\r\n      return;\r\n    }\r\n    toggleHighlight(data, payload, 'emphasis');\r\n  };\r\n  /**\r\n   * Downplay series or specified data item.\r\n   */\r\n  ChartView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\r\n    var data = seriesModel.getData(payload && payload.dataType);\r\n    if (!data) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        error(\"Unknown dataType \" + payload.dataType);\r\n      }\r\n      return;\r\n    }\r\n    toggleHighlight(data, payload, 'normal');\r\n  };\r\n  /**\r\n   * Remove self.\r\n   */\r\n  ChartView.prototype.remove = function (ecModel, api) {\r\n    this.group.removeAll();\r\n  };\r\n  /**\r\n   * Dispose self.\r\n   */\r\n  ChartView.prototype.dispose = function (ecModel, api) {};\r\n  ChartView.prototype.updateView = function (seriesModel, ecModel, api, payload) {\r\n    this.render(seriesModel, ecModel, api, payload);\r\n  };\r\n  // FIXME never used?\r\n  ChartView.prototype.updateLayout = function (seriesModel, ecModel, api, payload) {\r\n    this.render(seriesModel, ecModel, api, payload);\r\n  };\r\n  // FIXME never used?\r\n  ChartView.prototype.updateVisual = function (seriesModel, ecModel, api, payload) {\r\n    this.render(seriesModel, ecModel, api, payload);\r\n  };\r\n  /**\r\n   * Traverse the new rendered elements.\r\n   *\r\n   * It will traverse the new added element in progressive rendering.\r\n   * And traverse all in normal rendering.\r\n   */\r\n  ChartView.prototype.eachRendered = function (cb) {\r\n    traverseElements(this.group, cb);\r\n  };\r\n  ChartView.markUpdateMethod = function (payload, methodName) {\r\n    inner(payload).updateMethod = methodName;\r\n  };\r\n  ChartView.protoInitialize = function () {\r\n    var proto = ChartView.prototype;\r\n    proto.type = 'chart';\r\n  }();\r\n  return ChartView;\r\n}();\r\n;\r\n/**\r\n * Set state of single element\r\n */\r\nfunction elSetState(el, state, highlightDigit) {\r\n  if (el && isHighDownDispatcher(el)) {\r\n    (state === 'emphasis' ? enterEmphasis : leaveEmphasis)(el, highlightDigit);\r\n  }\r\n}\r\nfunction toggleHighlight(data, payload, state) {\r\n  var dataIndex = modelUtil.queryDataIndex(data, payload);\r\n  var highlightDigit = payload && payload.highlightKey != null ? getHighlightDigit(payload.highlightKey) : null;\r\n  if (dataIndex != null) {\r\n    each(modelUtil.normalizeToArray(dataIndex), function (dataIdx) {\r\n      elSetState(data.getItemGraphicEl(dataIdx), state, highlightDigit);\r\n    });\r\n  } else {\r\n    data.eachItemGraphicEl(function (el) {\r\n      elSetState(el, state, highlightDigit);\r\n    });\r\n  }\r\n}\r\nclazzUtil.enableClassExtend(ChartView, ['dispose']);\r\nclazzUtil.enableClassManagement(ChartView);\r\nfunction renderTaskPlan(context) {\r\n  return renderPlanner(context.model);\r\n}\r\nfunction renderTaskReset(context) {\r\n  var seriesModel = context.model;\r\n  var ecModel = context.ecModel;\r\n  var api = context.api;\r\n  var payload = context.payload;\r\n  // FIXME: remove updateView updateVisual\r\n  var progressiveRender = seriesModel.pipelineContext.progressiveRender;\r\n  var view = context.view;\r\n  var updateMethod = payload && inner(payload).updateMethod;\r\n  var methodName = progressiveRender ? 'incrementalPrepareRender' : updateMethod && view[updateMethod] ? updateMethod\r\n  // `appendData` is also supported when data amount\r\n  // is less than progressive threshold.\r\n  : 'render';\r\n  if (methodName !== 'render') {\r\n    view[methodName](seriesModel, ecModel, api, payload);\r\n  }\r\n  return progressMethodMap[methodName];\r\n}\r\nvar progressMethodMap = {\r\n  incrementalPrepareRender: {\r\n    progress: function (params, context) {\r\n      context.view.incrementalRender(params, context.model, context.ecModel, context.api, context.payload);\r\n    }\r\n  },\r\n  render: {\r\n    // Put view.render in `progress` to support appendData. But in this case\r\n    // view.render should not be called in reset, otherwise it will be called\r\n    // twise. Use `forceFirstProgress` to make sure that view.render is called\r\n    // in any cases.\r\n    forceFirstProgress: true,\r\n    progress: function (params, context) {\r\n      context.view.render(context.model, context.ecModel, context.api, context.payload);\r\n    }\r\n  }\r\n};\r\nexport default ChartView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nvar platform = '';\r\n// Navigator not exists in node\r\nif (typeof navigator !== 'undefined') {\r\n  /* global navigator */\r\n  platform = navigator.platform || '';\r\n}\r\nvar decalColor = 'rgba(0, 0, 0, 0.2)';\r\nexport default {\r\n  darkMode: 'auto',\r\n  // backgroundColor: 'rgba(0,0,0,0)',\r\n  colorBy: 'series',\r\n  color: ['#5470c6', '#91cc75', '#fac858', '#ee6666', '#73c0de', '#3ba272', '#fc8452', '#9a60b4', '#ea7ccc'],\r\n  gradientColor: ['#f6efa6', '#d88273', '#bf444c'],\r\n  aria: {\r\n    decal: {\r\n      decals: [{\r\n        color: decalColor,\r\n        dashArrayX: [1, 0],\r\n        dashArrayY: [2, 5],\r\n        symbolSize: 1,\r\n        rotation: Math.PI / 6\r\n      }, {\r\n        color: decalColor,\r\n        symbol: 'circle',\r\n        dashArrayX: [[8, 8], [0, 8, 8, 0]],\r\n        dashArrayY: [6, 0],\r\n        symbolSize: 0.8\r\n      }, {\r\n        color: decalColor,\r\n        dashArrayX: [1, 0],\r\n        dashArrayY: [4, 3],\r\n        rotation: -Math.PI / 4\r\n      }, {\r\n        color: decalColor,\r\n        dashArrayX: [[6, 6], [0, 6, 6, 0]],\r\n        dashArrayY: [6, 0]\r\n      }, {\r\n        color: decalColor,\r\n        dashArrayX: [[1, 0], [1, 6]],\r\n        dashArrayY: [1, 0, 6, 0],\r\n        rotation: Math.PI / 4\r\n      }, {\r\n        color: decalColor,\r\n        symbol: 'triangle',\r\n        dashArrayX: [[9, 9], [0, 9, 9, 0]],\r\n        dashArrayY: [7, 2],\r\n        symbolSize: 0.75\r\n      }]\r\n    }\r\n  },\r\n  // If xAxis and yAxis declared, grid is created by default.\r\n  // grid: {},\r\n  textStyle: {\r\n    // color: '#000',\r\n    // decoration: 'none',\r\n    // PENDING\r\n    fontFamily: platform.match(/^Win/) ? 'Microsoft YaHei' : 'sans-serif',\r\n    // fontFamily: 'Arial, Verdana, sans-serif',\r\n    fontSize: 12,\r\n    fontStyle: 'normal',\r\n    fontWeight: 'normal'\r\n  },\r\n  // http://blogs.adobe.com/webplatform/2014/02/24/using-blend-modes-in-html-canvas/\r\n  // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation\r\n  // Default is source-over\r\n  blendMode: null,\r\n  stateAnimation: {\r\n    duration: 300,\r\n    easing: 'cubicOut'\r\n  },\r\n  animation: 'auto',\r\n  animationDuration: 1000,\r\n  animationDurationUpdate: 500,\r\n  animationEasing: 'cubicInOut',\r\n  animationEasingUpdate: 'cubicInOut',\r\n  animationThreshold: 2000,\r\n  // Configuration for progressive/incremental rendering\r\n  progressiveThreshold: 3000,\r\n  progressive: 400,\r\n  // Threshold of if use single hover layer to optimize.\r\n  // It is recommended that `hoverLayerThreshold` is equivalent to or less than\r\n  // `progressiveThreshold`, otherwise hover will cause restart of progressive,\r\n  // which is unexpected.\r\n  // see example <echarts/test/heatmap-large.html>.\r\n  hoverLayerThreshold: 3000,\r\n  // See: module:echarts/scale/Time\r\n  useUTC: false\r\n};", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { createHashMap, assert } from 'zrender/lib/core/util.js';\r\nimport { isComponentIdInternal } from '../util/model.js';\r\nvar internalOptionCreatorMap = createHashMap();\r\nexport function registerInternalOptionCreator(mainType, creator) {\r\n  assert(internalOptionCreatorMap.get(mainType) == null && creator);\r\n  internalOptionCreatorMap.set(mainType, creator);\r\n}\r\nexport function concatInternalOptions(ecModel, mainType, newCmptOptionList) {\r\n  var internalOptionCreator = internalOptionCreatorMap.get(mainType);\r\n  if (!internalOptionCreator) {\r\n    return newCmptOptionList;\r\n  }\r\n  var internalOptions = internalOptionCreator(ecModel);\r\n  if (!internalOptions) {\r\n    return newCmptOptionList;\r\n  }\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    for (var i = 0; i < internalOptions.length; i++) {\r\n      assert(isComponentIdInternal(internalOptions[i]));\r\n    }\r\n  }\r\n  return newCmptOptionList.concat(internalOptions);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\n/**\r\n * Caution: If the mechanism should be changed some day, these cases\r\n * should be considered:\r\n *\r\n * (1) In `merge option` mode, if using the same option to call `setOption`\r\n * many times, the result should be the same (try our best to ensure that).\r\n * (2) In `merge option` mode, if a component has no id/name specified, it\r\n * will be merged by index, and the result sequence of the components is\r\n * consistent to the original sequence.\r\n * (3) In `replaceMerge` mode, keep the result sequence of the components is\r\n * consistent to the original sequence, even though there might result in \"hole\".\r\n * (4) `reset` feature (in toolbox). Find detailed info in comments about\r\n * `mergeOption` in module:echarts/model/OptionManager.\r\n */\r\nimport { each, filter, isArray, isObject, isString, createHashMap, assert, clone, merge, extend, mixin, isFunction } from 'zrender/lib/core/util.js';\r\nimport * as modelUtil from '../util/model.js';\r\nimport Model from './Model.js';\r\nimport ComponentModel from './Component.js';\r\nimport globalDefault from './globalDefault.js';\r\nimport { resetSourceDefaulter } from '../data/helper/sourceHelper.js';\r\nimport { concatInternalOptions } from './internalComponentCreator.js';\r\nimport { PaletteMixin } from './mixin/palette.js';\r\nimport { error, warn } from '../util/log.js';\r\n// -----------------------\r\n// Internal method names:\r\n// -----------------------\r\nvar reCreateSeriesIndices;\r\nvar assertSeriesInitialized;\r\nvar initBase;\r\nvar OPTION_INNER_KEY = '\\0_ec_inner';\r\nvar OPTION_INNER_VALUE = 1;\r\nvar BUITIN_COMPONENTS_MAP = {\r\n  grid: 'GridComponent',\r\n  polar: 'PolarComponent',\r\n  geo: 'GeoComponent',\r\n  singleAxis: 'SingleAxisComponent',\r\n  parallel: 'ParallelComponent',\r\n  calendar: 'CalendarComponent',\r\n  graphic: 'GraphicComponent',\r\n  toolbox: 'ToolboxComponent',\r\n  tooltip: 'TooltipComponent',\r\n  axisPointer: 'AxisPointerComponent',\r\n  brush: 'BrushComponent',\r\n  title: 'TitleComponent',\r\n  timeline: 'TimelineComponent',\r\n  markPoint: 'MarkPointComponent',\r\n  markLine: 'MarkLineComponent',\r\n  markArea: 'MarkAreaComponent',\r\n  legend: 'LegendComponent',\r\n  dataZoom: 'DataZoomComponent',\r\n  visualMap: 'VisualMapComponent',\r\n  // aria: 'AriaComponent',\r\n  // dataset: 'DatasetComponent',\r\n  // Dependencies\r\n  xAxis: 'GridComponent',\r\n  yAxis: 'GridComponent',\r\n  angleAxis: 'PolarComponent',\r\n  radiusAxis: 'PolarComponent'\r\n};\r\nvar BUILTIN_CHARTS_MAP = {\r\n  line: 'LineChart',\r\n  bar: 'BarChart',\r\n  pie: 'PieChart',\r\n  scatter: 'ScatterChart',\r\n  radar: 'RadarChart',\r\n  map: 'MapChart',\r\n  tree: 'TreeChart',\r\n  treemap: 'TreemapChart',\r\n  graph: 'GraphChart',\r\n  gauge: 'GaugeChart',\r\n  funnel: 'FunnelChart',\r\n  parallel: 'ParallelChart',\r\n  sankey: 'SankeyChart',\r\n  boxplot: 'BoxplotChart',\r\n  candlestick: 'CandlestickChart',\r\n  effectScatter: 'EffectScatterChart',\r\n  lines: 'LinesChart',\r\n  heatmap: 'HeatmapChart',\r\n  pictorialBar: 'PictorialBarChart',\r\n  themeRiver: 'ThemeRiverChart',\r\n  sunburst: 'SunburstChart',\r\n  custom: 'CustomChart'\r\n};\r\nvar componetsMissingLogPrinted = {};\r\nfunction checkMissingComponents(option) {\r\n  each(option, function (componentOption, mainType) {\r\n    if (!ComponentModel.hasClass(mainType)) {\r\n      var componentImportName = BUITIN_COMPONENTS_MAP[mainType];\r\n      if (componentImportName && !componetsMissingLogPrinted[componentImportName]) {\r\n        error(\"Component \" + mainType + \" is used but not imported.\\nimport { \" + componentImportName + \" } from 'echarts/components';\\necharts.use([\" + componentImportName + \"]);\");\r\n        componetsMissingLogPrinted[componentImportName] = true;\r\n      }\r\n    }\r\n  });\r\n}\r\nvar GlobalModel = /** @class */function (_super) {\r\n  __extends(GlobalModel, _super);\r\n  function GlobalModel() {\r\n    return _super !== null && _super.apply(this, arguments) || this;\r\n  }\r\n  GlobalModel.prototype.init = function (option, parentModel, ecModel, theme, locale, optionManager) {\r\n    theme = theme || {};\r\n    this.option = null; // Mark as not initialized.\r\n    this._theme = new Model(theme);\r\n    this._locale = new Model(locale);\r\n    this._optionManager = optionManager;\r\n  };\r\n  GlobalModel.prototype.setOption = function (option, opts, optionPreprocessorFuncs) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      assert(option != null, 'option is null/undefined');\r\n      assert(option[OPTION_INNER_KEY] !== OPTION_INNER_VALUE, 'please use chart.getOption()');\r\n    }\r\n    var innerOpt = normalizeSetOptionInput(opts);\r\n    this._optionManager.setOption(option, optionPreprocessorFuncs, innerOpt);\r\n    this._resetOption(null, innerOpt);\r\n  };\r\n  /**\r\n   * @param type null/undefined: reset all.\r\n   *        'recreate': force recreate all.\r\n   *        'timeline': only reset timeline option\r\n   *        'media': only reset media query option\r\n   * @return Whether option changed.\r\n   */\r\n  GlobalModel.prototype.resetOption = function (type, opt) {\r\n    return this._resetOption(type, normalizeSetOptionInput(opt));\r\n  };\r\n  GlobalModel.prototype._resetOption = function (type, opt) {\r\n    var optionChanged = false;\r\n    var optionManager = this._optionManager;\r\n    if (!type || type === 'recreate') {\r\n      var baseOption = optionManager.mountOption(type === 'recreate');\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        checkMissingComponents(baseOption);\r\n      }\r\n      if (!this.option || type === 'recreate') {\r\n        initBase(this, baseOption);\r\n      } else {\r\n        this.restoreData();\r\n        this._mergeOption(baseOption, opt);\r\n      }\r\n      optionChanged = true;\r\n    }\r\n    if (type === 'timeline' || type === 'media') {\r\n      this.restoreData();\r\n    }\r\n    // By design, if `setOption(option2)` at the second time, and `option2` is a `ECUnitOption`,\r\n    // it should better not have the same props with `MediaUnit['option']`.\r\n    // Because either `option2` or `MediaUnit['option']` will be always merged to \"current option\"\r\n    // rather than original \"baseOption\". If they both override a prop, the result might be\r\n    // unexpected when media state changed after `setOption` called.\r\n    // If we really need to modify a props in each `MediaUnit['option']`, use the full version\r\n    // (`{baseOption, media}`) in `setOption`.\r\n    // For `timeline`, the case is the same.\r\n    if (!type || type === 'recreate' || type === 'timeline') {\r\n      var timelineOption = optionManager.getTimelineOption(this);\r\n      if (timelineOption) {\r\n        optionChanged = true;\r\n        this._mergeOption(timelineOption, opt);\r\n      }\r\n    }\r\n    if (!type || type === 'recreate' || type === 'media') {\r\n      var mediaOptions = optionManager.getMediaOption(this);\r\n      if (mediaOptions.length) {\r\n        each(mediaOptions, function (mediaOption) {\r\n          optionChanged = true;\r\n          this._mergeOption(mediaOption, opt);\r\n        }, this);\r\n      }\r\n    }\r\n    return optionChanged;\r\n  };\r\n  GlobalModel.prototype.mergeOption = function (option) {\r\n    this._mergeOption(option, null);\r\n  };\r\n  GlobalModel.prototype._mergeOption = function (newOption, opt) {\r\n    var option = this.option;\r\n    var componentsMap = this._componentsMap;\r\n    var componentsCount = this._componentsCount;\r\n    var newCmptTypes = [];\r\n    var newCmptTypeMap = createHashMap();\r\n    var replaceMergeMainTypeMap = opt && opt.replaceMergeMainTypeMap;\r\n    resetSourceDefaulter(this);\r\n    // If no component class, merge directly.\r\n    // For example: color, animaiton options, etc.\r\n    each(newOption, function (componentOption, mainType) {\r\n      if (componentOption == null) {\r\n        return;\r\n      }\r\n      if (!ComponentModel.hasClass(mainType)) {\r\n        // globalSettingTask.dirty();\r\n        option[mainType] = option[mainType] == null ? clone(componentOption) : merge(option[mainType], componentOption, true);\r\n      } else if (mainType) {\r\n        newCmptTypes.push(mainType);\r\n        newCmptTypeMap.set(mainType, true);\r\n      }\r\n    });\r\n    if (replaceMergeMainTypeMap) {\r\n      // If there is a mainType `xxx` in `replaceMerge` but not declared in option,\r\n      // we trade it as it is declared in option as `{xxx: []}`. Because:\r\n      // (1) for normal merge, `{xxx: null/undefined}` are the same meaning as `{xxx: []}`.\r\n      // (2) some preprocessor may convert some of `{xxx: null/undefined}` to `{xxx: []}`.\r\n      replaceMergeMainTypeMap.each(function (val, mainTypeInReplaceMerge) {\r\n        if (ComponentModel.hasClass(mainTypeInReplaceMerge) && !newCmptTypeMap.get(mainTypeInReplaceMerge)) {\r\n          newCmptTypes.push(mainTypeInReplaceMerge);\r\n          newCmptTypeMap.set(mainTypeInReplaceMerge, true);\r\n        }\r\n      });\r\n    }\r\n    ComponentModel.topologicalTravel(newCmptTypes, ComponentModel.getAllClassMainTypes(), visitComponent, this);\r\n    function visitComponent(mainType) {\r\n      var newCmptOptionList = concatInternalOptions(this, mainType, modelUtil.normalizeToArray(newOption[mainType]));\r\n      var oldCmptList = componentsMap.get(mainType);\r\n      var mergeMode =\r\n      // `!oldCmptList` means init. See the comment in `mappingToExists`\r\n      !oldCmptList ? 'replaceAll' : replaceMergeMainTypeMap && replaceMergeMainTypeMap.get(mainType) ? 'replaceMerge' : 'normalMerge';\r\n      var mappingResult = modelUtil.mappingToExists(oldCmptList, newCmptOptionList, mergeMode);\r\n      // Set mainType and complete subType.\r\n      modelUtil.setComponentTypeToKeyInfo(mappingResult, mainType, ComponentModel);\r\n      // Empty it before the travel, in order to prevent `this._componentsMap`\r\n      // from being used in the `init`/`mergeOption`/`optionUpdated` of some\r\n      // components, which is probably incorrect logic.\r\n      option[mainType] = null;\r\n      componentsMap.set(mainType, null);\r\n      componentsCount.set(mainType, 0);\r\n      var optionsByMainType = [];\r\n      var cmptsByMainType = [];\r\n      var cmptsCountByMainType = 0;\r\n      var tooltipExists;\r\n      var tooltipWarningLogged;\r\n      each(mappingResult, function (resultItem, index) {\r\n        var componentModel = resultItem.existing;\r\n        var newCmptOption = resultItem.newOption;\r\n        if (!newCmptOption) {\r\n          if (componentModel) {\r\n            // Consider where is no new option and should be merged using {},\r\n            // see removeEdgeAndAdd in topologicalTravel and\r\n            // ComponentModel.getAllClassMainTypes.\r\n            componentModel.mergeOption({}, this);\r\n            componentModel.optionUpdated({}, false);\r\n          }\r\n          // If no both `resultItem.exist` and `resultItem.option`,\r\n          // either it is in `replaceMerge` and not matched by any id,\r\n          // or it has been removed in previous `replaceMerge` and left a \"hole\" in this component index.\r\n        } else {\r\n          var isSeriesType = mainType === 'series';\r\n          var ComponentModelClass = ComponentModel.getClass(mainType, resultItem.keyInfo.subType, !isSeriesType // Give a more detailed warn later if series don't exists\r\n          );\r\n          if (!ComponentModelClass) {\r\n            if (process.env.NODE_ENV !== 'production') {\r\n              var subType = resultItem.keyInfo.subType;\r\n              var seriesImportName = BUILTIN_CHARTS_MAP[subType];\r\n              if (!componetsMissingLogPrinted[subType]) {\r\n                componetsMissingLogPrinted[subType] = true;\r\n                if (seriesImportName) {\r\n                  error(\"Series \" + subType + \" is used but not imported.\\nimport { \" + seriesImportName + \" } from 'echarts/charts';\\necharts.use([\" + seriesImportName + \"]);\");\r\n                } else {\r\n                  error(\"Unknown series \" + subType);\r\n                }\r\n              }\r\n            }\r\n            return;\r\n          }\r\n          // TODO Before multiple tooltips get supported, we do this check to avoid unexpected exception.\r\n          if (mainType === 'tooltip') {\r\n            if (tooltipExists) {\r\n              if (process.env.NODE_ENV !== 'production') {\r\n                if (!tooltipWarningLogged) {\r\n                  warn('Currently only one tooltip component is allowed.');\r\n                  tooltipWarningLogged = true;\r\n                }\r\n              }\r\n              return;\r\n            }\r\n            tooltipExists = true;\r\n          }\r\n          if (componentModel && componentModel.constructor === ComponentModelClass) {\r\n            componentModel.name = resultItem.keyInfo.name;\r\n            // componentModel.settingTask && componentModel.settingTask.dirty();\r\n            componentModel.mergeOption(newCmptOption, this);\r\n            componentModel.optionUpdated(newCmptOption, false);\r\n          } else {\r\n            // PENDING Global as parent ?\r\n            var extraOpt = extend({\r\n              componentIndex: index\r\n            }, resultItem.keyInfo);\r\n            componentModel = new ComponentModelClass(newCmptOption, this, this, extraOpt);\r\n            // Assign `keyInfo`\r\n            extend(componentModel, extraOpt);\r\n            if (resultItem.brandNew) {\r\n              componentModel.__requireNewView = true;\r\n            }\r\n            componentModel.init(newCmptOption, this, this);\r\n            // Call optionUpdated after init.\r\n            // newCmptOption has been used as componentModel.option\r\n            // and may be merged with theme and default, so pass null\r\n            // to avoid confusion.\r\n            componentModel.optionUpdated(null, true);\r\n          }\r\n        }\r\n        if (componentModel) {\r\n          optionsByMainType.push(componentModel.option);\r\n          cmptsByMainType.push(componentModel);\r\n          cmptsCountByMainType++;\r\n        } else {\r\n          // Always do assign to avoid elided item in array.\r\n          optionsByMainType.push(void 0);\r\n          cmptsByMainType.push(void 0);\r\n        }\r\n      }, this);\r\n      option[mainType] = optionsByMainType;\r\n      componentsMap.set(mainType, cmptsByMainType);\r\n      componentsCount.set(mainType, cmptsCountByMainType);\r\n      // Backup series for filtering.\r\n      if (mainType === 'series') {\r\n        reCreateSeriesIndices(this);\r\n      }\r\n    }\r\n    // If no series declared, ensure `_seriesIndices` initialized.\r\n    if (!this._seriesIndices) {\r\n      reCreateSeriesIndices(this);\r\n    }\r\n  };\r\n  /**\r\n   * Get option for output (cloned option and inner info removed)\r\n   */\r\n  GlobalModel.prototype.getOption = function () {\r\n    var option = clone(this.option);\r\n    each(option, function (optInMainType, mainType) {\r\n      if (ComponentModel.hasClass(mainType)) {\r\n        var opts = modelUtil.normalizeToArray(optInMainType);\r\n        // Inner cmpts need to be removed.\r\n        // Inner cmpts might not be at last since ec5.0, but still\r\n        // compatible for users: if inner cmpt at last, splice the returned array.\r\n        var realLen = opts.length;\r\n        var metNonInner = false;\r\n        for (var i = realLen - 1; i >= 0; i--) {\r\n          // Remove options with inner id.\r\n          if (opts[i] && !modelUtil.isComponentIdInternal(opts[i])) {\r\n            metNonInner = true;\r\n          } else {\r\n            opts[i] = null;\r\n            !metNonInner && realLen--;\r\n          }\r\n        }\r\n        opts.length = realLen;\r\n        option[mainType] = opts;\r\n      }\r\n    });\r\n    delete option[OPTION_INNER_KEY];\r\n    return option;\r\n  };\r\n  GlobalModel.prototype.getTheme = function () {\r\n    return this._theme;\r\n  };\r\n  GlobalModel.prototype.getLocaleModel = function () {\r\n    return this._locale;\r\n  };\r\n  GlobalModel.prototype.setUpdatePayload = function (payload) {\r\n    this._payload = payload;\r\n  };\r\n  GlobalModel.prototype.getUpdatePayload = function () {\r\n    return this._payload;\r\n  };\r\n  /**\r\n   * @param idx If not specified, return the first one.\r\n   */\r\n  GlobalModel.prototype.getComponent = function (mainType, idx) {\r\n    var list = this._componentsMap.get(mainType);\r\n    if (list) {\r\n      var cmpt = list[idx || 0];\r\n      if (cmpt) {\r\n        return cmpt;\r\n      } else if (idx == null) {\r\n        for (var i = 0; i < list.length; i++) {\r\n          if (list[i]) {\r\n            return list[i];\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n  /**\r\n   * @return Never be null/undefined.\r\n   */\r\n  GlobalModel.prototype.queryComponents = function (condition) {\r\n    var mainType = condition.mainType;\r\n    if (!mainType) {\r\n      return [];\r\n    }\r\n    var index = condition.index;\r\n    var id = condition.id;\r\n    var name = condition.name;\r\n    var cmpts = this._componentsMap.get(mainType);\r\n    if (!cmpts || !cmpts.length) {\r\n      return [];\r\n    }\r\n    var result;\r\n    if (index != null) {\r\n      result = [];\r\n      each(modelUtil.normalizeToArray(index), function (idx) {\r\n        cmpts[idx] && result.push(cmpts[idx]);\r\n      });\r\n    } else if (id != null) {\r\n      result = queryByIdOrName('id', id, cmpts);\r\n    } else if (name != null) {\r\n      result = queryByIdOrName('name', name, cmpts);\r\n    } else {\r\n      // Return all non-empty components in that mainType\r\n      result = filter(cmpts, function (cmpt) {\r\n        return !!cmpt;\r\n      });\r\n    }\r\n    return filterBySubType(result, condition);\r\n  };\r\n  /**\r\n   * The interface is different from queryComponents,\r\n   * which is convenient for inner usage.\r\n   *\r\n   * @usage\r\n   * let result = findComponents(\r\n   *     {mainType: 'dataZoom', query: {dataZoomId: 'abc'}}\r\n   * );\r\n   * let result = findComponents(\r\n   *     {mainType: 'series', subType: 'pie', query: {seriesName: 'uio'}}\r\n   * );\r\n   * let result = findComponents(\r\n   *     {mainType: 'series',\r\n   *     filter: function (model, index) {...}}\r\n   * );\r\n   * // result like [component0, componnet1, ...]\r\n   */\r\n  GlobalModel.prototype.findComponents = function (condition) {\r\n    var query = condition.query;\r\n    var mainType = condition.mainType;\r\n    var queryCond = getQueryCond(query);\r\n    var result = queryCond ? this.queryComponents(queryCond)\r\n    // Retrieve all non-empty components.\r\n    : filter(this._componentsMap.get(mainType), function (cmpt) {\r\n      return !!cmpt;\r\n    });\r\n    return doFilter(filterBySubType(result, condition));\r\n    function getQueryCond(q) {\r\n      var indexAttr = mainType + 'Index';\r\n      var idAttr = mainType + 'Id';\r\n      var nameAttr = mainType + 'Name';\r\n      return q && (q[indexAttr] != null || q[idAttr] != null || q[nameAttr] != null) ? {\r\n        mainType: mainType,\r\n        // subType will be filtered finally.\r\n        index: q[indexAttr],\r\n        id: q[idAttr],\r\n        name: q[nameAttr]\r\n      } : null;\r\n    }\r\n    function doFilter(res) {\r\n      return condition.filter ? filter(res, condition.filter) : res;\r\n    }\r\n  };\r\n  GlobalModel.prototype.eachComponent = function (mainType, cb, context) {\r\n    var componentsMap = this._componentsMap;\r\n    if (isFunction(mainType)) {\r\n      var ctxForAll_1 = cb;\r\n      var cbForAll_1 = mainType;\r\n      componentsMap.each(function (cmpts, componentType) {\r\n        for (var i = 0; cmpts && i < cmpts.length; i++) {\r\n          var cmpt = cmpts[i];\r\n          cmpt && cbForAll_1.call(ctxForAll_1, componentType, cmpt, cmpt.componentIndex);\r\n        }\r\n      });\r\n    } else {\r\n      var cmpts = isString(mainType) ? componentsMap.get(mainType) : isObject(mainType) ? this.findComponents(mainType) : null;\r\n      for (var i = 0; cmpts && i < cmpts.length; i++) {\r\n        var cmpt = cmpts[i];\r\n        cmpt && cb.call(context, cmpt, cmpt.componentIndex);\r\n      }\r\n    }\r\n  };\r\n  /**\r\n   * Get series list before filtered by name.\r\n   */\r\n  GlobalModel.prototype.getSeriesByName = function (name) {\r\n    var nameStr = modelUtil.convertOptionIdName(name, null);\r\n    return filter(this._componentsMap.get('series'), function (oneSeries) {\r\n      return !!oneSeries && nameStr != null && oneSeries.name === nameStr;\r\n    });\r\n  };\r\n  /**\r\n   * Get series list before filtered by index.\r\n   */\r\n  GlobalModel.prototype.getSeriesByIndex = function (seriesIndex) {\r\n    return this._componentsMap.get('series')[seriesIndex];\r\n  };\r\n  /**\r\n   * Get series list before filtered by type.\r\n   * FIXME: rename to getRawSeriesByType?\r\n   */\r\n  GlobalModel.prototype.getSeriesByType = function (subType) {\r\n    return filter(this._componentsMap.get('series'), function (oneSeries) {\r\n      return !!oneSeries && oneSeries.subType === subType;\r\n    });\r\n  };\r\n  /**\r\n   * Get all series before filtered.\r\n   */\r\n  GlobalModel.prototype.getSeries = function () {\r\n    return filter(this._componentsMap.get('series'), function (oneSeries) {\r\n      return !!oneSeries;\r\n    });\r\n  };\r\n  /**\r\n   * Count series before filtered.\r\n   */\r\n  GlobalModel.prototype.getSeriesCount = function () {\r\n    return this._componentsCount.get('series');\r\n  };\r\n  /**\r\n   * After filtering, series may be different\r\n   * from raw series.\r\n   */\r\n  GlobalModel.prototype.eachSeries = function (cb, context) {\r\n    assertSeriesInitialized(this);\r\n    each(this._seriesIndices, function (rawSeriesIndex) {\r\n      var series = this._componentsMap.get('series')[rawSeriesIndex];\r\n      cb.call(context, series, rawSeriesIndex);\r\n    }, this);\r\n  };\r\n  /**\r\n   * Iterate raw series before filtered.\r\n   *\r\n   * @param {Function} cb\r\n   * @param {*} context\r\n   */\r\n  GlobalModel.prototype.eachRawSeries = function (cb, context) {\r\n    each(this._componentsMap.get('series'), function (series) {\r\n      series && cb.call(context, series, series.componentIndex);\r\n    });\r\n  };\r\n  /**\r\n   * After filtering, series may be different.\r\n   * from raw series.\r\n   */\r\n  GlobalModel.prototype.eachSeriesByType = function (subType, cb, context) {\r\n    assertSeriesInitialized(this);\r\n    each(this._seriesIndices, function (rawSeriesIndex) {\r\n      var series = this._componentsMap.get('series')[rawSeriesIndex];\r\n      if (series.subType === subType) {\r\n        cb.call(context, series, rawSeriesIndex);\r\n      }\r\n    }, this);\r\n  };\r\n  /**\r\n   * Iterate raw series before filtered of given type.\r\n   */\r\n  GlobalModel.prototype.eachRawSeriesByType = function (subType, cb, context) {\r\n    return each(this.getSeriesByType(subType), cb, context);\r\n  };\r\n  GlobalModel.prototype.isSeriesFiltered = function (seriesModel) {\r\n    assertSeriesInitialized(this);\r\n    return this._seriesIndicesMap.get(seriesModel.componentIndex) == null;\r\n  };\r\n  GlobalModel.prototype.getCurrentSeriesIndices = function () {\r\n    return (this._seriesIndices || []).slice();\r\n  };\r\n  GlobalModel.prototype.filterSeries = function (cb, context) {\r\n    assertSeriesInitialized(this);\r\n    var newSeriesIndices = [];\r\n    each(this._seriesIndices, function (seriesRawIdx) {\r\n      var series = this._componentsMap.get('series')[seriesRawIdx];\r\n      cb.call(context, series, seriesRawIdx) && newSeriesIndices.push(seriesRawIdx);\r\n    }, this);\r\n    this._seriesIndices = newSeriesIndices;\r\n    this._seriesIndicesMap = createHashMap(newSeriesIndices);\r\n  };\r\n  GlobalModel.prototype.restoreData = function (payload) {\r\n    reCreateSeriesIndices(this);\r\n    var componentsMap = this._componentsMap;\r\n    var componentTypes = [];\r\n    componentsMap.each(function (components, componentType) {\r\n      if (ComponentModel.hasClass(componentType)) {\r\n        componentTypes.push(componentType);\r\n      }\r\n    });\r\n    ComponentModel.topologicalTravel(componentTypes, ComponentModel.getAllClassMainTypes(), function (componentType) {\r\n      each(componentsMap.get(componentType), function (component) {\r\n        if (component && (componentType !== 'series' || !isNotTargetSeries(component, payload))) {\r\n          component.restoreData();\r\n        }\r\n      });\r\n    });\r\n  };\r\n  GlobalModel.internalField = function () {\r\n    reCreateSeriesIndices = function (ecModel) {\r\n      var seriesIndices = ecModel._seriesIndices = [];\r\n      each(ecModel._componentsMap.get('series'), function (series) {\r\n        // series may have been removed by `replaceMerge`.\r\n        series && seriesIndices.push(series.componentIndex);\r\n      });\r\n      ecModel._seriesIndicesMap = createHashMap(seriesIndices);\r\n    };\r\n    assertSeriesInitialized = function (ecModel) {\r\n      // Components that use _seriesIndices should depends on series component,\r\n      // which make sure that their initialization is after series.\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        if (!ecModel._seriesIndices) {\r\n          throw new Error('Option should contains series.');\r\n        }\r\n      }\r\n    };\r\n    initBase = function (ecModel, baseOption) {\r\n      // Using OPTION_INNER_KEY to mark that this option cannot be used outside,\r\n      // i.e. `chart.setOption(chart.getModel().option);` is forbidden.\r\n      ecModel.option = {};\r\n      ecModel.option[OPTION_INNER_KEY] = OPTION_INNER_VALUE;\r\n      // Init with series: [], in case of calling findSeries method\r\n      // before series initialized.\r\n      ecModel._componentsMap = createHashMap({\r\n        series: []\r\n      });\r\n      ecModel._componentsCount = createHashMap();\r\n      // If user spefied `option.aria`, aria will be enable. This detection should be\r\n      // performed before theme and globalDefault merge.\r\n      var airaOption = baseOption.aria;\r\n      if (isObject(airaOption) && airaOption.enabled == null) {\r\n        airaOption.enabled = true;\r\n      }\r\n      mergeTheme(baseOption, ecModel._theme.option);\r\n      // TODO Needs clone when merging to the unexisted property\r\n      merge(baseOption, globalDefault, false);\r\n      ecModel._mergeOption(baseOption, null);\r\n    };\r\n  }();\r\n  return GlobalModel;\r\n}(Model);\r\nfunction isNotTargetSeries(seriesModel, payload) {\r\n  if (payload) {\r\n    var index = payload.seriesIndex;\r\n    var id = payload.seriesId;\r\n    var name_1 = payload.seriesName;\r\n    return index != null && seriesModel.componentIndex !== index || id != null && seriesModel.id !== id || name_1 != null && seriesModel.name !== name_1;\r\n  }\r\n}\r\nfunction mergeTheme(option, theme) {\r\n  // PENDING\r\n  // NOT use `colorLayer` in theme if option has `color`\r\n  var notMergeColorLayer = option.color && !option.colorLayer;\r\n  each(theme, function (themeItem, name) {\r\n    if (name === 'colorLayer' && notMergeColorLayer) {\r\n      return;\r\n    }\r\n    // If it is component model mainType, the model handles that merge later.\r\n    // otherwise, merge them here.\r\n    if (!ComponentModel.hasClass(name)) {\r\n      if (typeof themeItem === 'object') {\r\n        option[name] = !option[name] ? clone(themeItem) : merge(option[name], themeItem, false);\r\n      } else {\r\n        if (option[name] == null) {\r\n          option[name] = themeItem;\r\n        }\r\n      }\r\n    }\r\n  });\r\n}\r\nfunction queryByIdOrName(attr, idOrName, cmpts) {\r\n  // Here is a break from echarts4: string and number are\r\n  // treated as equal.\r\n  if (isArray(idOrName)) {\r\n    var keyMap_1 = createHashMap();\r\n    each(idOrName, function (idOrNameItem) {\r\n      if (idOrNameItem != null) {\r\n        var idName = modelUtil.convertOptionIdName(idOrNameItem, null);\r\n        idName != null && keyMap_1.set(idOrNameItem, true);\r\n      }\r\n    });\r\n    return filter(cmpts, function (cmpt) {\r\n      return cmpt && keyMap_1.get(cmpt[attr]);\r\n    });\r\n  } else {\r\n    var idName_1 = modelUtil.convertOptionIdName(idOrName, null);\r\n    return filter(cmpts, function (cmpt) {\r\n      return cmpt && idName_1 != null && cmpt[attr] === idName_1;\r\n    });\r\n  }\r\n}\r\nfunction filterBySubType(components, condition) {\r\n  // Using hasOwnProperty for restrict. Consider\r\n  // subType is undefined in user payload.\r\n  return condition.hasOwnProperty('subType') ? filter(components, function (cmpt) {\r\n    return cmpt && cmpt.subType === condition.subType;\r\n  }) : components;\r\n}\r\nfunction normalizeSetOptionInput(opts) {\r\n  var replaceMergeMainTypeMap = createHashMap();\r\n  opts && each(modelUtil.normalizeToArray(opts.replaceMerge), function (mainType) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      assert(ComponentModel.hasClass(mainType), '\"' + mainType + '\" is not valid component main type in \"replaceMerge\"');\r\n    }\r\n    replaceMergeMainTypeMap.set(mainType, true);\r\n  });\r\n  return {\r\n    replaceMergeMainTypeMap: replaceMergeMainTypeMap\r\n  };\r\n}\r\nmixin(GlobalModel, PaletteMixin);\r\nexport default GlobalModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nvar availableMethods = ['getDom', 'getZr', 'getWidth', 'getHeight', 'getDevicePixelRatio', 'dispatchAction', 'isSSR', 'isDisposed', 'on', 'off', 'getDataURL', 'getConnectedDataURL',\r\n// 'getModel',\r\n'getOption',\r\n// 'getViewOfComponentModel',\r\n// 'getViewOfSeriesModel',\r\n'getId', 'updateLabelLayout'];\r\nvar ExtensionAPI = /** @class */function () {\r\n  function ExtensionAPI(ecInstance) {\r\n    zrUtil.each(availableMethods, function (methodName) {\r\n      this[methodName] = zrUtil.bind(ecInstance[methodName], ecInstance);\r\n    }, this);\r\n  }\r\n  return ExtensionAPI;\r\n}();\r\nexport default ExtensionAPI;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nvar coordinateSystemCreators = {};\r\nvar CoordinateSystemManager = /** @class */function () {\r\n  function CoordinateSystemManager() {\r\n    this._coordinateSystems = [];\r\n  }\r\n  CoordinateSystemManager.prototype.create = function (ecModel, api) {\r\n    var coordinateSystems = [];\r\n    zrUtil.each(coordinateSystemCreators, function (creator, type) {\r\n      var list = creator.create(ecModel, api);\r\n      coordinateSystems = coordinateSystems.concat(list || []);\r\n    });\r\n    this._coordinateSystems = coordinateSystems;\r\n  };\r\n  CoordinateSystemManager.prototype.update = function (ecModel, api) {\r\n    zrUtil.each(this._coordinateSystems, function (coordSys) {\r\n      coordSys.update && coordSys.update(ecModel, api);\r\n    });\r\n  };\r\n  CoordinateSystemManager.prototype.getCoordinateSystems = function () {\r\n    return this._coordinateSystems.slice();\r\n  };\r\n  CoordinateSystemManager.register = function (type, creator) {\r\n    coordinateSystemCreators[type] = creator;\r\n  };\r\n  CoordinateSystemManager.get = function (type) {\r\n    return coordinateSystemCreators[type];\r\n  };\r\n  return CoordinateSystemManager;\r\n}();\r\nexport default CoordinateSystemManager;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { normalizeToArray\r\n// , MappingExistingItem, setComponentTypeToKeyInfo, mappingToExists\r\n} from '../util/model.js';\r\nimport { each, clone, map, isTypedArray, setAsPrimitive, isArray, isObject\r\n// , HashMap , createHashMap, extend, merge,\r\n} from 'zrender/lib/core/util.js';\r\nimport { error } from '../util/log.js';\r\nvar QUERY_REG = /^(min|max)?(.+)$/;\r\n// Key: mainType\r\n// type FakeComponentsMap = HashMap<(MappingExistingItem & { subType: string })[]>;\r\n/**\r\n * TERM EXPLANATIONS:\r\n * See `ECOption` and `ECUnitOption` in `src/util/types.ts`.\r\n */\r\nvar OptionManager = /** @class */function () {\r\n  // timeline.notMerge is not supported in ec3. Firstly there is rearly\r\n  // case that notMerge is needed. Secondly supporting 'notMerge' requires\r\n  // rawOption cloned and backuped when timeline changed, which does no\r\n  // good to performance. What's more, that both timeline and setOption\r\n  // method supply 'notMerge' brings complex and some problems.\r\n  // Consider this case:\r\n  // (step1) chart.setOption({timeline: {notMerge: false}, ...}, false);\r\n  // (step2) chart.setOption({timeline: {notMerge: true}, ...}, false);\r\n  function OptionManager(api) {\r\n    this._timelineOptions = [];\r\n    this._mediaList = [];\r\n    /**\r\n     * -1, means default.\r\n     * empty means no media.\r\n     */\r\n    this._currentMediaIndices = [];\r\n    this._api = api;\r\n  }\r\n  OptionManager.prototype.setOption = function (rawOption, optionPreprocessorFuncs, opt) {\r\n    if (rawOption) {\r\n      // That set dat primitive is dangerous if user reuse the data when setOption again.\r\n      each(normalizeToArray(rawOption.series), function (series) {\r\n        series && series.data && isTypedArray(series.data) && setAsPrimitive(series.data);\r\n      });\r\n      each(normalizeToArray(rawOption.dataset), function (dataset) {\r\n        dataset && dataset.source && isTypedArray(dataset.source) && setAsPrimitive(dataset.source);\r\n      });\r\n    }\r\n    // Caution: some series modify option data, if do not clone,\r\n    // it should ensure that the repeat modify correctly\r\n    // (create a new object when modify itself).\r\n    rawOption = clone(rawOption);\r\n    // FIXME\r\n    // If some property is set in timeline options or media option but\r\n    // not set in baseOption, a warning should be given.\r\n    var optionBackup = this._optionBackup;\r\n    var newParsedOption = parseRawOption(rawOption, optionPreprocessorFuncs, !optionBackup);\r\n    this._newBaseOption = newParsedOption.baseOption;\r\n    // For setOption at second time (using merge mode);\r\n    if (optionBackup) {\r\n      // FIXME\r\n      // the restore merge solution is essentially incorrect.\r\n      // the mapping can not be 100% consistent with ecModel, which probably brings\r\n      // potential bug!\r\n      // The first merge is delayed, because in most cases, users do not call `setOption` twice.\r\n      // let fakeCmptsMap = this._fakeCmptsMap;\r\n      // if (!fakeCmptsMap) {\r\n      //     fakeCmptsMap = this._fakeCmptsMap = createHashMap();\r\n      //     mergeToBackupOption(fakeCmptsMap, null, optionBackup.baseOption, null);\r\n      // }\r\n      // mergeToBackupOption(\r\n      //     fakeCmptsMap, optionBackup.baseOption, newParsedOption.baseOption, opt\r\n      // );\r\n      // For simplicity, timeline options and media options do not support merge,\r\n      // that is, if you `setOption` twice and both has timeline options, the latter\r\n      // timeline options will not be merged to the former, but just substitute them.\r\n      if (newParsedOption.timelineOptions.length) {\r\n        optionBackup.timelineOptions = newParsedOption.timelineOptions;\r\n      }\r\n      if (newParsedOption.mediaList.length) {\r\n        optionBackup.mediaList = newParsedOption.mediaList;\r\n      }\r\n      if (newParsedOption.mediaDefault) {\r\n        optionBackup.mediaDefault = newParsedOption.mediaDefault;\r\n      }\r\n    } else {\r\n      this._optionBackup = newParsedOption;\r\n    }\r\n  };\r\n  OptionManager.prototype.mountOption = function (isRecreate) {\r\n    var optionBackup = this._optionBackup;\r\n    this._timelineOptions = optionBackup.timelineOptions;\r\n    this._mediaList = optionBackup.mediaList;\r\n    this._mediaDefault = optionBackup.mediaDefault;\r\n    this._currentMediaIndices = [];\r\n    return clone(isRecreate\r\n    // this._optionBackup.baseOption, which is created at the first `setOption`\r\n    // called, and is merged into every new option by inner method `mergeToBackupOption`\r\n    // each time `setOption` called, can be only used in `isRecreate`, because\r\n    // its reliability is under suspicion. In other cases option merge is\r\n    // performed by `model.mergeOption`.\r\n    ? optionBackup.baseOption : this._newBaseOption);\r\n  };\r\n  OptionManager.prototype.getTimelineOption = function (ecModel) {\r\n    var option;\r\n    var timelineOptions = this._timelineOptions;\r\n    if (timelineOptions.length) {\r\n      // getTimelineOption can only be called after ecModel inited,\r\n      // so we can get currentIndex from timelineModel.\r\n      var timelineModel = ecModel.getComponent('timeline');\r\n      if (timelineModel) {\r\n        option = clone(\r\n        // FIXME:TS as TimelineModel or quivlant interface\r\n        timelineOptions[timelineModel.getCurrentIndex()]);\r\n      }\r\n    }\r\n    return option;\r\n  };\r\n  OptionManager.prototype.getMediaOption = function (ecModel) {\r\n    var ecWidth = this._api.getWidth();\r\n    var ecHeight = this._api.getHeight();\r\n    var mediaList = this._mediaList;\r\n    var mediaDefault = this._mediaDefault;\r\n    var indices = [];\r\n    var result = [];\r\n    // No media defined.\r\n    if (!mediaList.length && !mediaDefault) {\r\n      return result;\r\n    }\r\n    // Multi media may be applied, the latter defined media has higher priority.\r\n    for (var i = 0, len = mediaList.length; i < len; i++) {\r\n      if (applyMediaQuery(mediaList[i].query, ecWidth, ecHeight)) {\r\n        indices.push(i);\r\n      }\r\n    }\r\n    // FIXME\r\n    // Whether mediaDefault should force users to provide? Otherwise\r\n    // the change by media query can not be recorvered.\r\n    if (!indices.length && mediaDefault) {\r\n      indices = [-1];\r\n    }\r\n    if (indices.length && !indicesEquals(indices, this._currentMediaIndices)) {\r\n      result = map(indices, function (index) {\r\n        return clone(index === -1 ? mediaDefault.option : mediaList[index].option);\r\n      });\r\n    }\r\n    // Otherwise return nothing.\r\n    this._currentMediaIndices = indices;\r\n    return result;\r\n  };\r\n  return OptionManager;\r\n}();\r\n/**\r\n * [RAW_OPTION_PATTERNS]\r\n * (Note: \"series: []\" represents all other props in `ECUnitOption`)\r\n *\r\n * (1) No prop \"baseOption\" declared:\r\n * Root option is used as \"baseOption\" (except prop \"options\" and \"media\").\r\n * ```js\r\n * option = {\r\n *     series: [],\r\n *     timeline: {},\r\n *     options: [],\r\n * };\r\n * option = {\r\n *     series: [],\r\n *     media: {},\r\n * };\r\n * option = {\r\n *     series: [],\r\n *     timeline: {},\r\n *     options: [],\r\n *     media: {},\r\n * }\r\n * ```\r\n *\r\n * (2) Prop \"baseOption\" declared:\r\n * If \"baseOption\" declared, `ECUnitOption` props can only be declared\r\n * inside \"baseOption\" except prop \"timeline\" (compat ec2).\r\n * ```js\r\n * option = {\r\n *     baseOption: {\r\n *         timeline: {},\r\n *         series: [],\r\n *     },\r\n *     options: []\r\n * };\r\n * option = {\r\n *     baseOption: {\r\n *         series: [],\r\n *     },\r\n *     media: []\r\n * };\r\n * option = {\r\n *     baseOption: {\r\n *         timeline: {},\r\n *         series: [],\r\n *     },\r\n *     options: []\r\n *     media: []\r\n * };\r\n * option = {\r\n *     // ec3 compat ec2: allow (only) `timeline` declared\r\n *     // outside baseOption. Keep this setting for compat.\r\n *     timeline: {},\r\n *     baseOption: {\r\n *         series: [],\r\n *     },\r\n *     options: [],\r\n *     media: []\r\n * };\r\n * ```\r\n */\r\nfunction parseRawOption(\r\n// `rawOption` May be modified\r\nrawOption, optionPreprocessorFuncs, isNew) {\r\n  var mediaList = [];\r\n  var mediaDefault;\r\n  var baseOption;\r\n  var declaredBaseOption = rawOption.baseOption;\r\n  // Compatible with ec2, [RAW_OPTION_PATTERNS] above.\r\n  var timelineOnRoot = rawOption.timeline;\r\n  var timelineOptionsOnRoot = rawOption.options;\r\n  var mediaOnRoot = rawOption.media;\r\n  var hasMedia = !!rawOption.media;\r\n  var hasTimeline = !!(timelineOptionsOnRoot || timelineOnRoot || declaredBaseOption && declaredBaseOption.timeline);\r\n  if (declaredBaseOption) {\r\n    baseOption = declaredBaseOption;\r\n    // For merge option.\r\n    if (!baseOption.timeline) {\r\n      baseOption.timeline = timelineOnRoot;\r\n    }\r\n  }\r\n  // For convenience, enable to use the root option as the `baseOption`:\r\n  // `{ ...normalOptionProps, media: [{ ... }, { ... }] }`\r\n  else {\r\n    if (hasTimeline || hasMedia) {\r\n      rawOption.options = rawOption.media = null;\r\n    }\r\n    baseOption = rawOption;\r\n  }\r\n  if (hasMedia) {\r\n    if (isArray(mediaOnRoot)) {\r\n      each(mediaOnRoot, function (singleMedia) {\r\n        if (process.env.NODE_ENV !== 'production') {\r\n          // Real case of wrong config.\r\n          if (singleMedia && !singleMedia.option && isObject(singleMedia.query) && isObject(singleMedia.query.option)) {\r\n            error('Illegal media option. Must be like { media: [ { query: {}, option: {} } ] }');\r\n          }\r\n        }\r\n        if (singleMedia && singleMedia.option) {\r\n          if (singleMedia.query) {\r\n            mediaList.push(singleMedia);\r\n          } else if (!mediaDefault) {\r\n            // Use the first media default.\r\n            mediaDefault = singleMedia;\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        // Real case of wrong config.\r\n        error('Illegal media option. Must be an array. Like { media: [ {...}, {...} ] }');\r\n      }\r\n    }\r\n  }\r\n  doPreprocess(baseOption);\r\n  each(timelineOptionsOnRoot, function (option) {\r\n    return doPreprocess(option);\r\n  });\r\n  each(mediaList, function (media) {\r\n    return doPreprocess(media.option);\r\n  });\r\n  function doPreprocess(option) {\r\n    each(optionPreprocessorFuncs, function (preProcess) {\r\n      preProcess(option, isNew);\r\n    });\r\n  }\r\n  return {\r\n    baseOption: baseOption,\r\n    timelineOptions: timelineOptionsOnRoot || [],\r\n    mediaDefault: mediaDefault,\r\n    mediaList: mediaList\r\n  };\r\n}\r\n/**\r\n * @see <http://www.w3.org/TR/css3-mediaqueries/#media1>\r\n * Support: width, height, aspectRatio\r\n * Can use max or min as prefix.\r\n */\r\nfunction applyMediaQuery(query, ecWidth, ecHeight) {\r\n  var realMap = {\r\n    width: ecWidth,\r\n    height: ecHeight,\r\n    aspectratio: ecWidth / ecHeight // lower case for convenience.\r\n  };\r\n  var applicable = true;\r\n  each(query, function (value, attr) {\r\n    var matched = attr.match(QUERY_REG);\r\n    if (!matched || !matched[1] || !matched[2]) {\r\n      return;\r\n    }\r\n    var operator = matched[1];\r\n    var realAttr = matched[2].toLowerCase();\r\n    if (!compare(realMap[realAttr], value, operator)) {\r\n      applicable = false;\r\n    }\r\n  });\r\n  return applicable;\r\n}\r\nfunction compare(real, expect, operator) {\r\n  if (operator === 'min') {\r\n    return real >= expect;\r\n  } else if (operator === 'max') {\r\n    return real <= expect;\r\n  } else {\r\n    // Equals\r\n    return real === expect;\r\n  }\r\n}\r\nfunction indicesEquals(indices1, indices2) {\r\n  // indices is always order by asc and has only finite number.\r\n  return indices1.join(',') === indices2.join(',');\r\n}\r\n/**\r\n * Consider case:\r\n * `chart.setOption(opt1);`\r\n * Then user do some interaction like dataZoom, dataView changing.\r\n * `chart.setOption(opt2);`\r\n * Then user press 'reset button' in toolbox.\r\n *\r\n * After doing that all of the interaction effects should be reset, the\r\n * chart should be the same as the result of invoke\r\n * `chart.setOption(opt1); chart.setOption(opt2);`.\r\n *\r\n * Although it is not able ensure that\r\n * `chart.setOption(opt1); chart.setOption(opt2);` is equivalents to\r\n * `chart.setOption(merge(opt1, opt2));` exactly,\r\n * this might be the only simple way to implement that feature.\r\n *\r\n * MEMO: We've considered some other approaches:\r\n * 1. Each model handles its self restoration but not uniform treatment.\r\n *     (Too complex in logic and error-prone)\r\n * 2. Use a shadow ecModel. (Performance expensive)\r\n *\r\n * FIXME: A possible solution:\r\n * Add a extra level of model for each component model. The inheritance chain would be:\r\n * ecModel <- componentModel <- componentActionModel <- dataItemModel\r\n * And all of the actions can only modify the `componentActionModel` rather than\r\n * `componentModel`. `setOption` will only modify the `ecModel` and `componentModel`.\r\n * When \"resotre\" action triggered, model from `componentActionModel` will be discarded\r\n * instead of recreating the \"ecModel\" from the \"_optionBackup\".\r\n */\r\n// function mergeToBackupOption(\r\n//     fakeCmptsMap: FakeComponentsMap,\r\n//     // `tarOption` Can be null/undefined, means init\r\n//     tarOption: ECUnitOption,\r\n//     newOption: ECUnitOption,\r\n//     // Can be null/undefined\r\n//     opt: InnerSetOptionOpts\r\n// ): void {\r\n//     newOption = newOption || {} as ECUnitOption;\r\n//     const notInit = !!tarOption;\r\n//     each(newOption, function (newOptsInMainType, mainType) {\r\n//         if (newOptsInMainType == null) {\r\n//             return;\r\n//         }\r\n//         if (!ComponentModel.hasClass(mainType)) {\r\n//             if (tarOption) {\r\n//                 tarOption[mainType] = merge(tarOption[mainType], newOptsInMainType, true);\r\n//             }\r\n//         }\r\n//         else {\r\n//             const oldTarOptsInMainType = notInit ? normalizeToArray(tarOption[mainType]) : null;\r\n//             const oldFakeCmptsInMainType = fakeCmptsMap.get(mainType) || [];\r\n//             const resultTarOptsInMainType = notInit ? (tarOption[mainType] = [] as ComponentOption[]) : null;\r\n//             const resultFakeCmptsInMainType = fakeCmptsMap.set(mainType, []);\r\n//             const mappingResult = mappingToExists(\r\n//                 oldFakeCmptsInMainType,\r\n//                 normalizeToArray(newOptsInMainType),\r\n//                 (opt && opt.replaceMergeMainTypeMap.get(mainType)) ? 'replaceMerge' : 'normalMerge'\r\n//             );\r\n//             setComponentTypeToKeyInfo(mappingResult, mainType, ComponentModel as ComponentModelConstructor);\r\n//             each(mappingResult, function (resultItem, index) {\r\n//                 // The same logic as `Global.ts#_mergeOption`.\r\n//                 let fakeCmpt = resultItem.existing;\r\n//                 const newOption = resultItem.newOption;\r\n//                 const keyInfo = resultItem.keyInfo;\r\n//                 let fakeCmptOpt;\r\n//                 if (!newOption) {\r\n//                     fakeCmptOpt = oldTarOptsInMainType[index];\r\n//                 }\r\n//                 else {\r\n//                     if (fakeCmpt && fakeCmpt.subType === keyInfo.subType) {\r\n//                         fakeCmpt.name = keyInfo.name;\r\n//                         if (notInit) {\r\n//                             fakeCmptOpt = merge(oldTarOptsInMainType[index], newOption, true);\r\n//                         }\r\n//                     }\r\n//                     else {\r\n//                         fakeCmpt = extend({}, keyInfo);\r\n//                         if (notInit) {\r\n//                             fakeCmptOpt = clone(newOption);\r\n//                         }\r\n//                     }\r\n//                 }\r\n//                 if (fakeCmpt) {\r\n//                     notInit && resultTarOptsInMainType.push(fakeCmptOpt);\r\n//                     resultFakeCmptsInMainType.push(fakeCmpt);\r\n//                 }\r\n//                 else {\r\n//                     notInit && resultTarOptsInMainType.push(void 0);\r\n//                     resultFakeCmptsInMainType.push(void 0);\r\n//                 }\r\n//             });\r\n//         }\r\n//     });\r\n// }\r\nexport default OptionManager;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport * as modelUtil from '../../util/model.js';\r\nimport { deprecateLog, deprecateReplaceLog } from '../../util/log.js';\r\nvar each = zrUtil.each;\r\nvar isObject = zrUtil.isObject;\r\nvar POSSIBLE_STYLES = ['areaStyle', 'lineStyle', 'nodeStyle', 'linkStyle', 'chordStyle', 'label', 'labelLine'];\r\nfunction compatEC2ItemStyle(opt) {\r\n  var itemStyleOpt = opt && opt.itemStyle;\r\n  if (!itemStyleOpt) {\r\n    return;\r\n  }\r\n  for (var i = 0, len = POSSIBLE_STYLES.length; i < len; i++) {\r\n    var styleName = POSSIBLE_STYLES[i];\r\n    var normalItemStyleOpt = itemStyleOpt.normal;\r\n    var emphasisItemStyleOpt = itemStyleOpt.emphasis;\r\n    if (normalItemStyleOpt && normalItemStyleOpt[styleName]) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        deprecateReplaceLog(\"itemStyle.normal.\" + styleName, styleName);\r\n      }\r\n      opt[styleName] = opt[styleName] || {};\r\n      if (!opt[styleName].normal) {\r\n        opt[styleName].normal = normalItemStyleOpt[styleName];\r\n      } else {\r\n        zrUtil.merge(opt[styleName].normal, normalItemStyleOpt[styleName]);\r\n      }\r\n      normalItemStyleOpt[styleName] = null;\r\n    }\r\n    if (emphasisItemStyleOpt && emphasisItemStyleOpt[styleName]) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        deprecateReplaceLog(\"itemStyle.emphasis.\" + styleName, \"emphasis.\" + styleName);\r\n      }\r\n      opt[styleName] = opt[styleName] || {};\r\n      if (!opt[styleName].emphasis) {\r\n        opt[styleName].emphasis = emphasisItemStyleOpt[styleName];\r\n      } else {\r\n        zrUtil.merge(opt[styleName].emphasis, emphasisItemStyleOpt[styleName]);\r\n      }\r\n      emphasisItemStyleOpt[styleName] = null;\r\n    }\r\n  }\r\n}\r\nfunction convertNormalEmphasis(opt, optType, useExtend) {\r\n  if (opt && opt[optType] && (opt[optType].normal || opt[optType].emphasis)) {\r\n    var normalOpt = opt[optType].normal;\r\n    var emphasisOpt = opt[optType].emphasis;\r\n    if (normalOpt) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        // eslint-disable-next-line max-len\r\n        deprecateLog(\"'normal' hierarchy in \" + optType + \" has been removed since 4.0. All style properties are configured in \" + optType + \" directly now.\");\r\n      }\r\n      // Timeline controlStyle has other properties besides normal and emphasis\r\n      if (useExtend) {\r\n        opt[optType].normal = opt[optType].emphasis = null;\r\n        zrUtil.defaults(opt[optType], normalOpt);\r\n      } else {\r\n        opt[optType] = normalOpt;\r\n      }\r\n    }\r\n    if (emphasisOpt) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        deprecateLog(optType + \".emphasis has been changed to emphasis.\" + optType + \" since 4.0\");\r\n      }\r\n      opt.emphasis = opt.emphasis || {};\r\n      opt.emphasis[optType] = emphasisOpt;\r\n      // Also compat the case user mix the style and focus together in ec3 style\r\n      // for example: { itemStyle: { normal: {}, emphasis: {focus, shadowBlur} } }\r\n      if (emphasisOpt.focus) {\r\n        opt.emphasis.focus = emphasisOpt.focus;\r\n      }\r\n      if (emphasisOpt.blurScope) {\r\n        opt.emphasis.blurScope = emphasisOpt.blurScope;\r\n      }\r\n    }\r\n  }\r\n}\r\nfunction removeEC3NormalStatus(opt) {\r\n  convertNormalEmphasis(opt, 'itemStyle');\r\n  convertNormalEmphasis(opt, 'lineStyle');\r\n  convertNormalEmphasis(opt, 'areaStyle');\r\n  convertNormalEmphasis(opt, 'label');\r\n  convertNormalEmphasis(opt, 'labelLine');\r\n  // treemap\r\n  convertNormalEmphasis(opt, 'upperLabel');\r\n  // graph\r\n  convertNormalEmphasis(opt, 'edgeLabel');\r\n}\r\nfunction compatTextStyle(opt, propName) {\r\n  // Check whether is not object (string\\null\\undefined ...)\r\n  var labelOptSingle = isObject(opt) && opt[propName];\r\n  var textStyle = isObject(labelOptSingle) && labelOptSingle.textStyle;\r\n  if (textStyle) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      // eslint-disable-next-line max-len\r\n      deprecateLog(\"textStyle hierarchy in \" + propName + \" has been removed since 4.0. All textStyle properties are configured in \" + propName + \" directly now.\");\r\n    }\r\n    for (var i = 0, len = modelUtil.TEXT_STYLE_OPTIONS.length; i < len; i++) {\r\n      var textPropName = modelUtil.TEXT_STYLE_OPTIONS[i];\r\n      if (textStyle.hasOwnProperty(textPropName)) {\r\n        labelOptSingle[textPropName] = textStyle[textPropName];\r\n      }\r\n    }\r\n  }\r\n}\r\nfunction compatEC3CommonStyles(opt) {\r\n  if (opt) {\r\n    removeEC3NormalStatus(opt);\r\n    compatTextStyle(opt, 'label');\r\n    opt.emphasis && compatTextStyle(opt.emphasis, 'label');\r\n  }\r\n}\r\nfunction processSeries(seriesOpt) {\r\n  if (!isObject(seriesOpt)) {\r\n    return;\r\n  }\r\n  compatEC2ItemStyle(seriesOpt);\r\n  removeEC3NormalStatus(seriesOpt);\r\n  compatTextStyle(seriesOpt, 'label');\r\n  // treemap\r\n  compatTextStyle(seriesOpt, 'upperLabel');\r\n  // graph\r\n  compatTextStyle(seriesOpt, 'edgeLabel');\r\n  if (seriesOpt.emphasis) {\r\n    compatTextStyle(seriesOpt.emphasis, 'label');\r\n    // treemap\r\n    compatTextStyle(seriesOpt.emphasis, 'upperLabel');\r\n    // graph\r\n    compatTextStyle(seriesOpt.emphasis, 'edgeLabel');\r\n  }\r\n  var markPoint = seriesOpt.markPoint;\r\n  if (markPoint) {\r\n    compatEC2ItemStyle(markPoint);\r\n    compatEC3CommonStyles(markPoint);\r\n  }\r\n  var markLine = seriesOpt.markLine;\r\n  if (markLine) {\r\n    compatEC2ItemStyle(markLine);\r\n    compatEC3CommonStyles(markLine);\r\n  }\r\n  var markArea = seriesOpt.markArea;\r\n  if (markArea) {\r\n    compatEC3CommonStyles(markArea);\r\n  }\r\n  var data = seriesOpt.data;\r\n  // Break with ec3: if `setOption` again, there may be no `type` in option,\r\n  // then the backward compat based on option type will not be performed.\r\n  if (seriesOpt.type === 'graph') {\r\n    data = data || seriesOpt.nodes;\r\n    var edgeData = seriesOpt.links || seriesOpt.edges;\r\n    if (edgeData && !zrUtil.isTypedArray(edgeData)) {\r\n      for (var i = 0; i < edgeData.length; i++) {\r\n        compatEC3CommonStyles(edgeData[i]);\r\n      }\r\n    }\r\n    zrUtil.each(seriesOpt.categories, function (opt) {\r\n      removeEC3NormalStatus(opt);\r\n    });\r\n  }\r\n  if (data && !zrUtil.isTypedArray(data)) {\r\n    for (var i = 0; i < data.length; i++) {\r\n      compatEC3CommonStyles(data[i]);\r\n    }\r\n  }\r\n  // mark point data\r\n  markPoint = seriesOpt.markPoint;\r\n  if (markPoint && markPoint.data) {\r\n    var mpData = markPoint.data;\r\n    for (var i = 0; i < mpData.length; i++) {\r\n      compatEC3CommonStyles(mpData[i]);\r\n    }\r\n  }\r\n  // mark line data\r\n  markLine = seriesOpt.markLine;\r\n  if (markLine && markLine.data) {\r\n    var mlData = markLine.data;\r\n    for (var i = 0; i < mlData.length; i++) {\r\n      if (zrUtil.isArray(mlData[i])) {\r\n        compatEC3CommonStyles(mlData[i][0]);\r\n        compatEC3CommonStyles(mlData[i][1]);\r\n      } else {\r\n        compatEC3CommonStyles(mlData[i]);\r\n      }\r\n    }\r\n  }\r\n  // Series\r\n  if (seriesOpt.type === 'gauge') {\r\n    compatTextStyle(seriesOpt, 'axisLabel');\r\n    compatTextStyle(seriesOpt, 'title');\r\n    compatTextStyle(seriesOpt, 'detail');\r\n  } else if (seriesOpt.type === 'treemap') {\r\n    convertNormalEmphasis(seriesOpt.breadcrumb, 'itemStyle');\r\n    zrUtil.each(seriesOpt.levels, function (opt) {\r\n      removeEC3NormalStatus(opt);\r\n    });\r\n  } else if (seriesOpt.type === 'tree') {\r\n    removeEC3NormalStatus(seriesOpt.leaves);\r\n  }\r\n  // sunburst starts from ec4, so it does not need to compat levels.\r\n}\r\nfunction toArr(o) {\r\n  return zrUtil.isArray(o) ? o : o ? [o] : [];\r\n}\r\nfunction toObj(o) {\r\n  return (zrUtil.isArray(o) ? o[0] : o) || {};\r\n}\r\nexport default function globalCompatStyle(option, isTheme) {\r\n  each(toArr(option.series), function (seriesOpt) {\r\n    isObject(seriesOpt) && processSeries(seriesOpt);\r\n  });\r\n  var axes = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'parallelAxis', 'radar'];\r\n  isTheme && axes.push('valueAxis', 'categoryAxis', 'logAxis', 'timeAxis');\r\n  each(axes, function (axisName) {\r\n    each(toArr(option[axisName]), function (axisOpt) {\r\n      if (axisOpt) {\r\n        compatTextStyle(axisOpt, 'axisLabel');\r\n        compatTextStyle(axisOpt.axisPointer, 'label');\r\n      }\r\n    });\r\n  });\r\n  each(toArr(option.parallel), function (parallelOpt) {\r\n    var parallelAxisDefault = parallelOpt && parallelOpt.parallelAxisDefault;\r\n    compatTextStyle(parallelAxisDefault, 'axisLabel');\r\n    compatTextStyle(parallelAxisDefault && parallelAxisDefault.axisPointer, 'label');\r\n  });\r\n  each(toArr(option.calendar), function (calendarOpt) {\r\n    convertNormalEmphasis(calendarOpt, 'itemStyle');\r\n    compatTextStyle(calendarOpt, 'dayLabel');\r\n    compatTextStyle(calendarOpt, 'monthLabel');\r\n    compatTextStyle(calendarOpt, 'yearLabel');\r\n  });\r\n  // radar.name.textStyle\r\n  each(toArr(option.radar), function (radarOpt) {\r\n    compatTextStyle(radarOpt, 'name');\r\n    // Use axisName instead of name because component has name property\r\n    if (radarOpt.name && radarOpt.axisName == null) {\r\n      radarOpt.axisName = radarOpt.name;\r\n      delete radarOpt.name;\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        deprecateLog('name property in radar component has been changed to axisName');\r\n      }\r\n    }\r\n    if (radarOpt.nameGap != null && radarOpt.axisNameGap == null) {\r\n      radarOpt.axisNameGap = radarOpt.nameGap;\r\n      delete radarOpt.nameGap;\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        deprecateLog('nameGap property in radar component has been changed to axisNameGap');\r\n      }\r\n    }\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      each(radarOpt.indicator, function (indicatorOpt) {\r\n        if (indicatorOpt.text) {\r\n          deprecateReplaceLog('text', 'name', 'radar.indicator');\r\n        }\r\n      });\r\n    }\r\n  });\r\n  each(toArr(option.geo), function (geoOpt) {\r\n    if (isObject(geoOpt)) {\r\n      compatEC3CommonStyles(geoOpt);\r\n      each(toArr(geoOpt.regions), function (regionObj) {\r\n        compatEC3CommonStyles(regionObj);\r\n      });\r\n    }\r\n  });\r\n  each(toArr(option.timeline), function (timelineOpt) {\r\n    compatEC3CommonStyles(timelineOpt);\r\n    convertNormalEmphasis(timelineOpt, 'label');\r\n    convertNormalEmphasis(timelineOpt, 'itemStyle');\r\n    convertNormalEmphasis(timelineOpt, 'controlStyle', true);\r\n    var data = timelineOpt.data;\r\n    zrUtil.isArray(data) && zrUtil.each(data, function (item) {\r\n      if (zrUtil.isObject(item)) {\r\n        convertNormalEmphasis(item, 'label');\r\n        convertNormalEmphasis(item, 'itemStyle');\r\n      }\r\n    });\r\n  });\r\n  each(toArr(option.toolbox), function (toolboxOpt) {\r\n    convertNormalEmphasis(toolboxOpt, 'iconStyle');\r\n    each(toolboxOpt.feature, function (featureOpt) {\r\n      convertNormalEmphasis(featureOpt, 'iconStyle');\r\n    });\r\n  });\r\n  compatTextStyle(toObj(option.axisPointer), 'label');\r\n  compatTextStyle(toObj(option.tooltip).axisPointer, 'label');\r\n  // Clean logs\r\n  // storedLogs = {};\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { each, isArray, isObject, isTypedArray, defaults } from 'zrender/lib/core/util.js';\r\nimport compatStyle from './helper/compatStyle.js';\r\nimport { normalizeToArray } from '../util/model.js';\r\nimport { deprecateLog, deprecateReplaceLog } from '../util/log.js';\r\nfunction get(opt, path) {\r\n  var pathArr = path.split(',');\r\n  var obj = opt;\r\n  for (var i = 0; i < pathArr.length; i++) {\r\n    obj = obj && obj[pathArr[i]];\r\n    if (obj == null) {\r\n      break;\r\n    }\r\n  }\r\n  return obj;\r\n}\r\nfunction set(opt, path, val, overwrite) {\r\n  var pathArr = path.split(',');\r\n  var obj = opt;\r\n  var key;\r\n  var i = 0;\r\n  for (; i < pathArr.length - 1; i++) {\r\n    key = pathArr[i];\r\n    if (obj[key] == null) {\r\n      obj[key] = {};\r\n    }\r\n    obj = obj[key];\r\n  }\r\n  if (overwrite || obj[pathArr[i]] == null) {\r\n    obj[pathArr[i]] = val;\r\n  }\r\n}\r\nfunction compatLayoutProperties(option) {\r\n  option && each(LAYOUT_PROPERTIES, function (prop) {\r\n    if (prop[0] in option && !(prop[1] in option)) {\r\n      option[prop[1]] = option[prop[0]];\r\n    }\r\n  });\r\n}\r\nvar LAYOUT_PROPERTIES = [['x', 'left'], ['y', 'top'], ['x2', 'right'], ['y2', 'bottom']];\r\nvar COMPATITABLE_COMPONENTS = ['grid', 'geo', 'parallel', 'legend', 'toolbox', 'title', 'visualMap', 'dataZoom', 'timeline'];\r\nvar BAR_ITEM_STYLE_MAP = [['borderRadius', 'barBorderRadius'], ['borderColor', 'barBorderColor'], ['borderWidth', 'barBorderWidth']];\r\nfunction compatBarItemStyle(option) {\r\n  var itemStyle = option && option.itemStyle;\r\n  if (itemStyle) {\r\n    for (var i = 0; i < BAR_ITEM_STYLE_MAP.length; i++) {\r\n      var oldName = BAR_ITEM_STYLE_MAP[i][1];\r\n      var newName = BAR_ITEM_STYLE_MAP[i][0];\r\n      if (itemStyle[oldName] != null) {\r\n        itemStyle[newName] = itemStyle[oldName];\r\n        if (process.env.NODE_ENV !== 'production') {\r\n          deprecateReplaceLog(oldName, newName);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\nfunction compatPieLabel(option) {\r\n  if (!option) {\r\n    return;\r\n  }\r\n  if (option.alignTo === 'edge' && option.margin != null && option.edgeDistance == null) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      deprecateReplaceLog('label.margin', 'label.edgeDistance', 'pie');\r\n    }\r\n    option.edgeDistance = option.margin;\r\n  }\r\n}\r\nfunction compatSunburstState(option) {\r\n  if (!option) {\r\n    return;\r\n  }\r\n  if (option.downplay && !option.blur) {\r\n    option.blur = option.downplay;\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      deprecateReplaceLog('downplay', 'blur', 'sunburst');\r\n    }\r\n  }\r\n}\r\nfunction compatGraphFocus(option) {\r\n  if (!option) {\r\n    return;\r\n  }\r\n  if (option.focusNodeAdjacency != null) {\r\n    option.emphasis = option.emphasis || {};\r\n    if (option.emphasis.focus == null) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        deprecateReplaceLog('focusNodeAdjacency', 'emphasis: { focus: \\'adjacency\\'}', 'graph/sankey');\r\n      }\r\n      option.emphasis.focus = 'adjacency';\r\n    }\r\n  }\r\n}\r\nfunction traverseTree(data, cb) {\r\n  if (data) {\r\n    for (var i = 0; i < data.length; i++) {\r\n      cb(data[i]);\r\n      data[i] && traverseTree(data[i].children, cb);\r\n    }\r\n  }\r\n}\r\nexport default function globalBackwardCompat(option, isTheme) {\r\n  compatStyle(option, isTheme);\r\n  // Make sure series array for model initialization.\r\n  option.series = normalizeToArray(option.series);\r\n  each(option.series, function (seriesOpt) {\r\n    if (!isObject(seriesOpt)) {\r\n      return;\r\n    }\r\n    var seriesType = seriesOpt.type;\r\n    if (seriesType === 'line') {\r\n      if (seriesOpt.clipOverflow != null) {\r\n        seriesOpt.clip = seriesOpt.clipOverflow;\r\n        if (process.env.NODE_ENV !== 'production') {\r\n          deprecateReplaceLog('clipOverflow', 'clip', 'line');\r\n        }\r\n      }\r\n    } else if (seriesType === 'pie' || seriesType === 'gauge') {\r\n      if (seriesOpt.clockWise != null) {\r\n        seriesOpt.clockwise = seriesOpt.clockWise;\r\n        if (process.env.NODE_ENV !== 'production') {\r\n          deprecateReplaceLog('clockWise', 'clockwise');\r\n        }\r\n      }\r\n      compatPieLabel(seriesOpt.label);\r\n      var data = seriesOpt.data;\r\n      if (data && !isTypedArray(data)) {\r\n        for (var i = 0; i < data.length; i++) {\r\n          compatPieLabel(data[i]);\r\n        }\r\n      }\r\n      if (seriesOpt.hoverOffset != null) {\r\n        seriesOpt.emphasis = seriesOpt.emphasis || {};\r\n        if (seriesOpt.emphasis.scaleSize = null) {\r\n          if (process.env.NODE_ENV !== 'production') {\r\n            deprecateReplaceLog('hoverOffset', 'emphasis.scaleSize');\r\n          }\r\n          seriesOpt.emphasis.scaleSize = seriesOpt.hoverOffset;\r\n        }\r\n      }\r\n    } else if (seriesType === 'gauge') {\r\n      var pointerColor = get(seriesOpt, 'pointer.color');\r\n      pointerColor != null && set(seriesOpt, 'itemStyle.color', pointerColor);\r\n    } else if (seriesType === 'bar') {\r\n      compatBarItemStyle(seriesOpt);\r\n      compatBarItemStyle(seriesOpt.backgroundStyle);\r\n      compatBarItemStyle(seriesOpt.emphasis);\r\n      var data = seriesOpt.data;\r\n      if (data && !isTypedArray(data)) {\r\n        for (var i = 0; i < data.length; i++) {\r\n          if (typeof data[i] === 'object') {\r\n            compatBarItemStyle(data[i]);\r\n            compatBarItemStyle(data[i] && data[i].emphasis);\r\n          }\r\n        }\r\n      }\r\n    } else if (seriesType === 'sunburst') {\r\n      var highlightPolicy = seriesOpt.highlightPolicy;\r\n      if (highlightPolicy) {\r\n        seriesOpt.emphasis = seriesOpt.emphasis || {};\r\n        if (!seriesOpt.emphasis.focus) {\r\n          seriesOpt.emphasis.focus = highlightPolicy;\r\n          if (process.env.NODE_ENV !== 'production') {\r\n            deprecateReplaceLog('highlightPolicy', 'emphasis.focus', 'sunburst');\r\n          }\r\n        }\r\n      }\r\n      compatSunburstState(seriesOpt);\r\n      traverseTree(seriesOpt.data, compatSunburstState);\r\n    } else if (seriesType === 'graph' || seriesType === 'sankey') {\r\n      compatGraphFocus(seriesOpt);\r\n      // TODO nodes, edges?\r\n    } else if (seriesType === 'map') {\r\n      if (seriesOpt.mapType && !seriesOpt.map) {\r\n        if (process.env.NODE_ENV !== 'production') {\r\n          deprecateReplaceLog('mapType', 'map', 'map');\r\n        }\r\n        seriesOpt.map = seriesOpt.mapType;\r\n      }\r\n      if (seriesOpt.mapLocation) {\r\n        if (process.env.NODE_ENV !== 'production') {\r\n          deprecateLog('`mapLocation` is not used anymore.');\r\n        }\r\n        defaults(seriesOpt, seriesOpt.mapLocation);\r\n      }\r\n    }\r\n    if (seriesOpt.hoverAnimation != null) {\r\n      seriesOpt.emphasis = seriesOpt.emphasis || {};\r\n      if (seriesOpt.emphasis && seriesOpt.emphasis.scale == null) {\r\n        if (process.env.NODE_ENV !== 'production') {\r\n          deprecateReplaceLog('hoverAnimation', 'emphasis.scale');\r\n        }\r\n        seriesOpt.emphasis.scale = seriesOpt.hoverAnimation;\r\n      }\r\n    }\r\n    compatLayoutProperties(seriesOpt);\r\n  });\r\n  // dataRange has changed to visualMap\r\n  if (option.dataRange) {\r\n    option.visualMap = option.dataRange;\r\n  }\r\n  each(COMPATITABLE_COMPONENTS, function (componentName) {\r\n    var options = option[componentName];\r\n    if (options) {\r\n      if (!isArray(options)) {\r\n        options = [options];\r\n      }\r\n      each(options, function (option) {\r\n        compatLayoutProperties(option);\r\n      });\r\n    }\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { createHashMap, each } from 'zrender/lib/core/util.js';\r\nimport { addSafe } from '../util/number.js';\r\n// (1) [Caution]: the logic is correct based on the premises:\r\n//     data processing stage is blocked in stream.\r\n//     See <module:echarts/stream/Scheduler#performDataProcessorTasks>\r\n// (2) Only register once when import repeatedly.\r\n//     Should be executed after series is filtered and before stack calculation.\r\nexport default function dataStack(ecModel) {\r\n  var stackInfoMap = createHashMap();\r\n  ecModel.eachSeries(function (seriesModel) {\r\n    var stack = seriesModel.get('stack');\r\n    // Compatible: when `stack` is set as '', do not stack.\r\n    if (stack) {\r\n      var stackInfoList = stackInfoMap.get(stack) || stackInfoMap.set(stack, []);\r\n      var data = seriesModel.getData();\r\n      var stackInfo = {\r\n        // Used for calculate axis extent automatically.\r\n        // TODO: Type getCalculationInfo return more specific type?\r\n        stackResultDimension: data.getCalculationInfo('stackResultDimension'),\r\n        stackedOverDimension: data.getCalculationInfo('stackedOverDimension'),\r\n        stackedDimension: data.getCalculationInfo('stackedDimension'),\r\n        stackedByDimension: data.getCalculationInfo('stackedByDimension'),\r\n        isStackedByIndex: data.getCalculationInfo('isStackedByIndex'),\r\n        data: data,\r\n        seriesModel: seriesModel\r\n      };\r\n      // If stacked on axis that do not support data stack.\r\n      if (!stackInfo.stackedDimension || !(stackInfo.isStackedByIndex || stackInfo.stackedByDimension)) {\r\n        return;\r\n      }\r\n      stackInfoList.length && data.setCalculationInfo('stackedOnSeries', stackInfoList[stackInfoList.length - 1].seriesModel);\r\n      stackInfoList.push(stackInfo);\r\n    }\r\n  });\r\n  stackInfoMap.each(calculateStack);\r\n}\r\nfunction calculateStack(stackInfoList) {\r\n  each(stackInfoList, function (targetStackInfo, idxInStack) {\r\n    var resultVal = [];\r\n    var resultNaN = [NaN, NaN];\r\n    var dims = [targetStackInfo.stackResultDimension, targetStackInfo.stackedOverDimension];\r\n    var targetData = targetStackInfo.data;\r\n    var isStackedByIndex = targetStackInfo.isStackedByIndex;\r\n    var stackStrategy = targetStackInfo.seriesModel.get('stackStrategy') || 'samesign';\r\n    // Should not write on raw data, because stack series model list changes\r\n    // depending on legend selection.\r\n    targetData.modify(dims, function (v0, v1, dataIndex) {\r\n      var sum = targetData.get(targetStackInfo.stackedDimension, dataIndex);\r\n      // Consider `connectNulls` of line area, if value is NaN, stackedOver\r\n      // should also be NaN, to draw a appropriate belt area.\r\n      if (isNaN(sum)) {\r\n        return resultNaN;\r\n      }\r\n      var byValue;\r\n      var stackedDataRawIndex;\r\n      if (isStackedByIndex) {\r\n        stackedDataRawIndex = targetData.getRawIndex(dataIndex);\r\n      } else {\r\n        byValue = targetData.get(targetStackInfo.stackedByDimension, dataIndex);\r\n      }\r\n      // If stackOver is NaN, chart view will render point on value start.\r\n      var stackedOver = NaN;\r\n      for (var j = idxInStack - 1; j >= 0; j--) {\r\n        var stackInfo = stackInfoList[j];\r\n        // Has been optimized by inverted indices on `stackedByDimension`.\r\n        if (!isStackedByIndex) {\r\n          stackedDataRawIndex = stackInfo.data.rawIndexOf(stackInfo.stackedByDimension, byValue);\r\n        }\r\n        if (stackedDataRawIndex >= 0) {\r\n          var val = stackInfo.data.getByRawIndex(stackInfo.stackResultDimension, stackedDataRawIndex);\r\n          // Considering positive stack, negative stack and empty data\r\n          if (stackStrategy === 'all' // single stack group\r\n          || stackStrategy === 'positive' && val > 0 || stackStrategy === 'negative' && val < 0 || stackStrategy === 'samesign' && sum >= 0 && val > 0 // All positive stack\r\n          || stackStrategy === 'samesign' && sum <= 0 && val < 0 // All negative stack\r\n          ) {\r\n            // The sum has to be very small to be affected by the\r\n            // floating arithmetic problem. An incorrect result will probably\r\n            // cause axis min/max to be filtered incorrectly.\r\n            sum = addSafe(sum, val);\r\n            stackedOver = val;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      resultVal[0] = sum;\r\n      resultVal[1] = stackedOver;\r\n      return resultVal;\r\n    });\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { isFunction, extend, createHashMap } from 'zrender/lib/core/util.js';\r\nimport makeStyleMapper from '../model/mixin/makeStyleMapper.js';\r\nimport { ITEM_STYLE_KEY_MAP } from '../model/mixin/itemStyle.js';\r\nimport { LINE_STYLE_KEY_MAP } from '../model/mixin/lineStyle.js';\r\nimport Model from '../model/Model.js';\r\nimport { makeInner } from '../util/model.js';\r\nvar inner = makeInner();\r\nvar defaultStyleMappers = {\r\n  itemStyle: makeStyleMapper(ITEM_STYLE_KEY_MAP, true),\r\n  lineStyle: makeStyleMapper(LINE_STYLE_KEY_MAP, true)\r\n};\r\nvar defaultColorKey = {\r\n  lineStyle: 'stroke',\r\n  itemStyle: 'fill'\r\n};\r\nfunction getStyleMapper(seriesModel, stylePath) {\r\n  var styleMapper = seriesModel.visualStyleMapper || defaultStyleMappers[stylePath];\r\n  if (!styleMapper) {\r\n    console.warn(\"Unknown style type '\" + stylePath + \"'.\");\r\n    return defaultStyleMappers.itemStyle;\r\n  }\r\n  return styleMapper;\r\n}\r\nfunction getDefaultColorKey(seriesModel, stylePath) {\r\n  // return defaultColorKey[stylePath] ||\r\n  var colorKey = seriesModel.visualDrawType || defaultColorKey[stylePath];\r\n  if (!colorKey) {\r\n    console.warn(\"Unknown style type '\" + stylePath + \"'.\");\r\n    return 'fill';\r\n  }\r\n  return colorKey;\r\n}\r\nvar seriesStyleTask = {\r\n  createOnAllSeries: true,\r\n  performRawSeries: true,\r\n  reset: function (seriesModel, ecModel) {\r\n    var data = seriesModel.getData();\r\n    var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle';\r\n    // Set in itemStyle\r\n    var styleModel = seriesModel.getModel(stylePath);\r\n    var getStyle = getStyleMapper(seriesModel, stylePath);\r\n    var globalStyle = getStyle(styleModel);\r\n    var decalOption = styleModel.getShallow('decal');\r\n    if (decalOption) {\r\n      data.setVisual('decal', decalOption);\r\n      decalOption.dirty = true;\r\n    }\r\n    // TODO\r\n    var colorKey = getDefaultColorKey(seriesModel, stylePath);\r\n    var color = globalStyle[colorKey];\r\n    // TODO style callback\r\n    var colorCallback = isFunction(color) ? color : null;\r\n    var hasAutoColor = globalStyle.fill === 'auto' || globalStyle.stroke === 'auto';\r\n    // Get from color palette by default.\r\n    if (!globalStyle[colorKey] || colorCallback || hasAutoColor) {\r\n      // Note: If some series has color specified (e.g., by itemStyle.color), we DO NOT\r\n      // make it effect palette. Because some scenarios users need to make some series\r\n      // transparent or as background, which should better not effect the palette.\r\n      var colorPalette = seriesModel.getColorFromPalette(\r\n      // TODO series count changed.\r\n      seriesModel.name, null, ecModel.getSeriesCount());\r\n      if (!globalStyle[colorKey]) {\r\n        globalStyle[colorKey] = colorPalette;\r\n        data.setVisual('colorFromPalette', true);\r\n      }\r\n      globalStyle.fill = globalStyle.fill === 'auto' || isFunction(globalStyle.fill) ? colorPalette : globalStyle.fill;\r\n      globalStyle.stroke = globalStyle.stroke === 'auto' || isFunction(globalStyle.stroke) ? colorPalette : globalStyle.stroke;\r\n    }\r\n    data.setVisual('style', globalStyle);\r\n    data.setVisual('drawType', colorKey);\r\n    // Only visible series has each data be visual encoded\r\n    if (!ecModel.isSeriesFiltered(seriesModel) && colorCallback) {\r\n      data.setVisual('colorFromPalette', false);\r\n      return {\r\n        dataEach: function (data, idx) {\r\n          var dataParams = seriesModel.getDataParams(idx);\r\n          var itemStyle = extend({}, globalStyle);\r\n          itemStyle[colorKey] = colorCallback(dataParams);\r\n          data.setItemVisual(idx, 'style', itemStyle);\r\n        }\r\n      };\r\n    }\r\n  }\r\n};\r\nvar sharedModel = new Model();\r\nvar dataStyleTask = {\r\n  createOnAllSeries: true,\r\n  performRawSeries: true,\r\n  reset: function (seriesModel, ecModel) {\r\n    if (seriesModel.ignoreStyleOnData || ecModel.isSeriesFiltered(seriesModel)) {\r\n      return;\r\n    }\r\n    var data = seriesModel.getData();\r\n    var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle';\r\n    // Set in itemStyle\r\n    var getStyle = getStyleMapper(seriesModel, stylePath);\r\n    var colorKey = data.getVisual('drawType');\r\n    return {\r\n      dataEach: data.hasItemOption ? function (data, idx) {\r\n        // Not use getItemModel for performance considuration\r\n        var rawItem = data.getRawDataItem(idx);\r\n        if (rawItem && rawItem[stylePath]) {\r\n          sharedModel.option = rawItem[stylePath];\r\n          var style = getStyle(sharedModel);\r\n          var existsStyle = data.ensureUniqueItemVisual(idx, 'style');\r\n          extend(existsStyle, style);\r\n          if (sharedModel.option.decal) {\r\n            data.setItemVisual(idx, 'decal', sharedModel.option.decal);\r\n            sharedModel.option.decal.dirty = true;\r\n          }\r\n          if (colorKey in style) {\r\n            data.setItemVisual(idx, 'colorFromPalette', false);\r\n          }\r\n        }\r\n      } : null\r\n    };\r\n  }\r\n};\r\n// Pick color from palette for the data which has not been set with color yet.\r\n// Note: do not support stream rendering. No such cases yet.\r\nvar dataColorPaletteTask = {\r\n  performRawSeries: true,\r\n  overallReset: function (ecModel) {\r\n    // Each type of series uses one scope.\r\n    // Pie and funnel are using different scopes.\r\n    var paletteScopeGroupByType = createHashMap();\r\n    ecModel.eachSeries(function (seriesModel) {\r\n      var colorBy = seriesModel.getColorBy();\r\n      if (seriesModel.isColorBySeries()) {\r\n        return;\r\n      }\r\n      var key = seriesModel.type + '-' + colorBy;\r\n      var colorScope = paletteScopeGroupByType.get(key);\r\n      if (!colorScope) {\r\n        colorScope = {};\r\n        paletteScopeGroupByType.set(key, colorScope);\r\n      }\r\n      inner(seriesModel).scope = colorScope;\r\n    });\r\n    ecModel.eachSeries(function (seriesModel) {\r\n      if (seriesModel.isColorBySeries() || ecModel.isSeriesFiltered(seriesModel)) {\r\n        return;\r\n      }\r\n      var dataAll = seriesModel.getRawData();\r\n      var idxMap = {};\r\n      var data = seriesModel.getData();\r\n      var colorScope = inner(seriesModel).scope;\r\n      var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle';\r\n      var colorKey = getDefaultColorKey(seriesModel, stylePath);\r\n      data.each(function (idx) {\r\n        var rawIdx = data.getRawIndex(idx);\r\n        idxMap[rawIdx] = idx;\r\n      });\r\n      // Iterate on data before filtered. To make sure color from palette can be\r\n      // Consistent when toggling legend.\r\n      dataAll.each(function (rawIdx) {\r\n        var idx = idxMap[rawIdx];\r\n        var fromPalette = data.getItemVisual(idx, 'colorFromPalette');\r\n        // Get color from palette for each data only when the color is inherited from series color, which is\r\n        // also picked from color palette. So following situation is not in the case:\r\n        // 1. series.itemStyle.color is set\r\n        // 2. color is encoded by visualMap\r\n        if (fromPalette) {\r\n          var itemStyle = data.ensureUniqueItemVisual(idx, 'style');\r\n          var name_1 = dataAll.getName(rawIdx) || rawIdx + '';\r\n          var dataCount = dataAll.count();\r\n          itemStyle[colorKey] = seriesModel.getColorFromPalette(name_1, colorScope, dataCount);\r\n        }\r\n      });\r\n    });\r\n  }\r\n};\r\nexport { seriesStyleTask, dataStyleTask, dataColorPaletteTask };", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport * as graphic from '../util/graphic.js';\r\nvar PI = Math.PI;\r\n/**\r\n * @param {module:echarts/ExtensionAPI} api\r\n * @param {Object} [opts]\r\n * @param {string} [opts.text]\r\n * @param {string} [opts.color]\r\n * @param {string} [opts.textColor]\r\n * @return {module:zrender/Element}\r\n */\r\nexport default function defaultLoading(api, opts) {\r\n  opts = opts || {};\r\n  zrUtil.defaults(opts, {\r\n    text: 'loading',\r\n    textColor: '#000',\r\n    fontSize: 12,\r\n    fontWeight: 'normal',\r\n    fontStyle: 'normal',\r\n    fontFamily: 'sans-serif',\r\n    maskColor: 'rgba(255, 255, 255, 0.8)',\r\n    showSpinner: true,\r\n    color: '#5470c6',\r\n    spinnerRadius: 10,\r\n    lineWidth: 5,\r\n    zlevel: 0\r\n  });\r\n  var group = new graphic.Group();\r\n  var mask = new graphic.Rect({\r\n    style: {\r\n      fill: opts.maskColor\r\n    },\r\n    zlevel: opts.zlevel,\r\n    z: 10000\r\n  });\r\n  group.add(mask);\r\n  var textContent = new graphic.Text({\r\n    style: {\r\n      text: opts.text,\r\n      fill: opts.textColor,\r\n      fontSize: opts.fontSize,\r\n      fontWeight: opts.fontWeight,\r\n      fontStyle: opts.fontStyle,\r\n      fontFamily: opts.fontFamily\r\n    },\r\n    zlevel: opts.zlevel,\r\n    z: 10001\r\n  });\r\n  var labelRect = new graphic.Rect({\r\n    style: {\r\n      fill: 'none'\r\n    },\r\n    textContent: textContent,\r\n    textConfig: {\r\n      position: 'right',\r\n      distance: 10\r\n    },\r\n    zlevel: opts.zlevel,\r\n    z: 10001\r\n  });\r\n  group.add(labelRect);\r\n  var arc;\r\n  if (opts.showSpinner) {\r\n    arc = new graphic.Arc({\r\n      shape: {\r\n        startAngle: -PI / 2,\r\n        endAngle: -PI / 2 + 0.1,\r\n        r: opts.spinnerRadius\r\n      },\r\n      style: {\r\n        stroke: opts.color,\r\n        lineCap: 'round',\r\n        lineWidth: opts.lineWidth\r\n      },\r\n      zlevel: opts.zlevel,\r\n      z: 10001\r\n    });\r\n    arc.animateShape(true).when(1000, {\r\n      endAngle: PI * 3 / 2\r\n    }).start('circularInOut');\r\n    arc.animateShape(true).when(1000, {\r\n      startAngle: PI * 3 / 2\r\n    }).delay(300).start('circularInOut');\r\n    group.add(arc);\r\n  }\r\n  // Inject resize\r\n  group.resize = function () {\r\n    var textWidth = textContent.getBoundingRect().width;\r\n    var r = opts.showSpinner ? opts.spinnerRadius : 0;\r\n    // cx = (containerWidth - arcDiameter - textDistance - textWidth) / 2\r\n    // textDistance needs to be calculated when both animation and text exist\r\n    var cx = (api.getWidth() - r * 2 - (opts.showSpinner && textWidth ? 10 : 0) - textWidth) / 2 - (opts.showSpinner && textWidth ? 0 : 5 + textWidth / 2)\r\n    // only show the text\r\n    + (opts.showSpinner ? 0 : textWidth / 2)\r\n    // only show the spinner\r\n    + (textWidth ? 0 : r);\r\n    var cy = api.getHeight() / 2;\r\n    opts.showSpinner && arc.setShape({\r\n      cx: cx,\r\n      cy: cy\r\n    });\r\n    labelRect.setShape({\r\n      x: cx - r,\r\n      y: cy - r,\r\n      width: r * 2,\r\n      height: r * 2\r\n    });\r\n    mask.setShape({\r\n      x: 0,\r\n      y: 0,\r\n      width: api.getWidth(),\r\n      height: api.getHeight()\r\n    });\r\n  };\r\n  group.resize();\r\n  return group;\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { each, map, isFunction, createHashMap, noop, assert } from 'zrender/lib/core/util.js';\r\nimport { createTask } from './task.js';\r\nimport { getUID } from '../util/component.js';\r\nimport GlobalModel from '../model/Global.js';\r\nimport ExtensionAPI from './ExtensionAPI.js';\r\nimport { normalizeToArray } from '../util/model.js';\r\n;\r\nvar Scheduler = /** @class */function () {\r\n  function Scheduler(ecInstance, api, dataProcessorHandlers, visualHandlers) {\r\n    // key: handlerUID\r\n    this._stageTaskMap = createHashMap();\r\n    this.ecInstance = ecInstance;\r\n    this.api = api;\r\n    // Fix current processors in case that in some rear cases that\r\n    // processors might be registered after echarts instance created.\r\n    // Register processors incrementally for a echarts instance is\r\n    // not supported by this stream architecture.\r\n    dataProcessorHandlers = this._dataProcessorHandlers = dataProcessorHandlers.slice();\r\n    visualHandlers = this._visualHandlers = visualHandlers.slice();\r\n    this._allHandlers = dataProcessorHandlers.concat(visualHandlers);\r\n  }\r\n  Scheduler.prototype.restoreData = function (ecModel, payload) {\r\n    // TODO: Only restore needed series and components, but not all components.\r\n    // Currently `restoreData` of all of the series and component will be called.\r\n    // But some independent components like `title`, `legend`, `graphic`, `toolbox`,\r\n    // `tooltip`, `axisPointer`, etc, do not need series refresh when `setOption`,\r\n    // and some components like coordinate system, axes, dataZoom, visualMap only\r\n    // need their target series refresh.\r\n    // (1) If we are implementing this feature some day, we should consider these cases:\r\n    // if a data processor depends on a component (e.g., dataZoomProcessor depends\r\n    // on the settings of `dataZoom`), it should be re-performed if the component\r\n    // is modified by `setOption`.\r\n    // (2) If a processor depends on sevral series, speicified by its `getTargetSeries`,\r\n    // it should be re-performed when the result array of `getTargetSeries` changed.\r\n    // We use `dependencies` to cover these issues.\r\n    // (3) How to update target series when coordinate system related components modified.\r\n    // TODO: simply the dirty mechanism? Check whether only the case here can set tasks dirty,\r\n    // and this case all of the tasks will be set as dirty.\r\n    ecModel.restoreData(payload);\r\n    // Theoretically an overall task not only depends on each of its target series, but also\r\n    // depends on all of the series.\r\n    // The overall task is not in pipeline, and `ecModel.restoreData` only set pipeline tasks\r\n    // dirty. If `getTargetSeries` of an overall task returns nothing, we should also ensure\r\n    // that the overall task is set as dirty and to be performed, otherwise it probably cause\r\n    // state chaos. So we have to set dirty of all of the overall tasks manually, otherwise it\r\n    // probably cause state chaos (consider `dataZoomProcessor`).\r\n    this._stageTaskMap.each(function (taskRecord) {\r\n      var overallTask = taskRecord.overallTask;\r\n      overallTask && overallTask.dirty();\r\n    });\r\n  };\r\n  // If seriesModel provided, incremental threshold is check by series data.\r\n  Scheduler.prototype.getPerformArgs = function (task, isBlock) {\r\n    // For overall task\r\n    if (!task.__pipeline) {\r\n      return;\r\n    }\r\n    var pipeline = this._pipelineMap.get(task.__pipeline.id);\r\n    var pCtx = pipeline.context;\r\n    var incremental = !isBlock && pipeline.progressiveEnabled && (!pCtx || pCtx.progressiveRender) && task.__idxInPipeline > pipeline.blockIndex;\r\n    var step = incremental ? pipeline.step : null;\r\n    var modDataCount = pCtx && pCtx.modDataCount;\r\n    var modBy = modDataCount != null ? Math.ceil(modDataCount / step) : null;\r\n    return {\r\n      step: step,\r\n      modBy: modBy,\r\n      modDataCount: modDataCount\r\n    };\r\n  };\r\n  Scheduler.prototype.getPipeline = function (pipelineId) {\r\n    return this._pipelineMap.get(pipelineId);\r\n  };\r\n  /**\r\n   * Current, progressive rendering starts from visual and layout.\r\n   * Always detect render mode in the same stage, avoiding that incorrect\r\n   * detection caused by data filtering.\r\n   * Caution:\r\n   * `updateStreamModes` use `seriesModel.getData()`.\r\n   */\r\n  Scheduler.prototype.updateStreamModes = function (seriesModel, view) {\r\n    var pipeline = this._pipelineMap.get(seriesModel.uid);\r\n    var data = seriesModel.getData();\r\n    var dataLen = data.count();\r\n    // `progressiveRender` means that can render progressively in each\r\n    // animation frame. Note that some types of series do not provide\r\n    // `view.incrementalPrepareRender` but support `chart.appendData`. We\r\n    // use the term `incremental` but not `progressive` to describe the\r\n    // case that `chart.appendData`.\r\n    var progressiveRender = pipeline.progressiveEnabled && view.incrementalPrepareRender && dataLen >= pipeline.threshold;\r\n    var large = seriesModel.get('large') && dataLen >= seriesModel.get('largeThreshold');\r\n    // TODO: modDataCount should not updated if `appendData`, otherwise cause whole repaint.\r\n    // see `test/candlestick-large3.html`\r\n    var modDataCount = seriesModel.get('progressiveChunkMode') === 'mod' ? dataLen : null;\r\n    seriesModel.pipelineContext = pipeline.context = {\r\n      progressiveRender: progressiveRender,\r\n      modDataCount: modDataCount,\r\n      large: large\r\n    };\r\n  };\r\n  Scheduler.prototype.restorePipelines = function (ecModel) {\r\n    var scheduler = this;\r\n    var pipelineMap = scheduler._pipelineMap = createHashMap();\r\n    ecModel.eachSeries(function (seriesModel) {\r\n      var progressive = seriesModel.getProgressive();\r\n      var pipelineId = seriesModel.uid;\r\n      pipelineMap.set(pipelineId, {\r\n        id: pipelineId,\r\n        head: null,\r\n        tail: null,\r\n        threshold: seriesModel.getProgressiveThreshold(),\r\n        progressiveEnabled: progressive && !(seriesModel.preventIncremental && seriesModel.preventIncremental()),\r\n        blockIndex: -1,\r\n        step: Math.round(progressive || 700),\r\n        count: 0\r\n      });\r\n      scheduler._pipe(seriesModel, seriesModel.dataTask);\r\n    });\r\n  };\r\n  Scheduler.prototype.prepareStageTasks = function () {\r\n    var stageTaskMap = this._stageTaskMap;\r\n    var ecModel = this.api.getModel();\r\n    var api = this.api;\r\n    each(this._allHandlers, function (handler) {\r\n      var record = stageTaskMap.get(handler.uid) || stageTaskMap.set(handler.uid, {});\r\n      var errMsg = '';\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        // Currently do not need to support to sepecify them both.\r\n        errMsg = '\"reset\" and \"overallReset\" must not be both specified.';\r\n      }\r\n      assert(!(handler.reset && handler.overallReset), errMsg);\r\n      handler.reset && this._createSeriesStageTask(handler, record, ecModel, api);\r\n      handler.overallReset && this._createOverallStageTask(handler, record, ecModel, api);\r\n    }, this);\r\n  };\r\n  Scheduler.prototype.prepareView = function (view, model, ecModel, api) {\r\n    var renderTask = view.renderTask;\r\n    var context = renderTask.context;\r\n    context.model = model;\r\n    context.ecModel = ecModel;\r\n    context.api = api;\r\n    renderTask.__block = !view.incrementalPrepareRender;\r\n    this._pipe(model, renderTask);\r\n  };\r\n  Scheduler.prototype.performDataProcessorTasks = function (ecModel, payload) {\r\n    // If we do not use `block` here, it should be considered when to update modes.\r\n    this._performStageTasks(this._dataProcessorHandlers, ecModel, payload, {\r\n      block: true\r\n    });\r\n  };\r\n  Scheduler.prototype.performVisualTasks = function (ecModel, payload, opt) {\r\n    this._performStageTasks(this._visualHandlers, ecModel, payload, opt);\r\n  };\r\n  Scheduler.prototype._performStageTasks = function (stageHandlers, ecModel, payload, opt) {\r\n    opt = opt || {};\r\n    var unfinished = false;\r\n    var scheduler = this;\r\n    each(stageHandlers, function (stageHandler, idx) {\r\n      if (opt.visualType && opt.visualType !== stageHandler.visualType) {\r\n        return;\r\n      }\r\n      var stageHandlerRecord = scheduler._stageTaskMap.get(stageHandler.uid);\r\n      var seriesTaskMap = stageHandlerRecord.seriesTaskMap;\r\n      var overallTask = stageHandlerRecord.overallTask;\r\n      if (overallTask) {\r\n        var overallNeedDirty_1;\r\n        var agentStubMap = overallTask.agentStubMap;\r\n        agentStubMap.each(function (stub) {\r\n          if (needSetDirty(opt, stub)) {\r\n            stub.dirty();\r\n            overallNeedDirty_1 = true;\r\n          }\r\n        });\r\n        overallNeedDirty_1 && overallTask.dirty();\r\n        scheduler.updatePayload(overallTask, payload);\r\n        var performArgs_1 = scheduler.getPerformArgs(overallTask, opt.block);\r\n        // Execute stubs firstly, which may set the overall task dirty,\r\n        // then execute the overall task. And stub will call seriesModel.setData,\r\n        // which ensures that in the overallTask seriesModel.getData() will not\r\n        // return incorrect data.\r\n        agentStubMap.each(function (stub) {\r\n          stub.perform(performArgs_1);\r\n        });\r\n        if (overallTask.perform(performArgs_1)) {\r\n          unfinished = true;\r\n        }\r\n      } else if (seriesTaskMap) {\r\n        seriesTaskMap.each(function (task, pipelineId) {\r\n          if (needSetDirty(opt, task)) {\r\n            task.dirty();\r\n          }\r\n          var performArgs = scheduler.getPerformArgs(task, opt.block);\r\n          // FIXME\r\n          // if intending to declare `performRawSeries` in handlers, only\r\n          // stream-independent (specifically, data item independent) operations can be\r\n          // performed. Because if a series is filtered, most of the tasks will not\r\n          // be performed. A stream-dependent operation probably cause wrong biz logic.\r\n          // Perhaps we should not provide a separate callback for this case instead\r\n          // of providing the config `performRawSeries`. The stream-dependent operations\r\n          // and stream-independent operations should better not be mixed.\r\n          performArgs.skip = !stageHandler.performRawSeries && ecModel.isSeriesFiltered(task.context.model);\r\n          scheduler.updatePayload(task, payload);\r\n          if (task.perform(performArgs)) {\r\n            unfinished = true;\r\n          }\r\n        });\r\n      }\r\n    });\r\n    function needSetDirty(opt, task) {\r\n      return opt.setDirty && (!opt.dirtyMap || opt.dirtyMap.get(task.__pipeline.id));\r\n    }\r\n    this.unfinished = unfinished || this.unfinished;\r\n  };\r\n  Scheduler.prototype.performSeriesTasks = function (ecModel) {\r\n    var unfinished;\r\n    ecModel.eachSeries(function (seriesModel) {\r\n      // Progress to the end for dataInit and dataRestore.\r\n      unfinished = seriesModel.dataTask.perform() || unfinished;\r\n    });\r\n    this.unfinished = unfinished || this.unfinished;\r\n  };\r\n  Scheduler.prototype.plan = function () {\r\n    // Travel pipelines, check block.\r\n    this._pipelineMap.each(function (pipeline) {\r\n      var task = pipeline.tail;\r\n      do {\r\n        if (task.__block) {\r\n          pipeline.blockIndex = task.__idxInPipeline;\r\n          break;\r\n        }\r\n        task = task.getUpstream();\r\n      } while (task);\r\n    });\r\n  };\r\n  Scheduler.prototype.updatePayload = function (task, payload) {\r\n    payload !== 'remain' && (task.context.payload = payload);\r\n  };\r\n  Scheduler.prototype._createSeriesStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\r\n    var scheduler = this;\r\n    var oldSeriesTaskMap = stageHandlerRecord.seriesTaskMap;\r\n    // The count of stages are totally about only several dozen, so\r\n    // do not need to reuse the map.\r\n    var newSeriesTaskMap = stageHandlerRecord.seriesTaskMap = createHashMap();\r\n    var seriesType = stageHandler.seriesType;\r\n    var getTargetSeries = stageHandler.getTargetSeries;\r\n    // If a stageHandler should cover all series, `createOnAllSeries` should be declared mandatorily,\r\n    // to avoid some typo or abuse. Otherwise if an extension do not specify a `seriesType`,\r\n    // it works but it may cause other irrelevant charts blocked.\r\n    if (stageHandler.createOnAllSeries) {\r\n      ecModel.eachRawSeries(create);\r\n    } else if (seriesType) {\r\n      ecModel.eachRawSeriesByType(seriesType, create);\r\n    } else if (getTargetSeries) {\r\n      getTargetSeries(ecModel, api).each(create);\r\n    }\r\n    function create(seriesModel) {\r\n      var pipelineId = seriesModel.uid;\r\n      // Init tasks for each seriesModel only once.\r\n      // Reuse original task instance.\r\n      var task = newSeriesTaskMap.set(pipelineId, oldSeriesTaskMap && oldSeriesTaskMap.get(pipelineId) || createTask({\r\n        plan: seriesTaskPlan,\r\n        reset: seriesTaskReset,\r\n        count: seriesTaskCount\r\n      }));\r\n      task.context = {\r\n        model: seriesModel,\r\n        ecModel: ecModel,\r\n        api: api,\r\n        // PENDING: `useClearVisual` not used?\r\n        useClearVisual: stageHandler.isVisual && !stageHandler.isLayout,\r\n        plan: stageHandler.plan,\r\n        reset: stageHandler.reset,\r\n        scheduler: scheduler\r\n      };\r\n      scheduler._pipe(seriesModel, task);\r\n    }\r\n  };\r\n  Scheduler.prototype._createOverallStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\r\n    var scheduler = this;\r\n    var overallTask = stageHandlerRecord.overallTask = stageHandlerRecord.overallTask\r\n    // For overall task, the function only be called on reset stage.\r\n    || createTask({\r\n      reset: overallTaskReset\r\n    });\r\n    overallTask.context = {\r\n      ecModel: ecModel,\r\n      api: api,\r\n      overallReset: stageHandler.overallReset,\r\n      scheduler: scheduler\r\n    };\r\n    var oldAgentStubMap = overallTask.agentStubMap;\r\n    // The count of stages are totally about only several dozen, so\r\n    // do not need to reuse the map.\r\n    var newAgentStubMap = overallTask.agentStubMap = createHashMap();\r\n    var seriesType = stageHandler.seriesType;\r\n    var getTargetSeries = stageHandler.getTargetSeries;\r\n    var overallProgress = true;\r\n    var shouldOverallTaskDirty = false;\r\n    // FIXME:TS never used, so comment it\r\n    // let modifyOutputEnd = stageHandler.modifyOutputEnd;\r\n    // An overall task with seriesType detected or has `getTargetSeries`, we add\r\n    // stub in each pipelines, it will set the overall task dirty when the pipeline\r\n    // progress. Moreover, to avoid call the overall task each frame (too frequent),\r\n    // we set the pipeline block.\r\n    var errMsg = '';\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      errMsg = '\"createOnAllSeries\" is not supported for \"overallReset\", ' + 'because it will block all streams.';\r\n    }\r\n    assert(!stageHandler.createOnAllSeries, errMsg);\r\n    if (seriesType) {\r\n      ecModel.eachRawSeriesByType(seriesType, createStub);\r\n    } else if (getTargetSeries) {\r\n      getTargetSeries(ecModel, api).each(createStub);\r\n    }\r\n    // Otherwise, (usually it is legacy case), the overall task will only be\r\n    // executed when upstream is dirty. Otherwise the progressive rendering of all\r\n    // pipelines will be disabled unexpectedly. But it still needs stubs to receive\r\n    // dirty info from upstream.\r\n    else {\r\n      overallProgress = false;\r\n      each(ecModel.getSeries(), createStub);\r\n    }\r\n    function createStub(seriesModel) {\r\n      var pipelineId = seriesModel.uid;\r\n      var stub = newAgentStubMap.set(pipelineId, oldAgentStubMap && oldAgentStubMap.get(pipelineId) || (\r\n      // When the result of `getTargetSeries` changed, the overallTask\r\n      // should be set as dirty and re-performed.\r\n      shouldOverallTaskDirty = true, createTask({\r\n        reset: stubReset,\r\n        onDirty: stubOnDirty\r\n      })));\r\n      stub.context = {\r\n        model: seriesModel,\r\n        overallProgress: overallProgress\r\n        // FIXME:TS never used, so comment it\r\n        // modifyOutputEnd: modifyOutputEnd\r\n      };\r\n      stub.agent = overallTask;\r\n      stub.__block = overallProgress;\r\n      scheduler._pipe(seriesModel, stub);\r\n    }\r\n    if (shouldOverallTaskDirty) {\r\n      overallTask.dirty();\r\n    }\r\n  };\r\n  Scheduler.prototype._pipe = function (seriesModel, task) {\r\n    var pipelineId = seriesModel.uid;\r\n    var pipeline = this._pipelineMap.get(pipelineId);\r\n    !pipeline.head && (pipeline.head = task);\r\n    pipeline.tail && pipeline.tail.pipe(task);\r\n    pipeline.tail = task;\r\n    task.__idxInPipeline = pipeline.count++;\r\n    task.__pipeline = pipeline;\r\n  };\r\n  Scheduler.wrapStageHandler = function (stageHandler, visualType) {\r\n    if (isFunction(stageHandler)) {\r\n      stageHandler = {\r\n        overallReset: stageHandler,\r\n        seriesType: detectSeriseType(stageHandler)\r\n      };\r\n    }\r\n    stageHandler.uid = getUID('stageHandler');\r\n    visualType && (stageHandler.visualType = visualType);\r\n    return stageHandler;\r\n  };\r\n  ;\r\n  return Scheduler;\r\n}();\r\nfunction overallTaskReset(context) {\r\n  context.overallReset(context.ecModel, context.api, context.payload);\r\n}\r\nfunction stubReset(context) {\r\n  return context.overallProgress && stubProgress;\r\n}\r\nfunction stubProgress() {\r\n  this.agent.dirty();\r\n  this.getDownstream().dirty();\r\n}\r\nfunction stubOnDirty() {\r\n  this.agent && this.agent.dirty();\r\n}\r\nfunction seriesTaskPlan(context) {\r\n  return context.plan ? context.plan(context.model, context.ecModel, context.api, context.payload) : null;\r\n}\r\nfunction seriesTaskReset(context) {\r\n  if (context.useClearVisual) {\r\n    context.data.clearAllVisual();\r\n  }\r\n  var resetDefines = context.resetDefines = normalizeToArray(context.reset(context.model, context.ecModel, context.api, context.payload));\r\n  return resetDefines.length > 1 ? map(resetDefines, function (v, idx) {\r\n    return makeSeriesTaskProgress(idx);\r\n  }) : singleSeriesTaskProgress;\r\n}\r\nvar singleSeriesTaskProgress = makeSeriesTaskProgress(0);\r\nfunction makeSeriesTaskProgress(resetDefineIdx) {\r\n  return function (params, context) {\r\n    var data = context.data;\r\n    var resetDefine = context.resetDefines[resetDefineIdx];\r\n    if (resetDefine && resetDefine.dataEach) {\r\n      for (var i = params.start; i < params.end; i++) {\r\n        resetDefine.dataEach(data, i);\r\n      }\r\n    } else if (resetDefine && resetDefine.progress) {\r\n      resetDefine.progress(params, data);\r\n    }\r\n  };\r\n}\r\nfunction seriesTaskCount(context) {\r\n  return context.data.count();\r\n}\r\n/**\r\n * Only some legacy stage handlers (usually in echarts extensions) are pure function.\r\n * To ensure that they can work normally, they should work in block mode, that is,\r\n * they should not be started util the previous tasks finished. So they cause the\r\n * progressive rendering disabled. We try to detect the series type, to narrow down\r\n * the block range to only the series type they concern, but not all series.\r\n */\r\nfunction detectSeriseType(legacyFunc) {\r\n  seriesType = null;\r\n  try {\r\n    // Assume there is no async when calling `eachSeriesByType`.\r\n    legacyFunc(ecModelMock, apiMock);\r\n  } catch (e) {}\r\n  return seriesType;\r\n}\r\nvar ecModelMock = {};\r\nvar apiMock = {};\r\nvar seriesType;\r\nmockMethods(ecModelMock, GlobalModel);\r\nmockMethods(apiMock, ExtensionAPI);\r\necModelMock.eachSeriesByType = ecModelMock.eachRawSeriesByType = function (type) {\r\n  seriesType = type;\r\n};\r\necModelMock.eachComponent = function (cond) {\r\n  if (cond.mainType === 'series' && cond.subType) {\r\n    seriesType = cond.subType;\r\n  }\r\n};\r\nfunction mockMethods(target, Clz) {\r\n  /* eslint-disable */\r\n  for (var name_1 in Clz.prototype) {\r\n    // Do not use hasOwnProperty\r\n    target[name_1] = noop;\r\n  }\r\n  /* eslint-enable */\r\n}\r\nexport default Scheduler;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nvar colorAll = ['#37A2DA', '#32C5E9', '#67E0E3', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#E062AE', '#E690D1', '#e7bcf3', '#9d96f5', '#8378EA', '#96BFFF'];\r\nexport default {\r\n  color: colorAll,\r\n  colorLayer: [['#37A2DA', '#ffd85c', '#fd7b5f'], ['#37A2DA', '#67E0E3', '#FFDB5C', '#ff9f7f', '#E062AE', '#9d96f5'], ['#37A2DA', '#32C5E9', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#e7bcf3', '#8378EA', '#96BFFF'], colorAll]\r\n};", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nvar contrastColor = '#B9B8CE';\r\nvar backgroundColor = '#100C2A';\r\nvar axisCommon = function () {\r\n  return {\r\n    axisLine: {\r\n      lineStyle: {\r\n        color: contrastColor\r\n      }\r\n    },\r\n    splitLine: {\r\n      lineStyle: {\r\n        color: '#484753'\r\n      }\r\n    },\r\n    splitArea: {\r\n      areaStyle: {\r\n        color: ['rgba(255,255,255,0.02)', 'rgba(255,255,255,0.05)']\r\n      }\r\n    },\r\n    minorSplitLine: {\r\n      lineStyle: {\r\n        color: '#20203B'\r\n      }\r\n    }\r\n  };\r\n};\r\nvar colorPalette = ['#4992ff', '#7cffb2', '#fddd60', '#ff6e76', '#58d9f9', '#05c091', '#ff8a45', '#8d48e3', '#dd79ff'];\r\nvar theme = {\r\n  darkMode: true,\r\n  color: colorPalette,\r\n  backgroundColor: backgroundColor,\r\n  axisPointer: {\r\n    lineStyle: {\r\n      color: '#817f91'\r\n    },\r\n    crossStyle: {\r\n      color: '#817f91'\r\n    },\r\n    label: {\r\n      // TODO Contrast of label backgorundColor\r\n      color: '#fff'\r\n    }\r\n  },\r\n  legend: {\r\n    textStyle: {\r\n      color: contrastColor\r\n    },\r\n    pageTextStyle: {\r\n      color: contrastColor\r\n    }\r\n  },\r\n  textStyle: {\r\n    color: contrastColor\r\n  },\r\n  title: {\r\n    textStyle: {\r\n      color: '#EEF1FA'\r\n    },\r\n    subtextStyle: {\r\n      color: '#B9B8CE'\r\n    }\r\n  },\r\n  toolbox: {\r\n    iconStyle: {\r\n      borderColor: contrastColor\r\n    }\r\n  },\r\n  dataZoom: {\r\n    borderColor: '#71708A',\r\n    textStyle: {\r\n      color: contrastColor\r\n    },\r\n    brushStyle: {\r\n      color: 'rgba(135,163,206,0.3)'\r\n    },\r\n    handleStyle: {\r\n      color: '#353450',\r\n      borderColor: '#C5CBE3'\r\n    },\r\n    moveHandleStyle: {\r\n      color: '#B0B6C3',\r\n      opacity: 0.3\r\n    },\r\n    fillerColor: 'rgba(135,163,206,0.2)',\r\n    emphasis: {\r\n      handleStyle: {\r\n        borderColor: '#91B7F2',\r\n        color: '#4D587D'\r\n      },\r\n      moveHandleStyle: {\r\n        color: '#636D9A',\r\n        opacity: 0.7\r\n      }\r\n    },\r\n    dataBackground: {\r\n      lineStyle: {\r\n        color: '#71708A',\r\n        width: 1\r\n      },\r\n      areaStyle: {\r\n        color: '#71708A'\r\n      }\r\n    },\r\n    selectedDataBackground: {\r\n      lineStyle: {\r\n        color: '#87A3CE'\r\n      },\r\n      areaStyle: {\r\n        color: '#87A3CE'\r\n      }\r\n    }\r\n  },\r\n  visualMap: {\r\n    textStyle: {\r\n      color: contrastColor\r\n    }\r\n  },\r\n  timeline: {\r\n    lineStyle: {\r\n      color: contrastColor\r\n    },\r\n    label: {\r\n      color: contrastColor\r\n    },\r\n    controlStyle: {\r\n      color: contrastColor,\r\n      borderColor: contrastColor\r\n    }\r\n  },\r\n  calendar: {\r\n    itemStyle: {\r\n      color: backgroundColor\r\n    },\r\n    dayLabel: {\r\n      color: contrastColor\r\n    },\r\n    monthLabel: {\r\n      color: contrastColor\r\n    },\r\n    yearLabel: {\r\n      color: contrastColor\r\n    }\r\n  },\r\n  timeAxis: axisCommon(),\r\n  logAxis: axisCommon(),\r\n  valueAxis: axisCommon(),\r\n  categoryAxis: axisCommon(),\r\n  line: {\r\n    symbol: 'circle'\r\n  },\r\n  graph: {\r\n    color: colorPalette\r\n  },\r\n  gauge: {\r\n    title: {\r\n      color: contrastColor\r\n    },\r\n    axisLine: {\r\n      lineStyle: {\r\n        color: [[1, 'rgba(207,212,219,0.2)']]\r\n      }\r\n    },\r\n    axisLabel: {\r\n      color: contrastColor\r\n    },\r\n    detail: {\r\n      color: '#EEF1FA'\r\n    }\r\n  },\r\n  candlestick: {\r\n    itemStyle: {\r\n      color: '#f64e56',\r\n      color0: '#54ea92',\r\n      borderColor: '#f64e56',\r\n      borderColor0: '#54ea92'\r\n      // borderColor: '#ca2824',\r\n      // borderColor0: '#09a443'\r\n    }\r\n  }\r\n};\r\ntheme.categoryAxis.splitLine.show = false;\r\nexport default theme;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport { parseClassType } from './clazz.js';\r\n/**\r\n * Usage of query:\r\n * `chart.on('click', query, handler);`\r\n * The `query` can be:\r\n * + The component type query string, only `mainType` or `mainType.subType`,\r\n *   like: 'xAxis', 'series', 'xAxis.category' or 'series.line'.\r\n * + The component query object, like:\r\n *   `{seriesIndex: 2}`, `{seriesName: 'xx'}`, `{seriesId: 'some'}`,\r\n *   `{xAxisIndex: 2}`, `{xAxisName: 'xx'}`, `{xAxisId: 'some'}`.\r\n * + The data query object, like:\r\n *   `{dataIndex: 123}`, `{dataType: 'link'}`, `{name: 'some'}`.\r\n * + The other query object (cmponent customized query), like:\r\n *   `{element: 'some'}` (only available in custom series).\r\n *\r\n * Caveat: If a prop in the `query` object is `null/undefined`, it is the\r\n * same as there is no such prop in the `query` object.\r\n */\r\nvar ECEventProcessor = /** @class */function () {\r\n  function ECEventProcessor() {}\r\n  ECEventProcessor.prototype.normalizeQuery = function (query) {\r\n    var cptQuery = {};\r\n    var dataQuery = {};\r\n    var otherQuery = {};\r\n    // `query` is `mainType` or `mainType.subType` of component.\r\n    if (zrUtil.isString(query)) {\r\n      var condCptType = parseClassType(query);\r\n      // `.main` and `.sub` may be ''.\r\n      cptQuery.mainType = condCptType.main || null;\r\n      cptQuery.subType = condCptType.sub || null;\r\n    }\r\n    // `query` is an object, convert to {mainType, index, name, id}.\r\n    else {\r\n      // `xxxIndex`, `xxxName`, `xxxId`, `name`, `dataIndex`, `dataType` is reserved,\r\n      // can not be used in `compomentModel.filterForExposedEvent`.\r\n      var suffixes_1 = ['Index', 'Name', 'Id'];\r\n      var dataKeys_1 = {\r\n        name: 1,\r\n        dataIndex: 1,\r\n        dataType: 1\r\n      };\r\n      zrUtil.each(query, function (val, key) {\r\n        var reserved = false;\r\n        for (var i = 0; i < suffixes_1.length; i++) {\r\n          var propSuffix = suffixes_1[i];\r\n          var suffixPos = key.lastIndexOf(propSuffix);\r\n          if (suffixPos > 0 && suffixPos === key.length - propSuffix.length) {\r\n            var mainType = key.slice(0, suffixPos);\r\n            // Consider `dataIndex`.\r\n            if (mainType !== 'data') {\r\n              cptQuery.mainType = mainType;\r\n              cptQuery[propSuffix.toLowerCase()] = val;\r\n              reserved = true;\r\n            }\r\n          }\r\n        }\r\n        if (dataKeys_1.hasOwnProperty(key)) {\r\n          dataQuery[key] = val;\r\n          reserved = true;\r\n        }\r\n        if (!reserved) {\r\n          otherQuery[key] = val;\r\n        }\r\n      });\r\n    }\r\n    return {\r\n      cptQuery: cptQuery,\r\n      dataQuery: dataQuery,\r\n      otherQuery: otherQuery\r\n    };\r\n  };\r\n  ECEventProcessor.prototype.filter = function (eventType, query) {\r\n    // They should be assigned before each trigger call.\r\n    var eventInfo = this.eventInfo;\r\n    if (!eventInfo) {\r\n      return true;\r\n    }\r\n    var targetEl = eventInfo.targetEl;\r\n    var packedEvent = eventInfo.packedEvent;\r\n    var model = eventInfo.model;\r\n    var view = eventInfo.view;\r\n    // For event like 'globalout'.\r\n    if (!model || !view) {\r\n      return true;\r\n    }\r\n    var cptQuery = query.cptQuery;\r\n    var dataQuery = query.dataQuery;\r\n    return check(cptQuery, model, 'mainType') && check(cptQuery, model, 'subType') && check(cptQuery, model, 'index', 'componentIndex') && check(cptQuery, model, 'name') && check(cptQuery, model, 'id') && check(dataQuery, packedEvent, 'name') && check(dataQuery, packedEvent, 'dataIndex') && check(dataQuery, packedEvent, 'dataType') && (!view.filterForExposedEvent || view.filterForExposedEvent(eventType, query.otherQuery, targetEl, packedEvent));\r\n    function check(query, host, prop, propOnHost) {\r\n      return query[prop] == null || host[propOnHost || prop] === query[prop];\r\n    }\r\n  };\r\n  ECEventProcessor.prototype.afterTrigger = function () {\r\n    // Make sure the eventInfo won't be used in next trigger.\r\n    this.eventInfo = null;\r\n  };\r\n  return ECEventProcessor;\r\n}();\r\nexport { ECEventProcessor };\r\n;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { extend, isFunction, keys } from 'zrender/lib/core/util.js';\r\nvar SYMBOL_PROPS_WITH_CB = ['symbol', 'symbolSize', 'symbolRotate', 'symbolOffset'];\r\nvar SYMBOL_PROPS = SYMBOL_PROPS_WITH_CB.concat(['symbolKeepAspect']);\r\n// Encoding visual for all series include which is filtered for legend drawing\r\nvar seriesSymbolTask = {\r\n  createOnAllSeries: true,\r\n  // For legend.\r\n  performRawSeries: true,\r\n  reset: function (seriesModel, ecModel) {\r\n    var data = seriesModel.getData();\r\n    if (seriesModel.legendIcon) {\r\n      data.setVisual('legendIcon', seriesModel.legendIcon);\r\n    }\r\n    if (!seriesModel.hasSymbolVisual) {\r\n      return;\r\n    }\r\n    var symbolOptions = {};\r\n    var symbolOptionsCb = {};\r\n    var hasCallback = false;\r\n    for (var i = 0; i < SYMBOL_PROPS_WITH_CB.length; i++) {\r\n      var symbolPropName = SYMBOL_PROPS_WITH_CB[i];\r\n      var val = seriesModel.get(symbolPropName);\r\n      if (isFunction(val)) {\r\n        hasCallback = true;\r\n        symbolOptionsCb[symbolPropName] = val;\r\n      } else {\r\n        symbolOptions[symbolPropName] = val;\r\n      }\r\n    }\r\n    symbolOptions.symbol = symbolOptions.symbol || seriesModel.defaultSymbol;\r\n    data.setVisual(extend({\r\n      legendIcon: seriesModel.legendIcon || symbolOptions.symbol,\r\n      symbolKeepAspect: seriesModel.get('symbolKeepAspect')\r\n    }, symbolOptions));\r\n    // Only visible series has each data be visual encoded\r\n    if (ecModel.isSeriesFiltered(seriesModel)) {\r\n      return;\r\n    }\r\n    var symbolPropsCb = keys(symbolOptionsCb);\r\n    function dataEach(data, idx) {\r\n      var rawValue = seriesModel.getRawValue(idx);\r\n      var params = seriesModel.getDataParams(idx);\r\n      for (var i = 0; i < symbolPropsCb.length; i++) {\r\n        var symbolPropName = symbolPropsCb[i];\r\n        data.setItemVisual(idx, symbolPropName, symbolOptionsCb[symbolPropName](rawValue, params));\r\n      }\r\n    }\r\n    return {\r\n      dataEach: hasCallback ? dataEach : null\r\n    };\r\n  }\r\n};\r\nvar dataSymbolTask = {\r\n  createOnAllSeries: true,\r\n  // For legend.\r\n  performRawSeries: true,\r\n  reset: function (seriesModel, ecModel) {\r\n    if (!seriesModel.hasSymbolVisual) {\r\n      return;\r\n    }\r\n    // Only visible series has each data be visual encoded\r\n    if (ecModel.isSeriesFiltered(seriesModel)) {\r\n      return;\r\n    }\r\n    var data = seriesModel.getData();\r\n    function dataEach(data, idx) {\r\n      var itemModel = data.getItemModel(idx);\r\n      for (var i = 0; i < SYMBOL_PROPS.length; i++) {\r\n        var symbolPropName = SYMBOL_PROPS[i];\r\n        var val = itemModel.getShallow(symbolPropName, true);\r\n        if (val != null) {\r\n          data.setItemVisual(idx, symbolPropName, val);\r\n        }\r\n      }\r\n    }\r\n    return {\r\n      dataEach: data.hasItemOption ? dataEach : null\r\n    };\r\n  }\r\n};\r\nexport { seriesSymbolTask, dataSymbolTask };", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nexport function getItemVisualFromData(data, dataIndex, key) {\r\n  switch (key) {\r\n    case 'color':\r\n      var style = data.getItemVisual(dataIndex, 'style');\r\n      return style[data.getVisual('drawType')];\r\n    case 'opacity':\r\n      return data.getItemVisual(dataIndex, 'style').opacity;\r\n    case 'symbol':\r\n    case 'symbolSize':\r\n    case 'liftZ':\r\n      return data.getItemVisual(dataIndex, key);\r\n    default:\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        console.warn(\"Unknown visual type \" + key);\r\n      }\r\n  }\r\n}\r\nexport function getVisualFromData(data, key) {\r\n  switch (key) {\r\n    case 'color':\r\n      var style = data.getVisual('style');\r\n      return style[data.getVisual('drawType')];\r\n    case 'opacity':\r\n      return data.getVisual('style').opacity;\r\n    case 'symbol':\r\n    case 'symbolSize':\r\n    case 'liftZ':\r\n      return data.getVisual(key);\r\n    default:\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        console.warn(\"Unknown visual type \" + key);\r\n      }\r\n  }\r\n}\r\nexport function setItemVisualFromData(data, dataIndex, key, value) {\r\n  switch (key) {\r\n    case 'color':\r\n      // Make sure not sharing style object.\r\n      var style = data.ensureUniqueItemVisual(dataIndex, 'style');\r\n      style[data.getVisual('drawType')] = value;\r\n      // Mark the color has been changed, not from palette anymore\r\n      data.setItemVisual(dataIndex, 'colorFromPalette', false);\r\n      break;\r\n    case 'opacity':\r\n      data.ensureUniqueItemVisual(dataIndex, 'style').opacity = value;\r\n      break;\r\n    case 'symbol':\r\n    case 'symbolSize':\r\n    case 'liftZ':\r\n      data.setItemVisual(dataIndex, key, value);\r\n      break;\r\n    default:\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        console.warn(\"Unknown visual type \" + key);\r\n      }\r\n  }\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { extend, each, isArray, isString } from 'zrender/lib/core/util.js';\r\nimport { deprecateReplaceLog, deprecateLog } from '../util/log.js';\r\nimport { queryDataIndex } from '../util/model.js';\r\n// Legacy data selection action.\r\n// Includes: pieSelect, pieUnSelect, pieToggleSelect, mapSelect, mapUnSelect, mapToggleSelect\r\nexport function createLegacyDataSelectAction(seriesType, ecRegisterAction) {\r\n  function getSeriesIndices(ecModel, payload) {\r\n    var seriesIndices = [];\r\n    ecModel.eachComponent({\r\n      mainType: 'series',\r\n      subType: seriesType,\r\n      query: payload\r\n    }, function (seriesModel) {\r\n      seriesIndices.push(seriesModel.seriesIndex);\r\n    });\r\n    return seriesIndices;\r\n  }\r\n  each([[seriesType + 'ToggleSelect', 'toggleSelect'], [seriesType + 'Select', 'select'], [seriesType + 'UnSelect', 'unselect']], function (eventsMap) {\r\n    ecRegisterAction(eventsMap[0], function (payload, ecModel, api) {\r\n      payload = extend({}, payload);\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        deprecateReplaceLog(payload.type, eventsMap[1]);\r\n      }\r\n      api.dispatchAction(extend(payload, {\r\n        type: eventsMap[1],\r\n        seriesIndex: getSeriesIndices(ecModel, payload)\r\n      }));\r\n    });\r\n  });\r\n}\r\nfunction handleSeriesLegacySelectEvents(type, eventPostfix, ecIns, ecModel, payload) {\r\n  var legacyEventName = type + eventPostfix;\r\n  if (!ecIns.isSilent(legacyEventName)) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      deprecateLog(\"event \" + legacyEventName + \" is deprecated.\");\r\n    }\r\n    ecModel.eachComponent({\r\n      mainType: 'series',\r\n      subType: 'pie'\r\n    }, function (seriesModel) {\r\n      var seriesIndex = seriesModel.seriesIndex;\r\n      var selectedMap = seriesModel.option.selectedMap;\r\n      var selected = payload.selected;\r\n      for (var i = 0; i < selected.length; i++) {\r\n        if (selected[i].seriesIndex === seriesIndex) {\r\n          var data = seriesModel.getData();\r\n          var dataIndex = queryDataIndex(data, payload.fromActionPayload);\r\n          ecIns.trigger(legacyEventName, {\r\n            type: legacyEventName,\r\n            seriesId: seriesModel.id,\r\n            name: isArray(dataIndex) ? data.getName(dataIndex[0]) : data.getName(dataIndex),\r\n            selected: isString(selectedMap) ? selectedMap : extend({}, selectedMap)\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\nexport function handleLegacySelectEvents(messageCenter, ecIns, api) {\r\n  messageCenter.on('selectchanged', function (params) {\r\n    var ecModel = api.getModel();\r\n    if (params.isFromClick) {\r\n      handleSeriesLegacySelectEvents('map', 'selectchanged', ecIns, ecModel, params);\r\n      handleSeriesLegacySelectEvents('pie', 'selectchanged', ecIns, ecModel, params);\r\n    } else if (params.fromAction === 'select') {\r\n      handleSeriesLegacySelectEvents('map', 'selected', ecIns, ecModel, params);\r\n      handleSeriesLegacySelectEvents('pie', 'selected', ecIns, ecModel, params);\r\n    } else if (params.fromAction === 'unselect') {\r\n      handleSeriesLegacySelectEvents('map', 'unselected', ecIns, ecModel, params);\r\n      handleSeriesLegacySelectEvents('pie', 'unselected', ecIns, ecModel, params);\r\n    }\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nexport function findEventDispatcher(target, det, returnFirstMatch) {\r\n  var found;\r\n  while (target) {\r\n    if (det(target)) {\r\n      found = target;\r\n      if (returnFirstMatch) {\r\n        break;\r\n      }\r\n    }\r\n    target = target.__hostTarget || target.parent;\r\n  }\r\n  return found;\r\n}", "var wmUniqueIndex = Math.round(Math.random() * 9);\r\nvar supportDefineProperty = typeof Object.defineProperty === 'function';\r\nvar WeakMap = (function () {\r\n    function WeakMap() {\r\n        this._id = '__ec_inner_' + wmUniqueIndex++;\r\n    }\r\n    WeakMap.prototype.get = function (key) {\r\n        return this._guard(key)[this._id];\r\n    };\r\n    WeakMap.prototype.set = function (key, value) {\r\n        var target = this._guard(key);\r\n        if (supportDefineProperty) {\r\n            Object.defineProperty(target, this._id, {\r\n                value: value,\r\n                enumerable: false,\r\n                configurable: true\r\n            });\r\n        }\r\n        else {\r\n            target[this._id] = value;\r\n        }\r\n        return this;\r\n    };\r\n    WeakMap.prototype[\"delete\"] = function (key) {\r\n        if (this.has(key)) {\r\n            delete this._guard(key)[this._id];\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    WeakMap.prototype.has = function (key) {\r\n        return !!this._guard(key)[this._id];\r\n    };\r\n    WeakMap.prototype._guard = function (key) {\r\n        if (key !== Object(key)) {\r\n            throw TypeError('Value of WeakMap is not a non-null object.');\r\n        }\r\n        return key;\r\n    };\r\n    return WeakMap;\r\n}());\r\nexport default WeakMap;\r\n", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n// Symbol factory\r\nimport { each, isArray, retrieve2 } from 'zrender/lib/core/util.js';\r\nimport * as graphic from './graphic.js';\r\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\r\nimport { calculateTextPosition } from 'zrender/lib/contain/text.js';\r\nimport { parsePercent } from './number.js';\r\n/**\r\n * Triangle shape\r\n * @inner\r\n */\r\nvar Triangle = graphic.Path.extend({\r\n  type: 'triangle',\r\n  shape: {\r\n    cx: 0,\r\n    cy: 0,\r\n    width: 0,\r\n    height: 0\r\n  },\r\n  buildPath: function (path, shape) {\r\n    var cx = shape.cx;\r\n    var cy = shape.cy;\r\n    var width = shape.width / 2;\r\n    var height = shape.height / 2;\r\n    path.moveTo(cx, cy - height);\r\n    path.lineTo(cx + width, cy + height);\r\n    path.lineTo(cx - width, cy + height);\r\n    path.closePath();\r\n  }\r\n});\r\n/**\r\n * Diamond shape\r\n * @inner\r\n */\r\nvar Diamond = graphic.Path.extend({\r\n  type: 'diamond',\r\n  shape: {\r\n    cx: 0,\r\n    cy: 0,\r\n    width: 0,\r\n    height: 0\r\n  },\r\n  buildPath: function (path, shape) {\r\n    var cx = shape.cx;\r\n    var cy = shape.cy;\r\n    var width = shape.width / 2;\r\n    var height = shape.height / 2;\r\n    path.moveTo(cx, cy - height);\r\n    path.lineTo(cx + width, cy);\r\n    path.lineTo(cx, cy + height);\r\n    path.lineTo(cx - width, cy);\r\n    path.closePath();\r\n  }\r\n});\r\n/**\r\n * Pin shape\r\n * @inner\r\n */\r\nvar Pin = graphic.Path.extend({\r\n  type: 'pin',\r\n  shape: {\r\n    // x, y on the cusp\r\n    x: 0,\r\n    y: 0,\r\n    width: 0,\r\n    height: 0\r\n  },\r\n  buildPath: function (path, shape) {\r\n    var x = shape.x;\r\n    var y = shape.y;\r\n    var w = shape.width / 5 * 3;\r\n    // Height must be larger than width\r\n    var h = Math.max(w, shape.height);\r\n    var r = w / 2;\r\n    // Dist on y with tangent point and circle center\r\n    var dy = r * r / (h - r);\r\n    var cy = y - h + r + dy;\r\n    var angle = Math.asin(dy / r);\r\n    // Dist on x with tangent point and circle center\r\n    var dx = Math.cos(angle) * r;\r\n    var tanX = Math.sin(angle);\r\n    var tanY = Math.cos(angle);\r\n    var cpLen = r * 0.6;\r\n    var cpLen2 = r * 0.7;\r\n    path.moveTo(x - dx, cy + dy);\r\n    path.arc(x, cy, r, Math.PI - angle, Math.PI * 2 + angle);\r\n    path.bezierCurveTo(x + dx - tanX * cpLen, cy + dy + tanY * cpLen, x, y - cpLen2, x, y);\r\n    path.bezierCurveTo(x, y - cpLen2, x - dx + tanX * cpLen, cy + dy + tanY * cpLen, x - dx, cy + dy);\r\n    path.closePath();\r\n  }\r\n});\r\n/**\r\n * Arrow shape\r\n * @inner\r\n */\r\nvar Arrow = graphic.Path.extend({\r\n  type: 'arrow',\r\n  shape: {\r\n    x: 0,\r\n    y: 0,\r\n    width: 0,\r\n    height: 0\r\n  },\r\n  buildPath: function (ctx, shape) {\r\n    var height = shape.height;\r\n    var width = shape.width;\r\n    var x = shape.x;\r\n    var y = shape.y;\r\n    var dx = width / 3 * 2;\r\n    ctx.moveTo(x, y);\r\n    ctx.lineTo(x + dx, y + height);\r\n    ctx.lineTo(x, y + height / 4 * 3);\r\n    ctx.lineTo(x - dx, y + height);\r\n    ctx.lineTo(x, y);\r\n    ctx.closePath();\r\n  }\r\n});\r\n/**\r\n * Map of path constructors\r\n */\r\n// TODO Use function to build symbol path.\r\nvar symbolCtors = {\r\n  line: graphic.Line,\r\n  rect: graphic.Rect,\r\n  roundRect: graphic.Rect,\r\n  square: graphic.Rect,\r\n  circle: graphic.Circle,\r\n  diamond: Diamond,\r\n  pin: Pin,\r\n  arrow: Arrow,\r\n  triangle: Triangle\r\n};\r\nvar symbolShapeMakers = {\r\n  line: function (x, y, w, h, shape) {\r\n    shape.x1 = x;\r\n    shape.y1 = y + h / 2;\r\n    shape.x2 = x + w;\r\n    shape.y2 = y + h / 2;\r\n  },\r\n  rect: function (x, y, w, h, shape) {\r\n    shape.x = x;\r\n    shape.y = y;\r\n    shape.width = w;\r\n    shape.height = h;\r\n  },\r\n  roundRect: function (x, y, w, h, shape) {\r\n    shape.x = x;\r\n    shape.y = y;\r\n    shape.width = w;\r\n    shape.height = h;\r\n    shape.r = Math.min(w, h) / 4;\r\n  },\r\n  square: function (x, y, w, h, shape) {\r\n    var size = Math.min(w, h);\r\n    shape.x = x;\r\n    shape.y = y;\r\n    shape.width = size;\r\n    shape.height = size;\r\n  },\r\n  circle: function (x, y, w, h, shape) {\r\n    // Put circle in the center of square\r\n    shape.cx = x + w / 2;\r\n    shape.cy = y + h / 2;\r\n    shape.r = Math.min(w, h) / 2;\r\n  },\r\n  diamond: function (x, y, w, h, shape) {\r\n    shape.cx = x + w / 2;\r\n    shape.cy = y + h / 2;\r\n    shape.width = w;\r\n    shape.height = h;\r\n  },\r\n  pin: function (x, y, w, h, shape) {\r\n    shape.x = x + w / 2;\r\n    shape.y = y + h / 2;\r\n    shape.width = w;\r\n    shape.height = h;\r\n  },\r\n  arrow: function (x, y, w, h, shape) {\r\n    shape.x = x + w / 2;\r\n    shape.y = y + h / 2;\r\n    shape.width = w;\r\n    shape.height = h;\r\n  },\r\n  triangle: function (x, y, w, h, shape) {\r\n    shape.cx = x + w / 2;\r\n    shape.cy = y + h / 2;\r\n    shape.width = w;\r\n    shape.height = h;\r\n  }\r\n};\r\nexport var symbolBuildProxies = {};\r\neach(symbolCtors, function (Ctor, name) {\r\n  symbolBuildProxies[name] = new Ctor();\r\n});\r\nvar SymbolClz = graphic.Path.extend({\r\n  type: 'symbol',\r\n  shape: {\r\n    symbolType: '',\r\n    x: 0,\r\n    y: 0,\r\n    width: 0,\r\n    height: 0\r\n  },\r\n  calculateTextPosition: function (out, config, rect) {\r\n    var res = calculateTextPosition(out, config, rect);\r\n    var shape = this.shape;\r\n    if (shape && shape.symbolType === 'pin' && config.position === 'inside') {\r\n      res.y = rect.y + rect.height * 0.4;\r\n    }\r\n    return res;\r\n  },\r\n  buildPath: function (ctx, shape, inBundle) {\r\n    var symbolType = shape.symbolType;\r\n    if (symbolType !== 'none') {\r\n      var proxySymbol = symbolBuildProxies[symbolType];\r\n      if (!proxySymbol) {\r\n        // Default rect\r\n        symbolType = 'rect';\r\n        proxySymbol = symbolBuildProxies[symbolType];\r\n      }\r\n      symbolShapeMakers[symbolType](shape.x, shape.y, shape.width, shape.height, proxySymbol.shape);\r\n      proxySymbol.buildPath(ctx, proxySymbol.shape, inBundle);\r\n    }\r\n  }\r\n});\r\n// Provide setColor helper method to avoid determine if set the fill or stroke outside\r\nfunction symbolPathSetColor(color, innerColor) {\r\n  if (this.type !== 'image') {\r\n    var symbolStyle = this.style;\r\n    if (this.__isEmptyBrush) {\r\n      symbolStyle.stroke = color;\r\n      symbolStyle.fill = innerColor || '#fff';\r\n      // TODO Same width with lineStyle in LineView\r\n      symbolStyle.lineWidth = 2;\r\n    } else if (this.shape.symbolType === 'line') {\r\n      symbolStyle.stroke = color;\r\n    } else {\r\n      symbolStyle.fill = color;\r\n    }\r\n    this.markRedraw();\r\n  }\r\n}\r\n/**\r\n * Create a symbol element with given symbol configuration: shape, x, y, width, height, color\r\n */\r\nexport function createSymbol(symbolType, x, y, w, h, color,\r\n// whether to keep the ratio of w/h,\r\nkeepAspect) {\r\n  // TODO Support image object, DynamicImage.\r\n  var isEmpty = symbolType.indexOf('empty') === 0;\r\n  if (isEmpty) {\r\n    symbolType = symbolType.substr(5, 1).toLowerCase() + symbolType.substr(6);\r\n  }\r\n  var symbolPath;\r\n  if (symbolType.indexOf('image://') === 0) {\r\n    symbolPath = graphic.makeImage(symbolType.slice(8), new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\r\n  } else if (symbolType.indexOf('path://') === 0) {\r\n    symbolPath = graphic.makePath(symbolType.slice(7), {}, new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\r\n  } else {\r\n    symbolPath = new SymbolClz({\r\n      shape: {\r\n        symbolType: symbolType,\r\n        x: x,\r\n        y: y,\r\n        width: w,\r\n        height: h\r\n      }\r\n    });\r\n  }\r\n  symbolPath.__isEmptyBrush = isEmpty;\r\n  // TODO Should deprecate setColor\r\n  symbolPath.setColor = symbolPathSetColor;\r\n  if (color) {\r\n    symbolPath.setColor(color);\r\n  }\r\n  return symbolPath;\r\n}\r\nexport function normalizeSymbolSize(symbolSize) {\r\n  if (!isArray(symbolSize)) {\r\n    symbolSize = [+symbolSize, +symbolSize];\r\n  }\r\n  return [symbolSize[0] || 0, symbolSize[1] || 0];\r\n}\r\nexport function normalizeSymbolOffset(symbolOffset, symbolSize) {\r\n  if (symbolOffset == null) {\r\n    return;\r\n  }\r\n  if (!isArray(symbolOffset)) {\r\n    symbolOffset = [symbolOffset, symbolOffset];\r\n  }\r\n  return [parsePercent(symbolOffset[0], symbolSize[0]) || 0, parsePercent(retrieve2(symbolOffset[1], symbolOffset[0]), symbolSize[1]) || 0];\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport WeakMap from 'zrender/lib/core/WeakMap.js';\r\nimport LRU from 'zrender/lib/core/LRU.js';\r\nimport { defaults, map, isArray, isString, isNumber } from 'zrender/lib/core/util.js';\r\nimport { getLeastCommonMultiple } from './number.js';\r\nimport { createSymbol } from './symbol.js';\r\nimport { brushSingle } from 'zrender/lib/canvas/graphic.js';\r\nimport { platformApi } from 'zrender/lib/core/platform.js';\r\nvar decalMap = new WeakMap();\r\nvar decalCache = new LRU(100);\r\nvar decalKeys = ['symbol', 'symbolSize', 'symbolKeepAspect', 'color', 'backgroundColor', 'dashArrayX', 'dashArrayY', 'maxTileWidth', 'maxTileHeight'];\r\n/**\r\n * Create or update pattern image from decal options\r\n *\r\n * @param {InnerDecalObject | 'none'} decalObject decal options, 'none' if no decal\r\n * @return {Pattern} pattern with generated image, null if no decal\r\n */\r\nexport function createOrUpdatePatternFromDecal(decalObject, api) {\r\n  if (decalObject === 'none') {\r\n    return null;\r\n  }\r\n  var dpr = api.getDevicePixelRatio();\r\n  var zr = api.getZr();\r\n  var isSVG = zr.painter.type === 'svg';\r\n  if (decalObject.dirty) {\r\n    decalMap[\"delete\"](decalObject);\r\n  }\r\n  var oldPattern = decalMap.get(decalObject);\r\n  if (oldPattern) {\r\n    return oldPattern;\r\n  }\r\n  var decalOpt = defaults(decalObject, {\r\n    symbol: 'rect',\r\n    symbolSize: 1,\r\n    symbolKeepAspect: true,\r\n    color: 'rgba(0, 0, 0, 0.2)',\r\n    backgroundColor: null,\r\n    dashArrayX: 5,\r\n    dashArrayY: 5,\r\n    rotation: 0,\r\n    maxTileWidth: 512,\r\n    maxTileHeight: 512\r\n  });\r\n  if (decalOpt.backgroundColor === 'none') {\r\n    decalOpt.backgroundColor = null;\r\n  }\r\n  var pattern = {\r\n    repeat: 'repeat'\r\n  };\r\n  setPatternnSource(pattern);\r\n  pattern.rotation = decalOpt.rotation;\r\n  pattern.scaleX = pattern.scaleY = isSVG ? 1 : 1 / dpr;\r\n  decalMap.set(decalObject, pattern);\r\n  decalObject.dirty = false;\r\n  return pattern;\r\n  function setPatternnSource(pattern) {\r\n    var keys = [dpr];\r\n    var isValidKey = true;\r\n    for (var i = 0; i < decalKeys.length; ++i) {\r\n      var value = decalOpt[decalKeys[i]];\r\n      if (value != null && !isArray(value) && !isString(value) && !isNumber(value) && typeof value !== 'boolean') {\r\n        isValidKey = false;\r\n        break;\r\n      }\r\n      keys.push(value);\r\n    }\r\n    var cacheKey;\r\n    if (isValidKey) {\r\n      cacheKey = keys.join(',') + (isSVG ? '-svg' : '');\r\n      var cache = decalCache.get(cacheKey);\r\n      if (cache) {\r\n        isSVG ? pattern.svgElement = cache : pattern.image = cache;\r\n      }\r\n    }\r\n    var dashArrayX = normalizeDashArrayX(decalOpt.dashArrayX);\r\n    var dashArrayY = normalizeDashArrayY(decalOpt.dashArrayY);\r\n    var symbolArray = normalizeSymbolArray(decalOpt.symbol);\r\n    var lineBlockLengthsX = getLineBlockLengthX(dashArrayX);\r\n    var lineBlockLengthY = getLineBlockLengthY(dashArrayY);\r\n    var canvas = !isSVG && platformApi.createCanvas();\r\n    var svgRoot = isSVG && {\r\n      tag: 'g',\r\n      attrs: {},\r\n      key: 'dcl',\r\n      children: []\r\n    };\r\n    var pSize = getPatternSize();\r\n    var ctx;\r\n    if (canvas) {\r\n      canvas.width = pSize.width * dpr;\r\n      canvas.height = pSize.height * dpr;\r\n      ctx = canvas.getContext('2d');\r\n    }\r\n    brushDecal();\r\n    if (isValidKey) {\r\n      decalCache.put(cacheKey, canvas || svgRoot);\r\n    }\r\n    pattern.image = canvas;\r\n    pattern.svgElement = svgRoot;\r\n    pattern.svgWidth = pSize.width;\r\n    pattern.svgHeight = pSize.height;\r\n    /**\r\n     * Get minimum length that can make a repeatable pattern.\r\n     *\r\n     * @return {Object} pattern width and height\r\n     */\r\n    function getPatternSize() {\r\n      /**\r\n       * For example, if dash is [[3, 2], [2, 1]] for X, it looks like\r\n       * |---  ---  ---  ---  --- ...\r\n       * |-- -- -- -- -- -- -- -- ...\r\n       * |---  ---  ---  ---  --- ...\r\n       * |-- -- -- -- -- -- -- -- ...\r\n       * So the minimum length of X is 15,\r\n       * which is the least common multiple of `3 + 2` and `2 + 1`\r\n       * |---  ---  ---  |---  --- ...\r\n       * |-- -- -- -- -- |-- -- -- ...\r\n       */\r\n      var width = 1;\r\n      for (var i = 0, xlen = lineBlockLengthsX.length; i < xlen; ++i) {\r\n        width = getLeastCommonMultiple(width, lineBlockLengthsX[i]);\r\n      }\r\n      var symbolRepeats = 1;\r\n      for (var i = 0, xlen = symbolArray.length; i < xlen; ++i) {\r\n        symbolRepeats = getLeastCommonMultiple(symbolRepeats, symbolArray[i].length);\r\n      }\r\n      width *= symbolRepeats;\r\n      var height = lineBlockLengthY * lineBlockLengthsX.length * symbolArray.length;\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        var warn = function (attrName) {\r\n          /* eslint-disable-next-line */\r\n          console.warn(\"Calculated decal size is greater than \" + attrName + \" due to decal option settings so \" + attrName + \" is used for the decal size. Please consider changing the decal option to make a smaller decal or set \" + attrName + \" to be larger to avoid incontinuity.\");\r\n        };\r\n        if (width > decalOpt.maxTileWidth) {\r\n          warn('maxTileWidth');\r\n        }\r\n        if (height > decalOpt.maxTileHeight) {\r\n          warn('maxTileHeight');\r\n        }\r\n      }\r\n      return {\r\n        width: Math.max(1, Math.min(width, decalOpt.maxTileWidth)),\r\n        height: Math.max(1, Math.min(height, decalOpt.maxTileHeight))\r\n      };\r\n    }\r\n    function brushDecal() {\r\n      if (ctx) {\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        if (decalOpt.backgroundColor) {\r\n          ctx.fillStyle = decalOpt.backgroundColor;\r\n          ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n        }\r\n      }\r\n      var ySum = 0;\r\n      for (var i = 0; i < dashArrayY.length; ++i) {\r\n        ySum += dashArrayY[i];\r\n      }\r\n      if (ySum <= 0) {\r\n        // dashArrayY is 0, draw nothing\r\n        return;\r\n      }\r\n      var y = -lineBlockLengthY;\r\n      var yId = 0;\r\n      var yIdTotal = 0;\r\n      var xId0 = 0;\r\n      while (y < pSize.height) {\r\n        if (yId % 2 === 0) {\r\n          var symbolYId = yIdTotal / 2 % symbolArray.length;\r\n          var x = 0;\r\n          var xId1 = 0;\r\n          var xId1Total = 0;\r\n          while (x < pSize.width * 2) {\r\n            var xSum = 0;\r\n            for (var i = 0; i < dashArrayX[xId0].length; ++i) {\r\n              xSum += dashArrayX[xId0][i];\r\n            }\r\n            if (xSum <= 0) {\r\n              // Skip empty line\r\n              break;\r\n            }\r\n            // E.g., [15, 5, 20, 5] draws only for 15 and 20\r\n            if (xId1 % 2 === 0) {\r\n              var size = (1 - decalOpt.symbolSize) * 0.5;\r\n              var left = x + dashArrayX[xId0][xId1] * size;\r\n              var top_1 = y + dashArrayY[yId] * size;\r\n              var width = dashArrayX[xId0][xId1] * decalOpt.symbolSize;\r\n              var height = dashArrayY[yId] * decalOpt.symbolSize;\r\n              var symbolXId = xId1Total / 2 % symbolArray[symbolYId].length;\r\n              brushSymbol(left, top_1, width, height, symbolArray[symbolYId][symbolXId]);\r\n            }\r\n            x += dashArrayX[xId0][xId1];\r\n            ++xId1Total;\r\n            ++xId1;\r\n            if (xId1 === dashArrayX[xId0].length) {\r\n              xId1 = 0;\r\n            }\r\n          }\r\n          ++xId0;\r\n          if (xId0 === dashArrayX.length) {\r\n            xId0 = 0;\r\n          }\r\n        }\r\n        y += dashArrayY[yId];\r\n        ++yIdTotal;\r\n        ++yId;\r\n        if (yId === dashArrayY.length) {\r\n          yId = 0;\r\n        }\r\n      }\r\n      function brushSymbol(x, y, width, height, symbolType) {\r\n        var scale = isSVG ? 1 : dpr;\r\n        var symbol = createSymbol(symbolType, x * scale, y * scale, width * scale, height * scale, decalOpt.color, decalOpt.symbolKeepAspect);\r\n        if (isSVG) {\r\n          var symbolVNode = zr.painter.renderOneToVNode(symbol);\r\n          if (symbolVNode) {\r\n            svgRoot.children.push(symbolVNode);\r\n          }\r\n        } else {\r\n          // Paint to canvas for all other renderers.\r\n          brushSingle(ctx, symbol);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n/**\r\n * Convert symbol array into normalized array\r\n *\r\n * @param {string | (string | string[])[]} symbol symbol input\r\n * @return {string[][]} normolized symbol array\r\n */\r\nfunction normalizeSymbolArray(symbol) {\r\n  if (!symbol || symbol.length === 0) {\r\n    return [['rect']];\r\n  }\r\n  if (isString(symbol)) {\r\n    return [[symbol]];\r\n  }\r\n  var isAllString = true;\r\n  for (var i = 0; i < symbol.length; ++i) {\r\n    if (!isString(symbol[i])) {\r\n      isAllString = false;\r\n      break;\r\n    }\r\n  }\r\n  if (isAllString) {\r\n    return normalizeSymbolArray([symbol]);\r\n  }\r\n  var result = [];\r\n  for (var i = 0; i < symbol.length; ++i) {\r\n    if (isString(symbol[i])) {\r\n      result.push([symbol[i]]);\r\n    } else {\r\n      result.push(symbol[i]);\r\n    }\r\n  }\r\n  return result;\r\n}\r\n/**\r\n * Convert dash input into dashArray\r\n *\r\n * @param {DecalDashArrayX} dash dash input\r\n * @return {number[][]} normolized dash array\r\n */\r\nfunction normalizeDashArrayX(dash) {\r\n  if (!dash || dash.length === 0) {\r\n    return [[0, 0]];\r\n  }\r\n  if (isNumber(dash)) {\r\n    var dashValue = Math.ceil(dash);\r\n    return [[dashValue, dashValue]];\r\n  }\r\n  /**\r\n   * [20, 5] should be normalized into [[20, 5]],\r\n   * while [20, [5, 10]] should be normalized into [[20, 20], [5, 10]]\r\n   */\r\n  var isAllNumber = true;\r\n  for (var i = 0; i < dash.length; ++i) {\r\n    if (!isNumber(dash[i])) {\r\n      isAllNumber = false;\r\n      break;\r\n    }\r\n  }\r\n  if (isAllNumber) {\r\n    return normalizeDashArrayX([dash]);\r\n  }\r\n  var result = [];\r\n  for (var i = 0; i < dash.length; ++i) {\r\n    if (isNumber(dash[i])) {\r\n      var dashValue = Math.ceil(dash[i]);\r\n      result.push([dashValue, dashValue]);\r\n    } else {\r\n      var dashValue = map(dash[i], function (n) {\r\n        return Math.ceil(n);\r\n      });\r\n      if (dashValue.length % 2 === 1) {\r\n        // [4, 2, 1] means |----  -    -- |----  -    -- |\r\n        // so normalize it to be [4, 2, 1, 4, 2, 1]\r\n        result.push(dashValue.concat(dashValue));\r\n      } else {\r\n        result.push(dashValue);\r\n      }\r\n    }\r\n  }\r\n  return result;\r\n}\r\n/**\r\n * Convert dash input into dashArray\r\n *\r\n * @param {DecalDashArrayY} dash dash input\r\n * @return {number[]} normolized dash array\r\n */\r\nfunction normalizeDashArrayY(dash) {\r\n  if (!dash || typeof dash === 'object' && dash.length === 0) {\r\n    return [0, 0];\r\n  }\r\n  if (isNumber(dash)) {\r\n    var dashValue_1 = Math.ceil(dash);\r\n    return [dashValue_1, dashValue_1];\r\n  }\r\n  var dashValue = map(dash, function (n) {\r\n    return Math.ceil(n);\r\n  });\r\n  return dash.length % 2 ? dashValue.concat(dashValue) : dashValue;\r\n}\r\n/**\r\n * Get block length of each line. A block is the length of dash line and space.\r\n * For example, a line with [4, 1] has a dash line of 4 and a space of 1 after\r\n * that, so the block length of this line is 5.\r\n *\r\n * @param {number[][]} dash dash array of X or Y\r\n * @return {number[]} block length of each line\r\n */\r\nfunction getLineBlockLengthX(dash) {\r\n  return map(dash, function (line) {\r\n    return getLineBlockLengthY(line);\r\n  });\r\n}\r\nfunction getLineBlockLengthY(dash) {\r\n  var blockLength = 0;\r\n  for (var i = 0; i < dash.length; ++i) {\r\n    blockLength += dash[i];\r\n  }\r\n  if (dash.length % 2 === 1) {\r\n    // [4, 2, 1] means |----  -    -- |----  -    -- |\r\n    // So total length is (4 + 2 + 1) * 2\r\n    return blockLength * 2;\r\n  }\r\n  return blockLength;\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { createOrUpdatePatternFromDecal } from '../util/decal.js';\r\nexport default function decalVisual(ecModel, api) {\r\n  ecModel.eachRawSeries(function (seriesModel) {\r\n    if (ecModel.isSeriesFiltered(seriesModel)) {\r\n      return;\r\n    }\r\n    var data = seriesModel.getData();\r\n    if (data.hasItemVisual()) {\r\n      data.each(function (idx) {\r\n        var decal = data.getItemVisual(idx, 'decal');\r\n        if (decal) {\r\n          var itemStyle = data.ensureUniqueItemVisual(idx, 'style');\r\n          itemStyle.decal = createOrUpdatePatternFromDecal(decal, api);\r\n        }\r\n      });\r\n    }\r\n    var decal = data.getVisual('decal');\r\n    if (decal) {\r\n      var style = data.getVisual('style');\r\n      style.decal = createOrUpdatePatternFromDecal(decal, api);\r\n    }\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport Eventful from 'zrender/lib/core/Eventful.js';\r\n;\r\nvar lifecycle = new Eventful();\r\nexport default lifecycle;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { error } from '../util/log.js';\r\n// Implementation of exported APIs. For example registerMap, getMap.\r\n// The implementations will be registered when installing the component.\r\n// Avoid these code being bundled to the core module.\r\nvar implsStore = {};\r\n// TODO Type\r\nexport function registerImpl(name, impl) {\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    if (implsStore[name]) {\r\n      error(\"Already has an implementation of \" + name + \".\");\r\n    }\r\n  }\r\n  implsStore[name] = impl;\r\n}\r\nexport function getImpl(name) {\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    if (!implsStore[name]) {\r\n      error(\"Implementation of \" + name + \" doesn't exists.\");\r\n    }\r\n  }\r\n  return implsStore[name];\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\nimport { __extends } from \"tslib\";\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrender from 'zrender/lib/zrender.js';\r\nimport { assert, each, isFunction, isObject, indexOf, bind, clone, setAsPrimitive, extend, createHashMap, map, defaults, isDom, isArray, noop, isString, retrieve2 } from 'zrender/lib/core/util.js';\r\nimport env from 'zrender/lib/core/env.js';\r\nimport timsort from 'zrender/lib/core/timsort.js';\r\nimport Eventful from 'zrender/lib/core/Eventful.js';\r\nimport GlobalModel from '../model/Global.js';\r\nimport ExtensionAPI from './ExtensionAPI.js';\r\nimport CoordinateSystemManager from './CoordinateSystem.js';\r\nimport OptionManager from '../model/OptionManager.js';\r\nimport backwardCompat from '../preprocessor/backwardCompat.js';\r\nimport dataStack from '../processor/dataStack.js';\r\nimport SeriesModel from '../model/Series.js';\r\nimport ComponentView from '../view/Component.js';\r\nimport ChartView from '../view/Chart.js';\r\nimport * as graphic from '../util/graphic.js';\r\nimport { getECData } from '../util/innerStore.js';\r\nimport { isHighDownDispatcher, HOVER_STATE_EMPHASIS, HOVER_STATE_BLUR, blurSeriesFromHighlightPayload, toggleSelectionFromPayload, updateSeriesElementSelection, getAllSelectedIndices, isSelectChangePayload, isHighDownPayload, HIGHLIGHT_ACTION_TYPE, DOWNPLAY_ACTION_TYPE, SELECT_ACTION_TYPE, UNSELECT_ACTION_TYPE, TOGGLE_SELECT_ACTION_TYPE, savePathStates, enterEmphasis, leaveEmphasis, leaveBlur, enterSelect, leaveSelect, enterBlur, allLeaveBlur, findComponentHighDownDispatchers, blurComponent, handleGlobalMouseOverForHighDown, handleGlobalMouseOutForHighDown } from '../util/states.js';\r\nimport * as modelUtil from '../util/model.js';\r\nimport { throttle } from '../util/throttle.js';\r\nimport { seriesStyleTask, dataStyleTask, dataColorPaletteTask } from '../visual/style.js';\r\nimport loadingDefault from '../loading/default.js';\r\nimport Scheduler from './Scheduler.js';\r\nimport lightTheme from '../theme/light.js';\r\nimport darkTheme from '../theme/dark.js';\r\nimport { parseClassType } from '../util/clazz.js';\r\nimport { ECEventProcessor } from '../util/ECEventProcessor.js';\r\nimport { seriesSymbolTask, dataSymbolTask } from '../visual/symbol.js';\r\nimport { getVisualFromData, getItemVisualFromData } from '../visual/helper.js';\r\nimport { deprecateLog, deprecateReplaceLog, error, warn } from '../util/log.js';\r\nimport { handleLegacySelectEvents } from '../legacy/dataSelectAction.js';\r\nimport { registerExternalTransform } from '../data/helper/transform.js';\r\nimport { createLocaleObject, SYSTEM_LANG } from './locale.js';\r\nimport { findEventDispatcher } from '../util/event.js';\r\nimport decal from '../visual/decal.js';\r\nimport lifecycle from './lifecycle.js';\r\nimport { platformApi, setPlatformAPI } from 'zrender/lib/core/platform.js';\r\nimport { getImpl } from './impl.js';\r\nexport var version = '5.6.0';\r\nexport var dependencies = {\r\n  zrender: '5.6.1'\r\n};\r\nvar TEST_FRAME_REMAIN_TIME = 1;\r\nvar PRIORITY_PROCESSOR_SERIES_FILTER = 800;\r\n// Some data processors depends on the stack result dimension (to calculate data extent).\r\n// So data stack stage should be in front of data processing stage.\r\nvar PRIORITY_PROCESSOR_DATASTACK = 900;\r\n// \"Data filter\" will block the stream, so it should be\r\n// put at the beginning of data processing.\r\nvar PRIORITY_PROCESSOR_FILTER = 1000;\r\nvar PRIORITY_PROCESSOR_DEFAULT = 2000;\r\nvar PRIORITY_PROCESSOR_STATISTIC = 5000;\r\nvar PRIORITY_VISUAL_LAYOUT = 1000;\r\nvar PRIORITY_VISUAL_PROGRESSIVE_LAYOUT = 1100;\r\nvar PRIORITY_VISUAL_GLOBAL = 2000;\r\nvar PRIORITY_VISUAL_CHART = 3000;\r\nvar PRIORITY_VISUAL_COMPONENT = 4000;\r\n// Visual property in data. Greater than `PRIORITY_VISUAL_COMPONENT` to enable to\r\n// overwrite the viusal result of component (like `visualMap`)\r\n// using data item specific setting (like itemStyle.xxx on data item)\r\nvar PRIORITY_VISUAL_CHART_DATA_CUSTOM = 4500;\r\n// Greater than `PRIORITY_VISUAL_CHART_DATA_CUSTOM` to enable to layout based on\r\n// visual result like `symbolSize`.\r\nvar PRIORITY_VISUAL_POST_CHART_LAYOUT = 4600;\r\nvar PRIORITY_VISUAL_BRUSH = 5000;\r\nvar PRIORITY_VISUAL_ARIA = 6000;\r\nvar PRIORITY_VISUAL_DECAL = 7000;\r\nexport var PRIORITY = {\r\n  PROCESSOR: {\r\n    FILTER: PRIORITY_PROCESSOR_FILTER,\r\n    SERIES_FILTER: PRIORITY_PROCESSOR_SERIES_FILTER,\r\n    STATISTIC: PRIORITY_PROCESSOR_STATISTIC\r\n  },\r\n  VISUAL: {\r\n    LAYOUT: PRIORITY_VISUAL_LAYOUT,\r\n    PROGRESSIVE_LAYOUT: PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,\r\n    GLOBAL: PRIORITY_VISUAL_GLOBAL,\r\n    CHART: PRIORITY_VISUAL_CHART,\r\n    POST_CHART_LAYOUT: PRIORITY_VISUAL_POST_CHART_LAYOUT,\r\n    COMPONENT: PRIORITY_VISUAL_COMPONENT,\r\n    BRUSH: PRIORITY_VISUAL_BRUSH,\r\n    CHART_ITEM: PRIORITY_VISUAL_CHART_DATA_CUSTOM,\r\n    ARIA: PRIORITY_VISUAL_ARIA,\r\n    DECAL: PRIORITY_VISUAL_DECAL\r\n  }\r\n};\r\n// Main process have three entries: `setOption`, `dispatchAction` and `resize`,\r\n// where they must not be invoked nestedly, except the only case: invoke\r\n// dispatchAction with updateMethod \"none\" in main process.\r\n// This flag is used to carry out this rule.\r\n// All events will be triggered out side main process (i.e. when !this[IN_MAIN_PROCESS]).\r\nvar IN_MAIN_PROCESS_KEY = '__flagInMainProcess';\r\nvar PENDING_UPDATE = '__pendingUpdate';\r\nvar STATUS_NEEDS_UPDATE_KEY = '__needsUpdateStatus';\r\nvar ACTION_REG = /^[a-zA-Z0-9_]+$/;\r\nvar CONNECT_STATUS_KEY = '__connectUpdateStatus';\r\nvar CONNECT_STATUS_PENDING = 0;\r\nvar CONNECT_STATUS_UPDATING = 1;\r\nvar CONNECT_STATUS_UPDATED = 2;\r\n;\r\n;\r\nfunction createRegisterEventWithLowercaseECharts(method) {\r\n  return function () {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n      args[_i] = arguments[_i];\r\n    }\r\n    if (this.isDisposed()) {\r\n      disposedWarning(this.id);\r\n      return;\r\n    }\r\n    return toLowercaseNameAndCallEventful(this, method, args);\r\n  };\r\n}\r\nfunction createRegisterEventWithLowercaseMessageCenter(method) {\r\n  return function () {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n      args[_i] = arguments[_i];\r\n    }\r\n    return toLowercaseNameAndCallEventful(this, method, args);\r\n  };\r\n}\r\nfunction toLowercaseNameAndCallEventful(host, method, args) {\r\n  // `args[0]` is event name. Event name is all lowercase.\r\n  args[0] = args[0] && args[0].toLowerCase();\r\n  return Eventful.prototype[method].apply(host, args);\r\n}\r\nvar MessageCenter = /** @class */function (_super) {\r\n  __extends(MessageCenter, _super);\r\n  function MessageCenter() {\r\n    return _super !== null && _super.apply(this, arguments) || this;\r\n  }\r\n  return MessageCenter;\r\n}(Eventful);\r\nvar messageCenterProto = MessageCenter.prototype;\r\nmessageCenterProto.on = createRegisterEventWithLowercaseMessageCenter('on');\r\nmessageCenterProto.off = createRegisterEventWithLowercaseMessageCenter('off');\r\n// ---------------------------------------\r\n// Internal method names for class ECharts\r\n// ---------------------------------------\r\nvar prepare;\r\nvar prepareView;\r\nvar updateDirectly;\r\nvar updateMethods;\r\nvar doConvertPixel;\r\nvar updateStreamModes;\r\nvar doDispatchAction;\r\nvar flushPendingActions;\r\nvar triggerUpdatedEvent;\r\nvar bindRenderedEvent;\r\nvar bindMouseEvent;\r\nvar render;\r\nvar renderComponents;\r\nvar renderSeries;\r\nvar createExtensionAPI;\r\nvar enableConnect;\r\nvar markStatusToUpdate;\r\nvar applyChangedStates;\r\nvar ECharts = /** @class */function (_super) {\r\n  __extends(ECharts, _super);\r\n  function ECharts(dom,\r\n  // Theme name or themeOption.\r\n  theme, opts) {\r\n    var _this = _super.call(this, new ECEventProcessor()) || this;\r\n    _this._chartsViews = [];\r\n    _this._chartsMap = {};\r\n    _this._componentsViews = [];\r\n    _this._componentsMap = {};\r\n    // Can't dispatch action during rendering procedure\r\n    _this._pendingActions = [];\r\n    opts = opts || {};\r\n    // Get theme by name\r\n    if (isString(theme)) {\r\n      theme = themeStorage[theme];\r\n    }\r\n    _this._dom = dom;\r\n    var defaultRenderer = 'canvas';\r\n    var defaultCoarsePointer = 'auto';\r\n    var defaultUseDirtyRect = false;\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      var root = /* eslint-disable-next-line */\r\n      env.hasGlobalWindow ? window : global;\r\n      if (root) {\r\n        defaultRenderer = retrieve2(root.__ECHARTS__DEFAULT__RENDERER__, defaultRenderer);\r\n        defaultCoarsePointer = retrieve2(root.__ECHARTS__DEFAULT__COARSE_POINTER, defaultCoarsePointer);\r\n        defaultUseDirtyRect = retrieve2(root.__ECHARTS__DEFAULT__USE_DIRTY_RECT__, defaultUseDirtyRect);\r\n      }\r\n    }\r\n    if (opts.ssr) {\r\n      zrender.registerSSRDataGetter(function (el) {\r\n        var ecData = getECData(el);\r\n        var dataIndex = ecData.dataIndex;\r\n        if (dataIndex == null) {\r\n          return;\r\n        }\r\n        var hashMap = createHashMap();\r\n        hashMap.set('series_index', ecData.seriesIndex);\r\n        hashMap.set('data_index', dataIndex);\r\n        ecData.ssrType && hashMap.set('ssr_type', ecData.ssrType);\r\n        return hashMap;\r\n      });\r\n    }\r\n    var zr = _this._zr = zrender.init(dom, {\r\n      renderer: opts.renderer || defaultRenderer,\r\n      devicePixelRatio: opts.devicePixelRatio,\r\n      width: opts.width,\r\n      height: opts.height,\r\n      ssr: opts.ssr,\r\n      useDirtyRect: retrieve2(opts.useDirtyRect, defaultUseDirtyRect),\r\n      useCoarsePointer: retrieve2(opts.useCoarsePointer, defaultCoarsePointer),\r\n      pointerSize: opts.pointerSize\r\n    });\r\n    _this._ssr = opts.ssr;\r\n    // Expect 60 fps.\r\n    _this._throttledZrFlush = throttle(bind(zr.flush, zr), 17);\r\n    theme = clone(theme);\r\n    theme && backwardCompat(theme, true);\r\n    _this._theme = theme;\r\n    _this._locale = createLocaleObject(opts.locale || SYSTEM_LANG);\r\n    _this._coordSysMgr = new CoordinateSystemManager();\r\n    var api = _this._api = createExtensionAPI(_this);\r\n    // Sort on demand\r\n    function prioritySortFunc(a, b) {\r\n      return a.__prio - b.__prio;\r\n    }\r\n    timsort(visualFuncs, prioritySortFunc);\r\n    timsort(dataProcessorFuncs, prioritySortFunc);\r\n    _this._scheduler = new Scheduler(_this, api, dataProcessorFuncs, visualFuncs);\r\n    _this._messageCenter = new MessageCenter();\r\n    // Init mouse events\r\n    _this._initEvents();\r\n    // In case some people write `window.onresize = chart.resize`\r\n    _this.resize = bind(_this.resize, _this);\r\n    zr.animation.on('frame', _this._onframe, _this);\r\n    bindRenderedEvent(zr, _this);\r\n    bindMouseEvent(zr, _this);\r\n    // ECharts instance can be used as value.\r\n    setAsPrimitive(_this);\r\n    return _this;\r\n  }\r\n  ECharts.prototype._onframe = function () {\r\n    if (this._disposed) {\r\n      return;\r\n    }\r\n    applyChangedStates(this);\r\n    var scheduler = this._scheduler;\r\n    // Lazy update\r\n    if (this[PENDING_UPDATE]) {\r\n      var silent = this[PENDING_UPDATE].silent;\r\n      this[IN_MAIN_PROCESS_KEY] = true;\r\n      try {\r\n        prepare(this);\r\n        updateMethods.update.call(this, null, this[PENDING_UPDATE].updateParams);\r\n      } catch (e) {\r\n        this[IN_MAIN_PROCESS_KEY] = false;\r\n        this[PENDING_UPDATE] = null;\r\n        throw e;\r\n      }\r\n      // At present, in each frame, zrender performs:\r\n      //   (1) animation step forward.\r\n      //   (2) trigger('frame') (where this `_onframe` is called)\r\n      //   (3) zrender flush (render).\r\n      // If we do nothing here, since we use `setToFinal: true`, the step (3) above\r\n      // will render the final state of the elements before the real animation started.\r\n      this._zr.flush();\r\n      this[IN_MAIN_PROCESS_KEY] = false;\r\n      this[PENDING_UPDATE] = null;\r\n      flushPendingActions.call(this, silent);\r\n      triggerUpdatedEvent.call(this, silent);\r\n    }\r\n    // Avoid do both lazy update and progress in one frame.\r\n    else if (scheduler.unfinished) {\r\n      // Stream progress.\r\n      var remainTime = TEST_FRAME_REMAIN_TIME;\r\n      var ecModel = this._model;\r\n      var api = this._api;\r\n      scheduler.unfinished = false;\r\n      do {\r\n        var startTime = +new Date();\r\n        scheduler.performSeriesTasks(ecModel);\r\n        // Currently dataProcessorFuncs do not check threshold.\r\n        scheduler.performDataProcessorTasks(ecModel);\r\n        updateStreamModes(this, ecModel);\r\n        // Do not update coordinate system here. Because that coord system update in\r\n        // each frame is not a good user experience. So we follow the rule that\r\n        // the extent of the coordinate system is determined in the first frame (the\r\n        // frame is executed immediately after task reset.\r\n        // this._coordSysMgr.update(ecModel, api);\r\n        // console.log('--- ec frame visual ---', remainTime);\r\n        scheduler.performVisualTasks(ecModel);\r\n        renderSeries(this, this._model, api, 'remain', {});\r\n        remainTime -= +new Date() - startTime;\r\n      } while (remainTime > 0 && scheduler.unfinished);\r\n      // Call flush explicitly for trigger finished event.\r\n      if (!scheduler.unfinished) {\r\n        this._zr.flush();\r\n      }\r\n      // Else, zr flushing be ensue within the same frame,\r\n      // because zr flushing is after onframe event.\r\n    }\r\n  };\r\n  ECharts.prototype.getDom = function () {\r\n    return this._dom;\r\n  };\r\n  ECharts.prototype.getId = function () {\r\n    return this.id;\r\n  };\r\n  ECharts.prototype.getZr = function () {\r\n    return this._zr;\r\n  };\r\n  ECharts.prototype.isSSR = function () {\r\n    return this._ssr;\r\n  };\r\n  /* eslint-disable-next-line */\r\n  ECharts.prototype.setOption = function (option, notMerge, lazyUpdate) {\r\n    if (this[IN_MAIN_PROCESS_KEY]) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        error('`setOption` should not be called during main process.');\r\n      }\r\n      return;\r\n    }\r\n    if (this._disposed) {\r\n      disposedWarning(this.id);\r\n      return;\r\n    }\r\n    var silent;\r\n    var replaceMerge;\r\n    var transitionOpt;\r\n    if (isObject(notMerge)) {\r\n      lazyUpdate = notMerge.lazyUpdate;\r\n      silent = notMerge.silent;\r\n      replaceMerge = notMerge.replaceMerge;\r\n      transitionOpt = notMerge.transition;\r\n      notMerge = notMerge.notMerge;\r\n    }\r\n    this[IN_MAIN_PROCESS_KEY] = true;\r\n    if (!this._model || notMerge) {\r\n      var optionManager = new OptionManager(this._api);\r\n      var theme = this._theme;\r\n      var ecModel = this._model = new GlobalModel();\r\n      ecModel.scheduler = this._scheduler;\r\n      ecModel.ssr = this._ssr;\r\n      ecModel.init(null, null, null, theme, this._locale, optionManager);\r\n    }\r\n    this._model.setOption(option, {\r\n      replaceMerge: replaceMerge\r\n    }, optionPreprocessorFuncs);\r\n    var updateParams = {\r\n      seriesTransition: transitionOpt,\r\n      optionChanged: true\r\n    };\r\n    if (lazyUpdate) {\r\n      this[PENDING_UPDATE] = {\r\n        silent: silent,\r\n        updateParams: updateParams\r\n      };\r\n      this[IN_MAIN_PROCESS_KEY] = false;\r\n      // `setOption(option, {lazyMode: true})` may be called when zrender has been slept.\r\n      // It should wake it up to make sure zrender start to render at the next frame.\r\n      this.getZr().wakeUp();\r\n    } else {\r\n      try {\r\n        prepare(this);\r\n        updateMethods.update.call(this, null, updateParams);\r\n      } catch (e) {\r\n        this[PENDING_UPDATE] = null;\r\n        this[IN_MAIN_PROCESS_KEY] = false;\r\n        throw e;\r\n      }\r\n      // Ensure zr refresh sychronously, and then pixel in canvas can be\r\n      // fetched after `setOption`.\r\n      if (!this._ssr) {\r\n        // not use flush when using ssr mode.\r\n        this._zr.flush();\r\n      }\r\n      this[PENDING_UPDATE] = null;\r\n      this[IN_MAIN_PROCESS_KEY] = false;\r\n      flushPendingActions.call(this, silent);\r\n      triggerUpdatedEvent.call(this, silent);\r\n    }\r\n  };\r\n  /**\r\n   * @deprecated\r\n   */\r\n  ECharts.prototype.setTheme = function () {\r\n    deprecateLog('ECharts#setTheme() is DEPRECATED in ECharts 3.0');\r\n  };\r\n  // We don't want developers to use getModel directly.\r\n  ECharts.prototype.getModel = function () {\r\n    return this._model;\r\n  };\r\n  ECharts.prototype.getOption = function () {\r\n    return this._model && this._model.getOption();\r\n  };\r\n  ECharts.prototype.getWidth = function () {\r\n    return this._zr.getWidth();\r\n  };\r\n  ECharts.prototype.getHeight = function () {\r\n    return this._zr.getHeight();\r\n  };\r\n  ECharts.prototype.getDevicePixelRatio = function () {\r\n    return this._zr.painter.dpr\r\n    /* eslint-disable-next-line */ || env.hasGlobalWindow && window.devicePixelRatio || 1;\r\n  };\r\n  /**\r\n   * Get canvas which has all thing rendered\r\n   * @deprecated Use renderToCanvas instead.\r\n   */\r\n  ECharts.prototype.getRenderedCanvas = function (opts) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      deprecateReplaceLog('getRenderedCanvas', 'renderToCanvas');\r\n    }\r\n    return this.renderToCanvas(opts);\r\n  };\r\n  ECharts.prototype.renderToCanvas = function (opts) {\r\n    opts = opts || {};\r\n    var painter = this._zr.painter;\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      if (painter.type !== 'canvas') {\r\n        throw new Error('renderToCanvas can only be used in the canvas renderer.');\r\n      }\r\n    }\r\n    return painter.getRenderedCanvas({\r\n      backgroundColor: opts.backgroundColor || this._model.get('backgroundColor'),\r\n      pixelRatio: opts.pixelRatio || this.getDevicePixelRatio()\r\n    });\r\n  };\r\n  ECharts.prototype.renderToSVGString = function (opts) {\r\n    opts = opts || {};\r\n    var painter = this._zr.painter;\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      if (painter.type !== 'svg') {\r\n        throw new Error('renderToSVGString can only be used in the svg renderer.');\r\n      }\r\n    }\r\n    return painter.renderToString({\r\n      useViewBox: opts.useViewBox\r\n    });\r\n  };\r\n  /**\r\n   * Get svg data url\r\n   */\r\n  ECharts.prototype.getSvgDataURL = function () {\r\n    if (!env.svgSupported) {\r\n      return;\r\n    }\r\n    var zr = this._zr;\r\n    var list = zr.storage.getDisplayList();\r\n    // Stop animations\r\n    each(list, function (el) {\r\n      el.stopAnimation(null, true);\r\n    });\r\n    return zr.painter.toDataURL();\r\n  };\r\n  ECharts.prototype.getDataURL = function (opts) {\r\n    if (this._disposed) {\r\n      disposedWarning(this.id);\r\n      return;\r\n    }\r\n    opts = opts || {};\r\n    var excludeComponents = opts.excludeComponents;\r\n    var ecModel = this._model;\r\n    var excludesComponentViews = [];\r\n    var self = this;\r\n    each(excludeComponents, function (componentType) {\r\n      ecModel.eachComponent({\r\n        mainType: componentType\r\n      }, function (component) {\r\n        var view = self._componentsMap[component.__viewId];\r\n        if (!view.group.ignore) {\r\n          excludesComponentViews.push(view);\r\n          view.group.ignore = true;\r\n        }\r\n      });\r\n    });\r\n    var url = this._zr.painter.getType() === 'svg' ? this.getSvgDataURL() : this.renderToCanvas(opts).toDataURL('image/' + (opts && opts.type || 'png'));\r\n    each(excludesComponentViews, function (view) {\r\n      view.group.ignore = false;\r\n    });\r\n    return url;\r\n  };\r\n  ECharts.prototype.getConnectedDataURL = function (opts) {\r\n    if (this._disposed) {\r\n      disposedWarning(this.id);\r\n      return;\r\n    }\r\n    var isSvg = opts.type === 'svg';\r\n    var groupId = this.group;\r\n    var mathMin = Math.min;\r\n    var mathMax = Math.max;\r\n    var MAX_NUMBER = Infinity;\r\n    if (connectedGroups[groupId]) {\r\n      var left_1 = MAX_NUMBER;\r\n      var top_1 = MAX_NUMBER;\r\n      var right_1 = -MAX_NUMBER;\r\n      var bottom_1 = -MAX_NUMBER;\r\n      var canvasList_1 = [];\r\n      var dpr_1 = opts && opts.pixelRatio || this.getDevicePixelRatio();\r\n      each(instances, function (chart, id) {\r\n        if (chart.group === groupId) {\r\n          var canvas = isSvg ? chart.getZr().painter.getSvgDom().innerHTML : chart.renderToCanvas(clone(opts));\r\n          var boundingRect = chart.getDom().getBoundingClientRect();\r\n          left_1 = mathMin(boundingRect.left, left_1);\r\n          top_1 = mathMin(boundingRect.top, top_1);\r\n          right_1 = mathMax(boundingRect.right, right_1);\r\n          bottom_1 = mathMax(boundingRect.bottom, bottom_1);\r\n          canvasList_1.push({\r\n            dom: canvas,\r\n            left: boundingRect.left,\r\n            top: boundingRect.top\r\n          });\r\n        }\r\n      });\r\n      left_1 *= dpr_1;\r\n      top_1 *= dpr_1;\r\n      right_1 *= dpr_1;\r\n      bottom_1 *= dpr_1;\r\n      var width = right_1 - left_1;\r\n      var height = bottom_1 - top_1;\r\n      var targetCanvas = platformApi.createCanvas();\r\n      var zr_1 = zrender.init(targetCanvas, {\r\n        renderer: isSvg ? 'svg' : 'canvas'\r\n      });\r\n      zr_1.resize({\r\n        width: width,\r\n        height: height\r\n      });\r\n      if (isSvg) {\r\n        var content_1 = '';\r\n        each(canvasList_1, function (item) {\r\n          var x = item.left - left_1;\r\n          var y = item.top - top_1;\r\n          content_1 += '<g transform=\"translate(' + x + ',' + y + ')\">' + item.dom + '</g>';\r\n        });\r\n        zr_1.painter.getSvgRoot().innerHTML = content_1;\r\n        if (opts.connectedBackgroundColor) {\r\n          zr_1.painter.setBackgroundColor(opts.connectedBackgroundColor);\r\n        }\r\n        zr_1.refreshImmediately();\r\n        return zr_1.painter.toDataURL();\r\n      } else {\r\n        // Background between the charts\r\n        if (opts.connectedBackgroundColor) {\r\n          zr_1.add(new graphic.Rect({\r\n            shape: {\r\n              x: 0,\r\n              y: 0,\r\n              width: width,\r\n              height: height\r\n            },\r\n            style: {\r\n              fill: opts.connectedBackgroundColor\r\n            }\r\n          }));\r\n        }\r\n        each(canvasList_1, function (item) {\r\n          var img = new graphic.Image({\r\n            style: {\r\n              x: item.left * dpr_1 - left_1,\r\n              y: item.top * dpr_1 - top_1,\r\n              image: item.dom\r\n            }\r\n          });\r\n          zr_1.add(img);\r\n        });\r\n        zr_1.refreshImmediately();\r\n        return targetCanvas.toDataURL('image/' + (opts && opts.type || 'png'));\r\n      }\r\n    } else {\r\n      return this.getDataURL(opts);\r\n    }\r\n  };\r\n  ECharts.prototype.convertToPixel = function (finder, value) {\r\n    return doConvertPixel(this, 'convertToPixel', finder, value);\r\n  };\r\n  ECharts.prototype.convertFromPixel = function (finder, value) {\r\n    return doConvertPixel(this, 'convertFromPixel', finder, value);\r\n  };\r\n  /**\r\n   * Is the specified coordinate systems or components contain the given pixel point.\r\n   * @param {Array|number} value\r\n   * @return {boolean} result\r\n   */\r\n  ECharts.prototype.containPixel = function (finder, value) {\r\n    if (this._disposed) {\r\n      disposedWarning(this.id);\r\n      return;\r\n    }\r\n    var ecModel = this._model;\r\n    var result;\r\n    var findResult = modelUtil.parseFinder(ecModel, finder);\r\n    each(findResult, function (models, key) {\r\n      key.indexOf('Models') >= 0 && each(models, function (model) {\r\n        var coordSys = model.coordinateSystem;\r\n        if (coordSys && coordSys.containPoint) {\r\n          result = result || !!coordSys.containPoint(value);\r\n        } else if (key === 'seriesModels') {\r\n          var view = this._chartsMap[model.__viewId];\r\n          if (view && view.containPoint) {\r\n            result = result || view.containPoint(value, model);\r\n          } else {\r\n            if (process.env.NODE_ENV !== 'production') {\r\n              warn(key + ': ' + (view ? 'The found component do not support containPoint.' : 'No view mapping to the found component.'));\r\n            }\r\n          }\r\n        } else {\r\n          if (process.env.NODE_ENV !== 'production') {\r\n            warn(key + ': containPoint is not supported');\r\n          }\r\n        }\r\n      }, this);\r\n    }, this);\r\n    return !!result;\r\n  };\r\n  /**\r\n   * Get visual from series or data.\r\n   * @param finder\r\n   *        If string, e.g., 'series', means {seriesIndex: 0}.\r\n   *        If Object, could contain some of these properties below:\r\n   *        {\r\n   *            seriesIndex / seriesId / seriesName,\r\n   *            dataIndex / dataIndexInside\r\n   *        }\r\n   *        If dataIndex is not specified, series visual will be fetched,\r\n   *        but not data item visual.\r\n   *        If all of seriesIndex, seriesId, seriesName are not specified,\r\n   *        visual will be fetched from first series.\r\n   * @param visualType 'color', 'symbol', 'symbolSize'\r\n   */\r\n  ECharts.prototype.getVisual = function (finder, visualType) {\r\n    var ecModel = this._model;\r\n    var parsedFinder = modelUtil.parseFinder(ecModel, finder, {\r\n      defaultMainType: 'series'\r\n    });\r\n    var seriesModel = parsedFinder.seriesModel;\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      if (!seriesModel) {\r\n        warn('There is no specified series model');\r\n      }\r\n    }\r\n    var data = seriesModel.getData();\r\n    var dataIndexInside = parsedFinder.hasOwnProperty('dataIndexInside') ? parsedFinder.dataIndexInside : parsedFinder.hasOwnProperty('dataIndex') ? data.indexOfRawIndex(parsedFinder.dataIndex) : null;\r\n    return dataIndexInside != null ? getItemVisualFromData(data, dataIndexInside, visualType) : getVisualFromData(data, visualType);\r\n  };\r\n  /**\r\n   * Get view of corresponding component model\r\n   */\r\n  ECharts.prototype.getViewOfComponentModel = function (componentModel) {\r\n    return this._componentsMap[componentModel.__viewId];\r\n  };\r\n  /**\r\n   * Get view of corresponding series model\r\n   */\r\n  ECharts.prototype.getViewOfSeriesModel = function (seriesModel) {\r\n    return this._chartsMap[seriesModel.__viewId];\r\n  };\r\n  ECharts.prototype._initEvents = function () {\r\n    var _this = this;\r\n    each(MOUSE_EVENT_NAMES, function (eveName) {\r\n      var handler = function (e) {\r\n        var ecModel = _this.getModel();\r\n        var el = e.target;\r\n        var params;\r\n        var isGlobalOut = eveName === 'globalout';\r\n        // no e.target when 'globalout'.\r\n        if (isGlobalOut) {\r\n          params = {};\r\n        } else {\r\n          el && findEventDispatcher(el, function (parent) {\r\n            var ecData = getECData(parent);\r\n            if (ecData && ecData.dataIndex != null) {\r\n              var dataModel = ecData.dataModel || ecModel.getSeriesByIndex(ecData.seriesIndex);\r\n              params = dataModel && dataModel.getDataParams(ecData.dataIndex, ecData.dataType, el) || {};\r\n              return true;\r\n            }\r\n            // If element has custom eventData of components\r\n            else if (ecData.eventData) {\r\n              params = extend({}, ecData.eventData);\r\n              return true;\r\n            }\r\n          }, true);\r\n        }\r\n        // Contract: if params prepared in mouse event,\r\n        // these properties must be specified:\r\n        // {\r\n        //    componentType: string (component main type)\r\n        //    componentIndex: number\r\n        // }\r\n        // Otherwise event query can not work.\r\n        if (params) {\r\n          var componentType = params.componentType;\r\n          var componentIndex = params.componentIndex;\r\n          // Special handling for historic reason: when trigger by\r\n          // markLine/markPoint/markArea, the componentType is\r\n          // 'markLine'/'markPoint'/'markArea', but we should better\r\n          // enable them to be queried by seriesIndex, since their\r\n          // option is set in each series.\r\n          if (componentType === 'markLine' || componentType === 'markPoint' || componentType === 'markArea') {\r\n            componentType = 'series';\r\n            componentIndex = params.seriesIndex;\r\n          }\r\n          var model = componentType && componentIndex != null && ecModel.getComponent(componentType, componentIndex);\r\n          var view = model && _this[model.mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId];\r\n          if (process.env.NODE_ENV !== 'production') {\r\n            // `event.componentType` and `event[componentTpype + 'Index']` must not\r\n            // be missed, otherwise there is no way to distinguish source component.\r\n            // See `dataFormat.getDataParams`.\r\n            if (!isGlobalOut && !(model && view)) {\r\n              warn('model or view can not be found by params');\r\n            }\r\n          }\r\n          params.event = e;\r\n          params.type = eveName;\r\n          _this._$eventProcessor.eventInfo = {\r\n            targetEl: el,\r\n            packedEvent: params,\r\n            model: model,\r\n            view: view\r\n          };\r\n          _this.trigger(eveName, params);\r\n        }\r\n      };\r\n      // Consider that some component (like tooltip, brush, ...)\r\n      // register zr event handler, but user event handler might\r\n      // do anything, such as call `setOption` or `dispatchAction`,\r\n      // which probably update any of the content and probably\r\n      // cause problem if it is called previous other inner handlers.\r\n      handler.zrEventfulCallAtLast = true;\r\n      _this._zr.on(eveName, handler, _this);\r\n    });\r\n    each(eventActionMap, function (actionType, eventType) {\r\n      _this._messageCenter.on(eventType, function (event) {\r\n        this.trigger(eventType, event);\r\n      }, _this);\r\n    });\r\n    // Extra events\r\n    // TODO register?\r\n    each(['selectchanged'], function (eventType) {\r\n      _this._messageCenter.on(eventType, function (event) {\r\n        this.trigger(eventType, event);\r\n      }, _this);\r\n    });\r\n    handleLegacySelectEvents(this._messageCenter, this, this._api);\r\n  };\r\n  ECharts.prototype.isDisposed = function () {\r\n    return this._disposed;\r\n  };\r\n  ECharts.prototype.clear = function () {\r\n    if (this._disposed) {\r\n      disposedWarning(this.id);\r\n      return;\r\n    }\r\n    this.setOption({\r\n      series: []\r\n    }, true);\r\n  };\r\n  ECharts.prototype.dispose = function () {\r\n    if (this._disposed) {\r\n      disposedWarning(this.id);\r\n      return;\r\n    }\r\n    this._disposed = true;\r\n    var dom = this.getDom();\r\n    if (dom) {\r\n      modelUtil.setAttribute(this.getDom(), DOM_ATTRIBUTE_KEY, '');\r\n    }\r\n    var chart = this;\r\n    var api = chart._api;\r\n    var ecModel = chart._model;\r\n    each(chart._componentsViews, function (component) {\r\n      component.dispose(ecModel, api);\r\n    });\r\n    each(chart._chartsViews, function (chart) {\r\n      chart.dispose(ecModel, api);\r\n    });\r\n    // Dispose after all views disposed\r\n    chart._zr.dispose();\r\n    // Set properties to null.\r\n    // To reduce the memory cost in case the top code still holds this instance unexpectedly.\r\n    chart._dom = chart._model = chart._chartsMap = chart._componentsMap = chart._chartsViews = chart._componentsViews = chart._scheduler = chart._api = chart._zr = chart._throttledZrFlush = chart._theme = chart._coordSysMgr = chart._messageCenter = null;\r\n    delete instances[chart.id];\r\n  };\r\n  /**\r\n   * Resize the chart\r\n   */\r\n  ECharts.prototype.resize = function (opts) {\r\n    if (this[IN_MAIN_PROCESS_KEY]) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        error('`resize` should not be called during main process.');\r\n      }\r\n      return;\r\n    }\r\n    if (this._disposed) {\r\n      disposedWarning(this.id);\r\n      return;\r\n    }\r\n    this._zr.resize(opts);\r\n    var ecModel = this._model;\r\n    // Resize loading effect\r\n    this._loadingFX && this._loadingFX.resize();\r\n    if (!ecModel) {\r\n      return;\r\n    }\r\n    var needPrepare = ecModel.resetOption('media');\r\n    var silent = opts && opts.silent;\r\n    // There is some real cases that:\r\n    // chart.setOption(option, { lazyUpdate: true });\r\n    // chart.resize();\r\n    if (this[PENDING_UPDATE]) {\r\n      if (silent == null) {\r\n        silent = this[PENDING_UPDATE].silent;\r\n      }\r\n      needPrepare = true;\r\n      this[PENDING_UPDATE] = null;\r\n    }\r\n    this[IN_MAIN_PROCESS_KEY] = true;\r\n    try {\r\n      needPrepare && prepare(this);\r\n      updateMethods.update.call(this, {\r\n        type: 'resize',\r\n        animation: extend({\r\n          // Disable animation\r\n          duration: 0\r\n        }, opts && opts.animation)\r\n      });\r\n    } catch (e) {\r\n      this[IN_MAIN_PROCESS_KEY] = false;\r\n      throw e;\r\n    }\r\n    this[IN_MAIN_PROCESS_KEY] = false;\r\n    flushPendingActions.call(this, silent);\r\n    triggerUpdatedEvent.call(this, silent);\r\n  };\r\n  ECharts.prototype.showLoading = function (name, cfg) {\r\n    if (this._disposed) {\r\n      disposedWarning(this.id);\r\n      return;\r\n    }\r\n    if (isObject(name)) {\r\n      cfg = name;\r\n      name = '';\r\n    }\r\n    name = name || 'default';\r\n    this.hideLoading();\r\n    if (!loadingEffects[name]) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        warn('Loading effects ' + name + ' not exists.');\r\n      }\r\n      return;\r\n    }\r\n    var el = loadingEffects[name](this._api, cfg);\r\n    var zr = this._zr;\r\n    this._loadingFX = el;\r\n    zr.add(el);\r\n  };\r\n  /**\r\n   * Hide loading effect\r\n   */\r\n  ECharts.prototype.hideLoading = function () {\r\n    if (this._disposed) {\r\n      disposedWarning(this.id);\r\n      return;\r\n    }\r\n    this._loadingFX && this._zr.remove(this._loadingFX);\r\n    this._loadingFX = null;\r\n  };\r\n  ECharts.prototype.makeActionFromEvent = function (eventObj) {\r\n    var payload = extend({}, eventObj);\r\n    payload.type = eventActionMap[eventObj.type];\r\n    return payload;\r\n  };\r\n  /**\r\n   * @param opt If pass boolean, means opt.silent\r\n   * @param opt.silent Default `false`. Whether trigger events.\r\n   * @param opt.flush Default `undefined`.\r\n   *        true: Flush immediately, and then pixel in canvas can be fetched\r\n   *            immediately. Caution: it might affect performance.\r\n   *        false: Not flush.\r\n   *        undefined: Auto decide whether perform flush.\r\n   */\r\n  ECharts.prototype.dispatchAction = function (payload, opt) {\r\n    if (this._disposed) {\r\n      disposedWarning(this.id);\r\n      return;\r\n    }\r\n    if (!isObject(opt)) {\r\n      opt = {\r\n        silent: !!opt\r\n      };\r\n    }\r\n    if (!actions[payload.type]) {\r\n      return;\r\n    }\r\n    // Avoid dispatch action before setOption. Especially in `connect`.\r\n    if (!this._model) {\r\n      return;\r\n    }\r\n    // May dispatchAction in rendering procedure\r\n    if (this[IN_MAIN_PROCESS_KEY]) {\r\n      this._pendingActions.push(payload);\r\n      return;\r\n    }\r\n    var silent = opt.silent;\r\n    doDispatchAction.call(this, payload, silent);\r\n    var flush = opt.flush;\r\n    if (flush) {\r\n      this._zr.flush();\r\n    } else if (flush !== false && env.browser.weChat) {\r\n      // In WeChat embedded browser, `requestAnimationFrame` and `setInterval`\r\n      // hang when sliding page (on touch event), which cause that zr does not\r\n      // refresh until user interaction finished, which is not expected.\r\n      // But `dispatchAction` may be called too frequently when pan on touch\r\n      // screen, which impacts performance if do not throttle them.\r\n      this._throttledZrFlush();\r\n    }\r\n    flushPendingActions.call(this, silent);\r\n    triggerUpdatedEvent.call(this, silent);\r\n  };\r\n  ECharts.prototype.updateLabelLayout = function () {\r\n    lifecycle.trigger('series:layoutlabels', this._model, this._api, {\r\n      // Not adding series labels.\r\n      // TODO\r\n      updatedSeries: []\r\n    });\r\n  };\r\n  ECharts.prototype.appendData = function (params) {\r\n    if (this._disposed) {\r\n      disposedWarning(this.id);\r\n      return;\r\n    }\r\n    var seriesIndex = params.seriesIndex;\r\n    var ecModel = this.getModel();\r\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      assert(params.data && seriesModel);\r\n    }\r\n    seriesModel.appendData(params);\r\n    // Note: `appendData` does not support that update extent of coordinate\r\n    // system, util some scenario require that. In the expected usage of\r\n    // `appendData`, the initial extent of coordinate system should better\r\n    // be fixed by axis `min`/`max` setting or initial data, otherwise if\r\n    // the extent changed while `appendData`, the location of the painted\r\n    // graphic elements have to be changed, which make the usage of\r\n    // `appendData` meaningless.\r\n    this._scheduler.unfinished = true;\r\n    this.getZr().wakeUp();\r\n  };\r\n  // A work around for no `internal` modifier in ts yet but\r\n  // need to strictly hide private methods to JS users.\r\n  ECharts.internalField = function () {\r\n    prepare = function (ecIns) {\r\n      var scheduler = ecIns._scheduler;\r\n      scheduler.restorePipelines(ecIns._model);\r\n      scheduler.prepareStageTasks();\r\n      prepareView(ecIns, true);\r\n      prepareView(ecIns, false);\r\n      scheduler.plan();\r\n    };\r\n    /**\r\n     * Prepare view instances of charts and components\r\n     */\r\n    prepareView = function (ecIns, isComponent) {\r\n      var ecModel = ecIns._model;\r\n      var scheduler = ecIns._scheduler;\r\n      var viewList = isComponent ? ecIns._componentsViews : ecIns._chartsViews;\r\n      var viewMap = isComponent ? ecIns._componentsMap : ecIns._chartsMap;\r\n      var zr = ecIns._zr;\r\n      var api = ecIns._api;\r\n      for (var i = 0; i < viewList.length; i++) {\r\n        viewList[i].__alive = false;\r\n      }\r\n      isComponent ? ecModel.eachComponent(function (componentType, model) {\r\n        componentType !== 'series' && doPrepare(model);\r\n      }) : ecModel.eachSeries(doPrepare);\r\n      function doPrepare(model) {\r\n        // By default view will be reused if possible for the case that `setOption` with \"notMerge\"\r\n        // mode and need to enable transition animation. (Usually, when they have the same id, or\r\n        // especially no id but have the same type & name & index. See the `model.id` generation\r\n        // rule in `makeIdAndName` and `viewId` generation rule here).\r\n        // But in `replaceMerge` mode, this feature should be able to disabled when it is clear that\r\n        // the new model has nothing to do with the old model.\r\n        var requireNewView = model.__requireNewView;\r\n        // This command should not work twice.\r\n        model.__requireNewView = false;\r\n        // Consider: id same and type changed.\r\n        var viewId = '_ec_' + model.id + '_' + model.type;\r\n        var view = !requireNewView && viewMap[viewId];\r\n        if (!view) {\r\n          var classType = parseClassType(model.type);\r\n          var Clazz = isComponent ? ComponentView.getClass(classType.main, classType.sub) :\r\n          // FIXME:TS\r\n          // (ChartView as ChartViewConstructor).getClass('series', classType.sub)\r\n          // For backward compat, still support a chart type declared as only subType\r\n          // like \"liquidfill\", but recommend \"series.liquidfill\"\r\n          // But need a base class to make a type series.\r\n          ChartView.getClass(classType.sub);\r\n          if (process.env.NODE_ENV !== 'production') {\r\n            assert(Clazz, classType.sub + ' does not exist.');\r\n          }\r\n          view = new Clazz();\r\n          view.init(ecModel, api);\r\n          viewMap[viewId] = view;\r\n          viewList.push(view);\r\n          zr.add(view.group);\r\n        }\r\n        model.__viewId = view.__id = viewId;\r\n        view.__alive = true;\r\n        view.__model = model;\r\n        view.group.__ecComponentInfo = {\r\n          mainType: model.mainType,\r\n          index: model.componentIndex\r\n        };\r\n        !isComponent && scheduler.prepareView(view, model, ecModel, api);\r\n      }\r\n      for (var i = 0; i < viewList.length;) {\r\n        var view = viewList[i];\r\n        if (!view.__alive) {\r\n          !isComponent && view.renderTask.dispose();\r\n          zr.remove(view.group);\r\n          view.dispose(ecModel, api);\r\n          viewList.splice(i, 1);\r\n          if (viewMap[view.__id] === view) {\r\n            delete viewMap[view.__id];\r\n          }\r\n          view.__id = view.group.__ecComponentInfo = null;\r\n        } else {\r\n          i++;\r\n        }\r\n      }\r\n    };\r\n    updateDirectly = function (ecIns, method, payload, mainType, subType) {\r\n      var ecModel = ecIns._model;\r\n      ecModel.setUpdatePayload(payload);\r\n      // broadcast\r\n      if (!mainType) {\r\n        // FIXME\r\n        // Chart will not be update directly here, except set dirty.\r\n        // But there is no such scenario now.\r\n        each([].concat(ecIns._componentsViews).concat(ecIns._chartsViews), callView);\r\n        return;\r\n      }\r\n      var query = {};\r\n      query[mainType + 'Id'] = payload[mainType + 'Id'];\r\n      query[mainType + 'Index'] = payload[mainType + 'Index'];\r\n      query[mainType + 'Name'] = payload[mainType + 'Name'];\r\n      var condition = {\r\n        mainType: mainType,\r\n        query: query\r\n      };\r\n      subType && (condition.subType = subType); // subType may be '' by parseClassType;\r\n      var excludeSeriesId = payload.excludeSeriesId;\r\n      var excludeSeriesIdMap;\r\n      if (excludeSeriesId != null) {\r\n        excludeSeriesIdMap = createHashMap();\r\n        each(modelUtil.normalizeToArray(excludeSeriesId), function (id) {\r\n          var modelId = modelUtil.convertOptionIdName(id, null);\r\n          if (modelId != null) {\r\n            excludeSeriesIdMap.set(modelId, true);\r\n          }\r\n        });\r\n      }\r\n      // If dispatchAction before setOption, do nothing.\r\n      ecModel && ecModel.eachComponent(condition, function (model) {\r\n        var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) != null;\r\n        if (isExcluded) {\r\n          return;\r\n        }\r\n        ;\r\n        if (isHighDownPayload(payload)) {\r\n          if (model instanceof SeriesModel) {\r\n            if (payload.type === HIGHLIGHT_ACTION_TYPE && !payload.notBlur && !model.get(['emphasis', 'disabled'])) {\r\n              blurSeriesFromHighlightPayload(model, payload, ecIns._api);\r\n            }\r\n          } else {\r\n            var _a = findComponentHighDownDispatchers(model.mainType, model.componentIndex, payload.name, ecIns._api),\r\n              focusSelf = _a.focusSelf,\r\n              dispatchers = _a.dispatchers;\r\n            if (payload.type === HIGHLIGHT_ACTION_TYPE && focusSelf && !payload.notBlur) {\r\n              blurComponent(model.mainType, model.componentIndex, ecIns._api);\r\n            }\r\n            // PENDING:\r\n            // Whether to put this \"enter emphasis\" code in `ComponentView`,\r\n            // which will be the same as `ChartView` but might be not necessary\r\n            // and will be far from this logic.\r\n            if (dispatchers) {\r\n              each(dispatchers, function (dispatcher) {\r\n                payload.type === HIGHLIGHT_ACTION_TYPE ? enterEmphasis(dispatcher) : leaveEmphasis(dispatcher);\r\n              });\r\n            }\r\n          }\r\n        } else if (isSelectChangePayload(payload)) {\r\n          // TODO geo\r\n          if (model instanceof SeriesModel) {\r\n            toggleSelectionFromPayload(model, payload, ecIns._api);\r\n            updateSeriesElementSelection(model);\r\n            markStatusToUpdate(ecIns);\r\n          }\r\n        }\r\n      }, ecIns);\r\n      ecModel && ecModel.eachComponent(condition, function (model) {\r\n        var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) != null;\r\n        if (isExcluded) {\r\n          return;\r\n        }\r\n        ;\r\n        callView(ecIns[mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId]);\r\n      }, ecIns);\r\n      function callView(view) {\r\n        view && view.__alive && view[method] && view[method](view.__model, ecModel, ecIns._api, payload);\r\n      }\r\n    };\r\n    updateMethods = {\r\n      prepareAndUpdate: function (payload) {\r\n        prepare(this);\r\n        updateMethods.update.call(this, payload, {\r\n          // Needs to mark option changed if newOption is given.\r\n          // It's from MagicType.\r\n          // TODO If use a separate flag optionChanged in payload?\r\n          optionChanged: payload.newOption != null\r\n        });\r\n      },\r\n      update: function (payload, updateParams) {\r\n        var ecModel = this._model;\r\n        var api = this._api;\r\n        var zr = this._zr;\r\n        var coordSysMgr = this._coordSysMgr;\r\n        var scheduler = this._scheduler;\r\n        // update before setOption\r\n        if (!ecModel) {\r\n          return;\r\n        }\r\n        ecModel.setUpdatePayload(payload);\r\n        scheduler.restoreData(ecModel, payload);\r\n        scheduler.performSeriesTasks(ecModel);\r\n        // TODO\r\n        // Save total ecModel here for undo/redo (after restoring data and before processing data).\r\n        // Undo (restoration of total ecModel) can be carried out in 'action' or outside API call.\r\n        // Create new coordinate system each update\r\n        // In LineView may save the old coordinate system and use it to get the original point.\r\n        coordSysMgr.create(ecModel, api);\r\n        scheduler.performDataProcessorTasks(ecModel, payload);\r\n        // Current stream render is not supported in data process. So we can update\r\n        // stream modes after data processing, where the filtered data is used to\r\n        // determine whether to use progressive rendering.\r\n        updateStreamModes(this, ecModel);\r\n        // We update stream modes before coordinate system updated, then the modes info\r\n        // can be fetched when coord sys updating (consider the barGrid extent fix). But\r\n        // the drawback is the full coord info can not be fetched. Fortunately this full\r\n        // coord is not required in stream mode updater currently.\r\n        coordSysMgr.update(ecModel, api);\r\n        clearColorPalette(ecModel);\r\n        scheduler.performVisualTasks(ecModel, payload);\r\n        render(this, ecModel, api, payload, updateParams);\r\n        // Set background\r\n        var backgroundColor = ecModel.get('backgroundColor') || 'transparent';\r\n        var darkMode = ecModel.get('darkMode');\r\n        zr.setBackgroundColor(backgroundColor);\r\n        // Force set dark mode.\r\n        if (darkMode != null && darkMode !== 'auto') {\r\n          zr.setDarkMode(darkMode);\r\n        }\r\n        lifecycle.trigger('afterupdate', ecModel, api);\r\n      },\r\n      updateTransform: function (payload) {\r\n        var _this = this;\r\n        var ecModel = this._model;\r\n        var api = this._api;\r\n        // update before setOption\r\n        if (!ecModel) {\r\n          return;\r\n        }\r\n        ecModel.setUpdatePayload(payload);\r\n        // ChartView.markUpdateMethod(payload, 'updateTransform');\r\n        var componentDirtyList = [];\r\n        ecModel.eachComponent(function (componentType, componentModel) {\r\n          if (componentType === 'series') {\r\n            return;\r\n          }\r\n          var componentView = _this.getViewOfComponentModel(componentModel);\r\n          if (componentView && componentView.__alive) {\r\n            if (componentView.updateTransform) {\r\n              var result = componentView.updateTransform(componentModel, ecModel, api, payload);\r\n              result && result.update && componentDirtyList.push(componentView);\r\n            } else {\r\n              componentDirtyList.push(componentView);\r\n            }\r\n          }\r\n        });\r\n        var seriesDirtyMap = createHashMap();\r\n        ecModel.eachSeries(function (seriesModel) {\r\n          var chartView = _this._chartsMap[seriesModel.__viewId];\r\n          if (chartView.updateTransform) {\r\n            var result = chartView.updateTransform(seriesModel, ecModel, api, payload);\r\n            result && result.update && seriesDirtyMap.set(seriesModel.uid, 1);\r\n          } else {\r\n            seriesDirtyMap.set(seriesModel.uid, 1);\r\n          }\r\n        });\r\n        clearColorPalette(ecModel);\r\n        // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\r\n        // this._scheduler.performVisualTasks(ecModel, payload, 'layout', true);\r\n        this._scheduler.performVisualTasks(ecModel, payload, {\r\n          setDirty: true,\r\n          dirtyMap: seriesDirtyMap\r\n        });\r\n        // Currently, not call render of components. Geo render cost a lot.\r\n        // renderComponents(ecIns, ecModel, api, payload, componentDirtyList);\r\n        renderSeries(this, ecModel, api, payload, {}, seriesDirtyMap);\r\n        lifecycle.trigger('afterupdate', ecModel, api);\r\n      },\r\n      updateView: function (payload) {\r\n        var ecModel = this._model;\r\n        // update before setOption\r\n        if (!ecModel) {\r\n          return;\r\n        }\r\n        ecModel.setUpdatePayload(payload);\r\n        ChartView.markUpdateMethod(payload, 'updateView');\r\n        clearColorPalette(ecModel);\r\n        // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\r\n        this._scheduler.performVisualTasks(ecModel, payload, {\r\n          setDirty: true\r\n        });\r\n        render(this, ecModel, this._api, payload, {});\r\n        lifecycle.trigger('afterupdate', ecModel, this._api);\r\n      },\r\n      updateVisual: function (payload) {\r\n        // updateMethods.update.call(this, payload);\r\n        var _this = this;\r\n        var ecModel = this._model;\r\n        // update before setOption\r\n        if (!ecModel) {\r\n          return;\r\n        }\r\n        ecModel.setUpdatePayload(payload);\r\n        // clear all visual\r\n        ecModel.eachSeries(function (seriesModel) {\r\n          seriesModel.getData().clearAllVisual();\r\n        });\r\n        // Perform visual\r\n        ChartView.markUpdateMethod(payload, 'updateVisual');\r\n        clearColorPalette(ecModel);\r\n        // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\r\n        this._scheduler.performVisualTasks(ecModel, payload, {\r\n          visualType: 'visual',\r\n          setDirty: true\r\n        });\r\n        ecModel.eachComponent(function (componentType, componentModel) {\r\n          if (componentType !== 'series') {\r\n            var componentView = _this.getViewOfComponentModel(componentModel);\r\n            componentView && componentView.__alive && componentView.updateVisual(componentModel, ecModel, _this._api, payload);\r\n          }\r\n        });\r\n        ecModel.eachSeries(function (seriesModel) {\r\n          var chartView = _this._chartsMap[seriesModel.__viewId];\r\n          chartView.updateVisual(seriesModel, ecModel, _this._api, payload);\r\n        });\r\n        lifecycle.trigger('afterupdate', ecModel, this._api);\r\n      },\r\n      updateLayout: function (payload) {\r\n        updateMethods.update.call(this, payload);\r\n      }\r\n    };\r\n    doConvertPixel = function (ecIns, methodName, finder, value) {\r\n      if (ecIns._disposed) {\r\n        disposedWarning(ecIns.id);\r\n        return;\r\n      }\r\n      var ecModel = ecIns._model;\r\n      var coordSysList = ecIns._coordSysMgr.getCoordinateSystems();\r\n      var result;\r\n      var parsedFinder = modelUtil.parseFinder(ecModel, finder);\r\n      for (var i = 0; i < coordSysList.length; i++) {\r\n        var coordSys = coordSysList[i];\r\n        if (coordSys[methodName] && (result = coordSys[methodName](ecModel, parsedFinder, value)) != null) {\r\n          return result;\r\n        }\r\n      }\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        warn('No coordinate system that supports ' + methodName + ' found by the given finder.');\r\n      }\r\n    };\r\n    updateStreamModes = function (ecIns, ecModel) {\r\n      var chartsMap = ecIns._chartsMap;\r\n      var scheduler = ecIns._scheduler;\r\n      ecModel.eachSeries(function (seriesModel) {\r\n        scheduler.updateStreamModes(seriesModel, chartsMap[seriesModel.__viewId]);\r\n      });\r\n    };\r\n    doDispatchAction = function (payload, silent) {\r\n      var _this = this;\r\n      var ecModel = this.getModel();\r\n      var payloadType = payload.type;\r\n      var escapeConnect = payload.escapeConnect;\r\n      var actionWrap = actions[payloadType];\r\n      var actionInfo = actionWrap.actionInfo;\r\n      var cptTypeTmp = (actionInfo.update || 'update').split(':');\r\n      var updateMethod = cptTypeTmp.pop();\r\n      var cptType = cptTypeTmp[0] != null && parseClassType(cptTypeTmp[0]);\r\n      this[IN_MAIN_PROCESS_KEY] = true;\r\n      var payloads = [payload];\r\n      var batched = false;\r\n      // Batch action\r\n      if (payload.batch) {\r\n        batched = true;\r\n        payloads = map(payload.batch, function (item) {\r\n          item = defaults(extend({}, item), payload);\r\n          item.batch = null;\r\n          return item;\r\n        });\r\n      }\r\n      var eventObjBatch = [];\r\n      var eventObj;\r\n      var isSelectChange = isSelectChangePayload(payload);\r\n      var isHighDown = isHighDownPayload(payload);\r\n      // Only leave blur once if there are multiple batches.\r\n      if (isHighDown) {\r\n        allLeaveBlur(this._api);\r\n      }\r\n      each(payloads, function (batchItem) {\r\n        // Action can specify the event by return it.\r\n        eventObj = actionWrap.action(batchItem, _this._model, _this._api);\r\n        // Emit event outside\r\n        eventObj = eventObj || extend({}, batchItem);\r\n        // Convert type to eventType\r\n        eventObj.type = actionInfo.event || eventObj.type;\r\n        eventObjBatch.push(eventObj);\r\n        // light update does not perform data process, layout and visual.\r\n        if (isHighDown) {\r\n          var _a = modelUtil.preParseFinder(payload),\r\n            queryOptionMap = _a.queryOptionMap,\r\n            mainTypeSpecified = _a.mainTypeSpecified;\r\n          var componentMainType = mainTypeSpecified ? queryOptionMap.keys()[0] : 'series';\r\n          updateDirectly(_this, updateMethod, batchItem, componentMainType);\r\n          markStatusToUpdate(_this);\r\n        } else if (isSelectChange) {\r\n          // At present `dispatchAction({ type: 'select', ... })` is not supported on components.\r\n          // geo still use 'geoselect'.\r\n          updateDirectly(_this, updateMethod, batchItem, 'series');\r\n          markStatusToUpdate(_this);\r\n        } else if (cptType) {\r\n          updateDirectly(_this, updateMethod, batchItem, cptType.main, cptType.sub);\r\n        }\r\n      });\r\n      if (updateMethod !== 'none' && !isHighDown && !isSelectChange && !cptType) {\r\n        try {\r\n          // Still dirty\r\n          if (this[PENDING_UPDATE]) {\r\n            prepare(this);\r\n            updateMethods.update.call(this, payload);\r\n            this[PENDING_UPDATE] = null;\r\n          } else {\r\n            updateMethods[updateMethod].call(this, payload);\r\n          }\r\n        } catch (e) {\r\n          this[IN_MAIN_PROCESS_KEY] = false;\r\n          throw e;\r\n        }\r\n      }\r\n      // Follow the rule of action batch\r\n      if (batched) {\r\n        eventObj = {\r\n          type: actionInfo.event || payloadType,\r\n          escapeConnect: escapeConnect,\r\n          batch: eventObjBatch\r\n        };\r\n      } else {\r\n        eventObj = eventObjBatch[0];\r\n      }\r\n      this[IN_MAIN_PROCESS_KEY] = false;\r\n      if (!silent) {\r\n        var messageCenter = this._messageCenter;\r\n        messageCenter.trigger(eventObj.type, eventObj);\r\n        // Extra triggered 'selectchanged' event\r\n        if (isSelectChange) {\r\n          var newObj = {\r\n            type: 'selectchanged',\r\n            escapeConnect: escapeConnect,\r\n            selected: getAllSelectedIndices(ecModel),\r\n            isFromClick: payload.isFromClick || false,\r\n            fromAction: payload.type,\r\n            fromActionPayload: payload\r\n          };\r\n          messageCenter.trigger(newObj.type, newObj);\r\n        }\r\n      }\r\n    };\r\n    flushPendingActions = function (silent) {\r\n      var pendingActions = this._pendingActions;\r\n      while (pendingActions.length) {\r\n        var payload = pendingActions.shift();\r\n        doDispatchAction.call(this, payload, silent);\r\n      }\r\n    };\r\n    triggerUpdatedEvent = function (silent) {\r\n      !silent && this.trigger('updated');\r\n    };\r\n    /**\r\n     * Event `rendered` is triggered when zr\r\n     * rendered. It is useful for realtime\r\n     * snapshot (reflect animation).\r\n     *\r\n     * Event `finished` is triggered when:\r\n     * (1) zrender rendering finished.\r\n     * (2) initial animation finished.\r\n     * (3) progressive rendering finished.\r\n     * (4) no pending action.\r\n     * (5) no delayed setOption needs to be processed.\r\n     */\r\n    bindRenderedEvent = function (zr, ecIns) {\r\n      zr.on('rendered', function (params) {\r\n        ecIns.trigger('rendered', params);\r\n        // The `finished` event should not be triggered repeatedly,\r\n        // so it should only be triggered when rendering indeed happens\r\n        // in zrender. (Consider the case that dipatchAction is keep\r\n        // triggering when mouse move).\r\n        if (\r\n        // Although zr is dirty if initial animation is not finished\r\n        // and this checking is called on frame, we also check\r\n        // animation finished for robustness.\r\n        zr.animation.isFinished() && !ecIns[PENDING_UPDATE] && !ecIns._scheduler.unfinished && !ecIns._pendingActions.length) {\r\n          ecIns.trigger('finished');\r\n        }\r\n      });\r\n    };\r\n    bindMouseEvent = function (zr, ecIns) {\r\n      zr.on('mouseover', function (e) {\r\n        var el = e.target;\r\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\r\n        if (dispatcher) {\r\n          handleGlobalMouseOverForHighDown(dispatcher, e, ecIns._api);\r\n          markStatusToUpdate(ecIns);\r\n        }\r\n      }).on('mouseout', function (e) {\r\n        var el = e.target;\r\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\r\n        if (dispatcher) {\r\n          handleGlobalMouseOutForHighDown(dispatcher, e, ecIns._api);\r\n          markStatusToUpdate(ecIns);\r\n        }\r\n      }).on('click', function (e) {\r\n        var el = e.target;\r\n        var dispatcher = findEventDispatcher(el, function (target) {\r\n          return getECData(target).dataIndex != null;\r\n        }, true);\r\n        if (dispatcher) {\r\n          var actionType = dispatcher.selected ? 'unselect' : 'select';\r\n          var ecData = getECData(dispatcher);\r\n          ecIns._api.dispatchAction({\r\n            type: actionType,\r\n            dataType: ecData.dataType,\r\n            dataIndexInside: ecData.dataIndex,\r\n            seriesIndex: ecData.seriesIndex,\r\n            isFromClick: true\r\n          });\r\n        }\r\n      });\r\n    };\r\n    function clearColorPalette(ecModel) {\r\n      ecModel.clearColorPalette();\r\n      ecModel.eachSeries(function (seriesModel) {\r\n        seriesModel.clearColorPalette();\r\n      });\r\n    }\r\n    ;\r\n    // Allocate zlevels for series and components\r\n    function allocateZlevels(ecModel) {\r\n      ;\r\n      var componentZLevels = [];\r\n      var seriesZLevels = [];\r\n      var hasSeparateZLevel = false;\r\n      ecModel.eachComponent(function (componentType, componentModel) {\r\n        var zlevel = componentModel.get('zlevel') || 0;\r\n        var z = componentModel.get('z') || 0;\r\n        var zlevelKey = componentModel.getZLevelKey();\r\n        hasSeparateZLevel = hasSeparateZLevel || !!zlevelKey;\r\n        (componentType === 'series' ? seriesZLevels : componentZLevels).push({\r\n          zlevel: zlevel,\r\n          z: z,\r\n          idx: componentModel.componentIndex,\r\n          type: componentType,\r\n          key: zlevelKey\r\n        });\r\n      });\r\n      if (hasSeparateZLevel) {\r\n        // Series after component\r\n        var zLevels = componentZLevels.concat(seriesZLevels);\r\n        var lastSeriesZLevel_1;\r\n        var lastSeriesKey_1;\r\n        timsort(zLevels, function (a, b) {\r\n          if (a.zlevel === b.zlevel) {\r\n            return a.z - b.z;\r\n          }\r\n          return a.zlevel - b.zlevel;\r\n        });\r\n        each(zLevels, function (item) {\r\n          var componentModel = ecModel.getComponent(item.type, item.idx);\r\n          var zlevel = item.zlevel;\r\n          var key = item.key;\r\n          if (lastSeriesZLevel_1 != null) {\r\n            zlevel = Math.max(lastSeriesZLevel_1, zlevel);\r\n          }\r\n          if (key) {\r\n            if (zlevel === lastSeriesZLevel_1 && key !== lastSeriesKey_1) {\r\n              zlevel++;\r\n            }\r\n            lastSeriesKey_1 = key;\r\n          } else if (lastSeriesKey_1) {\r\n            if (zlevel === lastSeriesZLevel_1) {\r\n              zlevel++;\r\n            }\r\n            lastSeriesKey_1 = '';\r\n          }\r\n          lastSeriesZLevel_1 = zlevel;\r\n          componentModel.setZLevel(zlevel);\r\n        });\r\n      }\r\n    }\r\n    render = function (ecIns, ecModel, api, payload, updateParams) {\r\n      allocateZlevels(ecModel);\r\n      renderComponents(ecIns, ecModel, api, payload, updateParams);\r\n      each(ecIns._chartsViews, function (chart) {\r\n        chart.__alive = false;\r\n      });\r\n      renderSeries(ecIns, ecModel, api, payload, updateParams);\r\n      // Remove groups of unrendered charts\r\n      each(ecIns._chartsViews, function (chart) {\r\n        if (!chart.__alive) {\r\n          chart.remove(ecModel, api);\r\n        }\r\n      });\r\n    };\r\n    renderComponents = function (ecIns, ecModel, api, payload, updateParams, dirtyList) {\r\n      each(dirtyList || ecIns._componentsViews, function (componentView) {\r\n        var componentModel = componentView.__model;\r\n        clearStates(componentModel, componentView);\r\n        componentView.render(componentModel, ecModel, api, payload);\r\n        updateZ(componentModel, componentView);\r\n        updateStates(componentModel, componentView);\r\n      });\r\n    };\r\n    /**\r\n     * Render each chart and component\r\n     */\r\n    renderSeries = function (ecIns, ecModel, api, payload, updateParams, dirtyMap) {\r\n      // Render all charts\r\n      var scheduler = ecIns._scheduler;\r\n      updateParams = extend(updateParams || {}, {\r\n        updatedSeries: ecModel.getSeries()\r\n      });\r\n      // TODO progressive?\r\n      lifecycle.trigger('series:beforeupdate', ecModel, api, updateParams);\r\n      var unfinished = false;\r\n      ecModel.eachSeries(function (seriesModel) {\r\n        var chartView = ecIns._chartsMap[seriesModel.__viewId];\r\n        chartView.__alive = true;\r\n        var renderTask = chartView.renderTask;\r\n        scheduler.updatePayload(renderTask, payload);\r\n        // TODO states on marker.\r\n        clearStates(seriesModel, chartView);\r\n        if (dirtyMap && dirtyMap.get(seriesModel.uid)) {\r\n          renderTask.dirty();\r\n        }\r\n        if (renderTask.perform(scheduler.getPerformArgs(renderTask))) {\r\n          unfinished = true;\r\n        }\r\n        chartView.group.silent = !!seriesModel.get('silent');\r\n        // Should not call markRedraw on group, because it will disable zrender\r\n        // incremental render (always render from the __startIndex each frame)\r\n        // chartView.group.markRedraw();\r\n        updateBlend(seriesModel, chartView);\r\n        updateSeriesElementSelection(seriesModel);\r\n      });\r\n      scheduler.unfinished = unfinished || scheduler.unfinished;\r\n      lifecycle.trigger('series:layoutlabels', ecModel, api, updateParams);\r\n      // transition after label is layouted.\r\n      lifecycle.trigger('series:transition', ecModel, api, updateParams);\r\n      ecModel.eachSeries(function (seriesModel) {\r\n        var chartView = ecIns._chartsMap[seriesModel.__viewId];\r\n        // Update Z after labels updated. Before applying states.\r\n        updateZ(seriesModel, chartView);\r\n        // NOTE: Update states after label is updated.\r\n        // label should be in normal status when layouting.\r\n        updateStates(seriesModel, chartView);\r\n      });\r\n      // If use hover layer\r\n      updateHoverLayerStatus(ecIns, ecModel);\r\n      lifecycle.trigger('series:afterupdate', ecModel, api, updateParams);\r\n    };\r\n    markStatusToUpdate = function (ecIns) {\r\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = true;\r\n      // Wake up zrender if it's sleep. Let it update states in the next frame.\r\n      ecIns.getZr().wakeUp();\r\n    };\r\n    applyChangedStates = function (ecIns) {\r\n      if (!ecIns[STATUS_NEEDS_UPDATE_KEY]) {\r\n        return;\r\n      }\r\n      ecIns.getZr().storage.traverse(function (el) {\r\n        // Not applied on removed elements, it may still in fading.\r\n        if (graphic.isElementRemoved(el)) {\r\n          return;\r\n        }\r\n        applyElementStates(el);\r\n      });\r\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = false;\r\n    };\r\n    function applyElementStates(el) {\r\n      var newStates = [];\r\n      var oldStates = el.currentStates;\r\n      // Keep other states.\r\n      for (var i = 0; i < oldStates.length; i++) {\r\n        var stateName = oldStates[i];\r\n        if (!(stateName === 'emphasis' || stateName === 'blur' || stateName === 'select')) {\r\n          newStates.push(stateName);\r\n        }\r\n      }\r\n      // Only use states when it's exists.\r\n      if (el.selected && el.states.select) {\r\n        newStates.push('select');\r\n      }\r\n      if (el.hoverState === HOVER_STATE_EMPHASIS && el.states.emphasis) {\r\n        newStates.push('emphasis');\r\n      } else if (el.hoverState === HOVER_STATE_BLUR && el.states.blur) {\r\n        newStates.push('blur');\r\n      }\r\n      el.useStates(newStates);\r\n    }\r\n    function updateHoverLayerStatus(ecIns, ecModel) {\r\n      var zr = ecIns._zr;\r\n      var storage = zr.storage;\r\n      var elCount = 0;\r\n      storage.traverse(function (el) {\r\n        if (!el.isGroup) {\r\n          elCount++;\r\n        }\r\n      });\r\n      if (elCount > ecModel.get('hoverLayerThreshold') && !env.node && !env.worker) {\r\n        ecModel.eachSeries(function (seriesModel) {\r\n          if (seriesModel.preventUsingHoverLayer) {\r\n            return;\r\n          }\r\n          var chartView = ecIns._chartsMap[seriesModel.__viewId];\r\n          if (chartView.__alive) {\r\n            chartView.eachRendered(function (el) {\r\n              if (el.states.emphasis) {\r\n                el.states.emphasis.hoverLayer = true;\r\n              }\r\n            });\r\n          }\r\n        });\r\n      }\r\n    }\r\n    ;\r\n    /**\r\n     * Update chart and blend.\r\n     */\r\n    function updateBlend(seriesModel, chartView) {\r\n      var blendMode = seriesModel.get('blendMode') || null;\r\n      chartView.eachRendered(function (el) {\r\n        // FIXME marker and other components\r\n        if (!el.isGroup) {\r\n          // DON'T mark the element dirty. In case element is incremental and don't want to rerender.\r\n          el.style.blend = blendMode;\r\n        }\r\n      });\r\n    }\r\n    ;\r\n    function updateZ(model, view) {\r\n      if (model.preventAutoZ) {\r\n        return;\r\n      }\r\n      var z = model.get('z') || 0;\r\n      var zlevel = model.get('zlevel') || 0;\r\n      // Set z and zlevel\r\n      view.eachRendered(function (el) {\r\n        doUpdateZ(el, z, zlevel, -Infinity);\r\n        // Don't traverse the children because it has been traversed in _updateZ.\r\n        return true;\r\n      });\r\n    }\r\n    ;\r\n    function doUpdateZ(el, z, zlevel, maxZ2) {\r\n      // Group may also have textContent\r\n      var label = el.getTextContent();\r\n      var labelLine = el.getTextGuideLine();\r\n      var isGroup = el.isGroup;\r\n      if (isGroup) {\r\n        // set z & zlevel of children elements of Group\r\n        var children = el.childrenRef();\r\n        for (var i = 0; i < children.length; i++) {\r\n          maxZ2 = Math.max(doUpdateZ(children[i], z, zlevel, maxZ2), maxZ2);\r\n        }\r\n      } else {\r\n        // not Group\r\n        el.z = z;\r\n        el.zlevel = zlevel;\r\n        maxZ2 = Math.max(el.z2, maxZ2);\r\n      }\r\n      // always set z and zlevel if label/labelLine exists\r\n      if (label) {\r\n        label.z = z;\r\n        label.zlevel = zlevel;\r\n        // lift z2 of text content\r\n        // TODO if el.emphasis.z2 is spcefied, what about textContent.\r\n        isFinite(maxZ2) && (label.z2 = maxZ2 + 2);\r\n      }\r\n      if (labelLine) {\r\n        var textGuideLineConfig = el.textGuideLineConfig;\r\n        labelLine.z = z;\r\n        labelLine.zlevel = zlevel;\r\n        isFinite(maxZ2) && (labelLine.z2 = maxZ2 + (textGuideLineConfig && textGuideLineConfig.showAbove ? 1 : -1));\r\n      }\r\n      return maxZ2;\r\n    }\r\n    // Clear states without animation.\r\n    // TODO States on component.\r\n    function clearStates(model, view) {\r\n      view.eachRendered(function (el) {\r\n        // Not applied on removed elements, it may still in fading.\r\n        if (graphic.isElementRemoved(el)) {\r\n          return;\r\n        }\r\n        var textContent = el.getTextContent();\r\n        var textGuide = el.getTextGuideLine();\r\n        if (el.stateTransition) {\r\n          el.stateTransition = null;\r\n        }\r\n        if (textContent && textContent.stateTransition) {\r\n          textContent.stateTransition = null;\r\n        }\r\n        if (textGuide && textGuide.stateTransition) {\r\n          textGuide.stateTransition = null;\r\n        }\r\n        // TODO If el is incremental.\r\n        if (el.hasState()) {\r\n          el.prevStates = el.currentStates;\r\n          el.clearStates();\r\n        } else if (el.prevStates) {\r\n          el.prevStates = null;\r\n        }\r\n      });\r\n    }\r\n    function updateStates(model, view) {\r\n      var stateAnimationModel = model.getModel('stateAnimation');\r\n      var enableAnimation = model.isAnimationEnabled();\r\n      var duration = stateAnimationModel.get('duration');\r\n      var stateTransition = duration > 0 ? {\r\n        duration: duration,\r\n        delay: stateAnimationModel.get('delay'),\r\n        easing: stateAnimationModel.get('easing')\r\n        // additive: stateAnimationModel.get('additive')\r\n      } : null;\r\n      view.eachRendered(function (el) {\r\n        if (el.states && el.states.emphasis) {\r\n          // Not applied on removed elements, it may still in fading.\r\n          if (graphic.isElementRemoved(el)) {\r\n            return;\r\n          }\r\n          if (el instanceof graphic.Path) {\r\n            savePathStates(el);\r\n          }\r\n          // Only updated on changed element. In case element is incremental and don't want to rerender.\r\n          // TODO, a more proper way?\r\n          if (el.__dirty) {\r\n            var prevStates = el.prevStates;\r\n            // Restore states without animation\r\n            if (prevStates) {\r\n              el.useStates(prevStates);\r\n            }\r\n          }\r\n          // Update state transition and enable animation again.\r\n          if (enableAnimation) {\r\n            el.stateTransition = stateTransition;\r\n            var textContent = el.getTextContent();\r\n            var textGuide = el.getTextGuideLine();\r\n            // TODO Is it necessary to animate label?\r\n            if (textContent) {\r\n              textContent.stateTransition = stateTransition;\r\n            }\r\n            if (textGuide) {\r\n              textGuide.stateTransition = stateTransition;\r\n            }\r\n          }\r\n          // Use highlighted and selected flag to toggle states.\r\n          if (el.__dirty) {\r\n            applyElementStates(el);\r\n          }\r\n        }\r\n      });\r\n    }\r\n    ;\r\n    createExtensionAPI = function (ecIns) {\r\n      return new (/** @class */function (_super) {\r\n        __extends(class_1, _super);\r\n        function class_1() {\r\n          return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        class_1.prototype.getCoordinateSystems = function () {\r\n          return ecIns._coordSysMgr.getCoordinateSystems();\r\n        };\r\n        class_1.prototype.getComponentByElement = function (el) {\r\n          while (el) {\r\n            var modelInfo = el.__ecComponentInfo;\r\n            if (modelInfo != null) {\r\n              return ecIns._model.getComponent(modelInfo.mainType, modelInfo.index);\r\n            }\r\n            el = el.parent;\r\n          }\r\n        };\r\n        class_1.prototype.enterEmphasis = function (el, highlightDigit) {\r\n          enterEmphasis(el, highlightDigit);\r\n          markStatusToUpdate(ecIns);\r\n        };\r\n        class_1.prototype.leaveEmphasis = function (el, highlightDigit) {\r\n          leaveEmphasis(el, highlightDigit);\r\n          markStatusToUpdate(ecIns);\r\n        };\r\n        class_1.prototype.enterBlur = function (el) {\r\n          enterBlur(el);\r\n          markStatusToUpdate(ecIns);\r\n        };\r\n        class_1.prototype.leaveBlur = function (el) {\r\n          leaveBlur(el);\r\n          markStatusToUpdate(ecIns);\r\n        };\r\n        class_1.prototype.enterSelect = function (el) {\r\n          enterSelect(el);\r\n          markStatusToUpdate(ecIns);\r\n        };\r\n        class_1.prototype.leaveSelect = function (el) {\r\n          leaveSelect(el);\r\n          markStatusToUpdate(ecIns);\r\n        };\r\n        class_1.prototype.getModel = function () {\r\n          return ecIns.getModel();\r\n        };\r\n        class_1.prototype.getViewOfComponentModel = function (componentModel) {\r\n          return ecIns.getViewOfComponentModel(componentModel);\r\n        };\r\n        class_1.prototype.getViewOfSeriesModel = function (seriesModel) {\r\n          return ecIns.getViewOfSeriesModel(seriesModel);\r\n        };\r\n        return class_1;\r\n      }(ExtensionAPI))(ecIns);\r\n    };\r\n    enableConnect = function (chart) {\r\n      function updateConnectedChartsStatus(charts, status) {\r\n        for (var i = 0; i < charts.length; i++) {\r\n          var otherChart = charts[i];\r\n          otherChart[CONNECT_STATUS_KEY] = status;\r\n        }\r\n      }\r\n      each(eventActionMap, function (actionType, eventType) {\r\n        chart._messageCenter.on(eventType, function (event) {\r\n          if (connectedGroups[chart.group] && chart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_PENDING) {\r\n            if (event && event.escapeConnect) {\r\n              return;\r\n            }\r\n            var action_1 = chart.makeActionFromEvent(event);\r\n            var otherCharts_1 = [];\r\n            each(instances, function (otherChart) {\r\n              if (otherChart !== chart && otherChart.group === chart.group) {\r\n                otherCharts_1.push(otherChart);\r\n              }\r\n            });\r\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_PENDING);\r\n            each(otherCharts_1, function (otherChart) {\r\n              if (otherChart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_UPDATING) {\r\n                otherChart.dispatchAction(action_1);\r\n              }\r\n            });\r\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_UPDATED);\r\n          }\r\n        });\r\n      });\r\n    };\r\n  }();\r\n  return ECharts;\r\n}(Eventful);\r\nvar echartsProto = ECharts.prototype;\r\nechartsProto.on = createRegisterEventWithLowercaseECharts('on');\r\nechartsProto.off = createRegisterEventWithLowercaseECharts('off');\r\n/**\r\n * @deprecated\r\n */\r\n// @ts-ignore\r\nechartsProto.one = function (eventName, cb, ctx) {\r\n  var self = this;\r\n  deprecateLog('ECharts#one is deprecated.');\r\n  function wrapped() {\r\n    var args2 = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n      args2[_i] = arguments[_i];\r\n    }\r\n    cb && cb.apply && cb.apply(this, args2);\r\n    // @ts-ignore\r\n    self.off(eventName, wrapped);\r\n  }\r\n  ;\r\n  // @ts-ignore\r\n  this.on.call(this, eventName, wrapped, ctx);\r\n};\r\nvar MOUSE_EVENT_NAMES = ['click', 'dblclick', 'mouseover', 'mouseout', 'mousemove', 'mousedown', 'mouseup', 'globalout', 'contextmenu'];\r\nfunction disposedWarning(id) {\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    warn('Instance ' + id + ' has been disposed');\r\n  }\r\n}\r\nvar actions = {};\r\n/**\r\n * Map eventType to actionType\r\n */\r\nvar eventActionMap = {};\r\nvar dataProcessorFuncs = [];\r\nvar optionPreprocessorFuncs = [];\r\nvar visualFuncs = [];\r\nvar themeStorage = {};\r\nvar loadingEffects = {};\r\nvar instances = {};\r\nvar connectedGroups = {};\r\nvar idBase = +new Date() - 0;\r\nvar groupIdBase = +new Date() - 0;\r\nvar DOM_ATTRIBUTE_KEY = '_echarts_instance_';\r\n/**\r\n * @param opts.devicePixelRatio Use window.devicePixelRatio by default\r\n * @param opts.renderer Can choose 'canvas' or 'svg' to render the chart.\r\n * @param opts.width Use clientWidth of the input `dom` by default.\r\n *        Can be 'auto' (the same as null/undefined)\r\n * @param opts.height Use clientHeight of the input `dom` by default.\r\n *        Can be 'auto' (the same as null/undefined)\r\n * @param opts.locale Specify the locale.\r\n * @param opts.useDirtyRect Enable dirty rectangle rendering or not.\r\n */\r\nexport function init(dom, theme, opts) {\r\n  var isClient = !(opts && opts.ssr);\r\n  if (isClient) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      if (!dom) {\r\n        throw new Error('Initialize failed: invalid dom.');\r\n      }\r\n    }\r\n    var existInstance = getInstanceByDom(dom);\r\n    if (existInstance) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        warn('There is a chart instance already initialized on the dom.');\r\n      }\r\n      return existInstance;\r\n    }\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      if (isDom(dom) && dom.nodeName.toUpperCase() !== 'CANVAS' && (!dom.clientWidth && (!opts || opts.width == null) || !dom.clientHeight && (!opts || opts.height == null))) {\r\n        warn('Can\\'t get DOM width or height. Please check ' + 'dom.clientWidth and dom.clientHeight. They should not be 0.' + 'For example, you may need to call this in the callback ' + 'of window.onload.');\r\n      }\r\n    }\r\n  }\r\n  var chart = new ECharts(dom, theme, opts);\r\n  chart.id = 'ec_' + idBase++;\r\n  instances[chart.id] = chart;\r\n  isClient && modelUtil.setAttribute(dom, DOM_ATTRIBUTE_KEY, chart.id);\r\n  enableConnect(chart);\r\n  lifecycle.trigger('afterinit', chart);\r\n  return chart;\r\n}\r\n/**\r\n * @usage\r\n * (A)\r\n * ```js\r\n * let chart1 = echarts.init(dom1);\r\n * let chart2 = echarts.init(dom2);\r\n * chart1.group = 'xxx';\r\n * chart2.group = 'xxx';\r\n * echarts.connect('xxx');\r\n * ```\r\n * (B)\r\n * ```js\r\n * let chart1 = echarts.init(dom1);\r\n * let chart2 = echarts.init(dom2);\r\n * echarts.connect('xxx', [chart1, chart2]);\r\n * ```\r\n */\r\nexport function connect(groupId) {\r\n  // Is array of charts\r\n  if (isArray(groupId)) {\r\n    var charts = groupId;\r\n    groupId = null;\r\n    // If any chart has group\r\n    each(charts, function (chart) {\r\n      if (chart.group != null) {\r\n        groupId = chart.group;\r\n      }\r\n    });\r\n    groupId = groupId || 'g_' + groupIdBase++;\r\n    each(charts, function (chart) {\r\n      chart.group = groupId;\r\n    });\r\n  }\r\n  connectedGroups[groupId] = true;\r\n  return groupId;\r\n}\r\nexport function disconnect(groupId) {\r\n  connectedGroups[groupId] = false;\r\n}\r\n/**\r\n * Alias and backward compatibility\r\n * @deprecated\r\n */\r\nexport var disConnect = disconnect;\r\n/**\r\n * Dispose a chart instance\r\n */\r\nexport function dispose(chart) {\r\n  if (isString(chart)) {\r\n    chart = instances[chart];\r\n  } else if (!(chart instanceof ECharts)) {\r\n    // Try to treat as dom\r\n    chart = getInstanceByDom(chart);\r\n  }\r\n  if (chart instanceof ECharts && !chart.isDisposed()) {\r\n    chart.dispose();\r\n  }\r\n}\r\nexport function getInstanceByDom(dom) {\r\n  return instances[modelUtil.getAttribute(dom, DOM_ATTRIBUTE_KEY)];\r\n}\r\nexport function getInstanceById(key) {\r\n  return instances[key];\r\n}\r\n/**\r\n * Register theme\r\n */\r\nexport function registerTheme(name, theme) {\r\n  themeStorage[name] = theme;\r\n}\r\n/**\r\n * Register option preprocessor\r\n */\r\nexport function registerPreprocessor(preprocessorFunc) {\r\n  if (indexOf(optionPreprocessorFuncs, preprocessorFunc) < 0) {\r\n    optionPreprocessorFuncs.push(preprocessorFunc);\r\n  }\r\n}\r\nexport function registerProcessor(priority, processor) {\r\n  normalizeRegister(dataProcessorFuncs, priority, processor, PRIORITY_PROCESSOR_DEFAULT);\r\n}\r\n/**\r\n * Register postIniter\r\n * @param {Function} postInitFunc\r\n */\r\nexport function registerPostInit(postInitFunc) {\r\n  registerUpdateLifecycle('afterinit', postInitFunc);\r\n}\r\n/**\r\n * Register postUpdater\r\n * @param {Function} postUpdateFunc\r\n */\r\nexport function registerPostUpdate(postUpdateFunc) {\r\n  registerUpdateLifecycle('afterupdate', postUpdateFunc);\r\n}\r\nexport function registerUpdateLifecycle(name, cb) {\r\n  lifecycle.on(name, cb);\r\n}\r\nexport function registerAction(actionInfo, eventName, action) {\r\n  if (isFunction(eventName)) {\r\n    action = eventName;\r\n    eventName = '';\r\n  }\r\n  var actionType = isObject(actionInfo) ? actionInfo.type : [actionInfo, actionInfo = {\r\n    event: eventName\r\n  }][0];\r\n  // Event name is all lowercase\r\n  actionInfo.event = (actionInfo.event || actionType).toLowerCase();\r\n  eventName = actionInfo.event;\r\n  if (eventActionMap[eventName]) {\r\n    // Already registered.\r\n    return;\r\n  }\r\n  // Validate action type and event name.\r\n  assert(ACTION_REG.test(actionType) && ACTION_REG.test(eventName));\r\n  if (!actions[actionType]) {\r\n    actions[actionType] = {\r\n      action: action,\r\n      actionInfo: actionInfo\r\n    };\r\n  }\r\n  eventActionMap[eventName] = actionType;\r\n}\r\nexport function registerCoordinateSystem(type, coordSysCreator) {\r\n  CoordinateSystemManager.register(type, coordSysCreator);\r\n}\r\n/**\r\n * Get dimensions of specified coordinate system.\r\n * @param {string} type\r\n * @return {Array.<string|Object>}\r\n */\r\nexport function getCoordinateSystemDimensions(type) {\r\n  var coordSysCreator = CoordinateSystemManager.get(type);\r\n  if (coordSysCreator) {\r\n    return coordSysCreator.getDimensionsInfo ? coordSysCreator.getDimensionsInfo() : coordSysCreator.dimensions.slice();\r\n  }\r\n}\r\nexport { registerLocale } from './locale.js';\r\nfunction registerLayout(priority, layoutTask) {\r\n  normalizeRegister(visualFuncs, priority, layoutTask, PRIORITY_VISUAL_LAYOUT, 'layout');\r\n}\r\nfunction registerVisual(priority, visualTask) {\r\n  normalizeRegister(visualFuncs, priority, visualTask, PRIORITY_VISUAL_CHART, 'visual');\r\n}\r\nexport { registerLayout, registerVisual };\r\nvar registeredTasks = [];\r\nfunction normalizeRegister(targetList, priority, fn, defaultPriority, visualType) {\r\n  if (isFunction(priority) || isObject(priority)) {\r\n    fn = priority;\r\n    priority = defaultPriority;\r\n  }\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    if (isNaN(priority) || priority == null) {\r\n      throw new Error('Illegal priority');\r\n    }\r\n    // Check duplicate\r\n    each(targetList, function (wrap) {\r\n      assert(wrap.__raw !== fn);\r\n    });\r\n  }\r\n  // Already registered\r\n  if (indexOf(registeredTasks, fn) >= 0) {\r\n    return;\r\n  }\r\n  registeredTasks.push(fn);\r\n  var stageHandler = Scheduler.wrapStageHandler(fn, visualType);\r\n  stageHandler.__prio = priority;\r\n  stageHandler.__raw = fn;\r\n  targetList.push(stageHandler);\r\n}\r\nexport function registerLoading(name, loadingFx) {\r\n  loadingEffects[name] = loadingFx;\r\n}\r\n/**\r\n * ZRender need a canvas context to do measureText.\r\n * But in node environment canvas may be created by node-canvas.\r\n * So we need to specify how to create a canvas instead of using document.createElement('canvas')\r\n *\r\n *\r\n * @deprecated use setPlatformAPI({ createCanvas }) instead.\r\n *\r\n * @example\r\n *     let Canvas = require('canvas');\r\n *     let echarts = require('echarts');\r\n *     echarts.setCanvasCreator(function () {\r\n *         // Small size is enough.\r\n *         return new Canvas(32, 32);\r\n *     });\r\n */\r\nexport function setCanvasCreator(creator) {\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    deprecateLog('setCanvasCreator is deprecated. Use setPlatformAPI({ createCanvas }) instead.');\r\n  }\r\n  setPlatformAPI({\r\n    createCanvas: creator\r\n  });\r\n}\r\n/**\r\n * The parameters and usage: see `geoSourceManager.registerMap`.\r\n * Compatible with previous `echarts.registerMap`.\r\n */\r\nexport function registerMap(mapName, geoJson, specialAreas) {\r\n  var registerMap = getImpl('registerMap');\r\n  registerMap && registerMap(mapName, geoJson, specialAreas);\r\n}\r\nexport function getMap(mapName) {\r\n  var getMap = getImpl('getMap');\r\n  return getMap && getMap(mapName);\r\n}\r\nexport var registerTransform = registerExternalTransform;\r\n/**\r\n * Globa dispatchAction to a specified chart instance.\r\n */\r\n// export function dispatchAction(payload: { chartId: string } & Payload, opt?: Parameters<ECharts['dispatchAction']>[1]) {\r\n//     if (!payload || !payload.chartId) {\r\n//         // Must have chartId to find chart\r\n//         return;\r\n//     }\r\n//     const chart = instances[payload.chartId];\r\n//     if (chart) {\r\n//         chart.dispatchAction(payload, opt);\r\n//     }\r\n// }\r\n// Builtin global visual\r\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesStyleTask);\r\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataStyleTask);\r\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataColorPaletteTask);\r\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesSymbolTask);\r\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataSymbolTask);\r\nregisterVisual(PRIORITY_VISUAL_DECAL, decal);\r\nregisterPreprocessor(backwardCompat);\r\nregisterProcessor(PRIORITY_PROCESSOR_DATASTACK, dataStack);\r\nregisterLoading('default', loadingDefault);\r\n// Default actions\r\nregisterAction({\r\n  type: HIGHLIGHT_ACTION_TYPE,\r\n  event: HIGHLIGHT_ACTION_TYPE,\r\n  update: HIGHLIGHT_ACTION_TYPE\r\n}, noop);\r\nregisterAction({\r\n  type: DOWNPLAY_ACTION_TYPE,\r\n  event: DOWNPLAY_ACTION_TYPE,\r\n  update: DOWNPLAY_ACTION_TYPE\r\n}, noop);\r\nregisterAction({\r\n  type: SELECT_ACTION_TYPE,\r\n  event: SELECT_ACTION_TYPE,\r\n  update: SELECT_ACTION_TYPE\r\n}, noop);\r\nregisterAction({\r\n  type: UNSELECT_ACTION_TYPE,\r\n  event: UNSELECT_ACTION_TYPE,\r\n  update: UNSELECT_ACTION_TYPE\r\n}, noop);\r\nregisterAction({\r\n  type: TOGGLE_SELECT_ACTION_TYPE,\r\n  event: TOGGLE_SELECT_ACTION_TYPE,\r\n  update: TOGGLE_SELECT_ACTION_TYPE\r\n}, noop);\r\n// Default theme\r\nregisterTheme('light', lightTheme);\r\nregisterTheme('dark', darkTheme);\r\n// For backward compatibility, where the namespace `dataTool` will\r\n// be mounted on `echarts` is the extension `dataTool` is imported.\r\nexport var dataTool = {};", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { registerPreprocessor, registerProcessor, registerPostInit, registerPostUpdate, registerAction, registerCoordinateSystem, registerLayout, registerVisual, registerTransform, registerLoading, registerMap, registerUpdateLifecycle, PRIORITY } from './core/echarts.js';\r\nimport ComponentView from './view/Component.js';\r\nimport ChartView from './view/Chart.js';\r\nimport ComponentModel from './model/Component.js';\r\nimport SeriesModel from './model/Series.js';\r\nimport { isFunction, indexOf, isArray, each } from 'zrender/lib/core/util.js';\r\nimport { registerImpl } from './core/impl.js';\r\nimport { registerPainter } from 'zrender/lib/zrender.js';\r\nvar extensions = [];\r\nvar extensionRegisters = {\r\n  registerPreprocessor: registerPreprocessor,\r\n  registerProcessor: registerProcessor,\r\n  registerPostInit: registerPostInit,\r\n  registerPostUpdate: registerPostUpdate,\r\n  registerUpdateLifecycle: registerUpdateLifecycle,\r\n  registerAction: registerAction,\r\n  registerCoordinateSystem: registerCoordinateSystem,\r\n  registerLayout: registerLayout,\r\n  registerVisual: registerVisual,\r\n  registerTransform: registerTransform,\r\n  registerLoading: registerLoading,\r\n  registerMap: registerMap,\r\n  registerImpl: registerImpl,\r\n  PRIORITY: PRIORITY,\r\n  ComponentModel: ComponentModel,\r\n  ComponentView: ComponentView,\r\n  SeriesModel: SeriesModel,\r\n  ChartView: ChartView,\r\n  // TODO Use ComponentModel and SeriesModel instead of Constructor\r\n  registerComponentModel: function (ComponentModelClass) {\r\n    ComponentModel.registerClass(ComponentModelClass);\r\n  },\r\n  registerComponentView: function (ComponentViewClass) {\r\n    ComponentView.registerClass(ComponentViewClass);\r\n  },\r\n  registerSeriesModel: function (SeriesModelClass) {\r\n    SeriesModel.registerClass(SeriesModelClass);\r\n  },\r\n  registerChartView: function (ChartViewClass) {\r\n    ChartView.registerClass(ChartViewClass);\r\n  },\r\n  registerSubTypeDefaulter: function (componentType, defaulter) {\r\n    ComponentModel.registerSubTypeDefaulter(componentType, defaulter);\r\n  },\r\n  registerPainter: function (painterType, PainterCtor) {\r\n    registerPainter(painterType, PainterCtor);\r\n  }\r\n};\r\nexport function use(ext) {\r\n  if (isArray(ext)) {\r\n    // use([ChartLine, ChartBar]);\r\n    each(ext, function (singleExt) {\r\n      use(singleExt);\r\n    });\r\n    return;\r\n  }\r\n  if (indexOf(extensions, ext) >= 0) {\r\n    return;\r\n  }\r\n  extensions.push(ext);\r\n  if (isFunction(ext)) {\r\n    ext = {\r\n      install: ext\r\n    };\r\n  }\r\n  ext.install(extensionRegisters);\r\n}", "import windingLine from './windingLine.js';\r\nvar EPSILON = 1e-8;\r\nfunction isAroundEqual(a, b) {\r\n    return Math.abs(a - b) < EPSILON;\r\n}\r\nexport function contain(points, x, y) {\r\n    var w = 0;\r\n    var p = points[0];\r\n    if (!p) {\r\n        return false;\r\n    }\r\n    for (var i = 1; i < points.length; i++) {\r\n        var p2 = points[i];\r\n        w += windingLine(p[0], p[1], p2[0], p2[1], x, y);\r\n        p = p2;\r\n    }\r\n    var p0 = points[0];\r\n    if (!isAroundEqual(p[0], p0[0]) || !isAroundEqual(p[1], p0[1])) {\r\n        w += windingLine(p[0], p[1], p0[0], p0[1], x, y);\r\n    }\r\n    return w !== 0;\r\n}\r\n", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\r\nimport * as vec2 from 'zrender/lib/core/vector.js';\r\nimport * as polygonContain from 'zrender/lib/contain/polygon.js';\r\nimport * as matrix from 'zrender/lib/core/matrix.js';\r\nimport { each } from 'zrender/lib/core/util.js';\r\nvar TMP_TRANSFORM = [];\r\nfunction transformPoints(points, transform) {\r\n  for (var p = 0; p < points.length; p++) {\r\n    vec2.applyTransform(points[p], points[p], transform);\r\n  }\r\n}\r\nfunction updateBBoxFromPoints(points, min, max, projection) {\r\n  for (var i = 0; i < points.length; i++) {\r\n    var p = points[i];\r\n    if (projection) {\r\n      // projection may return null point.\r\n      p = projection.project(p);\r\n    }\r\n    if (p && isFinite(p[0]) && isFinite(p[1])) {\r\n      vec2.min(min, min, p);\r\n      vec2.max(max, max, p);\r\n    }\r\n  }\r\n}\r\nfunction centroid(points) {\r\n  var signedArea = 0;\r\n  var cx = 0;\r\n  var cy = 0;\r\n  var len = points.length;\r\n  var x0 = points[len - 1][0];\r\n  var y0 = points[len - 1][1];\r\n  // Polygon should been closed.\r\n  for (var i = 0; i < len; i++) {\r\n    var x1 = points[i][0];\r\n    var y1 = points[i][1];\r\n    var a = x0 * y1 - x1 * y0;\r\n    signedArea += a;\r\n    cx += (x0 + x1) * a;\r\n    cy += (y0 + y1) * a;\r\n    x0 = x1;\r\n    y0 = y1;\r\n  }\r\n  return signedArea ? [cx / signedArea / 3, cy / signedArea / 3, signedArea] : [points[0][0] || 0, points[0][1] || 0];\r\n}\r\nvar Region = /** @class */function () {\r\n  function Region(name) {\r\n    this.name = name;\r\n  }\r\n  Region.prototype.setCenter = function (center) {\r\n    this._center = center;\r\n  };\r\n  /**\r\n   * Get center point in data unit. That is,\r\n   * for GeoJSONRegion, the unit is lat/lng,\r\n   * for GeoSVGRegion, the unit is SVG local coord.\r\n   */\r\n  Region.prototype.getCenter = function () {\r\n    var center = this._center;\r\n    if (!center) {\r\n      // In most cases there are no need to calculate this center.\r\n      // So calculate only when called.\r\n      center = this._center = this.calcCenter();\r\n    }\r\n    return center;\r\n  };\r\n  return Region;\r\n}();\r\nexport { Region };\r\nvar GeoJSONPolygonGeometry = /** @class */function () {\r\n  function GeoJSONPolygonGeometry(exterior, interiors) {\r\n    this.type = 'polygon';\r\n    this.exterior = exterior;\r\n    this.interiors = interiors;\r\n  }\r\n  return GeoJSONPolygonGeometry;\r\n}();\r\nexport { GeoJSONPolygonGeometry };\r\nvar GeoJSONLineStringGeometry = /** @class */function () {\r\n  function GeoJSONLineStringGeometry(points) {\r\n    this.type = 'linestring';\r\n    this.points = points;\r\n  }\r\n  return GeoJSONLineStringGeometry;\r\n}();\r\nexport { GeoJSONLineStringGeometry };\r\nvar GeoJSONRegion = /** @class */function (_super) {\r\n  __extends(GeoJSONRegion, _super);\r\n  function GeoJSONRegion(name, geometries, cp) {\r\n    var _this = _super.call(this, name) || this;\r\n    _this.type = 'geoJSON';\r\n    _this.geometries = geometries;\r\n    _this._center = cp && [cp[0], cp[1]];\r\n    return _this;\r\n  }\r\n  GeoJSONRegion.prototype.calcCenter = function () {\r\n    var geometries = this.geometries;\r\n    var largestGeo;\r\n    var largestGeoSize = 0;\r\n    for (var i = 0; i < geometries.length; i++) {\r\n      var geo = geometries[i];\r\n      var exterior = geo.exterior;\r\n      // Simple trick to use points count instead of polygon area as region size.\r\n      // Ignore linestring\r\n      var size = exterior && exterior.length;\r\n      if (size > largestGeoSize) {\r\n        largestGeo = geo;\r\n        largestGeoSize = size;\r\n      }\r\n    }\r\n    if (largestGeo) {\r\n      return centroid(largestGeo.exterior);\r\n    }\r\n    // from bounding rect by default.\r\n    var rect = this.getBoundingRect();\r\n    return [rect.x + rect.width / 2, rect.y + rect.height / 2];\r\n  };\r\n  GeoJSONRegion.prototype.getBoundingRect = function (projection) {\r\n    var rect = this._rect;\r\n    // Always recalculate if using projection.\r\n    if (rect && !projection) {\r\n      return rect;\r\n    }\r\n    var min = [Infinity, Infinity];\r\n    var max = [-Infinity, -Infinity];\r\n    var geometries = this.geometries;\r\n    each(geometries, function (geo) {\r\n      if (geo.type === 'polygon') {\r\n        // Doesn't consider hole\r\n        updateBBoxFromPoints(geo.exterior, min, max, projection);\r\n      } else {\r\n        each(geo.points, function (points) {\r\n          updateBBoxFromPoints(points, min, max, projection);\r\n        });\r\n      }\r\n    });\r\n    // Normalie invalid bounding.\r\n    if (!(isFinite(min[0]) && isFinite(min[1]) && isFinite(max[0]) && isFinite(max[1]))) {\r\n      min[0] = min[1] = max[0] = max[1] = 0;\r\n    }\r\n    rect = new BoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\r\n    if (!projection) {\r\n      this._rect = rect;\r\n    }\r\n    return rect;\r\n  };\r\n  GeoJSONRegion.prototype.contain = function (coord) {\r\n    var rect = this.getBoundingRect();\r\n    var geometries = this.geometries;\r\n    if (!rect.contain(coord[0], coord[1])) {\r\n      return false;\r\n    }\r\n    loopGeo: for (var i = 0, len = geometries.length; i < len; i++) {\r\n      var geo = geometries[i];\r\n      // Only support polygon.\r\n      if (geo.type !== 'polygon') {\r\n        continue;\r\n      }\r\n      var exterior = geo.exterior;\r\n      var interiors = geo.interiors;\r\n      if (polygonContain.contain(exterior, coord[0], coord[1])) {\r\n        // Not in the region if point is in the hole.\r\n        for (var k = 0; k < (interiors ? interiors.length : 0); k++) {\r\n          if (polygonContain.contain(interiors[k], coord[0], coord[1])) {\r\n            continue loopGeo;\r\n          }\r\n        }\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  };\r\n  /**\r\n   * Transform the raw coords to target bounding.\r\n   * @param x\r\n   * @param y\r\n   * @param width\r\n   * @param height\r\n   */\r\n  GeoJSONRegion.prototype.transformTo = function (x, y, width, height) {\r\n    var rect = this.getBoundingRect();\r\n    var aspect = rect.width / rect.height;\r\n    if (!width) {\r\n      width = aspect * height;\r\n    } else if (!height) {\r\n      height = width / aspect;\r\n    }\r\n    var target = new BoundingRect(x, y, width, height);\r\n    var transform = rect.calculateTransform(target);\r\n    var geometries = this.geometries;\r\n    for (var i = 0; i < geometries.length; i++) {\r\n      var geo = geometries[i];\r\n      if (geo.type === 'polygon') {\r\n        transformPoints(geo.exterior, transform);\r\n        each(geo.interiors, function (interior) {\r\n          transformPoints(interior, transform);\r\n        });\r\n      } else {\r\n        each(geo.points, function (points) {\r\n          transformPoints(points, transform);\r\n        });\r\n      }\r\n    }\r\n    rect = this._rect;\r\n    rect.copy(target);\r\n    // Update center\r\n    this._center = [rect.x + rect.width / 2, rect.y + rect.height / 2];\r\n  };\r\n  GeoJSONRegion.prototype.cloneShallow = function (name) {\r\n    name == null && (name = this.name);\r\n    var newRegion = new GeoJSONRegion(name, this.geometries, this._center);\r\n    newRegion._rect = this._rect;\r\n    newRegion.transformTo = null; // Simply avoid to be called.\r\n    return newRegion;\r\n  };\r\n  return GeoJSONRegion;\r\n}(Region);\r\nexport { GeoJSONRegion };\r\nvar GeoSVGRegion = /** @class */function (_super) {\r\n  __extends(GeoSVGRegion, _super);\r\n  function GeoSVGRegion(name, elOnlyForCalculate) {\r\n    var _this = _super.call(this, name) || this;\r\n    _this.type = 'geoSVG';\r\n    _this._elOnlyForCalculate = elOnlyForCalculate;\r\n    return _this;\r\n  }\r\n  GeoSVGRegion.prototype.calcCenter = function () {\r\n    var el = this._elOnlyForCalculate;\r\n    var rect = el.getBoundingRect();\r\n    var center = [rect.x + rect.width / 2, rect.y + rect.height / 2];\r\n    var mat = matrix.identity(TMP_TRANSFORM);\r\n    var target = el;\r\n    while (target && !target.isGeoSVGGraphicRoot) {\r\n      matrix.mul(mat, target.getLocalTransform(), mat);\r\n      target = target.parent;\r\n    }\r\n    matrix.invert(mat, mat);\r\n    vec2.applyTransform(center, center, mat);\r\n    return center;\r\n  };\r\n  return GeoSVGRegion;\r\n}(Region);\r\nexport { GeoSVGRegion };", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n/**\r\n * Parse and decode geo json\r\n */\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport { GeoJSONLineStringGeometry, GeoJSONPolygonGeometry, GeoJSONRegion } from './Region.js';\r\nfunction decode(json) {\r\n  if (!json.UTF8Encoding) {\r\n    return json;\r\n  }\r\n  var jsonCompressed = json;\r\n  var encodeScale = jsonCompressed.UTF8Scale;\r\n  if (encodeScale == null) {\r\n    encodeScale = 1024;\r\n  }\r\n  var features = jsonCompressed.features;\r\n  zrUtil.each(features, function (feature) {\r\n    var geometry = feature.geometry;\r\n    var encodeOffsets = geometry.encodeOffsets;\r\n    var coordinates = geometry.coordinates;\r\n    // Geometry may be appeded manually in the script after json loaded.\r\n    // In this case this geometry is usually not encoded.\r\n    if (!encodeOffsets) {\r\n      return;\r\n    }\r\n    switch (geometry.type) {\r\n      case 'LineString':\r\n        geometry.coordinates = decodeRing(coordinates, encodeOffsets, encodeScale);\r\n        break;\r\n      case 'Polygon':\r\n        decodeRings(coordinates, encodeOffsets, encodeScale);\r\n        break;\r\n      case 'MultiLineString':\r\n        decodeRings(coordinates, encodeOffsets, encodeScale);\r\n        break;\r\n      case 'MultiPolygon':\r\n        zrUtil.each(coordinates, function (rings, idx) {\r\n          return decodeRings(rings, encodeOffsets[idx], encodeScale);\r\n        });\r\n    }\r\n  });\r\n  // Has been decoded\r\n  jsonCompressed.UTF8Encoding = false;\r\n  return jsonCompressed;\r\n}\r\nfunction decodeRings(rings, encodeOffsets, encodeScale) {\r\n  for (var c = 0; c < rings.length; c++) {\r\n    rings[c] = decodeRing(rings[c], encodeOffsets[c], encodeScale);\r\n  }\r\n}\r\nfunction decodeRing(coordinate, encodeOffsets, encodeScale) {\r\n  var result = [];\r\n  var prevX = encodeOffsets[0];\r\n  var prevY = encodeOffsets[1];\r\n  for (var i = 0; i < coordinate.length; i += 2) {\r\n    var x = coordinate.charCodeAt(i) - 64;\r\n    var y = coordinate.charCodeAt(i + 1) - 64;\r\n    // ZigZag decoding\r\n    x = x >> 1 ^ -(x & 1);\r\n    y = y >> 1 ^ -(y & 1);\r\n    // Delta deocding\r\n    x += prevX;\r\n    y += prevY;\r\n    prevX = x;\r\n    prevY = y;\r\n    // Dequantize\r\n    result.push([x / encodeScale, y / encodeScale]);\r\n  }\r\n  return result;\r\n}\r\nexport default function parseGeoJSON(geoJson, nameProperty) {\r\n  geoJson = decode(geoJson);\r\n  return zrUtil.map(zrUtil.filter(geoJson.features, function (featureObj) {\r\n    // Output of mapshaper may have geometry null\r\n    return featureObj.geometry && featureObj.properties && featureObj.geometry.coordinates.length > 0;\r\n  }), function (featureObj) {\r\n    var properties = featureObj.properties;\r\n    var geo = featureObj.geometry;\r\n    var geometries = [];\r\n    switch (geo.type) {\r\n      case 'Polygon':\r\n        var coordinates = geo.coordinates;\r\n        // According to the GeoJSON specification.\r\n        // First must be exterior, and the rest are all interior(holes).\r\n        geometries.push(new GeoJSONPolygonGeometry(coordinates[0], coordinates.slice(1)));\r\n        break;\r\n      case 'MultiPolygon':\r\n        zrUtil.each(geo.coordinates, function (item) {\r\n          if (item[0]) {\r\n            geometries.push(new GeoJSONPolygonGeometry(item[0], item.slice(1)));\r\n          }\r\n        });\r\n        break;\r\n      case 'LineString':\r\n        geometries.push(new GeoJSONLineStringGeometry([geo.coordinates]));\r\n        break;\r\n      case 'MultiLineString':\r\n        geometries.push(new GeoJSONLineStringGeometry(geo.coordinates));\r\n    }\r\n    var region = new GeoJSONRegion(properties[nameProperty || 'name'], geometries, properties.cp);\r\n    region.properties = properties;\r\n    return region;\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nfunction dataIndexMapValueLength(valNumOrArrLengthMoreThan2) {\r\n  return valNumOrArrLengthMoreThan2 == null ? 0 : valNumOrArrLengthMoreThan2.length || 1;\r\n}\r\nfunction defaultKeyGetter(item) {\r\n  return item;\r\n}\r\nvar DataDiffer = /** @class */function () {\r\n  /**\r\n   * @param context Can be visited by this.context in callback.\r\n   */\r\n  function DataDiffer(oldArr, newArr, oldKeyGetter, newKeyGetter, context,\r\n  // By default: 'oneToOne'.\r\n  diffMode) {\r\n    this._old = oldArr;\r\n    this._new = newArr;\r\n    this._oldKeyGetter = oldKeyGetter || defaultKeyGetter;\r\n    this._newKeyGetter = newKeyGetter || defaultKeyGetter;\r\n    // Visible in callback via `this.context`;\r\n    this.context = context;\r\n    this._diffModeMultiple = diffMode === 'multiple';\r\n  }\r\n  /**\r\n   * Callback function when add a data\r\n   */\r\n  DataDiffer.prototype.add = function (func) {\r\n    this._add = func;\r\n    return this;\r\n  };\r\n  /**\r\n   * Callback function when update a data\r\n   */\r\n  DataDiffer.prototype.update = function (func) {\r\n    this._update = func;\r\n    return this;\r\n  };\r\n  /**\r\n   * Callback function when update a data and only work in `cbMode: 'byKey'`.\r\n   */\r\n  DataDiffer.prototype.updateManyToOne = function (func) {\r\n    this._updateManyToOne = func;\r\n    return this;\r\n  };\r\n  /**\r\n   * Callback function when update a data and only work in `cbMode: 'byKey'`.\r\n   */\r\n  DataDiffer.prototype.updateOneToMany = function (func) {\r\n    this._updateOneToMany = func;\r\n    return this;\r\n  };\r\n  /**\r\n   * Callback function when update a data and only work in `cbMode: 'byKey'`.\r\n   */\r\n  DataDiffer.prototype.updateManyToMany = function (func) {\r\n    this._updateManyToMany = func;\r\n    return this;\r\n  };\r\n  /**\r\n   * Callback function when remove a data\r\n   */\r\n  DataDiffer.prototype.remove = function (func) {\r\n    this._remove = func;\r\n    return this;\r\n  };\r\n  DataDiffer.prototype.execute = function () {\r\n    this[this._diffModeMultiple ? '_executeMultiple' : '_executeOneToOne']();\r\n  };\r\n  DataDiffer.prototype._executeOneToOne = function () {\r\n    var oldArr = this._old;\r\n    var newArr = this._new;\r\n    var newDataIndexMap = {};\r\n    var oldDataKeyArr = new Array(oldArr.length);\r\n    var newDataKeyArr = new Array(newArr.length);\r\n    this._initIndexMap(oldArr, null, oldDataKeyArr, '_oldKeyGetter');\r\n    this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter');\r\n    for (var i = 0; i < oldArr.length; i++) {\r\n      var oldKey = oldDataKeyArr[i];\r\n      var newIdxMapVal = newDataIndexMap[oldKey];\r\n      var newIdxMapValLen = dataIndexMapValueLength(newIdxMapVal);\r\n      // idx can never be empty array here. see 'set null' logic below.\r\n      if (newIdxMapValLen > 1) {\r\n        // Consider there is duplicate key (for example, use dataItem.name as key).\r\n        // We should make sure every item in newArr and oldArr can be visited.\r\n        var newIdx = newIdxMapVal.shift();\r\n        if (newIdxMapVal.length === 1) {\r\n          newDataIndexMap[oldKey] = newIdxMapVal[0];\r\n        }\r\n        this._update && this._update(newIdx, i);\r\n      } else if (newIdxMapValLen === 1) {\r\n        newDataIndexMap[oldKey] = null;\r\n        this._update && this._update(newIdxMapVal, i);\r\n      } else {\r\n        this._remove && this._remove(i);\r\n      }\r\n    }\r\n    this._performRestAdd(newDataKeyArr, newDataIndexMap);\r\n  };\r\n  /**\r\n   * For example, consider the case:\r\n   * oldData: [o0, o1, o2, o3, o4, o5, o6, o7],\r\n   * newData: [n0, n1, n2, n3, n4, n5, n6, n7, n8],\r\n   * Where:\r\n   *     o0, o1, n0 has key 'a' (many to one)\r\n   *     o5, n4, n5, n6 has key 'b' (one to many)\r\n   *     o2, n1 has key 'c' (one to one)\r\n   *     n2, n3 has key 'd' (add)\r\n   *     o3, o4 has key 'e' (remove)\r\n   *     o6, o7, n7, n8 has key 'f' (many to many, treated as add and remove)\r\n   * Then:\r\n   *     (The order of the following directives are not ensured.)\r\n   *     this._updateManyToOne(n0, [o0, o1]);\r\n   *     this._updateOneToMany([n4, n5, n6], o5);\r\n   *     this._update(n1, o2);\r\n   *     this._remove(o3);\r\n   *     this._remove(o4);\r\n   *     this._remove(o6);\r\n   *     this._remove(o7);\r\n   *     this._add(n2);\r\n   *     this._add(n3);\r\n   *     this._add(n7);\r\n   *     this._add(n8);\r\n   */\r\n  DataDiffer.prototype._executeMultiple = function () {\r\n    var oldArr = this._old;\r\n    var newArr = this._new;\r\n    var oldDataIndexMap = {};\r\n    var newDataIndexMap = {};\r\n    var oldDataKeyArr = [];\r\n    var newDataKeyArr = [];\r\n    this._initIndexMap(oldArr, oldDataIndexMap, oldDataKeyArr, '_oldKeyGetter');\r\n    this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter');\r\n    for (var i = 0; i < oldDataKeyArr.length; i++) {\r\n      var oldKey = oldDataKeyArr[i];\r\n      var oldIdxMapVal = oldDataIndexMap[oldKey];\r\n      var newIdxMapVal = newDataIndexMap[oldKey];\r\n      var oldIdxMapValLen = dataIndexMapValueLength(oldIdxMapVal);\r\n      var newIdxMapValLen = dataIndexMapValueLength(newIdxMapVal);\r\n      if (oldIdxMapValLen > 1 && newIdxMapValLen === 1) {\r\n        this._updateManyToOne && this._updateManyToOne(newIdxMapVal, oldIdxMapVal);\r\n        newDataIndexMap[oldKey] = null;\r\n      } else if (oldIdxMapValLen === 1 && newIdxMapValLen > 1) {\r\n        this._updateOneToMany && this._updateOneToMany(newIdxMapVal, oldIdxMapVal);\r\n        newDataIndexMap[oldKey] = null;\r\n      } else if (oldIdxMapValLen === 1 && newIdxMapValLen === 1) {\r\n        this._update && this._update(newIdxMapVal, oldIdxMapVal);\r\n        newDataIndexMap[oldKey] = null;\r\n      } else if (oldIdxMapValLen > 1 && newIdxMapValLen > 1) {\r\n        this._updateManyToMany && this._updateManyToMany(newIdxMapVal, oldIdxMapVal);\r\n        newDataIndexMap[oldKey] = null;\r\n      } else if (oldIdxMapValLen > 1) {\r\n        for (var i_1 = 0; i_1 < oldIdxMapValLen; i_1++) {\r\n          this._remove && this._remove(oldIdxMapVal[i_1]);\r\n        }\r\n      } else {\r\n        this._remove && this._remove(oldIdxMapVal);\r\n      }\r\n    }\r\n    this._performRestAdd(newDataKeyArr, newDataIndexMap);\r\n  };\r\n  DataDiffer.prototype._performRestAdd = function (newDataKeyArr, newDataIndexMap) {\r\n    for (var i = 0; i < newDataKeyArr.length; i++) {\r\n      var newKey = newDataKeyArr[i];\r\n      var newIdxMapVal = newDataIndexMap[newKey];\r\n      var idxMapValLen = dataIndexMapValueLength(newIdxMapVal);\r\n      if (idxMapValLen > 1) {\r\n        for (var j = 0; j < idxMapValLen; j++) {\r\n          this._add && this._add(newIdxMapVal[j]);\r\n        }\r\n      } else if (idxMapValLen === 1) {\r\n        this._add && this._add(newIdxMapVal);\r\n      }\r\n      // Support both `newDataKeyArr` are duplication removed or not removed.\r\n      newDataIndexMap[newKey] = null;\r\n    }\r\n  };\r\n  DataDiffer.prototype._initIndexMap = function (arr,\r\n  // Can be null.\r\n  map,\r\n  // In 'byKey', the output `keyArr` is duplication removed.\r\n  // In 'byIndex', the output `keyArr` is not duplication removed and\r\n  //     its indices are accurately corresponding to `arr`.\r\n  keyArr, keyGetterName) {\r\n    var cbModeMultiple = this._diffModeMultiple;\r\n    for (var i = 0; i < arr.length; i++) {\r\n      // Add prefix to avoid conflict with Object.prototype.\r\n      var key = '_ec_' + this[keyGetterName](arr[i], i);\r\n      if (!cbModeMultiple) {\r\n        keyArr[i] = key;\r\n      }\r\n      if (!map) {\r\n        continue;\r\n      }\r\n      var idxMapVal = map[key];\r\n      var idxMapValLen = dataIndexMapValueLength(idxMapVal);\r\n      if (idxMapValLen === 0) {\r\n        // Simple optimize: in most cases, one index has one key,\r\n        // do not need array.\r\n        map[key] = i;\r\n        if (cbModeMultiple) {\r\n          keyArr.push(key);\r\n        }\r\n      } else if (idxMapValLen === 1) {\r\n        map[key] = [idxMapVal, i];\r\n      } else {\r\n        idxMapVal.push(i);\r\n      }\r\n    }\r\n  };\r\n  return DataDiffer;\r\n}();\r\nexport default DataDiffer;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { each, createHashMap, assert, map } from 'zrender/lib/core/util.js';\r\nimport { VISUAL_DIMENSIONS } from '../../util/types.js';\r\nvar DimensionUserOuput = /** @class */function () {\r\n  function DimensionUserOuput(encode, dimRequest) {\r\n    this._encode = encode;\r\n    this._schema = dimRequest;\r\n  }\r\n  DimensionUserOuput.prototype.get = function () {\r\n    return {\r\n      // Do not generate full dimension name until fist used.\r\n      fullDimensions: this._getFullDimensionNames(),\r\n      encode: this._encode\r\n    };\r\n  };\r\n  /**\r\n   * Get all data store dimension names.\r\n   * Theoretically a series data store is defined both by series and used dataset (if any).\r\n   * If some dimensions are omitted for performance reason in `this.dimensions`,\r\n   * the dimension name may not be auto-generated if user does not specify a dimension name.\r\n   * In this case, the dimension name is `null`/`undefined`.\r\n   */\r\n  DimensionUserOuput.prototype._getFullDimensionNames = function () {\r\n    if (!this._cachedDimNames) {\r\n      this._cachedDimNames = this._schema ? this._schema.makeOutputDimensionNames() : [];\r\n    }\r\n    return this._cachedDimNames;\r\n  };\r\n  return DimensionUserOuput;\r\n}();\r\n;\r\nexport function summarizeDimensions(data, schema) {\r\n  var summary = {};\r\n  var encode = summary.encode = {};\r\n  var notExtraCoordDimMap = createHashMap();\r\n  var defaultedLabel = [];\r\n  var defaultedTooltip = [];\r\n  var userOutputEncode = {};\r\n  each(data.dimensions, function (dimName) {\r\n    var dimItem = data.getDimensionInfo(dimName);\r\n    var coordDim = dimItem.coordDim;\r\n    if (coordDim) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        assert(VISUAL_DIMENSIONS.get(coordDim) == null);\r\n      }\r\n      var coordDimIndex = dimItem.coordDimIndex;\r\n      getOrCreateEncodeArr(encode, coordDim)[coordDimIndex] = dimName;\r\n      if (!dimItem.isExtraCoord) {\r\n        notExtraCoordDimMap.set(coordDim, 1);\r\n        // Use the last coord dim (and label friendly) as default label,\r\n        // because when dataset is used, it is hard to guess which dimension\r\n        // can be value dimension. If both show x, y on label is not look good,\r\n        // and conventionally y axis is focused more.\r\n        if (mayLabelDimType(dimItem.type)) {\r\n          defaultedLabel[0] = dimName;\r\n        }\r\n        // User output encode do not contain generated coords.\r\n        // And it only has index. User can use index to retrieve value from the raw item array.\r\n        getOrCreateEncodeArr(userOutputEncode, coordDim)[coordDimIndex] = data.getDimensionIndex(dimItem.name);\r\n      }\r\n      if (dimItem.defaultTooltip) {\r\n        defaultedTooltip.push(dimName);\r\n      }\r\n    }\r\n    VISUAL_DIMENSIONS.each(function (v, otherDim) {\r\n      var encodeArr = getOrCreateEncodeArr(encode, otherDim);\r\n      var dimIndex = dimItem.otherDims[otherDim];\r\n      if (dimIndex != null && dimIndex !== false) {\r\n        encodeArr[dimIndex] = dimItem.name;\r\n      }\r\n    });\r\n  });\r\n  var dataDimsOnCoord = [];\r\n  var encodeFirstDimNotExtra = {};\r\n  notExtraCoordDimMap.each(function (v, coordDim) {\r\n    var dimArr = encode[coordDim];\r\n    encodeFirstDimNotExtra[coordDim] = dimArr[0];\r\n    // Not necessary to remove duplicate, because a data\r\n    // dim canot on more than one coordDim.\r\n    dataDimsOnCoord = dataDimsOnCoord.concat(dimArr);\r\n  });\r\n  summary.dataDimsOnCoord = dataDimsOnCoord;\r\n  summary.dataDimIndicesOnCoord = map(dataDimsOnCoord, function (dimName) {\r\n    return data.getDimensionInfo(dimName).storeDimIndex;\r\n  });\r\n  summary.encodeFirstDimNotExtra = encodeFirstDimNotExtra;\r\n  var encodeLabel = encode.label;\r\n  // FIXME `encode.label` is not recommended, because formatter cannot be set\r\n  // in this way. Use label.formatter instead. Maybe remove this approach someday.\r\n  if (encodeLabel && encodeLabel.length) {\r\n    defaultedLabel = encodeLabel.slice();\r\n  }\r\n  var encodeTooltip = encode.tooltip;\r\n  if (encodeTooltip && encodeTooltip.length) {\r\n    defaultedTooltip = encodeTooltip.slice();\r\n  } else if (!defaultedTooltip.length) {\r\n    defaultedTooltip = defaultedLabel.slice();\r\n  }\r\n  encode.defaultedLabel = defaultedLabel;\r\n  encode.defaultedTooltip = defaultedTooltip;\r\n  summary.userOutput = new DimensionUserOuput(userOutputEncode, schema);\r\n  return summary;\r\n}\r\nfunction getOrCreateEncodeArr(encode, dim) {\r\n  if (!encode.hasOwnProperty(dim)) {\r\n    encode[dim] = [];\r\n  }\r\n  return encode[dim];\r\n}\r\n// FIXME:TS should be type `AxisType`\r\nexport function getDimensionTypeByAxis(axisType) {\r\n  return axisType === 'category' ? 'ordinal' : axisType === 'time' ? 'time' : 'float';\r\n}\r\nfunction mayLabelDimType(dimType) {\r\n  // In most cases, ordinal and time do not suitable for label.\r\n  // Ordinal info can be displayed on axis. Time is too long.\r\n  return !(dimType === 'ordinal' || dimType === 'time');\r\n}\r\n// function findTheLastDimMayLabel(data) {\r\n//     // Get last value dim\r\n//     let dimensions = data.dimensions.slice();\r\n//     let valueType;\r\n//     let valueDim;\r\n//     while (dimensions.length && (\r\n//         valueDim = dimensions.pop(),\r\n//         valueType = data.getDimensionInfo(valueDim).type,\r\n//         valueType === 'ordinal' || valueType === 'time'\r\n//     )) {} // jshint ignore:line\r\n//     return valueDim;\r\n// }", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nvar SeriesDimensionDefine = /** @class */function () {\r\n  /**\r\n   * @param opt All of the fields will be shallow copied.\r\n   */\r\n  function SeriesDimensionDefine(opt) {\r\n    /**\r\n     * The format of `otherDims` is:\r\n     * ```js\r\n     * {\r\n     *     tooltip?: number\r\n     *     label?: number\r\n     *     itemName?: number\r\n     *     seriesName?: number\r\n     * }\r\n     * ```\r\n     *\r\n     * A `series.encode` can specified these fields:\r\n     * ```js\r\n     * encode: {\r\n     *     // \"3, 1, 5\" is the index of data dimension.\r\n     *     tooltip: [3, 1, 5],\r\n     *     label: [0, 3],\r\n     *     ...\r\n     * }\r\n     * ```\r\n     * `otherDims` is the parse result of the `series.encode` above, like:\r\n     * ```js\r\n     * // Suppose the index of this data dimension is `3`.\r\n     * this.otherDims = {\r\n     *     // `3` is at the index `0` of the `encode.tooltip`\r\n     *     tooltip: 0,\r\n     *     // `3` is at the index `1` of the `encode.label`\r\n     *     label: 1\r\n     * };\r\n     * ```\r\n     *\r\n     * This prop should never be `null`/`undefined` after initialized.\r\n     */\r\n    this.otherDims = {};\r\n    if (opt != null) {\r\n      zrUtil.extend(this, opt);\r\n    }\r\n  }\r\n  return SeriesDimensionDefine;\r\n}();\r\n;\r\nexport default SeriesDimensionDefine;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n/* global Int32Array */\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport Model from '../model/Model.js';\r\nimport DataDiffer from './DataDiffer.js';\r\nimport { DefaultDataProvider } from './helper/dataProvider.js';\r\nimport { summarizeDimensions } from './helper/dimensionHelper.js';\r\nimport SeriesDimensionDefine from './SeriesDimensionDefine.js';\r\nimport { SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ORIGINAL } from '../util/types.js';\r\nimport { convertOptionIdName, isDataItemOption } from '../util/model.js';\r\nimport { setCommonECData } from '../util/innerStore.js';\r\nimport { isSourceInstance } from './Source.js';\r\nimport DataStore from './DataStore.js';\r\nimport { isSeriesDataSchema } from './helper/SeriesDataSchema.js';\r\nvar isObject = zrUtil.isObject;\r\nvar map = zrUtil.map;\r\nvar CtorInt32Array = typeof Int32Array === 'undefined' ? Array : Int32Array;\r\n// Use prefix to avoid index to be the same as otherIdList[idx],\r\n// which will cause weird update animation.\r\nvar ID_PREFIX = 'e\\0\\0';\r\nvar INDEX_NOT_FOUND = -1;\r\n// type SeriesDimensionIndex = DimensionIndex;\r\nvar TRANSFERABLE_PROPERTIES = ['hasItemOption', '_nameList', '_idList', '_invertedIndicesMap', '_dimSummary', 'userOutput', '_rawData', '_dimValueGetter', '_nameDimIdx', '_idDimIdx', '_nameRepeatCount'];\r\nvar CLONE_PROPERTIES = ['_approximateExtent'];\r\n// -----------------------------\r\n// Internal method declarations:\r\n// -----------------------------\r\nvar prepareInvertedIndex;\r\nvar getId;\r\nvar getIdNameFromStore;\r\nvar normalizeDimensions;\r\nvar transferProperties;\r\nvar cloneListForMapAndSample;\r\nvar makeIdFromName;\r\nvar SeriesData = /** @class */function () {\r\n  /**\r\n   * @param dimensionsInput.dimensions\r\n   *        For example, ['someDimName', {name: 'someDimName', type: 'someDimType'}, ...].\r\n   *        Dimensions should be concrete names like x, y, z, lng, lat, angle, radius\r\n   */\r\n  function SeriesData(dimensionsInput, hostModel) {\r\n    this.type = 'list';\r\n    this._dimOmitted = false;\r\n    this._nameList = [];\r\n    this._idList = [];\r\n    // Models of data option is stored sparse for optimizing memory cost\r\n    // Never used yet (not used yet).\r\n    // private _optionModels: Model[] = [];\r\n    // Global visual properties after visual coding\r\n    this._visual = {};\r\n    // Global layout properties.\r\n    this._layout = {};\r\n    // Item visual properties after visual coding\r\n    this._itemVisuals = [];\r\n    // Item layout properties after layout\r\n    this._itemLayouts = [];\r\n    // Graphic elements\r\n    this._graphicEls = [];\r\n    // key: dim, value: extent\r\n    this._approximateExtent = {};\r\n    this._calculationInfo = {};\r\n    // Having detected that there is data item is non primitive type\r\n    // (in type `OptionDataItemObject`).\r\n    // Like `data: [ { value: xx, itemStyle: {...} }, ...]`\r\n    // At present it only happen in `SOURCE_FORMAT_ORIGINAL`.\r\n    this.hasItemOption = false;\r\n    // Methods that create a new list based on this list should be listed here.\r\n    // Notice that those method should `RETURN` the new list.\r\n    this.TRANSFERABLE_METHODS = ['cloneShallow', 'downSample', 'minmaxDownSample', 'lttbDownSample', 'map'];\r\n    // Methods that change indices of this list should be listed here.\r\n    this.CHANGABLE_METHODS = ['filterSelf', 'selectRange'];\r\n    this.DOWNSAMPLE_METHODS = ['downSample', 'minmaxDownSample', 'lttbDownSample'];\r\n    var dimensions;\r\n    var assignStoreDimIdx = false;\r\n    if (isSeriesDataSchema(dimensionsInput)) {\r\n      dimensions = dimensionsInput.dimensions;\r\n      this._dimOmitted = dimensionsInput.isDimensionOmitted();\r\n      this._schema = dimensionsInput;\r\n    } else {\r\n      assignStoreDimIdx = true;\r\n      dimensions = dimensionsInput;\r\n    }\r\n    dimensions = dimensions || ['x', 'y'];\r\n    var dimensionInfos = {};\r\n    var dimensionNames = [];\r\n    var invertedIndicesMap = {};\r\n    var needsHasOwn = false;\r\n    var emptyObj = {};\r\n    for (var i = 0; i < dimensions.length; i++) {\r\n      // Use the original dimensions[i], where other flag props may exists.\r\n      var dimInfoInput = dimensions[i];\r\n      var dimensionInfo = zrUtil.isString(dimInfoInput) ? new SeriesDimensionDefine({\r\n        name: dimInfoInput\r\n      }) : !(dimInfoInput instanceof SeriesDimensionDefine) ? new SeriesDimensionDefine(dimInfoInput) : dimInfoInput;\r\n      var dimensionName = dimensionInfo.name;\r\n      dimensionInfo.type = dimensionInfo.type || 'float';\r\n      if (!dimensionInfo.coordDim) {\r\n        dimensionInfo.coordDim = dimensionName;\r\n        dimensionInfo.coordDimIndex = 0;\r\n      }\r\n      var otherDims = dimensionInfo.otherDims = dimensionInfo.otherDims || {};\r\n      dimensionNames.push(dimensionName);\r\n      dimensionInfos[dimensionName] = dimensionInfo;\r\n      if (emptyObj[dimensionName] != null) {\r\n        needsHasOwn = true;\r\n      }\r\n      if (dimensionInfo.createInvertedIndices) {\r\n        invertedIndicesMap[dimensionName] = [];\r\n      }\r\n      if (otherDims.itemName === 0) {\r\n        this._nameDimIdx = i;\r\n      }\r\n      if (otherDims.itemId === 0) {\r\n        this._idDimIdx = i;\r\n      }\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        zrUtil.assert(assignStoreDimIdx || dimensionInfo.storeDimIndex >= 0);\r\n      }\r\n      if (assignStoreDimIdx) {\r\n        dimensionInfo.storeDimIndex = i;\r\n      }\r\n    }\r\n    this.dimensions = dimensionNames;\r\n    this._dimInfos = dimensionInfos;\r\n    this._initGetDimensionInfo(needsHasOwn);\r\n    this.hostModel = hostModel;\r\n    this._invertedIndicesMap = invertedIndicesMap;\r\n    if (this._dimOmitted) {\r\n      var dimIdxToName_1 = this._dimIdxToName = zrUtil.createHashMap();\r\n      zrUtil.each(dimensionNames, function (dimName) {\r\n        dimIdxToName_1.set(dimensionInfos[dimName].storeDimIndex, dimName);\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   *\r\n   * Get concrete dimension name by dimension name or dimension index.\r\n   * If input a dimension name, do not validate whether the dimension name exits.\r\n   *\r\n   * @caution\r\n   * @param dim Must make sure the dimension is `SeriesDimensionLoose`.\r\n   * Because only those dimensions will have auto-generated dimension names if not\r\n   * have a user-specified name, and other dimensions will get a return of null/undefined.\r\n   *\r\n   * @notice Because of this reason, should better use `getDimensionIndex` instead, for examples:\r\n   * ```js\r\n   * const val = data.getStore().get(data.getDimensionIndex(dim), dataIdx);\r\n   * ```\r\n   *\r\n   * @return Concrete dim name.\r\n   */\r\n  SeriesData.prototype.getDimension = function (dim) {\r\n    var dimIdx = this._recognizeDimIndex(dim);\r\n    if (dimIdx == null) {\r\n      return dim;\r\n    }\r\n    dimIdx = dim;\r\n    if (!this._dimOmitted) {\r\n      return this.dimensions[dimIdx];\r\n    }\r\n    // Retrieve from series dimension definition because it probably contains\r\n    // generated dimension name (like 'x', 'y').\r\n    var dimName = this._dimIdxToName.get(dimIdx);\r\n    if (dimName != null) {\r\n      return dimName;\r\n    }\r\n    var sourceDimDef = this._schema.getSourceDimension(dimIdx);\r\n    if (sourceDimDef) {\r\n      return sourceDimDef.name;\r\n    }\r\n  };\r\n  /**\r\n   * Get dimension index in data store. Return -1 if not found.\r\n   * Can be used to index value from getRawValue.\r\n   */\r\n  SeriesData.prototype.getDimensionIndex = function (dim) {\r\n    var dimIdx = this._recognizeDimIndex(dim);\r\n    if (dimIdx != null) {\r\n      return dimIdx;\r\n    }\r\n    if (dim == null) {\r\n      return -1;\r\n    }\r\n    var dimInfo = this._getDimInfo(dim);\r\n    return dimInfo ? dimInfo.storeDimIndex : this._dimOmitted ? this._schema.getSourceDimensionIndex(dim) : -1;\r\n  };\r\n  /**\r\n   * The meanings of the input parameter `dim`:\r\n   *\r\n   * + If dim is a number (e.g., `1`), it means the index of the dimension.\r\n   *   For example, `getDimension(0)` will return 'x' or 'lng' or 'radius'.\r\n   * + If dim is a number-like string (e.g., `\"1\"`):\r\n   *     + If there is the same concrete dim name defined in `series.dimensions` or `dataset.dimensions`,\r\n   *        it means that concrete name.\r\n   *     + If not, it will be converted to a number, which means the index of the dimension.\r\n   *        (why? because of the backward compatibility. We have been tolerating number-like string in\r\n   *        dimension setting, although now it seems that it is not a good idea.)\r\n   *     For example, `visualMap[i].dimension: \"1\"` is the same meaning as `visualMap[i].dimension: 1`,\r\n   *     if no dimension name is defined as `\"1\"`.\r\n   * + If dim is a not-number-like string, it means the concrete dim name.\r\n   *   For example, it can be be default name `\"x\"`, `\"y\"`, `\"z\"`, `\"lng\"`, `\"lat\"`, `\"angle\"`, `\"radius\"`,\r\n   *   or customized in `dimensions` property of option like `\"age\"`.\r\n   *\r\n   * @return recognized `DimensionIndex`. Otherwise return null/undefined (means that dim is `DimensionName`).\r\n   */\r\n  SeriesData.prototype._recognizeDimIndex = function (dim) {\r\n    if (zrUtil.isNumber(dim)\r\n    // If being a number-like string but not being defined as a dimension name.\r\n    || dim != null && !isNaN(dim) && !this._getDimInfo(dim) && (!this._dimOmitted || this._schema.getSourceDimensionIndex(dim) < 0)) {\r\n      return +dim;\r\n    }\r\n  };\r\n  SeriesData.prototype._getStoreDimIndex = function (dim) {\r\n    var dimIdx = this.getDimensionIndex(dim);\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      if (dimIdx == null) {\r\n        throw new Error('Unknown dimension ' + dim);\r\n      }\r\n    }\r\n    return dimIdx;\r\n  };\r\n  /**\r\n   * Get type and calculation info of particular dimension\r\n   * @param dim\r\n   *        Dimension can be concrete names like x, y, z, lng, lat, angle, radius\r\n   *        Or a ordinal number. For example getDimensionInfo(0) will return 'x' or 'lng' or 'radius'\r\n   */\r\n  SeriesData.prototype.getDimensionInfo = function (dim) {\r\n    // Do not clone, because there may be categories in dimInfo.\r\n    return this._getDimInfo(this.getDimension(dim));\r\n  };\r\n  SeriesData.prototype._initGetDimensionInfo = function (needsHasOwn) {\r\n    var dimensionInfos = this._dimInfos;\r\n    this._getDimInfo = needsHasOwn ? function (dimName) {\r\n      return dimensionInfos.hasOwnProperty(dimName) ? dimensionInfos[dimName] : undefined;\r\n    } : function (dimName) {\r\n      return dimensionInfos[dimName];\r\n    };\r\n  };\r\n  /**\r\n   * concrete dimension name list on coord.\r\n   */\r\n  SeriesData.prototype.getDimensionsOnCoord = function () {\r\n    return this._dimSummary.dataDimsOnCoord.slice();\r\n  };\r\n  SeriesData.prototype.mapDimension = function (coordDim, idx) {\r\n    var dimensionsSummary = this._dimSummary;\r\n    if (idx == null) {\r\n      return dimensionsSummary.encodeFirstDimNotExtra[coordDim];\r\n    }\r\n    var dims = dimensionsSummary.encode[coordDim];\r\n    return dims ? dims[idx] : null;\r\n  };\r\n  SeriesData.prototype.mapDimensionsAll = function (coordDim) {\r\n    var dimensionsSummary = this._dimSummary;\r\n    var dims = dimensionsSummary.encode[coordDim];\r\n    return (dims || []).slice();\r\n  };\r\n  SeriesData.prototype.getStore = function () {\r\n    return this._store;\r\n  };\r\n  /**\r\n   * Initialize from data\r\n   * @param data source or data or data store.\r\n   * @param nameList The name of a datum is used on data diff and\r\n   *        default label/tooltip.\r\n   *        A name can be specified in encode.itemName,\r\n   *        or dataItem.name (only for series option data),\r\n   *        or provided in nameList from outside.\r\n   */\r\n  SeriesData.prototype.initData = function (data, nameList, dimValueGetter) {\r\n    var _this = this;\r\n    var store;\r\n    if (data instanceof DataStore) {\r\n      store = data;\r\n    }\r\n    if (!store) {\r\n      var dimensions = this.dimensions;\r\n      var provider = isSourceInstance(data) || zrUtil.isArrayLike(data) ? new DefaultDataProvider(data, dimensions.length) : data;\r\n      store = new DataStore();\r\n      var dimensionInfos = map(dimensions, function (dimName) {\r\n        return {\r\n          type: _this._dimInfos[dimName].type,\r\n          property: dimName\r\n        };\r\n      });\r\n      store.initData(provider, dimensionInfos, dimValueGetter);\r\n    }\r\n    this._store = store;\r\n    // Reset\r\n    this._nameList = (nameList || []).slice();\r\n    this._idList = [];\r\n    this._nameRepeatCount = {};\r\n    this._doInit(0, store.count());\r\n    // Cache summary info for fast visit. See \"dimensionHelper\".\r\n    // Needs to be initialized after store is prepared.\r\n    this._dimSummary = summarizeDimensions(this, this._schema);\r\n    this.userOutput = this._dimSummary.userOutput;\r\n  };\r\n  /**\r\n   * Caution: Can be only called on raw data (before `this._indices` created).\r\n   */\r\n  SeriesData.prototype.appendData = function (data) {\r\n    var range = this._store.appendData(data);\r\n    this._doInit(range[0], range[1]);\r\n  };\r\n  /**\r\n   * Caution: Can be only called on raw data (before `this._indices` created).\r\n   * This method does not modify `rawData` (`dataProvider`), but only\r\n   * add values to store.\r\n   *\r\n   * The final count will be increased by `Math.max(values.length, names.length)`.\r\n   *\r\n   * @param values That is the SourceType: 'arrayRows', like\r\n   *        [\r\n   *            [12, 33, 44],\r\n   *            [NaN, 43, 1],\r\n   *            ['-', 'asdf', 0]\r\n   *        ]\r\n   *        Each item is exactly corresponding to a dimension.\r\n   */\r\n  SeriesData.prototype.appendValues = function (values, names) {\r\n    var _a = this._store.appendValues(values, names && names.length),\r\n      start = _a.start,\r\n      end = _a.end;\r\n    var shouldMakeIdFromName = this._shouldMakeIdFromName();\r\n    this._updateOrdinalMeta();\r\n    if (names) {\r\n      for (var idx = start; idx < end; idx++) {\r\n        var sourceIdx = idx - start;\r\n        this._nameList[idx] = names[sourceIdx];\r\n        if (shouldMakeIdFromName) {\r\n          makeIdFromName(this, idx);\r\n        }\r\n      }\r\n    }\r\n  };\r\n  SeriesData.prototype._updateOrdinalMeta = function () {\r\n    var store = this._store;\r\n    var dimensions = this.dimensions;\r\n    for (var i = 0; i < dimensions.length; i++) {\r\n      var dimInfo = this._dimInfos[dimensions[i]];\r\n      if (dimInfo.ordinalMeta) {\r\n        store.collectOrdinalMeta(dimInfo.storeDimIndex, dimInfo.ordinalMeta);\r\n      }\r\n    }\r\n  };\r\n  SeriesData.prototype._shouldMakeIdFromName = function () {\r\n    var provider = this._store.getProvider();\r\n    return this._idDimIdx == null && provider.getSource().sourceFormat !== SOURCE_FORMAT_TYPED_ARRAY && !provider.fillStorage;\r\n  };\r\n  SeriesData.prototype._doInit = function (start, end) {\r\n    if (start >= end) {\r\n      return;\r\n    }\r\n    var store = this._store;\r\n    var provider = store.getProvider();\r\n    this._updateOrdinalMeta();\r\n    var nameList = this._nameList;\r\n    var idList = this._idList;\r\n    var sourceFormat = provider.getSource().sourceFormat;\r\n    var isFormatOriginal = sourceFormat === SOURCE_FORMAT_ORIGINAL;\r\n    // Each data item is value\r\n    // [1, 2]\r\n    // 2\r\n    // Bar chart, line chart which uses category axis\r\n    // only gives the 'y' value. 'x' value is the indices of category\r\n    // Use a tempValue to normalize the value to be a (x, y) value\r\n    // If dataItem is {name: ...} or {id: ...}, it has highest priority.\r\n    // This kind of ids and names are always stored `_nameList` and `_idList`.\r\n    if (isFormatOriginal && !provider.pure) {\r\n      var sharedDataItem = [];\r\n      for (var idx = start; idx < end; idx++) {\r\n        // NOTICE: Try not to write things into dataItem\r\n        var dataItem = provider.getItem(idx, sharedDataItem);\r\n        if (!this.hasItemOption && isDataItemOption(dataItem)) {\r\n          this.hasItemOption = true;\r\n        }\r\n        if (dataItem) {\r\n          var itemName = dataItem.name;\r\n          if (nameList[idx] == null && itemName != null) {\r\n            nameList[idx] = convertOptionIdName(itemName, null);\r\n          }\r\n          var itemId = dataItem.id;\r\n          if (idList[idx] == null && itemId != null) {\r\n            idList[idx] = convertOptionIdName(itemId, null);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (this._shouldMakeIdFromName()) {\r\n      for (var idx = start; idx < end; idx++) {\r\n        makeIdFromName(this, idx);\r\n      }\r\n    }\r\n    prepareInvertedIndex(this);\r\n  };\r\n  /**\r\n   * PENDING: In fact currently this function is only used to short-circuit\r\n   * the calling of `scale.unionExtentFromData` when data have been filtered by modules\r\n   * like \"dataZoom\". `scale.unionExtentFromData` is used to calculate data extent for series on\r\n   * an axis, but if a \"axis related data filter module\" is used, the extent of the axis have\r\n   * been fixed and no need to calling `scale.unionExtentFromData` actually.\r\n   * But if we add \"custom data filter\" in future, which is not \"axis related\", this method may\r\n   * be still needed.\r\n   *\r\n   * Optimize for the scenario that data is filtered by a given extent.\r\n   * Consider that if data amount is more than hundreds of thousand,\r\n   * extent calculation will cost more than 10ms and the cache will\r\n   * be erased because of the filtering.\r\n   */\r\n  SeriesData.prototype.getApproximateExtent = function (dim) {\r\n    return this._approximateExtent[dim] || this._store.getDataExtent(this._getStoreDimIndex(dim));\r\n  };\r\n  /**\r\n   * Calculate extent on a filtered data might be time consuming.\r\n   * Approximate extent is only used for: calculate extent of filtered data outside.\r\n   */\r\n  SeriesData.prototype.setApproximateExtent = function (extent, dim) {\r\n    dim = this.getDimension(dim);\r\n    this._approximateExtent[dim] = extent.slice();\r\n  };\r\n  SeriesData.prototype.getCalculationInfo = function (key) {\r\n    return this._calculationInfo[key];\r\n  };\r\n  SeriesData.prototype.setCalculationInfo = function (key, value) {\r\n    isObject(key) ? zrUtil.extend(this._calculationInfo, key) : this._calculationInfo[key] = value;\r\n  };\r\n  /**\r\n   * @return Never be null/undefined. `number` will be converted to string. Because:\r\n   * In most cases, name is used in display, where returning a string is more convenient.\r\n   * In other cases, name is used in query (see `indexOfName`), where we can keep the\r\n   * rule that name `2` equals to name `'2'`.\r\n   */\r\n  SeriesData.prototype.getName = function (idx) {\r\n    var rawIndex = this.getRawIndex(idx);\r\n    var name = this._nameList[rawIndex];\r\n    if (name == null && this._nameDimIdx != null) {\r\n      name = getIdNameFromStore(this, this._nameDimIdx, rawIndex);\r\n    }\r\n    if (name == null) {\r\n      name = '';\r\n    }\r\n    return name;\r\n  };\r\n  SeriesData.prototype._getCategory = function (dimIdx, idx) {\r\n    var ordinal = this._store.get(dimIdx, idx);\r\n    var ordinalMeta = this._store.getOrdinalMeta(dimIdx);\r\n    if (ordinalMeta) {\r\n      return ordinalMeta.categories[ordinal];\r\n    }\r\n    return ordinal;\r\n  };\r\n  /**\r\n   * @return Never null/undefined. `number` will be converted to string. Because:\r\n   * In all cases having encountered at present, id is used in making diff comparison, which\r\n   * are usually based on hash map. We can keep the rule that the internal id are always string\r\n   * (treat `2` is the same as `'2'`) to make the related logic simple.\r\n   */\r\n  SeriesData.prototype.getId = function (idx) {\r\n    return getId(this, this.getRawIndex(idx));\r\n  };\r\n  SeriesData.prototype.count = function () {\r\n    return this._store.count();\r\n  };\r\n  /**\r\n   * Get value. Return NaN if idx is out of range.\r\n   *\r\n   * @notice Should better to use `data.getStore().get(dimIndex, dataIdx)` instead.\r\n   */\r\n  SeriesData.prototype.get = function (dim, idx) {\r\n    var store = this._store;\r\n    var dimInfo = this._dimInfos[dim];\r\n    if (dimInfo) {\r\n      return store.get(dimInfo.storeDimIndex, idx);\r\n    }\r\n  };\r\n  /**\r\n   * @notice Should better to use `data.getStore().getByRawIndex(dimIndex, dataIdx)` instead.\r\n   */\r\n  SeriesData.prototype.getByRawIndex = function (dim, rawIdx) {\r\n    var store = this._store;\r\n    var dimInfo = this._dimInfos[dim];\r\n    if (dimInfo) {\r\n      return store.getByRawIndex(dimInfo.storeDimIndex, rawIdx);\r\n    }\r\n  };\r\n  SeriesData.prototype.getIndices = function () {\r\n    return this._store.getIndices();\r\n  };\r\n  SeriesData.prototype.getDataExtent = function (dim) {\r\n    return this._store.getDataExtent(this._getStoreDimIndex(dim));\r\n  };\r\n  SeriesData.prototype.getSum = function (dim) {\r\n    return this._store.getSum(this._getStoreDimIndex(dim));\r\n  };\r\n  SeriesData.prototype.getMedian = function (dim) {\r\n    return this._store.getMedian(this._getStoreDimIndex(dim));\r\n  };\r\n  SeriesData.prototype.getValues = function (dimensions, idx) {\r\n    var _this = this;\r\n    var store = this._store;\r\n    return zrUtil.isArray(dimensions) ? store.getValues(map(dimensions, function (dim) {\r\n      return _this._getStoreDimIndex(dim);\r\n    }), idx) : store.getValues(dimensions);\r\n  };\r\n  /**\r\n   * If value is NaN. Including '-'\r\n   * Only check the coord dimensions.\r\n   */\r\n  SeriesData.prototype.hasValue = function (idx) {\r\n    var dataDimIndicesOnCoord = this._dimSummary.dataDimIndicesOnCoord;\r\n    for (var i = 0, len = dataDimIndicesOnCoord.length; i < len; i++) {\r\n      // Ordinal type originally can be string or number.\r\n      // But when an ordinal type is used on coord, it can\r\n      // not be string but only number. So we can also use isNaN.\r\n      if (isNaN(this._store.get(dataDimIndicesOnCoord[i], idx))) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n  /**\r\n   * Retrieve the index with given name\r\n   */\r\n  SeriesData.prototype.indexOfName = function (name) {\r\n    for (var i = 0, len = this._store.count(); i < len; i++) {\r\n      if (this.getName(i) === name) {\r\n        return i;\r\n      }\r\n    }\r\n    return -1;\r\n  };\r\n  SeriesData.prototype.getRawIndex = function (idx) {\r\n    return this._store.getRawIndex(idx);\r\n  };\r\n  SeriesData.prototype.indexOfRawIndex = function (rawIndex) {\r\n    return this._store.indexOfRawIndex(rawIndex);\r\n  };\r\n  /**\r\n   * Only support the dimension which inverted index created.\r\n   * Do not support other cases until required.\r\n   * @param dim concrete dim\r\n   * @param value ordinal index\r\n   * @return rawIndex\r\n   */\r\n  SeriesData.prototype.rawIndexOf = function (dim, value) {\r\n    var invertedIndices = dim && this._invertedIndicesMap[dim];\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      if (!invertedIndices) {\r\n        throw new Error('Do not supported yet');\r\n      }\r\n    }\r\n    var rawIndex = invertedIndices && invertedIndices[value];\r\n    if (rawIndex == null || isNaN(rawIndex)) {\r\n      return INDEX_NOT_FOUND;\r\n    }\r\n    return rawIndex;\r\n  };\r\n  /**\r\n   * Retrieve the index of nearest value\r\n   * @param dim\r\n   * @param value\r\n   * @param [maxDistance=Infinity]\r\n   * @return If and only if multiple indices has\r\n   *         the same value, they are put to the result.\r\n   */\r\n  SeriesData.prototype.indicesOfNearest = function (dim, value, maxDistance) {\r\n    return this._store.indicesOfNearest(this._getStoreDimIndex(dim), value, maxDistance);\r\n  };\r\n  SeriesData.prototype.each = function (dims, cb, ctx) {\r\n    'use strict';\r\n\r\n    if (zrUtil.isFunction(dims)) {\r\n      ctx = cb;\r\n      cb = dims;\r\n      dims = [];\r\n    }\r\n    // ctxCompat just for compat echarts3\r\n    var fCtx = ctx || this;\r\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\r\n    this._store.each(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\r\n  };\r\n  SeriesData.prototype.filterSelf = function (dims, cb, ctx) {\r\n    'use strict';\r\n\r\n    if (zrUtil.isFunction(dims)) {\r\n      ctx = cb;\r\n      cb = dims;\r\n      dims = [];\r\n    }\r\n    // ctxCompat just for compat echarts3\r\n    var fCtx = ctx || this;\r\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\r\n    this._store = this._store.filter(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\r\n    return this;\r\n  };\r\n  /**\r\n   * Select data in range. (For optimization of filter)\r\n   * (Manually inline code, support 5 million data filtering in data zoom.)\r\n   */\r\n  SeriesData.prototype.selectRange = function (range) {\r\n    'use strict';\r\n\r\n    var _this = this;\r\n    var innerRange = {};\r\n    var dims = zrUtil.keys(range);\r\n    var dimIndices = [];\r\n    zrUtil.each(dims, function (dim) {\r\n      var dimIdx = _this._getStoreDimIndex(dim);\r\n      innerRange[dimIdx] = range[dim];\r\n      dimIndices.push(dimIdx);\r\n    });\r\n    this._store = this._store.selectRange(innerRange);\r\n    return this;\r\n  };\r\n  /* eslint-enable max-len */\r\n  SeriesData.prototype.mapArray = function (dims, cb, ctx) {\r\n    'use strict';\r\n\r\n    if (zrUtil.isFunction(dims)) {\r\n      ctx = cb;\r\n      cb = dims;\r\n      dims = [];\r\n    }\r\n    // ctxCompat just for compat echarts3\r\n    ctx = ctx || this;\r\n    var result = [];\r\n    this.each(dims, function () {\r\n      result.push(cb && cb.apply(this, arguments));\r\n    }, ctx);\r\n    return result;\r\n  };\r\n  SeriesData.prototype.map = function (dims, cb, ctx, ctxCompat) {\r\n    'use strict';\r\n\r\n    // ctxCompat just for compat echarts3\r\n    var fCtx = ctx || ctxCompat || this;\r\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\r\n    var list = cloneListForMapAndSample(this);\r\n    list._store = this._store.map(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\r\n    return list;\r\n  };\r\n  SeriesData.prototype.modify = function (dims, cb, ctx, ctxCompat) {\r\n    var _this = this;\r\n    // ctxCompat just for compat echarts3\r\n    var fCtx = ctx || ctxCompat || this;\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      zrUtil.each(normalizeDimensions(dims), function (dim) {\r\n        var dimInfo = _this.getDimensionInfo(dim);\r\n        if (!dimInfo.isCalculationCoord) {\r\n          console.error('Danger: only stack dimension can be modified');\r\n        }\r\n      });\r\n    }\r\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\r\n    // If do shallow clone here, if there are too many stacked series,\r\n    // it still cost lots of memory, because `_store.dimensions` are not shared.\r\n    // We should consider there probably be shallow clone happen in each series\r\n    // in consequent filter/map.\r\n    this._store.modify(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\r\n  };\r\n  /**\r\n   * Large data down sampling on given dimension\r\n   * @param sampleIndex Sample index for name and id\r\n   */\r\n  SeriesData.prototype.downSample = function (dimension, rate, sampleValue, sampleIndex) {\r\n    var list = cloneListForMapAndSample(this);\r\n    list._store = this._store.downSample(this._getStoreDimIndex(dimension), rate, sampleValue, sampleIndex);\r\n    return list;\r\n  };\r\n  /**\r\n   * Large data down sampling using min-max\r\n   * @param {string} valueDimension\r\n   * @param {number} rate\r\n   */\r\n  SeriesData.prototype.minmaxDownSample = function (valueDimension, rate) {\r\n    var list = cloneListForMapAndSample(this);\r\n    list._store = this._store.minmaxDownSample(this._getStoreDimIndex(valueDimension), rate);\r\n    return list;\r\n  };\r\n  /**\r\n   * Large data down sampling using largest-triangle-three-buckets\r\n   * @param {string} valueDimension\r\n   * @param {number} targetCount\r\n   */\r\n  SeriesData.prototype.lttbDownSample = function (valueDimension, rate) {\r\n    var list = cloneListForMapAndSample(this);\r\n    list._store = this._store.lttbDownSample(this._getStoreDimIndex(valueDimension), rate);\r\n    return list;\r\n  };\r\n  SeriesData.prototype.getRawDataItem = function (idx) {\r\n    return this._store.getRawDataItem(idx);\r\n  };\r\n  /**\r\n   * Get model of one data item.\r\n   */\r\n  // TODO: Type of data item\r\n  SeriesData.prototype.getItemModel = function (idx) {\r\n    var hostModel = this.hostModel;\r\n    var dataItem = this.getRawDataItem(idx);\r\n    return new Model(dataItem, hostModel, hostModel && hostModel.ecModel);\r\n  };\r\n  /**\r\n   * Create a data differ\r\n   */\r\n  SeriesData.prototype.diff = function (otherList) {\r\n    var thisList = this;\r\n    return new DataDiffer(otherList ? otherList.getStore().getIndices() : [], this.getStore().getIndices(), function (idx) {\r\n      return getId(otherList, idx);\r\n    }, function (idx) {\r\n      return getId(thisList, idx);\r\n    });\r\n  };\r\n  /**\r\n   * Get visual property.\r\n   */\r\n  SeriesData.prototype.getVisual = function (key) {\r\n    var visual = this._visual;\r\n    return visual && visual[key];\r\n  };\r\n  SeriesData.prototype.setVisual = function (kvObj, val) {\r\n    this._visual = this._visual || {};\r\n    if (isObject(kvObj)) {\r\n      zrUtil.extend(this._visual, kvObj);\r\n    } else {\r\n      this._visual[kvObj] = val;\r\n    }\r\n  };\r\n  /**\r\n   * Get visual property of single data item\r\n   */\r\n  // eslint-disable-next-line\r\n  SeriesData.prototype.getItemVisual = function (idx, key) {\r\n    var itemVisual = this._itemVisuals[idx];\r\n    var val = itemVisual && itemVisual[key];\r\n    if (val == null) {\r\n      // Use global visual property\r\n      return this.getVisual(key);\r\n    }\r\n    return val;\r\n  };\r\n  /**\r\n   * If exists visual property of single data item\r\n   */\r\n  SeriesData.prototype.hasItemVisual = function () {\r\n    return this._itemVisuals.length > 0;\r\n  };\r\n  /**\r\n   * Make sure itemVisual property is unique\r\n   */\r\n  // TODO: use key to save visual to reduce memory.\r\n  SeriesData.prototype.ensureUniqueItemVisual = function (idx, key) {\r\n    var itemVisuals = this._itemVisuals;\r\n    var itemVisual = itemVisuals[idx];\r\n    if (!itemVisual) {\r\n      itemVisual = itemVisuals[idx] = {};\r\n    }\r\n    var val = itemVisual[key];\r\n    if (val == null) {\r\n      val = this.getVisual(key);\r\n      // TODO Performance?\r\n      if (zrUtil.isArray(val)) {\r\n        val = val.slice();\r\n      } else if (isObject(val)) {\r\n        val = zrUtil.extend({}, val);\r\n      }\r\n      itemVisual[key] = val;\r\n    }\r\n    return val;\r\n  };\r\n  // eslint-disable-next-line\r\n  SeriesData.prototype.setItemVisual = function (idx, key, value) {\r\n    var itemVisual = this._itemVisuals[idx] || {};\r\n    this._itemVisuals[idx] = itemVisual;\r\n    if (isObject(key)) {\r\n      zrUtil.extend(itemVisual, key);\r\n    } else {\r\n      itemVisual[key] = value;\r\n    }\r\n  };\r\n  /**\r\n   * Clear itemVisuals and list visual.\r\n   */\r\n  SeriesData.prototype.clearAllVisual = function () {\r\n    this._visual = {};\r\n    this._itemVisuals = [];\r\n  };\r\n  SeriesData.prototype.setLayout = function (key, val) {\r\n    isObject(key) ? zrUtil.extend(this._layout, key) : this._layout[key] = val;\r\n  };\r\n  /**\r\n   * Get layout property.\r\n   */\r\n  SeriesData.prototype.getLayout = function (key) {\r\n    return this._layout[key];\r\n  };\r\n  /**\r\n   * Get layout of single data item\r\n   */\r\n  SeriesData.prototype.getItemLayout = function (idx) {\r\n    return this._itemLayouts[idx];\r\n  };\r\n  /**\r\n   * Set layout of single data item\r\n   */\r\n  SeriesData.prototype.setItemLayout = function (idx, layout, merge) {\r\n    this._itemLayouts[idx] = merge ? zrUtil.extend(this._itemLayouts[idx] || {}, layout) : layout;\r\n  };\r\n  /**\r\n   * Clear all layout of single data item\r\n   */\r\n  SeriesData.prototype.clearItemLayouts = function () {\r\n    this._itemLayouts.length = 0;\r\n  };\r\n  /**\r\n   * Set graphic element relative to data. It can be set as null\r\n   */\r\n  SeriesData.prototype.setItemGraphicEl = function (idx, el) {\r\n    var seriesIndex = this.hostModel && this.hostModel.seriesIndex;\r\n    setCommonECData(seriesIndex, this.dataType, idx, el);\r\n    this._graphicEls[idx] = el;\r\n  };\r\n  SeriesData.prototype.getItemGraphicEl = function (idx) {\r\n    return this._graphicEls[idx];\r\n  };\r\n  SeriesData.prototype.eachItemGraphicEl = function (cb, context) {\r\n    zrUtil.each(this._graphicEls, function (el, idx) {\r\n      if (el) {\r\n        cb && cb.call(context, el, idx);\r\n      }\r\n    });\r\n  };\r\n  /**\r\n   * Shallow clone a new list except visual and layout properties, and graph elements.\r\n   * New list only change the indices.\r\n   */\r\n  SeriesData.prototype.cloneShallow = function (list) {\r\n    if (!list) {\r\n      list = new SeriesData(this._schema ? this._schema : map(this.dimensions, this._getDimInfo, this), this.hostModel);\r\n    }\r\n    transferProperties(list, this);\r\n    list._store = this._store;\r\n    return list;\r\n  };\r\n  /**\r\n   * Wrap some method to add more feature\r\n   */\r\n  SeriesData.prototype.wrapMethod = function (methodName, injectFunction) {\r\n    var originalMethod = this[methodName];\r\n    if (!zrUtil.isFunction(originalMethod)) {\r\n      return;\r\n    }\r\n    this.__wrappedMethods = this.__wrappedMethods || [];\r\n    this.__wrappedMethods.push(methodName);\r\n    this[methodName] = function () {\r\n      var res = originalMethod.apply(this, arguments);\r\n      return injectFunction.apply(this, [res].concat(zrUtil.slice(arguments)));\r\n    };\r\n  };\r\n  // ----------------------------------------------------------\r\n  // A work around for internal method visiting private member.\r\n  // ----------------------------------------------------------\r\n  SeriesData.internalField = function () {\r\n    prepareInvertedIndex = function (data) {\r\n      var invertedIndicesMap = data._invertedIndicesMap;\r\n      zrUtil.each(invertedIndicesMap, function (invertedIndices, dim) {\r\n        var dimInfo = data._dimInfos[dim];\r\n        // Currently, only dimensions that has ordinalMeta can create inverted indices.\r\n        var ordinalMeta = dimInfo.ordinalMeta;\r\n        var store = data._store;\r\n        if (ordinalMeta) {\r\n          invertedIndices = invertedIndicesMap[dim] = new CtorInt32Array(ordinalMeta.categories.length);\r\n          // The default value of TypedArray is 0. To avoid miss\r\n          // mapping to 0, we should set it as INDEX_NOT_FOUND.\r\n          for (var i = 0; i < invertedIndices.length; i++) {\r\n            invertedIndices[i] = INDEX_NOT_FOUND;\r\n          }\r\n          for (var i = 0; i < store.count(); i++) {\r\n            // Only support the case that all values are distinct.\r\n            invertedIndices[store.get(dimInfo.storeDimIndex, i)] = i;\r\n          }\r\n        }\r\n      });\r\n    };\r\n    getIdNameFromStore = function (data, dimIdx, idx) {\r\n      return convertOptionIdName(data._getCategory(dimIdx, idx), null);\r\n    };\r\n    /**\r\n     * @see the comment of `List['getId']`.\r\n     */\r\n    getId = function (data, rawIndex) {\r\n      var id = data._idList[rawIndex];\r\n      if (id == null && data._idDimIdx != null) {\r\n        id = getIdNameFromStore(data, data._idDimIdx, rawIndex);\r\n      }\r\n      if (id == null) {\r\n        id = ID_PREFIX + rawIndex;\r\n      }\r\n      return id;\r\n    };\r\n    normalizeDimensions = function (dimensions) {\r\n      if (!zrUtil.isArray(dimensions)) {\r\n        dimensions = dimensions != null ? [dimensions] : [];\r\n      }\r\n      return dimensions;\r\n    };\r\n    /**\r\n     * Data in excludeDimensions is copied, otherwise transferred.\r\n     */\r\n    cloneListForMapAndSample = function (original) {\r\n      var list = new SeriesData(original._schema ? original._schema : map(original.dimensions, original._getDimInfo, original), original.hostModel);\r\n      // FIXME If needs stackedOn, value may already been stacked\r\n      transferProperties(list, original);\r\n      return list;\r\n    };\r\n    transferProperties = function (target, source) {\r\n      zrUtil.each(TRANSFERABLE_PROPERTIES.concat(source.__wrappedMethods || []), function (propName) {\r\n        if (source.hasOwnProperty(propName)) {\r\n          target[propName] = source[propName];\r\n        }\r\n      });\r\n      target.__wrappedMethods = source.__wrappedMethods;\r\n      zrUtil.each(CLONE_PROPERTIES, function (propName) {\r\n        target[propName] = zrUtil.clone(source[propName]);\r\n      });\r\n      target._calculationInfo = zrUtil.extend({}, source._calculationInfo);\r\n    };\r\n    makeIdFromName = function (data, idx) {\r\n      var nameList = data._nameList;\r\n      var idList = data._idList;\r\n      var nameDimIdx = data._nameDimIdx;\r\n      var idDimIdx = data._idDimIdx;\r\n      var name = nameList[idx];\r\n      var id = idList[idx];\r\n      if (name == null && nameDimIdx != null) {\r\n        nameList[idx] = name = getIdNameFromStore(data, nameDimIdx, idx);\r\n      }\r\n      if (id == null && idDimIdx != null) {\r\n        idList[idx] = id = getIdNameFromStore(data, idDimIdx, idx);\r\n      }\r\n      if (id == null && name != null) {\r\n        var nameRepeatCount = data._nameRepeatCount;\r\n        var nmCnt = nameRepeatCount[name] = (nameRepeatCount[name] || 0) + 1;\r\n        id = name;\r\n        if (nmCnt > 1) {\r\n          id += '__ec__' + nmCnt;\r\n        }\r\n        idList[idx] = id;\r\n      }\r\n    };\r\n  }();\r\n  return SeriesData;\r\n}();\r\nexport default SeriesData;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nvar AxisModelCommonMixin = /** @class */function () {\r\n  function AxisModelCommonMixin() {}\r\n  AxisModelCommonMixin.prototype.getNeedCrossZero = function () {\r\n    var option = this.option;\r\n    return !option.scale;\r\n  };\r\n  /**\r\n   * Should be implemented by each axis model if necessary.\r\n   * @return coordinate system model\r\n   */\r\n  AxisModelCommonMixin.prototype.getCoordSysModel = function () {\r\n    return;\r\n  };\r\n  return AxisModelCommonMixin;\r\n}();\r\nexport { AxisModelCommonMixin };", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { BoundingRect, OrientedBoundingRect } from '../util/graphic.js';\r\nexport function prepareLayoutList(input) {\r\n  var list = [];\r\n  for (var i = 0; i < input.length; i++) {\r\n    var rawItem = input[i];\r\n    if (rawItem.defaultAttr.ignore) {\r\n      continue;\r\n    }\r\n    var label = rawItem.label;\r\n    var transform = label.getComputedTransform();\r\n    // NOTE: Get bounding rect after getComputedTransform, or label may not been updated by the host el.\r\n    var localRect = label.getBoundingRect();\r\n    var isAxisAligned = !transform || transform[1] < 1e-5 && transform[2] < 1e-5;\r\n    var minMargin = label.style.margin || 0;\r\n    var globalRect = localRect.clone();\r\n    globalRect.applyTransform(transform);\r\n    globalRect.x -= minMargin / 2;\r\n    globalRect.y -= minMargin / 2;\r\n    globalRect.width += minMargin;\r\n    globalRect.height += minMargin;\r\n    var obb = isAxisAligned ? new OrientedBoundingRect(localRect, transform) : null;\r\n    list.push({\r\n      label: label,\r\n      labelLine: rawItem.labelLine,\r\n      rect: globalRect,\r\n      localRect: localRect,\r\n      obb: obb,\r\n      priority: rawItem.priority,\r\n      defaultAttr: rawItem.defaultAttr,\r\n      layoutOption: rawItem.computedLayoutOption,\r\n      axisAligned: isAxisAligned,\r\n      transform: transform\r\n    });\r\n  }\r\n  return list;\r\n}\r\nfunction shiftLayout(list, xyDim, sizeDim, minBound, maxBound, balanceShift) {\r\n  var len = list.length;\r\n  if (len < 2) {\r\n    return;\r\n  }\r\n  list.sort(function (a, b) {\r\n    return a.rect[xyDim] - b.rect[xyDim];\r\n  });\r\n  var lastPos = 0;\r\n  var delta;\r\n  var adjusted = false;\r\n  var shifts = [];\r\n  var totalShifts = 0;\r\n  for (var i = 0; i < len; i++) {\r\n    var item = list[i];\r\n    var rect = item.rect;\r\n    delta = rect[xyDim] - lastPos;\r\n    if (delta < 0) {\r\n      // shiftForward(i, len, -delta);\r\n      rect[xyDim] -= delta;\r\n      item.label[xyDim] -= delta;\r\n      adjusted = true;\r\n    }\r\n    var shift = Math.max(-delta, 0);\r\n    shifts.push(shift);\r\n    totalShifts += shift;\r\n    lastPos = rect[xyDim] + rect[sizeDim];\r\n  }\r\n  if (totalShifts > 0 && balanceShift) {\r\n    // Shift back to make the distribution more equally.\r\n    shiftList(-totalShifts / len, 0, len);\r\n  }\r\n  // TODO bleedMargin?\r\n  var first = list[0];\r\n  var last = list[len - 1];\r\n  var minGap;\r\n  var maxGap;\r\n  updateMinMaxGap();\r\n  // If ends exceed two bounds, squeeze at most 80%, then take the gap of two bounds.\r\n  minGap < 0 && squeezeGaps(-minGap, 0.8);\r\n  maxGap < 0 && squeezeGaps(maxGap, 0.8);\r\n  updateMinMaxGap();\r\n  takeBoundsGap(minGap, maxGap, 1);\r\n  takeBoundsGap(maxGap, minGap, -1);\r\n  // Handle bailout when there is not enough space.\r\n  updateMinMaxGap();\r\n  if (minGap < 0) {\r\n    squeezeWhenBailout(-minGap);\r\n  }\r\n  if (maxGap < 0) {\r\n    squeezeWhenBailout(maxGap);\r\n  }\r\n  function updateMinMaxGap() {\r\n    minGap = first.rect[xyDim] - minBound;\r\n    maxGap = maxBound - last.rect[xyDim] - last.rect[sizeDim];\r\n  }\r\n  function takeBoundsGap(gapThisBound, gapOtherBound, moveDir) {\r\n    if (gapThisBound < 0) {\r\n      // Move from other gap if can.\r\n      var moveFromMaxGap = Math.min(gapOtherBound, -gapThisBound);\r\n      if (moveFromMaxGap > 0) {\r\n        shiftList(moveFromMaxGap * moveDir, 0, len);\r\n        var remained = moveFromMaxGap + gapThisBound;\r\n        if (remained < 0) {\r\n          squeezeGaps(-remained * moveDir, 1);\r\n        }\r\n      } else {\r\n        squeezeGaps(-gapThisBound * moveDir, 1);\r\n      }\r\n    }\r\n  }\r\n  function shiftList(delta, start, end) {\r\n    if (delta !== 0) {\r\n      adjusted = true;\r\n    }\r\n    for (var i = start; i < end; i++) {\r\n      var item = list[i];\r\n      var rect = item.rect;\r\n      rect[xyDim] += delta;\r\n      item.label[xyDim] += delta;\r\n    }\r\n  }\r\n  // Squeeze gaps if the labels exceed margin.\r\n  function squeezeGaps(delta, maxSqeezePercent) {\r\n    var gaps = [];\r\n    var totalGaps = 0;\r\n    for (var i = 1; i < len; i++) {\r\n      var prevItemRect = list[i - 1].rect;\r\n      var gap = Math.max(list[i].rect[xyDim] - prevItemRect[xyDim] - prevItemRect[sizeDim], 0);\r\n      gaps.push(gap);\r\n      totalGaps += gap;\r\n    }\r\n    if (!totalGaps) {\r\n      return;\r\n    }\r\n    var squeezePercent = Math.min(Math.abs(delta) / totalGaps, maxSqeezePercent);\r\n    if (delta > 0) {\r\n      for (var i = 0; i < len - 1; i++) {\r\n        // Distribute the shift delta to all gaps.\r\n        var movement = gaps[i] * squeezePercent;\r\n        // Forward\r\n        shiftList(movement, 0, i + 1);\r\n      }\r\n    } else {\r\n      // Backward\r\n      for (var i = len - 1; i > 0; i--) {\r\n        // Distribute the shift delta to all gaps.\r\n        var movement = gaps[i - 1] * squeezePercent;\r\n        shiftList(-movement, i, len);\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Squeeze to allow overlap if there is no more space available.\r\n   * Let other overlapping strategy like hideOverlap do the job instead of keep exceeding the bounds.\r\n   */\r\n  function squeezeWhenBailout(delta) {\r\n    var dir = delta < 0 ? -1 : 1;\r\n    delta = Math.abs(delta);\r\n    var moveForEachLabel = Math.ceil(delta / (len - 1));\r\n    for (var i = 0; i < len - 1; i++) {\r\n      if (dir > 0) {\r\n        // Forward\r\n        shiftList(moveForEachLabel, 0, i + 1);\r\n      } else {\r\n        // Backward\r\n        shiftList(-moveForEachLabel, len - i - 1, len);\r\n      }\r\n      delta -= moveForEachLabel;\r\n      if (delta <= 0) {\r\n        return;\r\n      }\r\n    }\r\n  }\r\n  return adjusted;\r\n}\r\n/**\r\n * Adjust labels on x direction to avoid overlap.\r\n */\r\nexport function shiftLayoutOnX(list, leftBound, rightBound,\r\n// If average the shifts on all labels and add them to 0\r\n// TODO: Not sure if should enable it.\r\n// Pros: The angle of lines will distribute more equally\r\n// Cons: In some layout. It may not what user wanted. like in pie. the label of last sector is usually changed unexpectedly.\r\nbalanceShift) {\r\n  return shiftLayout(list, 'x', 'width', leftBound, rightBound, balanceShift);\r\n}\r\n/**\r\n * Adjust labels on y direction to avoid overlap.\r\n */\r\nexport function shiftLayoutOnY(list, topBound, bottomBound,\r\n// If average the shifts on all labels and add them to 0\r\nbalanceShift) {\r\n  return shiftLayout(list, 'y', 'height', topBound, bottomBound, balanceShift);\r\n}\r\nexport function hideOverlap(labelList) {\r\n  var displayedLabels = [];\r\n  // TODO, render overflow visible first, put in the displayedLabels.\r\n  labelList.sort(function (a, b) {\r\n    return b.priority - a.priority;\r\n  });\r\n  var globalRect = new BoundingRect(0, 0, 0, 0);\r\n  function hideEl(el) {\r\n    if (!el.ignore) {\r\n      // Show on emphasis.\r\n      var emphasisState = el.ensureState('emphasis');\r\n      if (emphasisState.ignore == null) {\r\n        emphasisState.ignore = false;\r\n      }\r\n    }\r\n    el.ignore = true;\r\n  }\r\n  for (var i = 0; i < labelList.length; i++) {\r\n    var labelItem = labelList[i];\r\n    var isAxisAligned = labelItem.axisAligned;\r\n    var localRect = labelItem.localRect;\r\n    var transform = labelItem.transform;\r\n    var label = labelItem.label;\r\n    var labelLine = labelItem.labelLine;\r\n    globalRect.copy(labelItem.rect);\r\n    // Add a threshold because layout may be aligned precisely.\r\n    globalRect.width -= 0.1;\r\n    globalRect.height -= 0.1;\r\n    globalRect.x += 0.05;\r\n    globalRect.y += 0.05;\r\n    var obb = labelItem.obb;\r\n    var overlapped = false;\r\n    for (var j = 0; j < displayedLabels.length; j++) {\r\n      var existsTextCfg = displayedLabels[j];\r\n      // Fast rejection.\r\n      if (!globalRect.intersect(existsTextCfg.rect)) {\r\n        continue;\r\n      }\r\n      if (isAxisAligned && existsTextCfg.axisAligned) {\r\n        // Is overlapped\r\n        overlapped = true;\r\n        break;\r\n      }\r\n      if (!existsTextCfg.obb) {\r\n        // If self is not axis aligned. But other is.\r\n        existsTextCfg.obb = new OrientedBoundingRect(existsTextCfg.localRect, existsTextCfg.transform);\r\n      }\r\n      if (!obb) {\r\n        // If self is axis aligned. But other is not.\r\n        obb = new OrientedBoundingRect(localRect, transform);\r\n      }\r\n      if (obb.intersect(existsTextCfg.obb)) {\r\n        overlapped = true;\r\n        break;\r\n      }\r\n    }\r\n    // TODO Callback to determine if this overlap should be handled?\r\n    if (overlapped) {\r\n      hideEl(label);\r\n      labelLine && hideEl(labelLine);\r\n    } else {\r\n      label.attr('ignore', labelItem.defaultAttr.ignore);\r\n      labelLine && labelLine.attr('ignore', labelItem.defaultAttr.labelGuideIgnore);\r\n      displayedLabels.push(labelItem);\r\n    }\r\n  }\r\n}"],
  "mappings": "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",
  "names": ["proto", "printableStr", "ComponentView", "i", "AreaStyleMixin", "clamp", "parsePercent", "e", "log", "max", "round", "lg", "map", "_a", "keys", "e", "isSeries", "_a", "dispatcher", "applyTransform", "mergePath", "subPixelOptimize", "subPixelOptimizeLine", "subPixelOptimizeRect", "m", "mathSqrt", "mathSqrt", "CMD", "SVGPath", "m", "Sub", "CircleShape", "Circle", "EllipseShape", "Ellipse", "PI", "PI2", "mathSin", "mathCos", "mathSqrt", "_a", "SectorShape", "Sector", "RingShape", "Ring", "PI2", "points", "min", "max", "clone", "buildPath", "points", "PolygonShape", "Polygon", "buildPath", "PolylineShape", "Polyline", "buildPath", "LineShape", "Line", "BezierCurveShape", "BezierCurve", "ArcShape", "Arc", "Gradient", "LinearGradient", "RadialGradient", "OrientedBoundingRect", "minTv", "maxTv", "out", "min", "max", "IncrementalDisplayable", "mathMax", "mathMin", "layout", "mergePath", "m", "subPixelOptimizeLine", "subPixelOptimizeRect", "subPixelOptimize", "applyTransform", "invert", "points", "labelStatesTexts", "TextStyleMixin", "LineStyleMixin", "ItemStyleMixin", "Model", "e", "m", "defaults", "normalizeCssArray", "m", "each", "parsePercent", "normalizeCssArray", "out", "merge", "ComponentModel", "proto", "Component_default", "Scale", "extent", "OrdinalMeta", "map", "scale", "extent", "normalize", "OrdinalScale", "normalize", "scale", "extent", "IntervalScale", "normalize", "scale", "extent", "min", "max", "idxResult", "val", "SourceImpl", "inner", "SeriesDataSchema", "inner", "inner", "seriesType", "key", "min", "scale", "parsePercent", "seriesType", "data", "TimeScale", "extent", "normalize", "scale", "unit", "out", "levelTicks", "i", "LogScale", "extent", "base", "normalize", "scale", "ScaleRawExtentInfo", "scale", "min", "max", "scale", "scale", "min", "max", "extent", "inner", "tickValue", "Axis", "scale", "extent", "min", "max", "clamp", "PaletteMixin", "inner", "DefaultDataProvider", "out", "proto", "_a", "extent", "min", "max", "out", "DataFormatMixin", "isSeries", "Task", "e", "FilterOrderComparator", "SortOrderComparator", "FilterEqualityComparator", "ExternalSource", "errMsg", "DataStore", "dim", "min", "max", "min2", "max2", "SourceManager", "errMsg", "datasetModel", "subMarkupText", "_a", "TooltipMarkupStyleCreator", "isValueMultipleLine", "inner", "SeriesModel", "Component_default", "_a", "_b", "proto", "inner", "ChartView", "proto", "inner", "Component_default", "GlobalModel", "theme", "optionPreprocessorFuncs", "cmpts", "i", "cmpt", "ExtensionAPI", "CoordinateSystemManager", "OptionManager", "optionPreprocessorFuncs", "each", "isObject", "seriesType", "option", "inner", "colorPalette", "data", "PI", "Scheduler", "opt", "seriesType", "e", "ECEventProcessor", "query", "data", "i", "symbolPropName", "seriesType", "WeakMap", "out", "innerColor", "parsePercent", "pattern", "keys", "i", "warn", "x", "y", "width", "height", "scale", "decal", "MessageCenter", "ECharts", "theme", "e", "mathMin", "mathMax", "chart", "view", "_a", "backgroundColor", "_super", "init", "registerMap", "getMap", "Component_default", "contain", "points", "points", "min", "max", "Region", "GeoJSONPolygonGeometry", "GeoJSONLineStringGeometry", "points", "GeoJSONRegion", "min", "max", "points", "contain", "GeoSVGRegion", "DataDiffer", "map", "DimensionUserOuput", "SeriesDimensionDefine", "isObject", "map", "CtorInt32Array", "SeriesData", "_a", "extent", "layout", "merge", "AxisModelCommonMixin", "delta", "i", "item", "rect"]
}
